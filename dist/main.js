/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/engine/style/index.scss":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/engine/style/index.scss ***!
  \******************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"html, body, #root {\\n  height: 100vh;\\n  overflow: hidden;\\n  background: var(--theme-bg);\\n  color: var(--tc-fg);\\n  font-size: var(--theme-font-size);\\n  font-family: var(--theme-font-face);\\n}\\n\\n.bar {\\n  background: rgba(0, 0, 0, 0.25);\\n  min-height: 1rem;\\n  position: relative;\\n}\\n.bar .bar-value {\\n  background: var(--tc-shadowed);\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n}\\n.bar .bar-content {\\n  position: relative;\\n  text-align: center;\\n  color: white;\\n  text-shadow: -1px -1px black, -1px 0px black, -1px 1px black, 0px -1px black, 0px 1px black, 1px -1px black, 1px 0px black, 1px 1px black;\\n}\\n\\nbutton, .button {\\n  font-family: var(--theme-ctrl-font-face);\\n  font-size: var(--theme-ctrl-font-size);\\n  padding: 1px 6px;\\n}\\nbutton:not(.-link), .button:not(.-link) {\\n  border: 2px solid var(--theme-ctrl-fg);\\n  border-radius: 4px;\\n  background: var(--theme-ctrl-bg);\\n  color: var(--tc-fg);\\n}\\nbutton.-link, .button.-link {\\n  border: none;\\n  background: none;\\n  color: var(--tc-link);\\n}\\nbutton.-flat, .button.-flat {\\n  border-color: transparent;\\n}\\nbutton.-big, .button.-big {\\n  padding: 8px 12px;\\n}\\nbutton:disabled, button.-disabled, .button:disabled, .button.-disabled {\\n  background: var(--theme-bg);\\n  color: var(--tc-disabled);\\n}\\nbutton:disabled:not(.-flat), button.-disabled:not(.-flat), .button:disabled:not(.-flat), .button.-disabled:not(.-flat) {\\n  border-color: var(--theme-ctrl-disabled);\\n}\\nbutton.-shadowed, .button.-shadowed {\\n  color: var(--tc-shadowed);\\n}\\nbutton.-shadowed:not(.-flat), .button.-shadowed:not(.-flat) {\\n  border-color: var(--tc-shadowed);\\n}\\nbutton:focus:not(.-flat), button.-focus:not(.-flat), .button:focus:not(.-flat), .button.-focus:not(.-flat) {\\n  outline: var(--tc-focus);\\n  border-color: var(--tc-focus);\\n}\\nbutton.-icon, .button.-icon {\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\nbutton.-icon .--hk, .button.-icon .--hk {\\n  margin: 0;\\n}\\nbutton:not(.-link), .button:not(.-link) {\\n  text-align: center;\\n}\\nbutton.-link, .button.-link {\\n  text-align: left;\\n}\\nbutton.-default, .button.-default {\\n  border-color: var(--theme-ctrl-default);\\n  font-weight: bold;\\n}\\nbutton.-default:not(.-link), .button.-default:not(.-link) {\\n  color: var(--tc-bold);\\n}\\nbutton.-default.-link, .button.-default.-link {\\n  text-decoration: underline;\\n}\\nbutton.-default.-link .--hk, .button.-default.-link .--hk {\\n  text-decoration: none;\\n}\\nbutton:not(:disabled):hover, .button:not(:disabled):hover {\\n  cursor: pointer;\\n  color: var(--tc-focus);\\n}\\n\\n.color-circle {\\n  height: 24px;\\n  width: 24px;\\n  margin-bottom: 6px;\\n  border-radius: 12px;\\n  border-width: 2px;\\n  vertical-align: middle;\\n  border-color: var(--tc-fg);\\n  border-style: solid;\\n  display: inline-block;\\n  box-sizing: border-box;\\n}\\n.color-circle.-small {\\n  height: 16px;\\n  width: 16px;\\n  margin-bottom: 4px;\\n  border-radius: 8px;\\n  border-width: 1px;\\n}\\n.color-circle.-large {\\n  height: 32px;\\n  width: 32px;\\n  margin-bottom: 8px;\\n  border-radius: 16px;\\n}\\n.color-circle.-selected {\\n  border-color: var(--tc-focus);\\n}\\n.color-circle.-clickable {\\n  cursor: pointer;\\n}\\n\\nlabel, .label {\\n  font-weight: bold;\\n  font-family: var(--theme-ctrl-font-face);\\n  display: inline-block;\\n  margin-top: 0.25em;\\n}\\n\\na, .link {\\n  color: var(--tc-link);\\n  text-decoration: underline;\\n}\\na:visited, .link:visited {\\n  color: var(--tc-link);\\n}\\n\\n.list-color-picker {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 10fr;\\n  grid-template-areas: \\\"prev next selection\\\" \\\"colors colors colors\\\";\\n  gap: 0 4px;\\n}\\n.list-color-picker .--prev {\\n  grid-area: prev;\\n  align-self: center;\\n}\\n.list-color-picker .--selection {\\n  grid-area: selection;\\n  min-height: 24px;\\n}\\n.list-color-picker .--next {\\n  grid-area: next;\\n  align-self: center;\\n}\\n.list-color-picker .--colors {\\n  grid-area: colors;\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 1px;\\n}\\n\\ninput[type=number], .nuumber-input {\\n  font-family: var(--theme-ctrl-font-face);\\n  font-size: var(--theme-ctrl-font-size);\\n  padding: 1px 6px;\\n}\\ninput[type=number]:not(.-link), .nuumber-input:not(.-link) {\\n  border: 2px solid var(--theme-ctrl-fg);\\n  border-radius: 4px;\\n  background: var(--theme-ctrl-bg);\\n  color: var(--tc-fg);\\n}\\ninput[type=number].-link, .nuumber-input.-link {\\n  border: none;\\n  background: none;\\n  color: var(--tc-link);\\n}\\ninput[type=number].-flat, .nuumber-input.-flat {\\n  border-color: transparent;\\n}\\ninput[type=number].-big, .nuumber-input.-big {\\n  padding: 8px 12px;\\n}\\ninput[type=number]:disabled, input[type=number].-disabled, .nuumber-input:disabled, .nuumber-input.-disabled {\\n  background: var(--theme-bg);\\n  color: var(--tc-disabled);\\n}\\ninput[type=number]:disabled:not(.-flat), input[type=number].-disabled:not(.-flat), .nuumber-input:disabled:not(.-flat), .nuumber-input.-disabled:not(.-flat) {\\n  border-color: var(--theme-ctrl-disabled);\\n}\\ninput[type=number].-shadowed, .nuumber-input.-shadowed {\\n  color: var(--tc-shadowed);\\n}\\ninput[type=number].-shadowed:not(.-flat), .nuumber-input.-shadowed:not(.-flat) {\\n  border-color: var(--tc-shadowed);\\n}\\ninput[type=number]:focus:not(.-flat), input[type=number].-focus:not(.-flat), .nuumber-input:focus:not(.-flat), .nuumber-input.-focus:not(.-flat) {\\n  outline: var(--tc-focus);\\n  border-color: var(--tc-focus);\\n}\\n\\ninput[type=text], .text-input {\\n  font-family: var(--theme-ctrl-font-face);\\n  font-size: var(--theme-ctrl-font-size);\\n  padding: 1px 6px;\\n}\\ninput[type=text]:not(.-link), .text-input:not(.-link) {\\n  border: 2px solid var(--theme-ctrl-fg);\\n  border-radius: 4px;\\n  background: var(--theme-ctrl-bg);\\n  color: var(--tc-fg);\\n}\\ninput[type=text].-link, .text-input.-link {\\n  border: none;\\n  background: none;\\n  color: var(--tc-link);\\n}\\ninput[type=text].-flat, .text-input.-flat {\\n  border-color: transparent;\\n}\\ninput[type=text].-big, .text-input.-big {\\n  padding: 8px 12px;\\n}\\ninput[type=text]:disabled, input[type=text].-disabled, .text-input:disabled, .text-input.-disabled {\\n  background: var(--theme-bg);\\n  color: var(--tc-disabled);\\n}\\ninput[type=text]:disabled:not(.-flat), input[type=text].-disabled:not(.-flat), .text-input:disabled:not(.-flat), .text-input.-disabled:not(.-flat) {\\n  border-color: var(--theme-ctrl-disabled);\\n}\\ninput[type=text].-shadowed, .text-input.-shadowed {\\n  color: var(--tc-shadowed);\\n}\\ninput[type=text].-shadowed:not(.-flat), .text-input.-shadowed:not(.-flat) {\\n  border-color: var(--tc-shadowed);\\n}\\ninput[type=text]:focus:not(.-flat), input[type=text].-focus:not(.-flat), .text-input:focus:not(.-flat), .text-input.-focus:not(.-flat) {\\n  outline: var(--tc-focus);\\n  border-color: var(--tc-focus);\\n}\\n\\n.ui-box {\\n  border: 1px solid var(--theme-ctrl-fg);\\n  background: var(--theme-bg);\\n  padding: 0.5rem;\\n}\\n.ui-box > .-bottom-collapser {\\n  margin-left: -0.5rem;\\n  margin-right: -0.5rem;\\n  width: calc(100% + 1rem);\\n  border-radius: 0;\\n  padding: 0;\\n}\\n\\n.bar.bar-xp {\\n  min-height: 6px;\\n}\\n.bar.bar-xp .bar-value {\\n  background: var(--tc-xp);\\n}\\n.bar.bar-xp.-cap .bar-value {\\n  background: var(--tc-xp-max);\\n}\\n.bar.bar-xp.-up .bar-value {\\n  background: var(--tc-xp-up);\\n}\\n\\n.bar.bar-hp {\\n  background: var(--tc-damage);\\n}\\n.bar.bar-hp .bar-value {\\n  background: var(--tc-hp);\\n}\\n\\n.bar.bar-ep .bar-value {\\n  background: var(--tc-energy);\\n}\\n\\n.bar.bar-lp .bar-value {\\n  background: var(--tc-lust);\\n}\\n\\n.creature-panel {\\n  border: 1px solid var(--theme-ctrl-fg);\\n  background: var(--theme-bg);\\n  padding: 0.5rem;\\n}\\n.creature-panel > .-bottom-collapser {\\n  margin-left: -0.5rem;\\n  margin-right: -0.5rem;\\n  width: calc(100% + 1rem);\\n  border-radius: 0;\\n  padding: 0;\\n}\\n.creature-panel:not(.-collapsed).-collapsible {\\n  padding-bottom: 0;\\n}\\n.creature-panel.-dead {\\n  opacity: 0.8;\\n  background: var(--tc-disabled);\\n}\\n\\n.creature-condition {\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  padding: 2px;\\n}\\n\\n.condition-icon {\\n  width: 32px;\\n  height: 32px;\\n  text-align: center;\\n  font-size: 20px;\\n  padding-top: 3px;\\n  box-sizing: border-box;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n}\\n\\n.combat-panel {\\n  flex-grow: 1;\\n  border: 1px solid var(--theme-ctrl-fg);\\n  background: var(--theme-bg);\\n  padding: 0.5rem;\\n}\\n.combat-panel > .-bottom-collapser {\\n  margin-left: -0.5rem;\\n  margin-right: -0.5rem;\\n  width: calc(100% + 1rem);\\n  border-radius: 0;\\n  padding: 0;\\n}\\n\\n.game-layout.-combat .gl-center {\\n  flex-basis: 50%;\\n}\\n\\n.game-layout.-combat .gl-bottom {\\n  flex-grow: 1;\\n  flex-basis: 50%;\\n}\\n\\n.game-layout {\\n  display: flex;\\n  flex-direction: column;\\n  width: 1200px;\\n  gap: 1rem;\\n}\\n.game-layout.-wide {\\n  flex-grow: 1;\\n}\\n.game-layout .gl-top {\\n  min-height: 1.5rem;\\n}\\n.game-layout .gl-midrow {\\n  flex-grow: 1;\\n  display: flex;\\n  overflow: hidden auto;\\n  gap: 1rem;\\n}\\n.game-layout .gl-left, .game-layout .gl-right {\\n  flex-grow: 0;\\n  flex-shrink: 0;\\n  box-sizing: border-box;\\n  flex-basis: 300px;\\n  transition: visibility 0.5s steps(1, end), margin-left 0.5s ease-in-out, margin-right 0.5s ease-in-out;\\n}\\n.game-layout.-collapse-left .gl-left {\\n  visibility: hidden;\\n  margin-left: -300px;\\n}\\n.game-layout.-collapse-right .gl-right {\\n  visibility: hidden;\\n  margin-right: -300px;\\n}\\n.game-layout .gl-midcol {\\n  display: flex;\\n  flex-direction: column;\\n  flex-grow: 1;\\n  gap: 1rem;\\n}\\n.game-layout .gl-center {\\n  flex-grow: 1;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.game-layout .gl-bottom {\\n  min-height: 1.5rem;\\n  overflow-y: auto;\\n}\\n\\n.screen-inventory {\\n  width: 960px;\\n  margin: 4em 0;\\n  align-self: center;\\n  /* columns: [hotkey] [name] [props] [transfer] [use] */\\n}\\n.screen-inventory .inventory-row {\\n  display: grid;\\n  grid-template-columns: 32px 2fr 1fr repeat(2, 32px);\\n  align-items: center;\\n  border: 1px solid var(--theme-ctrl-bg);\\n  border-radius: 6px;\\n  gap: 4px;\\n  min-height: 32px;\\n}\\n.screen-inventory .inventory-row.-active {\\n  border-color: var(--theme-ctrl-fg);\\n}\\n.screen-inventory .inventory-equipment {\\n  display: grid;\\n  grid-template-columns: max-content 1fr;\\n  align-items: center;\\n  gap: 4px;\\n}\\n.screen-inventory .inventory-iteminfo {\\n  min-height: 10em;\\n}\\n\\n.log-panel {\\n  min-height: 5em;\\n}\\n.log-panel.-collapsed {\\n  min-height: 1em;\\n}\\n.log-panel.-expanded {\\n  min-height: 20em;\\n}\\n\\n.log-message {\\n  color: var(--tc-fg);\\n}\\n.log-message::after {\\n  content: \\\" \\\";\\n}\\n.log-message.-info {\\n  color: var(--tc-hl);\\n}\\n.log-message .--actor {\\n  color: var(--tc-bold);\\n  font-weight: bold;\\n}\\n\\n.scene-panel {\\n  border: 1px solid var(--theme-ctrl-fg);\\n  background: var(--theme-bg);\\n  padding: 0.5rem;\\n  flex-grow: 1;\\n}\\n.scene-panel > .-bottom-collapser {\\n  margin-left: -0.5rem;\\n  margin-right: -0.5rem;\\n  width: calc(100% + 1rem);\\n  border-radius: 0;\\n  padding: 0;\\n}\\n.scene-panel .text-pages .text-page {\\n  margin: 1rem 0;\\n}\\n\\n.text-page.-history {\\n  opacity: 0.5;\\n}\\n\\n.scene-actions .choices {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.screen {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.7);\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  justify-items: center;\\n  align-items: stretch;\\n}\\n\\n.screen-shaded {\\n  background: #000;\\n}\\n\\n.screen:first-child {\\n  background: var(--theme-bg);\\n}\\n\\nh1, h2, h3, h4, h5 {\\n  color: #eee;\\n}\\n\\nh5 {\\n  margin-block-end: 1em;\\n  margin-block-start: 1em;\\n}\\n\\nhtml, body {\\n  margin: 0;\\n}\\n\\n.d-flex {\\n  display: flex;\\n}\\n\\n.flex-column {\\n  flex-direction: column;\\n}\\n\\n.flex-wrap {\\n  flex-wrap: wrap;\\n}\\n\\n.ai-center {\\n  align-items: center;\\n}\\n\\n.as-center {\\n  align-self: center;\\n}\\n\\n.ai-start {\\n  align-items: start;\\n}\\n\\n.as-start {\\n  align-self: start;\\n}\\n\\n.ai-end {\\n  align-items: end;\\n}\\n\\n.as-end {\\n  align-self: end;\\n}\\n\\n.ai-baseline {\\n  align-items: baseline;\\n}\\n\\n.as-baseline {\\n  align-self: baseline;\\n}\\n\\n.ai-flex-start {\\n  align-items: flex-start;\\n}\\n\\n.as-flex-start {\\n  align-self: flex-start;\\n}\\n\\n.ai-flex-end {\\n  align-items: flex-end;\\n}\\n\\n.as-flex-end {\\n  align-self: flex-end;\\n}\\n\\n.ai-self-start {\\n  align-items: self-start;\\n}\\n\\n.as-self-start {\\n  align-self: self-start;\\n}\\n\\n.ai-self-end {\\n  align-items: self-end;\\n}\\n\\n.as-self-end {\\n  align-self: self-end;\\n}\\n\\n.ai-stretch {\\n  align-items: stretch;\\n}\\n\\n.as-stretch {\\n  align-self: stretch;\\n}\\n\\n.jc-center {\\n  justify-content: center;\\n}\\n\\n.jc-start {\\n  justify-content: start;\\n}\\n\\n.jc-end {\\n  justify-content: end;\\n}\\n\\n.jc-left {\\n  justify-content: left;\\n}\\n\\n.jc-right {\\n  justify-content: right;\\n}\\n\\n.jc-flex-start {\\n  justify-content: flex-start;\\n}\\n\\n.jc-flex-end {\\n  justify-content: flex-end;\\n}\\n\\n.jc-stretch {\\n  justify-content: stretch;\\n}\\n\\n.jc-space-around {\\n  justify-content: space-around;\\n}\\n\\n.jc-space-between {\\n  justify-content: space-between;\\n}\\n\\n.jc-space-evenly {\\n  justify-content: space-evenly;\\n}\\n\\n.gap-0 {\\n  gap: 0em;\\n}\\n\\n.gap-1 {\\n  gap: 0.25em;\\n}\\n\\n.gap-2 {\\n  gap: 0.5em;\\n}\\n\\n.gap-3 {\\n  gap: 0.75em;\\n}\\n\\n.gap-4 {\\n  gap: 1em;\\n}\\n\\n.gap-5 {\\n  gap: 1.25em;\\n}\\n\\n.gap-6 {\\n  gap: 1.5em;\\n}\\n\\n.gap-7 {\\n  gap: 1.75em;\\n}\\n\\n.gap-8 {\\n  gap: 2em;\\n}\\n\\n.gap-9 {\\n  gap: 2.25em;\\n}\\n\\n.gap-10 {\\n  gap: 2.5em;\\n}\\n\\n.gap-11 {\\n  gap: 2.75em;\\n}\\n\\n.gap-12 {\\n  gap: 3em;\\n}\\n\\n.gap-13 {\\n  gap: 3.25em;\\n}\\n\\n.gap-14 {\\n  gap: 3.5em;\\n}\\n\\n.gap-15 {\\n  gap: 3.75em;\\n}\\n\\n.flex-grow-0 {\\n  flex-grow: 0;\\n}\\n\\n.flex-grow-1 {\\n  flex-grow: 1;\\n}\\n\\n.flex-shrink-0 {\\n  flex-shrink: 0;\\n}\\n\\n.flex-shrink-1 {\\n  flex-shrink: 1;\\n}\\n\\n.d-grid {\\n  display: grid;\\n}\\n\\n.d-igrid {\\n  display: inline-grid;\\n}\\n\\n.grid-2 {\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n}\\n\\n.grid-v2 {\\n  display: grid;\\n  grid-template-rows: repeat(2, 1fr);\\n}\\n\\n.grid-3 {\\n  display: grid;\\n  grid-template-columns: repeat(3, 1fr);\\n}\\n\\n.grid-v3 {\\n  display: grid;\\n  grid-template-rows: repeat(3, 1fr);\\n}\\n\\n.grid-4 {\\n  display: grid;\\n  grid-template-columns: repeat(4, 1fr);\\n}\\n\\n.grid-v4 {\\n  display: grid;\\n  grid-template-rows: repeat(4, 1fr);\\n}\\n\\n.grid-6 {\\n  display: grid;\\n  grid-template-columns: repeat(6, 1fr);\\n}\\n\\n.grid-v6 {\\n  display: grid;\\n  grid-template-rows: repeat(6, 1fr);\\n}\\n\\n.grid-8 {\\n  display: grid;\\n  grid-template-columns: repeat(8, 1fr);\\n}\\n\\n.grid-v8 {\\n  display: grid;\\n  grid-template-rows: repeat(8, 1fr);\\n}\\n\\n.grid-10 {\\n  display: grid;\\n  grid-template-columns: repeat(10, 1fr);\\n}\\n\\n.grid-v10 {\\n  display: grid;\\n  grid-template-rows: repeat(10, 1fr);\\n}\\n\\n.grid-12 {\\n  display: grid;\\n  grid-template-columns: repeat(12, 1fr);\\n}\\n\\n.grid-v12 {\\n  display: grid;\\n  grid-template-rows: repeat(12, 1fr);\\n}\\n\\n.cols-1 {\\n  grid-column: span 1/span 1;\\n}\\n\\n.cols-2 {\\n  grid-column: span 2/span 2;\\n}\\n\\n.cols-3 {\\n  grid-column: span 3/span 3;\\n}\\n\\n.cols-4 {\\n  grid-column: span 4/span 4;\\n}\\n\\n.cols-5 {\\n  grid-column: span 5/span 5;\\n}\\n\\n.cols-6 {\\n  grid-column: span 6/span 6;\\n}\\n\\n.cols-7 {\\n  grid-column: span 7/span 7;\\n}\\n\\n.cols-8 {\\n  grid-column: span 8/span 8;\\n}\\n\\n.cols-9 {\\n  grid-column: span 9/span 9;\\n}\\n\\n.cols-10 {\\n  grid-column: span 10/span 10;\\n}\\n\\n.cols-11 {\\n  grid-column: span 11/span 11;\\n}\\n\\n.cols-12 {\\n  grid-column: span 12/span 12;\\n}\\n\\n.grid-border-1 {\\n  border-left: 1px solid var(--theme-ctrl-fg);\\n  border-top: 1px solid var(--theme-ctrl-fg);\\n}\\n.grid-border-1 > * {\\n  border-right: 1px solid var(--theme-ctrl-fg);\\n  border-bottom: 1px solid var(--theme-ctrl-fg);\\n}\\n\\n.mt-0 {\\n  margin-top: 0em;\\n}\\n\\n.mb-0 {\\n  margin-bottom: 0em;\\n}\\n\\n.ml-0 {\\n  margin-left: 0em;\\n}\\n\\n.mr-0 {\\n  margin-right: 0em;\\n}\\n\\n.mx-0 {\\n  margin-left: 0em;\\n  margin-right: 0em;\\n}\\n\\n.my-0 {\\n  margin-top: 0em;\\n  margin-bottom: 0em;\\n}\\n\\n.ma-0 {\\n  margin: 0em;\\n}\\n\\n.pt-0 {\\n  padding-top: 0em;\\n}\\n\\n.pb-0 {\\n  padding-bottom: 0em;\\n}\\n\\n.pl-0 {\\n  padding-left: 0em;\\n}\\n\\n.pr-0 {\\n  padding-right: 0em;\\n}\\n\\n.px-0 {\\n  padding-left: 0em;\\n  padding-right: 0em;\\n}\\n\\n.py-0 {\\n  padding-top: 0em;\\n  padding-bottom: 0em;\\n}\\n\\n.pa-0 {\\n  padding: 0em;\\n}\\n\\n.mt-1 {\\n  margin-top: 0.25em;\\n}\\n\\n.mb-1 {\\n  margin-bottom: 0.25em;\\n}\\n\\n.ml-1 {\\n  margin-left: 0.25em;\\n}\\n\\n.mr-1 {\\n  margin-right: 0.25em;\\n}\\n\\n.mx-1 {\\n  margin-left: 0.25em;\\n  margin-right: 0.25em;\\n}\\n\\n.my-1 {\\n  margin-top: 0.25em;\\n  margin-bottom: 0.25em;\\n}\\n\\n.ma-1 {\\n  margin: 0.25em;\\n}\\n\\n.pt-1 {\\n  padding-top: 0.25em;\\n}\\n\\n.pb-1 {\\n  padding-bottom: 0.25em;\\n}\\n\\n.pl-1 {\\n  padding-left: 0.25em;\\n}\\n\\n.pr-1 {\\n  padding-right: 0.25em;\\n}\\n\\n.px-1 {\\n  padding-left: 0.25em;\\n  padding-right: 0.25em;\\n}\\n\\n.py-1 {\\n  padding-top: 0.25em;\\n  padding-bottom: 0.25em;\\n}\\n\\n.pa-1 {\\n  padding: 0.25em;\\n}\\n\\n.mt-2 {\\n  margin-top: 0.5em;\\n}\\n\\n.mb-2 {\\n  margin-bottom: 0.5em;\\n}\\n\\n.ml-2 {\\n  margin-left: 0.5em;\\n}\\n\\n.mr-2 {\\n  margin-right: 0.5em;\\n}\\n\\n.mx-2 {\\n  margin-left: 0.5em;\\n  margin-right: 0.5em;\\n}\\n\\n.my-2 {\\n  margin-top: 0.5em;\\n  margin-bottom: 0.5em;\\n}\\n\\n.ma-2 {\\n  margin: 0.5em;\\n}\\n\\n.pt-2 {\\n  padding-top: 0.5em;\\n}\\n\\n.pb-2 {\\n  padding-bottom: 0.5em;\\n}\\n\\n.pl-2 {\\n  padding-left: 0.5em;\\n}\\n\\n.pr-2 {\\n  padding-right: 0.5em;\\n}\\n\\n.px-2 {\\n  padding-left: 0.5em;\\n  padding-right: 0.5em;\\n}\\n\\n.py-2 {\\n  padding-top: 0.5em;\\n  padding-bottom: 0.5em;\\n}\\n\\n.pa-2 {\\n  padding: 0.5em;\\n}\\n\\n.mt-3 {\\n  margin-top: 0.75em;\\n}\\n\\n.mb-3 {\\n  margin-bottom: 0.75em;\\n}\\n\\n.ml-3 {\\n  margin-left: 0.75em;\\n}\\n\\n.mr-3 {\\n  margin-right: 0.75em;\\n}\\n\\n.mx-3 {\\n  margin-left: 0.75em;\\n  margin-right: 0.75em;\\n}\\n\\n.my-3 {\\n  margin-top: 0.75em;\\n  margin-bottom: 0.75em;\\n}\\n\\n.ma-3 {\\n  margin: 0.75em;\\n}\\n\\n.pt-3 {\\n  padding-top: 0.75em;\\n}\\n\\n.pb-3 {\\n  padding-bottom: 0.75em;\\n}\\n\\n.pl-3 {\\n  padding-left: 0.75em;\\n}\\n\\n.pr-3 {\\n  padding-right: 0.75em;\\n}\\n\\n.px-3 {\\n  padding-left: 0.75em;\\n  padding-right: 0.75em;\\n}\\n\\n.py-3 {\\n  padding-top: 0.75em;\\n  padding-bottom: 0.75em;\\n}\\n\\n.pa-3 {\\n  padding: 0.75em;\\n}\\n\\n.mt-4 {\\n  margin-top: 1em;\\n}\\n\\n.mb-4 {\\n  margin-bottom: 1em;\\n}\\n\\n.ml-4 {\\n  margin-left: 1em;\\n}\\n\\n.mr-4 {\\n  margin-right: 1em;\\n}\\n\\n.mx-4 {\\n  margin-left: 1em;\\n  margin-right: 1em;\\n}\\n\\n.my-4 {\\n  margin-top: 1em;\\n  margin-bottom: 1em;\\n}\\n\\n.ma-4 {\\n  margin: 1em;\\n}\\n\\n.pt-4 {\\n  padding-top: 1em;\\n}\\n\\n.pb-4 {\\n  padding-bottom: 1em;\\n}\\n\\n.pl-4 {\\n  padding-left: 1em;\\n}\\n\\n.pr-4 {\\n  padding-right: 1em;\\n}\\n\\n.px-4 {\\n  padding-left: 1em;\\n  padding-right: 1em;\\n}\\n\\n.py-4 {\\n  padding-top: 1em;\\n  padding-bottom: 1em;\\n}\\n\\n.pa-4 {\\n  padding: 1em;\\n}\\n\\n.mt-5 {\\n  margin-top: 1.25em;\\n}\\n\\n.mb-5 {\\n  margin-bottom: 1.25em;\\n}\\n\\n.ml-5 {\\n  margin-left: 1.25em;\\n}\\n\\n.mr-5 {\\n  margin-right: 1.25em;\\n}\\n\\n.mx-5 {\\n  margin-left: 1.25em;\\n  margin-right: 1.25em;\\n}\\n\\n.my-5 {\\n  margin-top: 1.25em;\\n  margin-bottom: 1.25em;\\n}\\n\\n.ma-5 {\\n  margin: 1.25em;\\n}\\n\\n.pt-5 {\\n  padding-top: 1.25em;\\n}\\n\\n.pb-5 {\\n  padding-bottom: 1.25em;\\n}\\n\\n.pl-5 {\\n  padding-left: 1.25em;\\n}\\n\\n.pr-5 {\\n  padding-right: 1.25em;\\n}\\n\\n.px-5 {\\n  padding-left: 1.25em;\\n  padding-right: 1.25em;\\n}\\n\\n.py-5 {\\n  padding-top: 1.25em;\\n  padding-bottom: 1.25em;\\n}\\n\\n.pa-5 {\\n  padding: 1.25em;\\n}\\n\\n.mt-6 {\\n  margin-top: 1.5em;\\n}\\n\\n.mb-6 {\\n  margin-bottom: 1.5em;\\n}\\n\\n.ml-6 {\\n  margin-left: 1.5em;\\n}\\n\\n.mr-6 {\\n  margin-right: 1.5em;\\n}\\n\\n.mx-6 {\\n  margin-left: 1.5em;\\n  margin-right: 1.5em;\\n}\\n\\n.my-6 {\\n  margin-top: 1.5em;\\n  margin-bottom: 1.5em;\\n}\\n\\n.ma-6 {\\n  margin: 1.5em;\\n}\\n\\n.pt-6 {\\n  padding-top: 1.5em;\\n}\\n\\n.pb-6 {\\n  padding-bottom: 1.5em;\\n}\\n\\n.pl-6 {\\n  padding-left: 1.5em;\\n}\\n\\n.pr-6 {\\n  padding-right: 1.5em;\\n}\\n\\n.px-6 {\\n  padding-left: 1.5em;\\n  padding-right: 1.5em;\\n}\\n\\n.py-6 {\\n  padding-top: 1.5em;\\n  padding-bottom: 1.5em;\\n}\\n\\n.pa-6 {\\n  padding: 1.5em;\\n}\\n\\n.mt-7 {\\n  margin-top: 1.75em;\\n}\\n\\n.mb-7 {\\n  margin-bottom: 1.75em;\\n}\\n\\n.ml-7 {\\n  margin-left: 1.75em;\\n}\\n\\n.mr-7 {\\n  margin-right: 1.75em;\\n}\\n\\n.mx-7 {\\n  margin-left: 1.75em;\\n  margin-right: 1.75em;\\n}\\n\\n.my-7 {\\n  margin-top: 1.75em;\\n  margin-bottom: 1.75em;\\n}\\n\\n.ma-7 {\\n  margin: 1.75em;\\n}\\n\\n.pt-7 {\\n  padding-top: 1.75em;\\n}\\n\\n.pb-7 {\\n  padding-bottom: 1.75em;\\n}\\n\\n.pl-7 {\\n  padding-left: 1.75em;\\n}\\n\\n.pr-7 {\\n  padding-right: 1.75em;\\n}\\n\\n.px-7 {\\n  padding-left: 1.75em;\\n  padding-right: 1.75em;\\n}\\n\\n.py-7 {\\n  padding-top: 1.75em;\\n  padding-bottom: 1.75em;\\n}\\n\\n.pa-7 {\\n  padding: 1.75em;\\n}\\n\\n.mt-8 {\\n  margin-top: 2em;\\n}\\n\\n.mb-8 {\\n  margin-bottom: 2em;\\n}\\n\\n.ml-8 {\\n  margin-left: 2em;\\n}\\n\\n.mr-8 {\\n  margin-right: 2em;\\n}\\n\\n.mx-8 {\\n  margin-left: 2em;\\n  margin-right: 2em;\\n}\\n\\n.my-8 {\\n  margin-top: 2em;\\n  margin-bottom: 2em;\\n}\\n\\n.ma-8 {\\n  margin: 2em;\\n}\\n\\n.pt-8 {\\n  padding-top: 2em;\\n}\\n\\n.pb-8 {\\n  padding-bottom: 2em;\\n}\\n\\n.pl-8 {\\n  padding-left: 2em;\\n}\\n\\n.pr-8 {\\n  padding-right: 2em;\\n}\\n\\n.px-8 {\\n  padding-left: 2em;\\n  padding-right: 2em;\\n}\\n\\n.py-8 {\\n  padding-top: 2em;\\n  padding-bottom: 2em;\\n}\\n\\n.pa-8 {\\n  padding: 2em;\\n}\\n\\n.mt-9 {\\n  margin-top: 2.25em;\\n}\\n\\n.mb-9 {\\n  margin-bottom: 2.25em;\\n}\\n\\n.ml-9 {\\n  margin-left: 2.25em;\\n}\\n\\n.mr-9 {\\n  margin-right: 2.25em;\\n}\\n\\n.mx-9 {\\n  margin-left: 2.25em;\\n  margin-right: 2.25em;\\n}\\n\\n.my-9 {\\n  margin-top: 2.25em;\\n  margin-bottom: 2.25em;\\n}\\n\\n.ma-9 {\\n  margin: 2.25em;\\n}\\n\\n.pt-9 {\\n  padding-top: 2.25em;\\n}\\n\\n.pb-9 {\\n  padding-bottom: 2.25em;\\n}\\n\\n.pl-9 {\\n  padding-left: 2.25em;\\n}\\n\\n.pr-9 {\\n  padding-right: 2.25em;\\n}\\n\\n.px-9 {\\n  padding-left: 2.25em;\\n  padding-right: 2.25em;\\n}\\n\\n.py-9 {\\n  padding-top: 2.25em;\\n  padding-bottom: 2.25em;\\n}\\n\\n.pa-9 {\\n  padding: 2.25em;\\n}\\n\\n.mt-10 {\\n  margin-top: 2.5em;\\n}\\n\\n.mb-10 {\\n  margin-bottom: 2.5em;\\n}\\n\\n.ml-10 {\\n  margin-left: 2.5em;\\n}\\n\\n.mr-10 {\\n  margin-right: 2.5em;\\n}\\n\\n.mx-10 {\\n  margin-left: 2.5em;\\n  margin-right: 2.5em;\\n}\\n\\n.my-10 {\\n  margin-top: 2.5em;\\n  margin-bottom: 2.5em;\\n}\\n\\n.ma-10 {\\n  margin: 2.5em;\\n}\\n\\n.pt-10 {\\n  padding-top: 2.5em;\\n}\\n\\n.pb-10 {\\n  padding-bottom: 2.5em;\\n}\\n\\n.pl-10 {\\n  padding-left: 2.5em;\\n}\\n\\n.pr-10 {\\n  padding-right: 2.5em;\\n}\\n\\n.px-10 {\\n  padding-left: 2.5em;\\n  padding-right: 2.5em;\\n}\\n\\n.py-10 {\\n  padding-top: 2.5em;\\n  padding-bottom: 2.5em;\\n}\\n\\n.pa-10 {\\n  padding: 2.5em;\\n}\\n\\n.mt-11 {\\n  margin-top: 2.75em;\\n}\\n\\n.mb-11 {\\n  margin-bottom: 2.75em;\\n}\\n\\n.ml-11 {\\n  margin-left: 2.75em;\\n}\\n\\n.mr-11 {\\n  margin-right: 2.75em;\\n}\\n\\n.mx-11 {\\n  margin-left: 2.75em;\\n  margin-right: 2.75em;\\n}\\n\\n.my-11 {\\n  margin-top: 2.75em;\\n  margin-bottom: 2.75em;\\n}\\n\\n.ma-11 {\\n  margin: 2.75em;\\n}\\n\\n.pt-11 {\\n  padding-top: 2.75em;\\n}\\n\\n.pb-11 {\\n  padding-bottom: 2.75em;\\n}\\n\\n.pl-11 {\\n  padding-left: 2.75em;\\n}\\n\\n.pr-11 {\\n  padding-right: 2.75em;\\n}\\n\\n.px-11 {\\n  padding-left: 2.75em;\\n  padding-right: 2.75em;\\n}\\n\\n.py-11 {\\n  padding-top: 2.75em;\\n  padding-bottom: 2.75em;\\n}\\n\\n.pa-11 {\\n  padding: 2.75em;\\n}\\n\\n.mt-12 {\\n  margin-top: 3em;\\n}\\n\\n.mb-12 {\\n  margin-bottom: 3em;\\n}\\n\\n.ml-12 {\\n  margin-left: 3em;\\n}\\n\\n.mr-12 {\\n  margin-right: 3em;\\n}\\n\\n.mx-12 {\\n  margin-left: 3em;\\n  margin-right: 3em;\\n}\\n\\n.my-12 {\\n  margin-top: 3em;\\n  margin-bottom: 3em;\\n}\\n\\n.ma-12 {\\n  margin: 3em;\\n}\\n\\n.pt-12 {\\n  padding-top: 3em;\\n}\\n\\n.pb-12 {\\n  padding-bottom: 3em;\\n}\\n\\n.pl-12 {\\n  padding-left: 3em;\\n}\\n\\n.pr-12 {\\n  padding-right: 3em;\\n}\\n\\n.px-12 {\\n  padding-left: 3em;\\n  padding-right: 3em;\\n}\\n\\n.py-12 {\\n  padding-top: 3em;\\n  padding-bottom: 3em;\\n}\\n\\n.pa-12 {\\n  padding: 3em;\\n}\\n\\n.mt-13 {\\n  margin-top: 3.25em;\\n}\\n\\n.mb-13 {\\n  margin-bottom: 3.25em;\\n}\\n\\n.ml-13 {\\n  margin-left: 3.25em;\\n}\\n\\n.mr-13 {\\n  margin-right: 3.25em;\\n}\\n\\n.mx-13 {\\n  margin-left: 3.25em;\\n  margin-right: 3.25em;\\n}\\n\\n.my-13 {\\n  margin-top: 3.25em;\\n  margin-bottom: 3.25em;\\n}\\n\\n.ma-13 {\\n  margin: 3.25em;\\n}\\n\\n.pt-13 {\\n  padding-top: 3.25em;\\n}\\n\\n.pb-13 {\\n  padding-bottom: 3.25em;\\n}\\n\\n.pl-13 {\\n  padding-left: 3.25em;\\n}\\n\\n.pr-13 {\\n  padding-right: 3.25em;\\n}\\n\\n.px-13 {\\n  padding-left: 3.25em;\\n  padding-right: 3.25em;\\n}\\n\\n.py-13 {\\n  padding-top: 3.25em;\\n  padding-bottom: 3.25em;\\n}\\n\\n.pa-13 {\\n  padding: 3.25em;\\n}\\n\\n.mt-14 {\\n  margin-top: 3.5em;\\n}\\n\\n.mb-14 {\\n  margin-bottom: 3.5em;\\n}\\n\\n.ml-14 {\\n  margin-left: 3.5em;\\n}\\n\\n.mr-14 {\\n  margin-right: 3.5em;\\n}\\n\\n.mx-14 {\\n  margin-left: 3.5em;\\n  margin-right: 3.5em;\\n}\\n\\n.my-14 {\\n  margin-top: 3.5em;\\n  margin-bottom: 3.5em;\\n}\\n\\n.ma-14 {\\n  margin: 3.5em;\\n}\\n\\n.pt-14 {\\n  padding-top: 3.5em;\\n}\\n\\n.pb-14 {\\n  padding-bottom: 3.5em;\\n}\\n\\n.pl-14 {\\n  padding-left: 3.5em;\\n}\\n\\n.pr-14 {\\n  padding-right: 3.5em;\\n}\\n\\n.px-14 {\\n  padding-left: 3.5em;\\n  padding-right: 3.5em;\\n}\\n\\n.py-14 {\\n  padding-top: 3.5em;\\n  padding-bottom: 3.5em;\\n}\\n\\n.pa-14 {\\n  padding: 3.5em;\\n}\\n\\n.mt-15 {\\n  margin-top: 3.75em;\\n}\\n\\n.mb-15 {\\n  margin-bottom: 3.75em;\\n}\\n\\n.ml-15 {\\n  margin-left: 3.75em;\\n}\\n\\n.mr-15 {\\n  margin-right: 3.75em;\\n}\\n\\n.mx-15 {\\n  margin-left: 3.75em;\\n  margin-right: 3.75em;\\n}\\n\\n.my-15 {\\n  margin-top: 3.75em;\\n  margin-bottom: 3.75em;\\n}\\n\\n.ma-15 {\\n  margin: 3.75em;\\n}\\n\\n.pt-15 {\\n  padding-top: 3.75em;\\n}\\n\\n.pb-15 {\\n  padding-bottom: 3.75em;\\n}\\n\\n.pl-15 {\\n  padding-left: 3.75em;\\n}\\n\\n.pr-15 {\\n  padding-right: 3.75em;\\n}\\n\\n.px-15 {\\n  padding-left: 3.75em;\\n  padding-right: 3.75em;\\n}\\n\\n.py-15 {\\n  padding-top: 3.75em;\\n  padding-bottom: 3.75em;\\n}\\n\\n.pa-15 {\\n  padding: 3.75em;\\n}\\n\\n.pull-right {\\n  float: right;\\n}\\n\\n.pull-left {\\n  float: left;\\n}\\n\\n.vscroll {\\n  overflow-y: scroll;\\n}\\n\\n.hashint, span[title]:not([title=\\\"\\\"]) {\\n  text-decoration: underline from-font dotted;\\n}\\n\\n.--hk {\\n  color: var(--tc-hl);\\n  margin-right: 0.25em;\\n}\\n\\n:disabled .--hk, .disabled .--hk {\\n  color: var(--tc-disabled);\\n}\\n\\n.hidden {\\n  display: none !important;\\n}\\n\\n.vh100 {\\n  height: 100vh;\\n}\\n\\n.w100 {\\n  width: 100%;\\n}\\n\\nb, .text-bold, .text-b, .text-strong {\\n  font-weight: bold;\\n}\\n\\ni, .text-i, .text-em {\\n  font-style: italic;\\n}\\n\\nu, .text-u {\\n  text-decoration: underline;\\n}\\n\\n.text-p {\\n  display: block;\\n  margin: 0.5em 0;\\n  text-indent: 1em;\\n}\\n\\n.text-div {\\n  display: block;\\n}\\n\\n.text-span {\\n  display: inline;\\n}\\n\\n.text-sub {\\n  vertical-align: sub;\\n  font-size: smaller;\\n}\\n\\n.text-sup {\\n  vertical-align: super;\\n  font-size: smaller;\\n}\\n\\n.text-small {\\n  font-size: small;\\n}\\n\\n.text-smaller {\\n  font-size: smaller;\\n}\\n\\n.text-x-small {\\n  font-size: x-small;\\n}\\n\\n.text-big {\\n  font-size: big;\\n}\\n\\n.text-bigger {\\n  font-size: bigger;\\n}\\n\\n.text-x-big {\\n  font-size: x-big;\\n}\\n\\n.text-hl {\\n  color: var(--tc-hl);\\n}\\n\\n.text-error {\\n  background: #111;\\n  color: #a00;\\n  font-weight: bold;\\n}\\n\\n.text-positive {\\n  color: var(--tc-plus);\\n}\\n\\n.text-shadowed {\\n  color: var(--tc-shadowed);\\n}\\n\\n.text-negative {\\n  color: var(--tc-minus);\\n}\\n\\n.text-lust {\\n  color: var(--tc-lust);\\n}\\n\\n.text-heal, .text-hp {\\n  color: var(--tc-hp);\\n}\\n\\n.text-damage, .text-dmg {\\n  color: var(--tc-damage);\\n}\\n\\n.text-money {\\n  color: var(--tc-money);\\n}\\n\\n.text-roll-skill {\\n  /* font-family: var(--theme-ctrl-font-face); */\\n}\\n\\n.text-roll-success {\\n  color: var(--tc-plus);\\n}\\n\\n.text-roll-fail {\\n  color: var(--tc-minus);\\n}\\n\\n.text-roll-critfail {\\n  font-weight: bold;\\n  color: var(--tc-minus);\\n}\\n\\n.text-help {\\n  font-style: italic;\\n}\\n\\n.help-block {\\n  display: block;\\n  font-style: italic;\\n  padding: 0.5em;\\n  border: 1px solid var(--theme-ctrl-fg);\\n  background: var(--theme-ctrl-bg);\\n  color: var(--tc-hl);\\n}\\n\\n.choice-hint {\\n  font-style: italic;\\n  display: inline-block;\\n  margin-left: 0.5em;\\n}\\n\\n.text-left {\\n  text-align: left;\\n}\\n\\n.text-right {\\n  text-align: right;\\n}\\n\\n.text-center {\\n  text-align: center;\\n}\\n\\n.text-justify {\\n  text-align: justify;\\n}\\n\\n.text-xxxs {\\n  font-size: 33%;\\n}\\n\\n.text-xxs {\\n  font-size: 50%;\\n}\\n\\n.text-xs {\\n  font-size: 67%;\\n}\\n\\n.text-s {\\n  font-size: 80%;\\n}\\n\\n.text-small {\\n  font-size: 80%;\\n}\\n\\n.text-normal {\\n  font-size: 100%;\\n}\\n\\n.text-large {\\n  font-size: 125%;\\n}\\n\\n.text-l {\\n  font-size: 125%;\\n}\\n\\n.text-xl {\\n  font-size: 150%;\\n}\\n\\n.text-xxl {\\n  font-size: 200%;\\n}\\n\\n.text-xxxl {\\n  font-size: 300%;\\n}\", \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://aap18/./src/engine/style/index.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/game/style/index.scss":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/game/style/index.scss ***!
  \****************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\n  --theme-bg: #333; /* primary background */\\n  --theme-font-face: Candara, Corbel, Calibri, sans-serif;\\n  --theme-font-size: 16px;\\n  --tc-fg: #ccc; /* primary text color */\\n  --tc-bold: #fff; /* bold text color */\\n  --tc-shadowed: #999;\\n  --tc-disabled: #666;\\n  --tc-focus: #0ff;\\n  --tc-link: #07f;\\n  --tc-hl: #dd2; /* highlighted text */\\n  --tc-xp: #cc3;\\n  --tc-xp-max: #c83; /* max level */\\n  --tc-xp-up: #3cc; /* levelup */\\n  --tc-hp: #3a3;\\n  --tc-energy: #ccc;\\n  --tc-lust: #c3c;\\n  --tc-damage: #a33;\\n  --tc-money: #fc0;\\n  --tc-plus: #3a3;\\n  --tc-minus: #a33;\\n  --theme-ctrl-fg: #aaa; /* control borders */\\n  --theme-ctrl-bg: #555; /* control background */\\n  --theme-ctrl-default: #fff;\\n  --theme-ctrl-disabled: #666;\\n  --theme-ctrl-font-face: Consolas, monospace;\\n  --theme-ctrl-font-size: 16px;\\n}\\n\\nbutton:not(:disabled) .dpad-strike {\\n  color: #f66;\\n}\\nbutton:not(:disabled) .dpad-skip {\\n  color: #fff;\\n}\\nbutton:not(:disabled) .dpad-move {\\n  color: #6f6;\\n}\\n\\n.text-damage-none {\\n  color: var(--tc-shadowed);\\n}\\n\\n.text-damage-slashing, .text-damage-blunt, .text-damage-piercing {\\n  color: #a85;\\n}\\n\\n.text-damage-fire {\\n  color: #c40;\\n}\\n\\n.text-damage-ice {\\n  color: #4cc;\\n}\\n\\n.text-damage-shock {\\n  color: #44c;\\n}\\n\\n.text-damage-acid {\\n  color: #4c4;\\n}\\n\\n.text-damage-magic {\\n  color: #84c;\\n}\\n\\n.text-damage-darkness {\\n  color: #111;\\n  text-shadow: -1px -1px #eee, -1px 0px #eee, -1px 1px #eee, 0px -1px #eee, 0px 1px #eee, 1px -1px #eee, 1px 0px #eee, 1px 1px #eee;\\n}\\n\\n.text-damage-light {\\n  color: #cc8;\\n}\\n\\n.text-damage-pure {\\n  color: #fff;\\n}\", \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://aap18/./src/game/style/index.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\n//# sourceURL=webpack://aap18/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = function (i) {\n  return i[1];\n};\n\n//# sourceURL=webpack://aap18/./node_modules/css-loader/dist/runtime/noSourceMaps.js?");

/***/ }),

/***/ "./node_modules/preact/compat/dist/compat.module.js":
/*!**********************************************************!*\
  !*** ./node_modules/preact/compat/dist/compat.module.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Children\": () => (/* binding */ k),\n/* harmony export */   \"Component\": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_1__.Component),\n/* harmony export */   \"Fragment\": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_1__.Fragment),\n/* harmony export */   \"PureComponent\": () => (/* binding */ E),\n/* harmony export */   \"StrictMode\": () => (/* binding */ cn),\n/* harmony export */   \"Suspense\": () => (/* binding */ L),\n/* harmony export */   \"SuspenseList\": () => (/* binding */ M),\n/* harmony export */   \"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\": () => (/* binding */ X),\n/* harmony export */   \"cloneElement\": () => (/* binding */ rn),\n/* harmony export */   \"createContext\": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_1__.createContext),\n/* harmony export */   \"createElement\": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_1__.createElement),\n/* harmony export */   \"createFactory\": () => (/* binding */ tn),\n/* harmony export */   \"createPortal\": () => (/* binding */ W),\n/* harmony export */   \"createRef\": () => (/* reexport safe */ preact__WEBPACK_IMPORTED_MODULE_1__.createRef),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"findDOMNode\": () => (/* binding */ on),\n/* harmony export */   \"flushSync\": () => (/* binding */ fn),\n/* harmony export */   \"forwardRef\": () => (/* binding */ x),\n/* harmony export */   \"hydrate\": () => (/* binding */ B),\n/* harmony export */   \"isValidElement\": () => (/* binding */ en),\n/* harmony export */   \"lazy\": () => (/* binding */ F),\n/* harmony export */   \"memo\": () => (/* binding */ g),\n/* harmony export */   \"render\": () => (/* binding */ z),\n/* harmony export */   \"unmountComponentAtNode\": () => (/* binding */ un),\n/* harmony export */   \"unstable_batchedUpdates\": () => (/* binding */ ln),\n/* harmony export */   \"useCallback\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useCallback),\n/* harmony export */   \"useContext\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useContext),\n/* harmony export */   \"useDebugValue\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useDebugValue),\n/* harmony export */   \"useEffect\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useEffect),\n/* harmony export */   \"useErrorBoundary\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useErrorBoundary),\n/* harmony export */   \"useImperativeHandle\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle),\n/* harmony export */   \"useLayoutEffect\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect),\n/* harmony export */   \"useMemo\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useMemo),\n/* harmony export */   \"useReducer\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useReducer),\n/* harmony export */   \"useRef\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useRef),\n/* harmony export */   \"useState\": () => (/* reexport safe */ preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useState),\n/* harmony export */   \"version\": () => (/* binding */ nn)\n/* harmony export */ });\n/* harmony import */ var preact_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/hooks */ \"./node_modules/preact/hooks/dist/hooks.module.js\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\nfunction C(n,t){for(var e in t)n[e]=t[e];return n}function S(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function E(n){this.props=n}function g(n,t){function e(n){var e=this.props.ref,r=e==n.ref;return!r&&e&&(e.call?e(null):e.current=null),t?!t(this.props,n)||!r:S(this.props,n)}function r(t){return this.shouldComponentUpdate=e,(0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(n,t)}return r.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",r.prototype.isReactComponent=!0,r.__f=!0,r}(E.prototype=new preact__WEBPACK_IMPORTED_MODULE_1__.Component).isPureReactComponent=!0,E.prototype.shouldComponentUpdate=function(n,t){return S(this.props,n)||S(this.state,t)};var w=preact__WEBPACK_IMPORTED_MODULE_1__.options.__b;preact__WEBPACK_IMPORTED_MODULE_1__.options.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),w&&w(n)};var R=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function x(n){function t(t){var e=C({},t);return delete e.ref,n(e,t.ref||null)}return t.$$typeof=R,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var N=function(n,t){return null==n?null:(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)((0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(n).map(t))},k={map:N,forEach:N,count:function(n){return n?(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(n).length:0},only:function(n){var t=(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray},A=preact__WEBPACK_IMPORTED_MODULE_1__.options.__e;preact__WEBPACK_IMPORTED_MODULE_1__.options.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);A(n,t,e,r)};var O=preact__WEBPACK_IMPORTED_MODULE_1__.options.unmount;function L(){this.__u=0,this.t=null,this.__b=null}function U(n){var t=n.__.__c;return t&&t.__e&&t.__e(n)}function F(n){var t,e,r;function u(u){if(t||(t=n()).then(function(n){e=n.default||n},function(n){r=n}),r)throw r;if(!e)throw t;return (0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(e,u)}return u.displayName=\"Lazy\",u.__f=!0,u}function M(){this.u=null,this.o=null}preact__WEBPACK_IMPORTED_MODULE_1__.options.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&!0===n.__h&&(n.type=null),O&&O(n)},(L.prototype=new preact__WEBPACK_IMPORTED_MODULE_1__.Component).__c=function(n,t){var e=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var u=U(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__e){var n=r.state.__e;r.__v.__k[0]=function n(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},f=!0===t.__h;r.__u++||f||r.setState({__e:r.__b=r.__v.__k[0]}),n.then(i,i)},L.prototype.componentWillUnmount=function(){this.t=[]},L.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement(\"div\"),r=this.__v.__k[0].__c;this.__v.__k[0]=function n(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),t.__c.__H=null),null!=(t=C({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)})),t}(this.__b,e,r.__O=r.__P)}this.__b=null}var u=t.__e&&(0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,n.fallback);return u&&(u.__h=null),[(0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,t.__e?null:n.children),u]};var T=function(n,t,e){if(++e[1]===e[0]&&n.o.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function D(n){return this.getChildContext=function(){return n.context},n.children}function I(n){var t=this,e=n.i;t.componentWillUnmount=function(){(0,preact__WEBPACK_IMPORTED_MODULE_1__.render)(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),n.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,e){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),(0,preact__WEBPACK_IMPORTED_MODULE_1__.render)((0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(D,{context:t.context},n.__v),t.l)):t.l&&t.componentWillUnmount()}function W(n,t){var e=(0,preact__WEBPACK_IMPORTED_MODULE_1__.createElement)(I,{__v:n,i:t});return e.containerInfo=t,e}(M.prototype=new preact__WEBPACK_IMPORTED_MODULE_1__.Component).__e=function(n){var t=this,e=U(t.__v),r=t.o.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),T(t,n,r)):u()};e?e(o):o()}},M.prototype.render=function(n){this.u=null,this.o=new Map;var t=(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return n.children},M.prototype.componentDidUpdate=M.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(t,e){T(n,e,t)})};var P=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,V=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$=\"undefined\"!=typeof document,j=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};function z(n,t,e){return null==t.__k&&(t.textContent=\"\"),(0,preact__WEBPACK_IMPORTED_MODULE_1__.render)(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function B(n,t,e){return (0,preact__WEBPACK_IMPORTED_MODULE_1__.hydrate)(n,t),\"function\"==typeof e&&e(),n?n.__c:null}preact__WEBPACK_IMPORTED_MODULE_1__.Component.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(n){Object.defineProperty(preact__WEBPACK_IMPORTED_MODULE_1__.Component.prototype,n,{configurable:!0,get:function(){return this[\"UNSAFE_\"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var H=preact__WEBPACK_IMPORTED_MODULE_1__.options.event;function Z(){}function Y(){return this.cancelBubble}function q(){return this.defaultPrevented}preact__WEBPACK_IMPORTED_MODULE_1__.options.event=function(n){return H&&(n=H(n)),n.persist=Z,n.isPropagationStopped=Y,n.isDefaultPrevented=q,n.nativeEvent=n};var G,J={configurable:!0,get:function(){return this.class}},K=preact__WEBPACK_IMPORTED_MODULE_1__.options.vnode;preact__WEBPACK_IMPORTED_MODULE_1__.options.vnode=function(n){var t=n.type,e=n.props,r=e;if(\"string\"==typeof t){var u=-1===t.indexOf(\"-\");for(var o in r={},e){var i=e[o];$&&\"children\"===o&&\"noscript\"===t||\"value\"===o&&\"defaultValue\"in e&&null==i||(\"defaultValue\"===o&&\"value\"in e&&null==e.value?o=\"value\":\"download\"===o&&!0===i?i=\"\":/ondoubleclick/i.test(o)?o=\"ondblclick\":/^onchange(textarea|input)/i.test(o+t)&&!j(e.type)?o=\"oninput\":/^onfocus$/i.test(o)?o=\"onfocusin\":/^onblur$/i.test(o)?o=\"onfocusout\":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():u&&V.test(o)?o=o.replace(/[A-Z0-9]/,\"-$&\").toLowerCase():null===i&&(i=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o=\"oninputCapture\")),r[o]=i)}\"select\"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(e.children).forEach(function(n){n.props.selected=-1!=r.value.indexOf(n.props.value)})),\"select\"==t&&null!=r.defaultValue&&(r.value=(0,preact__WEBPACK_IMPORTED_MODULE_1__.toChildArray)(e.children).forEach(function(n){n.props.selected=r.multiple?-1!=r.defaultValue.indexOf(n.props.value):r.defaultValue==n.props.value})),n.props=r,e.class!=e.className&&(J.enumerable=\"className\"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,\"className\",J))}n.$$typeof=P,K&&K(n)};var Q=preact__WEBPACK_IMPORTED_MODULE_1__.options.__r;preact__WEBPACK_IMPORTED_MODULE_1__.options.__r=function(n){Q&&Q(n),G=n.__c};var X={ReactCurrentDispatcher:{current:{readContext:function(n){return G.__n[n.__c].props.value}}}},nn=\"17.0.2\";function tn(n){return preact__WEBPACK_IMPORTED_MODULE_1__.createElement.bind(null,n)}function en(n){return!!n&&n.$$typeof===P}function rn(n){return en(n)?preact__WEBPACK_IMPORTED_MODULE_1__.cloneElement.apply(null,arguments):n}function un(n){return!!n.__k&&((0,preact__WEBPACK_IMPORTED_MODULE_1__.render)(null,n),!0)}function on(n){return n&&(n.base||1===n.nodeType&&n)||null}var ln=function(n,t){return n(t)},fn=function(n,t){return n(t)},cn=preact__WEBPACK_IMPORTED_MODULE_1__.Fragment;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({useState:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useState,useReducer:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useReducer,useEffect:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useEffect,useLayoutEffect:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect,useRef:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useRef,useImperativeHandle:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle,useMemo:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useMemo,useCallback:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useCallback,useContext:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useContext,useDebugValue:preact_hooks__WEBPACK_IMPORTED_MODULE_0__.useDebugValue,version:\"17.0.2\",Children:k,render:z,hydrate:B,unmountComponentAtNode:un,createPortal:W,createElement:preact__WEBPACK_IMPORTED_MODULE_1__.createElement,createContext:preact__WEBPACK_IMPORTED_MODULE_1__.createContext,createFactory:tn,cloneElement:rn,createRef:preact__WEBPACK_IMPORTED_MODULE_1__.createRef,Fragment:preact__WEBPACK_IMPORTED_MODULE_1__.Fragment,isValidElement:en,findDOMNode:on,Component:preact__WEBPACK_IMPORTED_MODULE_1__.Component,PureComponent:E,memo:g,forwardRef:x,flushSync:fn,unstable_batchedUpdates:ln,StrictMode:preact__WEBPACK_IMPORTED_MODULE_1__.Fragment,Suspense:L,SuspenseList:M,lazy:F,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:X});\n//# sourceMappingURL=compat.module.js.map\n\n\n//# sourceURL=webpack://aap18/./node_modules/preact/compat/dist/compat.module.js?");

/***/ }),

/***/ "./node_modules/preact/dist/preact.module.js":
/*!***************************************************!*\
  !*** ./node_modules/preact/dist/preact.module.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Component\": () => (/* binding */ _),\n/* harmony export */   \"Fragment\": () => (/* binding */ d),\n/* harmony export */   \"cloneElement\": () => (/* binding */ B),\n/* harmony export */   \"createContext\": () => (/* binding */ D),\n/* harmony export */   \"createElement\": () => (/* binding */ v),\n/* harmony export */   \"createRef\": () => (/* binding */ p),\n/* harmony export */   \"h\": () => (/* binding */ v),\n/* harmony export */   \"hydrate\": () => (/* binding */ q),\n/* harmony export */   \"isValidElement\": () => (/* binding */ i),\n/* harmony export */   \"options\": () => (/* binding */ l),\n/* harmony export */   \"render\": () => (/* binding */ S),\n/* harmony export */   \"toChildArray\": () => (/* binding */ A)\n/* harmony export */ });\nvar n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P,C,$=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof $){if(m=u.props,g=(s=$.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in $&&$.prototype.render?u.__c=h=new $(m,x):(u.__c=h=new _(m,x),h.constructor=$,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=$.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,$.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==$.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==$.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}if(h.context=x,h.props=m,h.__v=u,h.__P=n,A=l.__r,P=0,\"prototype\"in $&&$.prototype.render)h.state=h.__s,h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context);else do{h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),C=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(C)?C:[C],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;\n//# sourceMappingURL=preact.module.js.map\n\n\n//# sourceURL=webpack://aap18/./node_modules/preact/dist/preact.module.js?");

/***/ }),

/***/ "./node_modules/preact/hooks/dist/hooks.module.js":
/*!********************************************************!*\
  !*** ./node_modules/preact/hooks/dist/hooks.module.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"useCallback\": () => (/* binding */ T),\n/* harmony export */   \"useContext\": () => (/* binding */ q),\n/* harmony export */   \"useDebugValue\": () => (/* binding */ x),\n/* harmony export */   \"useEffect\": () => (/* binding */ _),\n/* harmony export */   \"useErrorBoundary\": () => (/* binding */ V),\n/* harmony export */   \"useImperativeHandle\": () => (/* binding */ A),\n/* harmony export */   \"useLayoutEffect\": () => (/* binding */ h),\n/* harmony export */   \"useMemo\": () => (/* binding */ F),\n/* harmony export */   \"useReducer\": () => (/* binding */ d),\n/* harmony export */   \"useRef\": () => (/* binding */ s),\n/* harmony export */   \"useState\": () => (/* binding */ y)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\nvar t,u,r,o,i=0,c=[],f=[],e=preact__WEBPACK_IMPORTED_MODULE_0__.options.__b,a=preact__WEBPACK_IMPORTED_MODULE_0__.options.__r,v=preact__WEBPACK_IMPORTED_MODULE_0__.options.diffed,l=preact__WEBPACK_IMPORTED_MODULE_0__.options.__c,m=preact__WEBPACK_IMPORTED_MODULE_0__.options.unmount;function p(t,r){preact__WEBPACK_IMPORTED_MODULE_0__.options.__h&&preact__WEBPACK_IMPORTED_MODULE_0__.options.__h(u,t,i||r),i=0;var o=u.__H||(u.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:f}),o.__[t]}function y(n){return i=1,d(z,n)}function d(n,r,o){var i=p(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):z(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function _(r,o){var i=p(t++,3);!preact__WEBPACK_IMPORTED_MODULE_0__.options.__s&&w(i.__H,o)&&(i.__=r,i.u=o,u.__H.__h.push(i))}function h(r,o){var i=p(t++,4);!preact__WEBPACK_IMPORTED_MODULE_0__.options.__s&&w(i.__H,o)&&(i.__=r,i.u=o,u.__h.push(i))}function s(n){return i=5,F(function(){return{current:n}},[])}function A(n,t,u){i=6,h(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==u?u:u.concat(n))}function F(n,u){var r=p(t++,7);return w(r.__H,u)?(r.__V=n(),r.u=u,r.__h=n,r.__V):r.__}function T(n,t){return i=8,F(function(){return n},t)}function q(n){var r=u.context[n.__c],o=p(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function x(t,u){preact__WEBPACK_IMPORTED_MODULE_0__.options.useDebugValue&&preact__WEBPACK_IMPORTED_MODULE_0__.options.useDebugValue(u?u(t):t)}function V(n){var r=p(t++,10),o=y();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function b(){for(var t;t=c.shift();)if(t.__P)try{t.__H.__h.forEach(j),t.__H.__h.forEach(k),t.__H.__h=[]}catch(u){t.__H.__h=[],preact__WEBPACK_IMPORTED_MODULE_0__.options.__e(u,t.__v)}}preact__WEBPACK_IMPORTED_MODULE_0__.options.__b=function(n){u=null,e&&e(n)},preact__WEBPACK_IMPORTED_MODULE_0__.options.__r=function(n){a&&a(n),t=0;var o=(u=n.__c).__H;o&&(r===u?(o.__h=[],u.__h=[],o.__.forEach(function(n){n.__V=f,n.u=void 0})):(o.__h.forEach(j),o.__h.forEach(k),o.__h=[])),r=u},preact__WEBPACK_IMPORTED_MODULE_0__.options.diffed=function(t){v&&v(t);var i=t.__c;i&&i.__H&&(i.__H.__h.length&&(1!==c.push(i)&&o===preact__WEBPACK_IMPORTED_MODULE_0__.options.requestAnimationFrame||((o=preact__WEBPACK_IMPORTED_MODULE_0__.options.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),g&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);g&&(t=requestAnimationFrame(u))})(b)),i.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.__V!==f&&(n.__=n.__V),n.u=void 0,n.__V=f})),r=u=null},preact__WEBPACK_IMPORTED_MODULE_0__.options.__c=function(t,u){u.some(function(t){try{t.__h.forEach(j),t.__h=t.__h.filter(function(n){return!n.__||k(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],preact__WEBPACK_IMPORTED_MODULE_0__.options.__e(r,t.__v)}}),l&&l(t,u)},preact__WEBPACK_IMPORTED_MODULE_0__.options.unmount=function(t){m&&m(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{j(n)}catch(n){u=n}}),u&&preact__WEBPACK_IMPORTED_MODULE_0__.options.__e(u,r.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function k(n){var t=u;n.__c=n.__(),u=t}function w(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function z(n,t){return\"function\"==typeof t?t(n):t}\n//# sourceMappingURL=hooks.module.js.map\n\n\n//# sourceURL=webpack://aap18/./node_modules/preact/hooks/dist/hooks.module.js?");

/***/ }),

/***/ "./node_modules/shifty/dist/shifty.js":
/*!********************************************!*\
  !*** ./node_modules/shifty/dist/shifty.js ***!
  \********************************************/
/***/ ((module) => {

eval("/*! For license information please see shifty.js.LICENSE.txt */\n!function(t,n){ true?module.exports=n():0}(self,(function(){return function(){\"use strict\";var t={720:function(t,n,e){e.r(n),e.d(n,{Scene:function(){return Xt},Tweenable:function(){return _t},interpolate:function(){return Wt},processTweens:function(){return ft},setBezierFunction:function(){return Yt},tween:function(){return yt},unsetBezierFunction:function(){return Zt}});var r={};e.r(r),e.d(r,{bounce:function(){return D},bouncePast:function(){return q},easeFrom:function(){return B},easeFromTo:function(){return Q},easeInBack:function(){return E},easeInCirc:function(){return j},easeInCubic:function(){return c},easeInExpo:function(){return b},easeInOutBack:function(){return F},easeInOutCirc:function(){return P},easeInOutCubic:function(){return l},easeInOutExpo:function(){return S},easeInOutQuad:function(){return s},easeInOutQuart:function(){return v},easeInOutQuint:function(){return d},easeInOutSine:function(){return w},easeInQuad:function(){return o},easeInQuart:function(){return h},easeInQuint:function(){return _},easeInSine:function(){return g},easeOutBack:function(){return T},easeOutBounce:function(){return M},easeOutCirc:function(){return k},easeOutCubic:function(){return f},easeOutExpo:function(){return O},easeOutQuad:function(){return a},easeOutQuart:function(){return p},easeOutQuint:function(){return y},easeOutSine:function(){return m},easeTo:function(){return N},elastic:function(){return I},linear:function(){return u},swingFrom:function(){return A},swingFromTo:function(){return x},swingTo:function(){return C}});var i={};e.r(i),e.d(i,{afterTween:function(){return Nt},beforeTween:function(){return Bt},doesApply:function(){return qt},tweenCreated:function(){return Qt}});var u=function(t){return t},o=function(t){return Math.pow(t,2)},a=function(t){return-(Math.pow(t-1,2)-1)},s=function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},c=function(t){return Math.pow(t,3)},f=function(t){return Math.pow(t-1,3)+1},l=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},h=function(t){return Math.pow(t,4)},p=function(t){return-(Math.pow(t-1,4)-1)},v=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},_=function(t){return Math.pow(t,5)},y=function(t){return Math.pow(t-1,5)+1},d=function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},g=function(t){return 1-Math.cos(t*(Math.PI/2))},m=function(t){return Math.sin(t*(Math.PI/2))},w=function(t){return-.5*(Math.cos(Math.PI*t)-1)},b=function(t){return 0===t?0:Math.pow(2,10*(t-1))},O=function(t){return 1===t?1:1-Math.pow(2,-10*t)},S=function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},j=function(t){return-(Math.sqrt(1-t*t)-1)},k=function(t){return Math.sqrt(1-Math.pow(t-1,2))},P=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},M=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},E=function(t){var n=1.70158;return t*t*((n+1)*t-n)},T=function(t){var n=1.70158;return(t-=1)*t*((n+1)*t+n)+1},F=function(t){var n=1.70158;return(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2)},I=function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},x=function(t){var n=1.70158;return(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2)},A=function(t){var n=1.70158;return t*t*((n+1)*t-n)},C=function(t){var n=1.70158;return(t-=1)*t*((n+1)*t+n)+1},D=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},q=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},Q=function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},B=function(t){return Math.pow(t,4)},N=function(t){return Math.pow(t,.25)};function R(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function z(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t){return(L=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function U(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function V(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?U(Object(e),!0).forEach((function(n){W(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):U(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function W(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var $,G,H,J=\"linear\",K=\"undefined\"!=typeof window?window:e.g,X=\"afterTween\",Y=\"afterTweenEnd\",Z=\"beforeTween\",tt=\"tweenCreated\",nt=\"function\",et=\"string\",rt=K.requestAnimationFrame||K.webkitRequestAnimationFrame||K.oRequestAnimationFrame||K.msRequestAnimationFrame||K.mozCancelRequestAnimationFrame&&K.mozRequestAnimationFrame||setTimeout,it=function(){},ut=null,ot=null,at=V({},r),st=function(t,n,e,r,i,u,o){var a,s,c,f=t<u?0:(t-u)/i,l=!1;for(var h in o&&o.call&&(l=!0,a=o(f)),n)l||(a=((s=o[h]).call?s:at[s])(f)),c=e[h],n[h]=c+(r[h]-c)*a;return n},ct=function(t,n){var e=t._timestamp,r=t._currentState,i=t._delay;if(!(n<e+i)){var u=t._duration,o=t._targetState,a=e+i+u,s=n>a?a:n;t._hasEnded=s>=a;var c=u-(a-s),f=t._filters.length>0;if(t._hasEnded)return t._render(o,t._data,c),t.stop(!0);f&&t._applyFilter(Z),s<e+i?e=u=s=1:e+=i,st(s,r,t._originalState,o,u,e,t._easing),f&&t._applyFilter(X),t._render(r,t._data,c)}},ft=function(){for(var t,n=_t.now(),e=ut;e;)t=e._next,ct(e,n),e=t},lt=Date.now||function(){return+new Date},ht=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=L(n);if(at[n])return at[n];if(r===et||r===nt)for(var i in t)e[i]=n;else for(var u in t)e[u]=n[u]||J;return e},pt=function(t){t===ut?(ut=t._next)?ut._previous=null:ot=null:t===ot?(ot=t._previous)?ot._next=null:ut=null:(G=t._previous,H=t._next,G._next=H,H._previous=G),t._previous=t._next=null},vt=\"function\"==typeof Promise?Promise:null,_t=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;R(this,t),this._config={},this._data={},this._delay=0,this._filters=[],this._next=null,this._previous=null,this._timestamp=null,this._hasEnded=!1,this._resolve=null,this._reject=null,this._currentState=n||{},this._originalState={},this._targetState={},this._start=it,this._render=it,this._promiseCtor=vt,e&&this.setConfig(e)}var n,e;return n=t,(e=[{key:\"_applyFilter\",value:function(t){for(var n=this._filters.length;n>0;n--){var e=this._filters[n-n][t];e&&e(this)}}},{key:\"tween\",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this._isPlaying&&this.stop(),!n&&this._config||this.setConfig(n),this._pausedAtTime=null,this._timestamp=t.now(),this._start(this.get(),this._data),this._delay&&this._render(this._currentState,this._data,0),this._resume(this._timestamp)}},{key:\"setConfig\",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._config;for(var r in n)e[r]=n[r];var i=e.promise,u=void 0===i?this._promiseCtor:i,o=e.start,a=void 0===o?it:o,s=e.finish,c=e.render,f=void 0===c?this._config.step||it:c,l=e.step,h=void 0===l?it:l;this._data=e.data||e.attachment||this._data,this._isPlaying=!1,this._pausedAtTime=null,this._scheduleId=null,this._delay=n.delay||0,this._start=a,this._render=f||h,this._duration=e.duration||500,this._promiseCtor=u,s&&(this._resolve=s);var p=n.from,v=n.to,_=void 0===v?{}:v,y=this._currentState,d=this._originalState,g=this._targetState;for(var m in p)y[m]=p[m];var w=!1;for(var b in y){var O=y[b];w||L(O)!==et||(w=!0),d[b]=O,g[b]=_.hasOwnProperty(b)?_[b]:O}if(this._easing=ht(this._currentState,e.easing,this._easing),this._filters.length=0,w){for(var S in t.filters)t.filters[S].doesApply(this)&&this._filters.push(t.filters[S]);this._applyFilter(tt)}return this}},{key:\"then\",value:function(t,n){var e=this;return this._promise=new this._promiseCtor((function(t,n){e._resolve=t,e._reject=n})),this._promise.then(t,n)}},{key:\"catch\",value:function(t){return this.then().catch(t)}},{key:\"get\",value:function(){return V({},this._currentState)}},{key:\"set\",value:function(t){this._currentState=t}},{key:\"pause\",value:function(){if(this._isPlaying)return this._pausedAtTime=t.now(),this._isPlaying=!1,pt(this),this}},{key:\"resume\",value:function(){return this._resume()}},{key:\"_resume\",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.now();return null===this._timestamp?this.tween():this._isPlaying?this._promise:(this._pausedAtTime&&(this._timestamp+=n-this._pausedAtTime,this._pausedAtTime=null),this._isPlaying=!0,null===ut?(ut=this,ot=this):(this._previous=ot,ot._next=this,ot=this),this)}},{key:\"seek\",value:function(n){n=Math.max(n,0);var e=t.now();return this._timestamp+n===0||(this._timestamp=e-n,ct(this,e)),this}},{key:\"stop\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._isPlaying)return this;this._isPlaying=!1,pt(this);var n=this._filters.length>0;return t&&(n&&this._applyFilter(Z),st(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),n&&(this._applyFilter(X),this._applyFilter(Y))),this._resolve&&this._resolve({data:this._data,state:this._currentState,tweenable:this}),this._resolve=null,this._reject=null,this}},{key:\"cancel\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this._currentState,e=this._data,r=this._isPlaying;return r?(this._reject&&this._reject({data:e,state:n,tweenable:this}),this._resolve=null,this._reject=null,this.stop(t)):this}},{key:\"isPlaying\",value:function(){return this._isPlaying}},{key:\"hasEnded\",value:function(){return this._hasEnded}},{key:\"setScheduleFunction\",value:function(n){t.setScheduleFunction(n)}},{key:\"data\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t&&(this._data=V({},t)),this._data}},{key:\"dispose\",value:function(){for(var t in this)delete this[t]}}])&&z(n.prototype,e),t}();function yt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new _t;return n.tween(t),n.tweenable=n,n}W(_t,\"now\",(function(){return $})),_t.setScheduleFunction=function(t){return rt=t},_t.formulas=at,_t.filters={},function t(){$=lt(),rt.call(K,t,16.666666666666668),ft()}();var dt,gt,mt=/(\\d|-|\\.)/,wt=/([^\\-0-9.]+)/g,bt=/[0-9.-]+/g,Ot=(dt=bt.source,gt=/,\\s*/.source,new RegExp(\"rgba?\\\\(\".concat(dt).concat(gt).concat(dt).concat(gt).concat(dt,\"(\").concat(gt).concat(dt,\")?\\\\)\"),\"g\")),St=/^.*\\(/,jt=/#([0-9]|[a-f]){3,6}/gi,kt=\"VAL\",Pt=function(t,n){return t.map((function(t,e){return\"_\".concat(n,\"_\").concat(e)}))};function Mt(t){return parseInt(t,16)}var Et=function(t){return\"rgb(\".concat((n=t,3===(n=n.replace(/#/,\"\")).length&&(n=(n=n.split(\"\"))[0]+n[0]+n[1]+n[1]+n[2]+n[2]),[Mt(n.substr(0,2)),Mt(n.substr(2,2)),Mt(n.substr(4,2))]).join(\",\"),\")\");var n},Tt=function(t,n,e){var r=n.match(t),i=n.replace(t,kt);return r&&r.forEach((function(t){return i=i.replace(kt,e(t))})),i},Ft=function(t){for(var n in t){var e=t[n];\"string\"==typeof e&&e.match(jt)&&(t[n]=Tt(jt,e,Et))}},It=function(t){var n=t.match(bt),e=n.slice(0,3).map(Math.floor),r=t.match(St)[0];if(3===n.length)return\"\".concat(r).concat(e.join(\",\"),\")\");if(4===n.length)return\"\".concat(r).concat(e.join(\",\"),\",\").concat(n[3],\")\");throw new Error(\"Invalid rgbChunk: \".concat(t))},xt=function(t){return t.match(bt)},At=function(t,n){var e={};return n.forEach((function(n){e[n]=t[n],delete t[n]})),e},Ct=function(t,n){return n.map((function(n){return t[n]}))},Dt=function(t,n){return n.forEach((function(n){return t=t.replace(kt,+n.toFixed(4))})),t},qt=function(t){for(var n in t._currentState)if(\"string\"==typeof t._currentState[n])return!0;return!1};function Qt(t){var n=t._currentState;[n,t._originalState,t._targetState].forEach(Ft),t._tokenData=function(t){var n,e,r={};for(var i in t){var u=t[i];\"string\"==typeof u&&(r[i]={formatString:(n=u,e=void 0,e=n.match(wt),e?(1===e.length||n.charAt(0).match(mt))&&e.unshift(\"\"):e=[\"\",\"\"],e.join(kt)),chunkNames:Pt(xt(u),i)})}return r}(n)}function Bt(t){var n=t._currentState,e=t._originalState,r=t._targetState,i=t._easing,u=t._tokenData;!function(t,n){var e=function(e){var r=n[e].chunkNames,i=t[e];if(\"string\"==typeof i){var u=i.split(\" \"),o=u[u.length-1];r.forEach((function(n,e){return t[n]=u[e]||o}))}else r.forEach((function(n){return t[n]=i}));delete t[e]};for(var r in n)e(r)}(i,u),[n,e,r].forEach((function(t){return function(t,n){var e=function(e){xt(t[e]).forEach((function(r,i){return t[n[e].chunkNames[i]]=+r})),delete t[e]};for(var r in n)e(r)}(t,u)}))}function Nt(t){var n=t._currentState,e=t._originalState,r=t._targetState,i=t._easing,u=t._tokenData;[n,e,r].forEach((function(t){return function(t,n){for(var e in n){var r=n[e],i=r.chunkNames,u=r.formatString,o=Dt(u,Ct(At(t,i),i));t[e]=Tt(Ot,o,It)}}(t,u)})),function(t,n){for(var e in n){var r=n[e].chunkNames,i=t[r[0]];t[e]=\"string\"==typeof i?r.map((function(n){var e=t[n];return delete t[n],e})).join(\" \"):i}}(i,u)}function Rt(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function zt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Rt(Object(e),!0).forEach((function(n){Lt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Rt(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Lt(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Ut=new _t,Vt=_t.filters,Wt=function(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=zt({},t),o=ht(t,r);for(var a in Ut._filters.length=0,Ut.set({}),Ut._currentState=u,Ut._originalState=t,Ut._targetState=n,Ut._easing=o,Vt)Vt[a].doesApply(Ut)&&Ut._filters.push(Vt[a]);Ut._applyFilter(\"tweenCreated\"),Ut._applyFilter(\"beforeTween\");var s=st(e,u,t,n,1,i,o);return Ut._applyFilter(\"afterTween\"),s};function $t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Gt(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}function Ht(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,n){var e=n.get(t);if(!e)throw new TypeError(\"attempted to get private field on non-instance\");return e.get?e.get.call(t):e.value}var Kt=new WeakMap,Xt=function(){function t(){Gt(this,t),Kt.set(this,{writable:!0,value:[]});for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];e.forEach(this.add.bind(this))}var n,e;return n=t,(e=[{key:\"add\",value:function(t){return Jt(this,Kt).push(t),t}},{key:\"remove\",value:function(t){var n=Jt(this,Kt).indexOf(t);return~n&&Jt(this,Kt).splice(n,1),t}},{key:\"empty\",value:function(){return this.tweenables.map(this.remove.bind(this))}},{key:\"isPlaying\",value:function(){return Jt(this,Kt).some((function(t){return t.isPlaying()}))}},{key:\"play\",value:function(){return Jt(this,Kt).forEach((function(t){return t.tween()})),this}},{key:\"pause\",value:function(){return Jt(this,Kt).forEach((function(t){return t.pause()})),this}},{key:\"resume\",value:function(){return Jt(this,Kt).forEach((function(t){return t.resume()})),this}},{key:\"stop\",value:function(t){return Jt(this,Kt).forEach((function(n){return n.stop(t)})),this}},{key:\"tweenables\",get:function(){return function(t){if(Array.isArray(t))return $t(t)}(t=Jt(this,Kt))||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(t){if(\"string\"==typeof t)return $t(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===e&&t.constructor&&(e=t.constructor.name),\"Map\"===e||\"Set\"===e?Array.from(t):\"Arguments\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$t(t,n):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}();var t}},{key:\"promises\",get:function(){return Jt(this,Kt).map((function(t){return t.then()}))}}])&&Ht(n.prototype,e),t}();var Yt=function(t,n,e,r,i){var u=function(t,n,e,r){return function(i){return f=0,l=0,h=0,p=function(t){return((f*t+l)*t+h)*t},v=function(t){return(3*f*t+2*l)*t+h},_=function(t){return t>=0?t:0-t},f=1-(h=3*(u=t))-(l=3*(e-u)-h),a=1-(c=3*(o=n))-(s=3*(r-o)-c),function(t){return((a*t+s)*t+c)*t}(function(t,n){var e,r,i,u,o,a;for(i=t,a=0;a<8;a++){if(u=p(i)-t,_(u)<n)return i;if(o=v(i),_(o)<1e-6)break;i-=u/o}if((i=t)<(e=0))return e;if(i>(r=1))return r;for(;e<r;){if(u=p(i),_(u-t)<n)return i;t>u?e=i:r=i,i=.5*(r-e)+e}return i}(i,function(t){return 1/(200*t)}(1)));var u,o,a,s,c,f,l,h,p,v,_}}(n,e,r,i);return u.displayName=t,u.x1=n,u.y1=e,u.x2=r,u.y2=i,_t.formulas[t]=u},Zt=function(t){return delete _t.formulas[t]};_t.filters.token=i}},n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{}};return t[r](i,i.exports,e),i.exports}return e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(t){if(\"object\"==typeof window)return window}}(),e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e(720)}()}));\n//# sourceMappingURL=shifty.js.map\n\n//# sourceURL=webpack://aap18/./node_modules/shifty/dist/shifty.js?");

/***/ }),

/***/ "./src/engine/style/index.scss":
/*!*************************************!*\
  !*** ./src/engine/style/index.scss ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/engine/style/index.scss\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://aap18/./src/engine/style/index.scss?");

/***/ }),

/***/ "./src/game/style/index.scss":
/*!***********************************!*\
  !*** ./src/game/style/index.scss ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/game/style/index.scss\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_index_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://aap18/./src/game/style/index.scss?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/insertBySelector.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/insertStyleElement.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/styleDomAPI.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://aap18/./node_modules/style-loader/dist/runtime/styleTagTransform.js?");

/***/ }),

/***/ "./node_modules/tinycolor2/tinycolor.js":
/*!**********************************************!*\
  !*** ./node_modules/tinycolor2/tinycolor.js ***!
  \**********************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;// TinyColor v1.4.2\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif ( true && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {return tinycolor;}).call(exports, __webpack_require__, exports, module),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}\n// Browser: Expose to window\nelse {}\n\n})(Math);\n\n\n//# sourceURL=webpack://aap18/./node_modules/tinycolor2/tinycolor.js?");

/***/ }),

/***/ "./src/engine/Game.ts":
/*!****************************!*\
  !*** ./src/engine/Game.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _ui_ScreenManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ui/ScreenManager */ \"./src/engine/ui/ScreenManager.ts\");\n/* harmony import */ var _state_StateManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state/StateManager */ \"./src/engine/state/StateManager.ts\");\n/* harmony import */ var _state_SaveManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./state/SaveManager */ \"./src/engine/state/SaveManager.ts\");\n/* harmony import */ var _res_ResourceManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./res/ResourceManager */ \"./src/engine/res/ResourceManager.ts\");\n/* harmony import */ var _ui_screens_MainMenuScreen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui/screens/MainMenuScreen */ \"./src/engine/ui/screens/MainMenuScreen.tsx\");\n/* harmony import */ var _GameController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GameController */ \"./src/engine/GameController.ts\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _math_XorWowRandom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./math/XorWowRandom */ \"./src/engine/math/XorWowRandom.ts\");\n/* harmony import */ var _res_GameData__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./res/GameData */ \"./src/engine/res/GameData.ts\");\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_6__.LogManager.loggerFor(\"engine.Game\");\r\nclass Game {\r\n    constructor(options) {\r\n        this.rng = _math_XorWowRandom__WEBPACK_IMPORTED_MODULE_7__.XorWowRandom.create();\r\n        // Resources\r\n        this.data = new _res_GameData__WEBPACK_IMPORTED_MODULE_8__.GameData(this);\r\n        if (Game.instance)\r\n            throw new Error(\"Duplicate Game.instance\");\r\n        if (options.logLevel !== undefined) {\r\n            _logging_LogManager__WEBPACK_IMPORTED_MODULE_6__.LogManager.instance.defaultLevel = options.logLevel;\r\n        }\r\n        if (options.logLevels) {\r\n            for (let [k, v] of Object.entries(options.logLevels)) {\r\n                _logging_LogManager__WEBPACK_IMPORTED_MODULE_6__.LogManager.instance.setLevel(k, v);\r\n            }\r\n        }\r\n        logger.info(\"Game created\");\r\n        Game.instance = this;\r\n        window[\"game\"] = this;\r\n        this.info = options.info;\r\n        let screenHolder = document.querySelector(options.screenContainer);\r\n        if (!screenHolder)\r\n            throw new Error(\"Screen holder \" + options.screenContainer + \" not found!\");\r\n        this.screenManager = new _ui_ScreenManager__WEBPACK_IMPORTED_MODULE_0__.ScreenManager(screenHolder);\r\n        this.state = new _state_StateManager__WEBPACK_IMPORTED_MODULE_1__.StateManager();\r\n        this.saveManager = new _state_SaveManager__WEBPACK_IMPORTED_MODULE_2__.SaveManager();\r\n        this.resourceManager = new _res_ResourceManager__WEBPACK_IMPORTED_MODULE_3__.ResourceManager(this, {\r\n            loadGameData: options.data\r\n        });\r\n        this.gameController = new _GameController__WEBPACK_IMPORTED_MODULE_5__.GameController(this);\r\n    }\r\n    async applicationStart() {\r\n        this.screenManager.setupKeyboardInput();\r\n        this.screenManager.setupAnimations();\r\n        await this.resourceManager.loadEssentialResources();\r\n        await this.screenManager.replaceTop(new _ui_screens_MainMenuScreen__WEBPACK_IMPORTED_MODULE_4__.MainMenuScreen(), 'fade');\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/Game.ts?");

/***/ }),

/***/ "./src/engine/GameController.ts":
/*!**************************************!*\
  !*** ./src/engine/GameController.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameController\": () => (/* binding */ GameController)\n/* harmony export */ });\n/* harmony import */ var _game_ui_NewGameScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/ui/NewGameScreen */ \"./src/game/ui/NewGameScreen.tsx\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _scene_SceneContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scene/SceneContext */ \"./src/engine/scene/SceneContext.tsx\");\n/* harmony import */ var _place_Place__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./place/Place */ \"./src/engine/place/Place.ts\");\n/* harmony import */ var _state_GameContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./state/GameContext */ \"./src/engine/state/GameContext.ts\");\n/* harmony import */ var _ui_panels_ScenePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui/panels/ScenePanel */ \"./src/engine/ui/panels/ScenePanel.tsx\");\n/* harmony import */ var _combat_BattleContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./combat/BattleContext */ \"./src/engine/combat/BattleContext.tsx\");\n/* harmony import */ var _combat_BattleGrid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./combat/BattleGrid */ \"./src/engine/combat/BattleGrid.ts\");\n/* harmony import */ var _place_PlaceContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./place/PlaceContext */ \"./src/engine/place/PlaceContext.tsx\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _text_output_InteractiveTextOutput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./text/output/InteractiveTextOutput */ \"./src/engine/text/output/InteractiveTextOutput.tsx\");\n/* harmony import */ var _ui_screens_InventoryScreen__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ui/screens/InventoryScreen */ \"./src/engine/ui/screens/InventoryScreen.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__.LogManager.loggerFor(\"engine.GameController\");\r\n/**\r\n * Governs core game flow - load, restart, switch between modes\r\n */\r\nclass GameController {\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.queuedSGS = false;\r\n    }\r\n    get state() { return this.game.state; }\r\n    get player() { return this.state.player; }\r\n    get rng() { return this.game.rng; }\r\n    async loadAutosave() {\r\n        logger.info(\"loadAutosave\");\r\n        let data = await this.game.saveManager.loadAutosaveData();\r\n        await this.state.importGameState(data);\r\n        // TODO show post-load game screen\r\n        throw new Error(\"Not implemented yet\");\r\n    }\r\n    /**\r\n     * To be called from main menu\r\n     * @return new player character\r\n     */\r\n    async startNewGame() {\r\n        logger.info(\"startNewGame\");\r\n        this.state.clearGameState();\r\n        let ngs = new _game_ui_NewGameScreen__WEBPACK_IMPORTED_MODULE_0__.NewGameScreen();\r\n        await this.game.screenManager.replaceTop(ngs, \"fade-fast\");\r\n        let playerCharacter = await ngs.display();\r\n        if (!playerCharacter) {\r\n            await this.game.screenManager.closeTop(\"fade\");\r\n            return false;\r\n        }\r\n        else {\r\n            this.state.setupPlayer(playerCharacter);\r\n            await this.beginStory();\r\n            return true;\r\n        }\r\n    }\r\n    async beginStory() {\r\n        logger.info(\"beginStory\");\r\n        let ss = this.game.screenManager.gameScreen;\r\n        await this.game.screenManager.replaceTop(ss, 'fade-fast');\r\n        this.game.screenManager.sharedPlayerPanel.creature = this.player;\r\n        await this.playScene(this.game.idata.startingSceneId);\r\n        this.showGameScreen();\r\n    }\r\n    async playScene(scene) {\r\n        logger.info(\"playScene {}\", scene);\r\n        let context = new _scene_SceneContext__WEBPACK_IMPORTED_MODULE_2__.SceneContext(scene, new _text_output_InteractiveTextOutput__WEBPACK_IMPORTED_MODULE_10__.InteractiveTextOutput(new _ui_panels_ScenePanel__WEBPACK_IMPORTED_MODULE_5__.ScenePanel()));\r\n        this.state.pushGameContext(context);\r\n        this.showGameScreen();\r\n        return context.promise;\r\n    }\r\n    /**\r\n     * Depending on game mode & state, display current screen\r\n     */\r\n    showGameScreen() {\r\n        if (this.queuedSGS)\r\n            return;\r\n        this.queuedSGS = true;\r\n        setTimeout(() => this.showGameScreen0());\r\n    }\r\n    animationFrame(dt, time) {\r\n        this.state.currentContext().animationFrame?.(dt, time);\r\n    }\r\n    showGameScreen0() {\r\n        this.queuedSGS = false;\r\n        let context = this.state.flushGameContext();\r\n        logger.debug(\"showGameScreen {}\", context);\r\n        let gameScreen = this.game.screenManager.gameScreen;\r\n        gameScreen.keyboardEventListener = context.onKeyboardEvent?.bind(context);\r\n        if (context instanceof _state_GameContext__WEBPACK_IMPORTED_MODULE_4__.NullGameContext) {\r\n            this.state.pushGameContext(new _place_PlaceContext__WEBPACK_IMPORTED_MODULE_8__.PlaceContext(this.player.place));\r\n            this.showGameScreen();\r\n            return;\r\n        }\r\n        if (context instanceof _scene_SceneContext__WEBPACK_IMPORTED_MODULE_2__.SceneContext) {\r\n            context.output = new _text_output_InteractiveTextOutput__WEBPACK_IMPORTED_MODULE_10__.InteractiveTextOutput(new _ui_panels_ScenePanel__WEBPACK_IMPORTED_MODULE_5__.ScenePanel());\r\n            gameScreen.applyLayout(context.layout);\r\n            context.playCurrentScene().then(() => this.showGameScreen());\r\n            return;\r\n        }\r\n        if (context instanceof _place_PlaceContext__WEBPACK_IMPORTED_MODULE_8__.PlaceContext) {\r\n            if (context.place === _place_Place__WEBPACK_IMPORTED_MODULE_3__.Place.Limbo) {\r\n                // TODO rescue?\r\n                throw new Error(\"Player stuck in limbo\");\r\n            }\r\n            gameScreen.applyLayout(context.layout);\r\n            context.display().then(() => this.showGameScreen());\r\n            return;\r\n        }\r\n        if (context instanceof _combat_BattleContext__WEBPACK_IMPORTED_MODULE_6__.BattleContext) {\r\n            gameScreen.applyLayout(context.layout);\r\n            context.update();\r\n            return;\r\n        }\r\n        // TODO rescue\r\n        throw new Error(\"Unknown game context\");\r\n    }\r\n    /**\r\n     * Teleport player to specified location\r\n     * @param placeId\r\n     */\r\n    placePlayer(placeId) {\r\n        logger.debug(\"placePlayer {}\", placeId);\r\n        let place = this.game.data.place(placeId);\r\n        this.player.place.onLeave();\r\n        this.player.place = place;\r\n        place.onEnter();\r\n    }\r\n    startBattle(options) {\r\n        let party = options.party ?? [options.player ?? this.player];\r\n        let enemies = options.enemies;\r\n        // Load map from provided options, or generate one\r\n        let cells = options.map?.cells;\r\n        let height = cells?.length ?? 8;\r\n        let width = cells?.[0]?.length ?? 8;\r\n        let grid = new _combat_BattleGrid__WEBPACK_IMPORTED_MODULE_7__.BattleGrid(width, height);\r\n        if (cells) {\r\n            let partySpawnPoints = [];\r\n            let enemySpawnPoints = [];\r\n            let mappings = options.map?.mappings;\r\n            for (let y = 0; y < grid.height; y++) {\r\n                for (let x = 0; x < grid.width; x++) {\r\n                    let data = grid.data({ x, y });\r\n                    let code = cells[y][x];\r\n                    if (mappings) {\r\n                        let mapping = mappings[code];\r\n                        if (!mapping)\r\n                            throw new Error(`No mapping for code '${code}'`);\r\n                        data.tile = this.game.data.tile(mapping.tile);\r\n                        if (mapping.spawn === \"enemy\")\r\n                            enemySpawnPoints.push({ x, y });\r\n                        else if (mapping.spawn === \"party\")\r\n                            partySpawnPoints.push({ x, y });\r\n                        if (mapping.visible !== undefined)\r\n                            data.visible = mapping.visible;\r\n                    }\r\n                    else {\r\n                        data.tile = this.game.data.tileByChar(code);\r\n                    }\r\n                }\r\n            }\r\n            for (let c of party) {\r\n                let pos = this.rng.pickOrNull(partySpawnPoints);\r\n                if (!pos)\r\n                    break;\r\n                grid.placeCreature(c, pos);\r\n            }\r\n            for (let c of enemies) {\r\n                let pos = this.rng.pickOrNull(enemySpawnPoints);\r\n                if (!pos)\r\n                    break;\r\n                grid.placeCreature(c, pos);\r\n            }\r\n        }\r\n        else {\r\n            // TODO generate random grid here\r\n        }\r\n        let settings = {\r\n            player: options.player ?? this.player,\r\n            party: party,\r\n            enemies: enemies,\r\n            grid,\r\n            ambushed: options.ambushed\r\n        };\r\n        let ctx = new _combat_BattleContext__WEBPACK_IMPORTED_MODULE_6__.BattleContext(settings);\r\n        this.state.pushGameContext(ctx);\r\n        this.showGameScreen();\r\n        return ctx;\r\n    }\r\n    async restoreHp(creature, amount, output) {\r\n        if (amount <= 0)\r\n            return;\r\n        // TODO animate hp bar\r\n        creature.hp = (0,_math_utils__WEBPACK_IMPORTED_MODULE_9__.atMost)(creature.hp + amount, creature.hpMax);\r\n        if (output) {\r\n            output.selectActor(creature);\r\n            output.print(`<hl>[You]</hl> [are] healed (<text-hp>${amount}</text-hp>). `);\r\n            output.deselectActor();\r\n        }\r\n    }\r\n    recoverPlayer() {\r\n        let player = this.player;\r\n        player.hp = player.hpMax;\r\n        player.ep = player.epMax;\r\n        player.lp = 0;\r\n    }\r\n    async unequipToInventory(creature, item) {\r\n        // TODO EquipmentSlot system\r\n        // TODO invoke item's callback, check if unequipable\r\n        if (item === creature.mainHandItem) {\r\n            creature.setMainHandItem(null);\r\n            creature.addToInventory(item);\r\n            return;\r\n        }\r\n        if (item === creature.bodyArmor) {\r\n            creature.setBodyArmor(null);\r\n            creature.addToInventory(item);\r\n            return;\r\n        }\r\n        throw new Error(`Cannot unequip ${item}, it is not in any slot.`);\r\n    }\r\n    async equipFromInventory(creature, item) {\r\n        if (!creature.inventory.includes(item))\r\n            throw new Error(`Creature do not carry ${item}`);\r\n        await this.equipItem(creature, item);\r\n        creature.removeFromInventory(item);\r\n    }\r\n    async equipItem(creature, item) {\r\n        // TODO EquipmentSlot system\r\n        // TODO check if equipable, invoke item's callback\r\n        if (item.isWeapon) {\r\n            if (creature.mainHandItem) {\r\n                await this.unequipToInventory(creature, creature.mainHandItem);\r\n            }\r\n            creature.setMainHandItem(item);\r\n            return;\r\n        }\r\n        if (item.isArmor) {\r\n            if (creature.bodyArmor) {\r\n                await this.unequipToInventory(creature, creature.bodyArmor);\r\n            }\r\n            creature.setBodyArmor(item);\r\n            return;\r\n        }\r\n        throw new Error(`Cannot equip ${item} - invalid type`);\r\n    }\r\n    async consumeFromInventory(creature, item, output) {\r\n        if (!creature.inventory.includes(item))\r\n            throw new Error(`Creature does not carry ${item}`);\r\n        await this.consumeItem(creature, item, output);\r\n        creature.removeFromInventory(item);\r\n    }\r\n    async consumeItem(creature, item, output) {\r\n        let cc = item.asConsumable;\r\n        if (!cc)\r\n            throw new Error(`Cannot consume ${item}`);\r\n        for (let effect of cc.effects) {\r\n            await effect.apply(this, creature, output);\r\n        }\r\n    }\r\n    async openTransferMenu(inv, options = {}) {\r\n        await new _ui_screens_InventoryScreen__WEBPACK_IMPORTED_MODULE_11__.InventoryScreen(this.player, inv, options).showModal();\r\n        this.game.screenManager.sharedPlayerPanel.update();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/GameController.ts?");

/***/ }),

/***/ "./src/engine/ResLib.ts":
/*!******************************!*\
  !*** ./src/engine/ResLib.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResLib\": () => (/* binding */ ResLib)\n/* harmony export */ });\nclass ResLib {\r\n    constructor(resType, displayName) {\r\n        this.resType = resType;\r\n        this.displayName = displayName;\r\n        this.map = new Map();\r\n    }\r\n    get(resId) {\r\n        let x = this.map.get(resId);\r\n        if (x === undefined)\r\n            throw new Error(`Missing ${this.displayName} '${resId}'`);\r\n        return x;\r\n    }\r\n    getOrNull(resId) {\r\n        return this.map.get(resId) ?? null;\r\n    }\r\n    register(res, overwrite = false) {\r\n        let id = res.resId;\r\n        if (res.resType !== this.resType)\r\n            throw new Error(`Invalid ${this.displayName} '${id}' type ${res.resType}, expected ${this.resType}`);\r\n        if (this.map.has(id) && !overwrite)\r\n            throw new Error(`Duplicate ${this.displayName} '${id}'`);\r\n        this.map.set(id, res);\r\n    }\r\n    registerMany(resources, overwrite = false) {\r\n        for (let res of resources)\r\n            this.register(res, overwrite);\r\n    }\r\n    clear() {\r\n        this.map.clear();\r\n    }\r\n    keys() {\r\n        return Array.from(this.map.keys());\r\n    }\r\n    values() {\r\n        return Array.from(this.map.values());\r\n    }\r\n    entries() {\r\n        return Array.from(this.map.entries());\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ResLib.ts?");

/***/ }),

/***/ "./src/engine/combat/AbstractCombatAbility.ts":
/*!****************************************************!*\
  !*** ./src/engine/combat/AbstractCombatAbility.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityTargetType\": () => (/* binding */ AbilityTargetType),\n/* harmony export */   \"AbstractCombatAbility\": () => (/* binding */ AbstractCombatAbility)\n/* harmony export */ });\n/* harmony import */ var _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../game/combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/*\r\n * Created by aimozg on 13.10.2022.\r\n */\r\n\r\nclass AbstractCombatAbility {\r\n    hasTag(tag) { return this.tags.includes(tag); }\r\n    energyCost(action) { return 0; }\r\n    apCost(action) { return 1000 * _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_0__.CombatRules.speedApFactor(action.actor.spe); }\r\n    disabledReason(action) {\r\n        if (action.energyCost > action.actor.ep)\r\n            return \"Not enough energy\";\r\n        return \"\";\r\n    }\r\n    async useResources(action, cc) {\r\n        await Promise.all([\r\n            (action.apCost === 0) ? Promise.resolve() : cc.deduceAP(action.actor, action.apCost),\r\n            (action.energyCost === 0) ? Promise.resolve() : cc.deduceEP(action.actor, action.energyCost),\r\n        ]);\r\n    }\r\n    async perform(action, cc) {\r\n        await this.useResources(action, cc);\r\n        await this.doEffect(action, cc);\r\n    }\r\n    label(action) {\r\n        switch (action.target.type) {\r\n            case AbilityTargetType.SELF:\r\n                return `${this.name} (Self)`;\r\n            case AbilityTargetType.CREATURE:\r\n                return `${this.name} (${action.target.creature.name})`;\r\n            default:\r\n                return `ERROR bad action target type ${action.target.type}`;\r\n        }\r\n    }\r\n    tooltip(action) {\r\n        switch (action.target.type) {\r\n            case AbilityTargetType.SELF:\r\n                return `Use ${this.name} on self`;\r\n            case AbilityTargetType.CREATURE:\r\n                return `Use ${this.name} on ${action.target.creature.name}`;\r\n            default:\r\n                return `ERROR bad action target type ${action.target.type}`;\r\n        }\r\n    }\r\n}\r\n// TODO move SELF to AbilityTargetFilter (\"self\", \"other\", \"ally\", \"enemy\")\r\nvar AbilityTargetType;\r\n(function (AbilityTargetType) {\r\n    AbilityTargetType[AbilityTargetType[\"SELF\"] = 0] = \"SELF\";\r\n    AbilityTargetType[AbilityTargetType[\"CREATURE\"] = 1] = \"CREATURE\";\r\n    AbilityTargetType[AbilityTargetType[\"AREA\"] = 2] = \"AREA\";\r\n})(AbilityTargetType || (AbilityTargetType = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/AbstractCombatAbility.ts?");

/***/ }),

/***/ "./src/engine/combat/BattleContext.tsx":
/*!*********************************************!*\
  !*** ./src/engine/combat/BattleContext.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BattleContext\": () => (/* binding */ BattleContext),\n/* harmony export */   \"MillisPerRound\": () => (/* binding */ MillisPerRound)\n/* harmony export */ });\n/* harmony import */ var _game_ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../game/ui/CreaturePanel */ \"./src/game/ui/CreaturePanel.tsx\");\n/* harmony import */ var _utils_Deferred__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/Deferred */ \"./src/engine/utils/Deferred.ts\");\n/* harmony import */ var _CombatController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CombatController */ \"./src/engine/combat/CombatController.tsx\");\n/* harmony import */ var _utils_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/time */ \"./src/engine/utils/time.ts\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _ui_panels_LogPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/panels/LogPanel */ \"./src/engine/ui/panels/LogPanel.tsx\");\n/* harmony import */ var _ui_panels_BattlePanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/panels/BattlePanel */ \"./src/engine/ui/panels/BattlePanel.tsx\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../game/combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _ui_panels_BattleActionsPanel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../ui/panels/BattleActionsPanel */ \"./src/engine/ui/panels/BattleActionsPanel.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet MillisPerRound = 1000;\r\nclass BattleContext {\r\n    constructor(settings) {\r\n        this.settings = settings;\r\n        this.player = this.settings.player;\r\n        this._promise = new _utils_Deferred__WEBPACK_IMPORTED_MODULE_1__.Deferred();\r\n        this.characterPanel = _Game__WEBPACK_IMPORTED_MODULE_7__.Game.instance.screenManager.sharedPlayerPanel;\r\n        this.logPanel = new _ui_panels_LogPanel__WEBPACK_IMPORTED_MODULE_5__.LogPanel();\r\n        this.battlePanel = new _ui_panels_BattlePanel__WEBPACK_IMPORTED_MODULE_6__.BattlePanel(this);\r\n        this.battleActionsPanel = new _ui_panels_BattleActionsPanel__WEBPACK_IMPORTED_MODULE_11__.BattleActionsPanel(this);\r\n        this._scheduled = false;\r\n        this._t1 = (0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.milliTime)();\r\n        this.cc = new _CombatController__WEBPACK_IMPORTED_MODULE_2__.CombatController(this);\r\n        this.battlePanel.init();\r\n        this.enemyPanel = new _game_ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_0__.CreaturePanel(this.cc.enemies[0]);\r\n        this.enemyPanel.options.money = false;\r\n        this.charPanelWasCollapsed = this.characterPanel.collapsed;\r\n        this.characterPanel.collapse();\r\n        this.enemyPanel.collapse();\r\n    }\r\n    get state() { return this.cc.state; }\r\n    get result() { return this.cc.result; }\r\n    get grid() { return this.cc.grid; }\r\n    ;\r\n    get playerCanAct() { return this.state === \"pc\" || this.state === \"ended\"; }\r\n    get ended() { return this._promise.completed; }\r\n    get promise() { return this._promise; }\r\n    async onBattleFinishClick() {\r\n        await this.cc.battleClose();\r\n    }\r\n    get layout() {\r\n        return {\r\n            className: \"-combat\",\r\n            // TODO support multiple battlers\r\n            // TODO expanding one collapses others\r\n            left: (0,preact__WEBPACK_IMPORTED_MODULE_9__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_10__.Fragment, null,\r\n                this.characterPanel.astsx,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_9__.h)(\"h3\", { class: \"text-negative\" }, \"Enemies:\"),\r\n                this.enemyPanel.astsx),\r\n            right: this.battleActionsPanel.astsx,\r\n            center: this.battlePanel.astsx,\r\n            bottom: this.logPanel.astsx\r\n        };\r\n    }\r\n    playerActions() {\r\n        return _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_8__.CombatRules.playerActions(this.player, this.cc);\r\n    }\r\n    async execAction(action) {\r\n        if (this.playerCanAct) {\r\n            await this.cc.performAction(action);\r\n        }\r\n    }\r\n    animateValueChange(creature, key, newValue, durationMs) {\r\n        // TODO wait for half of the animation time? so animations won't stack on top of each other\r\n        let panel = [this.characterPanel, this.enemyPanel].find(p => p.creature === creature);\r\n        if (!panel)\r\n            return;\r\n        panel.animateValue(key, newValue, durationMs);\r\n    }\r\n    redraw(updateActions = true) {\r\n        if (this.state === \"closed\")\r\n            return;\r\n        this.characterPanel.update();\r\n        this.enemyPanel.update();\r\n        if (updateActions) {\r\n            if (this.state === \"ended\") {\r\n                this.battleActionsPanel.showFinishBattle();\r\n            }\r\n            else {\r\n                this.battleActionsPanel.showActions(this.playerActions(), this.state === \"pc\");\r\n            }\r\n        }\r\n        this.battlePanel.update();\r\n    }\r\n    update() {\r\n        switch (this.state) {\r\n            case \"starting\":\r\n                this.cc.battleStart();\r\n                break;\r\n            case \"flow\":\r\n                this.scheduleTick();\r\n                break;\r\n            case \"animation\":\r\n            case \"pc\":\r\n            case \"npc\":\r\n            case \"ended\":\r\n            case \"closed\":\r\n                this.redraw();\r\n        }\r\n    }\r\n    scheduleTick() {\r\n        if (this._scheduled)\r\n            return;\r\n        this._t1 = (0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.milliTime)();\r\n        this._scheduled = true;\r\n    }\r\n    async animationFrame(dt, t2) {\r\n        if (this._scheduled) {\r\n            this._scheduled = false;\r\n            let dticks = (0,_math_utils__WEBPACK_IMPORTED_MODULE_4__.coerce)(t2 - this._t1, 1, 1000);\r\n            dticks = Math.round(dticks * 1000 / MillisPerRound);\r\n            await this.tick(dticks);\r\n        }\r\n        this.battlePanel.animationFrame(dt, t2);\r\n        this.characterPanel.animationFrame(dt);\r\n        this.enemyPanel.animationFrame(dt);\r\n    }\r\n    stateChanged(state, oldState) {\r\n        let updateActions = state === \"pc\" || oldState === \"pc\" || oldState === \"starting\";\r\n        this.redraw(updateActions);\r\n        switch (state) {\r\n            case \"closed\":\r\n                this.characterPanel.collapsed = this.charPanelWasCollapsed;\r\n                this._promise.resolve(this);\r\n                _Game__WEBPACK_IMPORTED_MODULE_7__.Game.instance.gameController.showGameScreen();\r\n                return;\r\n            case \"flow\":\r\n                this.scheduleTick();\r\n                break;\r\n            case \"npc\":\r\n                setTimeout(async () => {\r\n                    await this.cc.advanceTime(0);\r\n                }, _CombatController__WEBPACK_IMPORTED_MODULE_2__.AnimationTime);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    async tick(dticks) {\r\n        this._scheduled = false;\r\n        if (this.cc.state === \"flow\") {\r\n            await this.cc.advanceTime(dticks);\r\n            if (this.cc.state === \"flow\") {\r\n                this.redraw();\r\n                this.scheduleTick();\r\n            }\r\n        }\r\n    }\r\n    onKeyboardEvent(event) {\r\n        if (this.playerCanAct) {\r\n            this.battleActionsPanel.onKeyboardEvent(event);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/BattleContext.tsx?");

/***/ }),

/***/ "./src/engine/combat/BattleGrid.ts":
/*!*****************************************!*\
  !*** ./src/engine/combat/BattleGrid.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BattleGrid\": () => (/* binding */ BattleGrid),\n/* harmony export */   \"GOCreature\": () => (/* binding */ GOCreature),\n/* harmony export */   \"GridObject\": () => (/* binding */ GridObject),\n/* harmony export */   \"TileType\": () => (/* binding */ TileType)\n/* harmony export */ });\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinycolor2 */ \"./node_modules/tinycolor2/tinycolor.js\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../objects/creature/PlayerCharacter */ \"./src/engine/objects/creature/PlayerCharacter.ts\");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/* harmony import */ var _CombatController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CombatController */ \"./src/engine/combat/CombatController.tsx\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _utils_Deferred__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/Deferred */ \"./src/engine/utils/Deferred.ts\");\n/* harmony import */ var _objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../objects/creature/CoreConditions */ \"./src/engine/objects/creature/CoreConditions.ts\");\n/*\r\n * Created by aimozg on 20.10.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GridObject {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.grid = null;\r\n    }\r\n    get glyph() {\r\n        return { ch: '?', fg: tinycolor2__WEBPACK_IMPORTED_MODULE_0__(\"#ff00ff\") };\r\n    }\r\n    get pos() { return { x: this.x, y: this.y }; }\r\n}\r\nclass GOCreature extends GridObject {\r\n    constructor(x, y, creature) {\r\n        super(x, y);\r\n        this.creature = creature;\r\n    }\r\n    get glyph() {\r\n        // TODO character glyph\r\n        let glyph;\r\n        if (this.creature instanceof _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_1__.PlayerCharacter) {\r\n            glyph = {\r\n                ch: '@',\r\n                fg: tinycolor2__WEBPACK_IMPORTED_MODULE_0__(\"#77cc00\")\r\n            };\r\n        }\r\n        else {\r\n            glyph = {\r\n                ch: this.creature.name[0],\r\n                fg: tinycolor2__WEBPACK_IMPORTED_MODULE_0__(\"#0077cc\")\r\n            };\r\n        }\r\n        if (this.creature.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_7__.CoreConditions.Stealth)) {\r\n            glyph.fg.setAlpha(0.5);\r\n        }\r\n        if (this.creature.ap >= _CombatController__WEBPACK_IMPORTED_MODULE_3__.ApToAct) {\r\n            glyph.fg = {\r\n                fx: \"brighten\",\r\n                speed: \"fblink\",\r\n                color: glyph.fg\r\n            };\r\n        }\r\n        if (!this.creature.isAlive) {\r\n            glyph.bg = tinycolor2__WEBPACK_IMPORTED_MODULE_0__(\"#733\");\r\n        }\r\n        return glyph;\r\n    }\r\n}\r\nclass TileType {\r\n    constructor(resId, name, ch, fg, bg, walkable, solid) {\r\n        this.resId = resId;\r\n        this.name = name;\r\n        this.ch = ch;\r\n        this.fg = fg;\r\n        this.bg = bg;\r\n        this.walkable = walkable;\r\n        this.solid = solid;\r\n    }\r\n    get resType() { return _symbols__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ResTypeTile; }\r\n}\r\n(function (TileType) {\r\n    TileType.FLOOR = new TileType(\"/floor\", \"floor\", \".\", tinycolor2__WEBPACK_IMPORTED_MODULE_0__(\"#555555\"), null, true, false);\r\n})(TileType || (TileType = {}));\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_5__.LogManager.loggerFor(\"engine.combat.BattleGrid\");\r\nclass BattleGrid {\r\n    constructor(width, height, defaultTile = TileType.FLOOR) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.size = this.width * this.height;\r\n        this.movingGlyphs = new Map();\r\n        this._data = [];\r\n        for (let i = 0; i < width * height; i++) {\r\n            this._data.push({ visible: true, tile: defaultTile, objects: [] });\r\n        }\r\n    }\r\n    animateMovement(go, from, to, durationMs, steps = 4) {\r\n        let mg = {\r\n            go,\r\n            from,\r\n            to,\r\n            pos: { x: from.x, y: from.y },\r\n            phase: 0,\r\n            durationMs,\r\n            steps,\r\n            promise: new _utils_Deferred__WEBPACK_IMPORTED_MODULE_6__.Deferred()\r\n        };\r\n        logger.debug(\"animateMovement {}: {},{} -> {},{}\", go, from.x, from.y, to.x, to.y);\r\n        this.movingGlyphs.set(go, mg);\r\n        return { finished: mg.promise };\r\n    }\r\n    glyphAt(x, y) {\r\n        if (!this.hasxy(x, y))\r\n            return null;\r\n        let cd = this.data({ x, y });\r\n        if (!cd.visible)\r\n            return null;\r\n        if (cd.objects.length === 0)\r\n            return cd.tile;\r\n        let gd = { ch: cd.tile.ch, fg: cd.tile.fg, bg: cd.tile.bg };\r\n        for (let o of cd.objects) {\r\n            if (this.movingGlyphs.has(o))\r\n                continue;\r\n            Object.assign(gd, o.glyph);\r\n        }\r\n        return gd;\r\n    }\r\n    overlays() {\r\n        return [...this.movingGlyphs.values()].map(mg => ({\r\n            type: \"glyph\",\r\n            row: mg.pos.y,\r\n            col: mg.pos.x,\r\n            glyph: mg.go.glyph\r\n        }));\r\n    }\r\n    animationFrame(dt) {\r\n        for (let mg of this.movingGlyphs.values()) {\r\n            let phase = (mg.phase += dt / mg.durationMs);\r\n            if (phase >= 1.0) {\r\n                this.movingGlyphs.delete(mg.go);\r\n                logger.debug(\"animation finished for {}\", mg.go);\r\n                mg.promise.resolve();\r\n                continue;\r\n            }\r\n            if (mg.steps) {\r\n                phase = Math.floor(phase * mg.steps) / mg.steps;\r\n            }\r\n            mg.pos = {\r\n                x: (0,_math_utils__WEBPACK_IMPORTED_MODULE_4__.lint)(phase, mg.from.x, mg.to.x),\r\n                y: (0,_math_utils__WEBPACK_IMPORTED_MODULE_4__.lint)(phase, mg.from.y, mg.to.y),\r\n            };\r\n        }\r\n    }\r\n    index(x, y) {\r\n        return y * this.width + x;\r\n    }\r\n    hasxy(x, y) {\r\n        return x >= 0 && x < this.width && (x | 0) === x &&\r\n            y >= 0 && y < this.height && (y | 0) === y;\r\n    }\r\n    i2x(index) {\r\n        return index % this.width;\r\n    }\r\n    i2y(index) {\r\n        return (index / this.width) | 0;\r\n    }\r\n    data(xy) {\r\n        return this._data[this.index(xy.x, xy.y)];\r\n    }\r\n    cell(xy) {\r\n        return { grid: this, x: xy.x, y: xy.y, data: this.data(xy) };\r\n    }\r\n    tile(xy) {\r\n        return this.data(xy).tile;\r\n    }\r\n    object(xy) {\r\n        return this.data(xy).objects ?? [];\r\n    }\r\n    visible(xy) {\r\n        return this.data(xy).visible;\r\n    }\r\n    cdIsEmpty(cd) {\r\n        return cd.objects.length === 0 && cd.tile.walkable && !cd.tile.solid;\r\n    }\r\n    isempty(xy) {\r\n        let cd = this.data(xy);\r\n        return this.cdIsEmpty(cd);\r\n    }\r\n    randomEmptyCell(rng) {\r\n        // 1. Just pick random pos and check if it's empty\r\n        // 2. If none found (too dense), assembled list of empty indices and pick from there\r\n        let n = (this.width + this.height) * 2;\r\n        let pos = { x: 0, y: 0 };\r\n        while (n-- > 0) {\r\n            pos.x = rng.nextInt(this.width);\r\n            pos.y = rng.nextInt(this.height);\r\n            if (this.isempty(pos)) {\r\n                return pos;\r\n            }\r\n        }\r\n        let emptyCells = [];\r\n        for (let i = 0; i < this.size; i++) {\r\n            if (this.cdIsEmpty(this._data[i]))\r\n                emptyCells.push(i);\r\n        }\r\n        if (emptyCells.length === 0)\r\n            return null;\r\n        let idx = rng.pick(emptyCells);\r\n        return { x: this.i2x(idx), y: this.i2y(idx) };\r\n    }\r\n    placeCreature(creature, xy) {\r\n        if (creature.gobj !== null)\r\n            throw new Error(`Creature ${creature} already placed`);\r\n        let gobj = creature.gobj = new GOCreature(xy.x, xy.y, creature);\r\n        this.addObject(gobj);\r\n        return gobj;\r\n    }\r\n    addObject(object, newXY) {\r\n        if (object.grid !== null)\r\n            throw new Error(`Invalid add(${object}), already placed`);\r\n        if (newXY) {\r\n            object.x = newXY.x;\r\n            object.y = newXY.y;\r\n        }\r\n        let objects = this.data(object).objects;\r\n        if (objects.includes(object))\r\n            throw new Error(`Duplicate add(${object})`);\r\n        object.grid = this;\r\n        objects.push(object);\r\n    }\r\n    removeObject(object) {\r\n        if (object.grid !== this)\r\n            throw new Error(`Invalid remove(${object}), not placed`);\r\n        let objects = this.data(object).objects;\r\n        let i = objects.indexOf(object);\r\n        if (i === -1)\r\n            throw new Error(`Cannot remove ${object}, not in cell`);\r\n        objects.splice(i, 1);\r\n        object.grid = null;\r\n    }\r\n    setPos(object, xy) {\r\n        this.removeObject(object);\r\n        object.x = xy.x;\r\n        object.y = xy.y;\r\n        this.addObject(object);\r\n    }\r\n    distance(go1, go2) {\r\n        let gp1 = (go1 instanceof GridObject) ? go1.pos : go1;\r\n        let gp2 = (go2 instanceof GridObject) ? go2.pos : go2;\r\n        let dx = Math.abs(gp1.x - gp2.x);\r\n        let dy = Math.abs(gp1.y - gp2.y);\r\n        return Math.max(dx, dy) + Math.min(dx, dy) / 2; // \"Angband metric\"\r\n    }\r\n    adjacent(go1, go2, allowDiagonal = true) {\r\n        let d = this.distance(go1, go2);\r\n        return d <= (allowDiagonal ? 1.5 : 1.0);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/BattleGrid.ts?");

/***/ }),

/***/ "./src/engine/combat/CombatAction.ts":
/*!*******************************************!*\
  !*** ./src/engine/combat/CombatAction.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CombatAction\": () => (/* binding */ CombatAction)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 02.08.2022.\r\n */\r\nclass CombatAction {\r\n    constructor(actor) {\r\n        this.actor = actor;\r\n        /** This action is bound to a particular direction and should be placed on a d-pad in the actions menu */\r\n        this.direction = null;\r\n        this._disabledReason = null;\r\n    }\r\n    toString() {\r\n        return \"[\" + Object.getPrototypeOf(this).constructor.name + \" \" + this.actor.name + \"]\";\r\n    }\r\n    /** Short label for a d-pad button */\r\n    get dpadLabel() { return this.label; }\r\n    get dpadClass() { return \"\"; }\r\n    isPossible(cc) {\r\n        this._disabledReason ?? (this._disabledReason = this.disabledReason(cc));\r\n        return !this._disabledReason;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/CombatAction.ts?");

/***/ }),

/***/ "./src/engine/combat/CombatController.tsx":
/*!************************************************!*\
  !*** ./src/engine/combat/CombatController.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AnimationTime\": () => (/* binding */ AnimationTime),\n/* harmony export */   \"AnimationTimeFast\": () => (/* binding */ AnimationTimeFast),\n/* harmony export */   \"AnimationTimeVeryFast\": () => (/* binding */ AnimationTimeVeryFast),\n/* harmony export */   \"ApToAct\": () => (/* binding */ ApToAct),\n/* harmony export */   \"CombatController\": () => (/* binding */ CombatController),\n/* harmony export */   \"TicksPerRound\": () => (/* binding */ TicksPerRound),\n/* harmony export */   \"logref\": () => (/* binding */ logref)\n/* harmony export */ });\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../objects/creature/PlayerCharacter */ \"./src/engine/objects/creature/PlayerCharacter.ts\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../game/combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/* harmony import */ var _objects_Loot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../objects/Loot */ \"./src/engine/objects/Loot.ts\");\n/* harmony import */ var _objects_Inventory__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../objects/Inventory */ \"./src/engine/objects/Inventory.ts\");\n/* harmony import */ var _objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../objects/creature/CoreConditions */ \"./src/engine/objects/creature/CoreConditions.ts\");\n/* harmony import */ var _actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./actions/SkipCombatAction */ \"./src/engine/combat/actions/SkipCombatAction.ts\");\n/* harmony import */ var _objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../objects/creature/CoreSkills */ \"./src/engine/objects/creature/CoreSkills.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__.LogManager.loggerFor(\"engine.combat.CombatController\");\r\nlet TicksPerRound = 1000;\r\nlet ApToAct = 1000;\r\nlet AnimationTime = 500;\r\nlet AnimationTimeFast = 250;\r\nlet AnimationTimeVeryFast = 125;\r\nfunction logref(creature) {\r\n    return (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: \"--actor\" }, creature.name.capitalize());\r\n}\r\nclass CombatController {\r\n    constructor(ctx) {\r\n        this.ctx = ctx;\r\n        this.party = this.ctx.settings.party;\r\n        this.enemies = this.ctx.settings.enemies;\r\n        this._state = \"starting\";\r\n        this.nextActor = null;\r\n        this._result = \"cancelled\";\r\n        this.roundNo = 0;\r\n        this.tickTime = 0;\r\n        /////////////////////\r\n        // Combat messages //\r\n        /////////////////////\r\n        this.logHasNoBr = false;\r\n        _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.postSetup();\r\n        this.grid = ctx.settings.grid;\r\n        for (let creature of [...this.party, ...this.enemies]) {\r\n            // TODO put them on different sides\r\n            if (creature.gobj?.grid === this.grid)\r\n                continue;\r\n            let pos = this.grid.randomEmptyCell(this.rng);\r\n            if (!pos)\r\n                throw new Error(`Nowhere to place ${creature.name}!`);\r\n            this.grid.placeCreature(creature, pos);\r\n        }\r\n    }\r\n    ownSide(creature) {\r\n        if (this.party.includes(creature))\r\n            return this.party;\r\n        if (this.enemies.includes(creature))\r\n            return this.enemies;\r\n        throw new Error(\"Not a combatant: \" + creature);\r\n    }\r\n    otherSide(creature) {\r\n        if (this.party.includes(creature))\r\n            return this.enemies;\r\n        if (this.enemies.includes(creature))\r\n            return this.party;\r\n        throw new Error(\"Not a combatant: \" + creature);\r\n    }\r\n    get rng() { return _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.rng; }\r\n    get ended() { return this.state === \"ended\" || this.state === \"closed\"; }\r\n    get state() { return this._state; }\r\n    set state(value) {\r\n        if (value !== this._state) {\r\n            let oldState = this._state;\r\n            logger.debug(\"state changed {} to {}\", oldState, value);\r\n            this._state = value;\r\n            this.logbr();\r\n            this.ctx.stateChanged(value, oldState);\r\n        }\r\n    }\r\n    get result() { return this._result; }\r\n    set result(value) { this._result = value; }\r\n    get partyLost() { return this.party.every(c => !c.isAlive); }\r\n    get enemiesLost() { return this.enemies.every(c => !c.isAlive); }\r\n    get participants() { return [...this.party, ...this.enemies]; }\r\n    battleStart() {\r\n        logger.info(\"battleStart {} vs {}\", this.party, this.enemies);\r\n        for (let p of this.participants) {\r\n            this.prepareForCombat(p);\r\n        }\r\n        switch (this.ctx.settings.ambushed) {\r\n            case \"enemies\":\r\n                this.logInfo(\"You're sneaking!\");\r\n                for (let c of this.party)\r\n                    c.setCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Stealth);\r\n                for (let c of this.enemies)\r\n                    c.setCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Unaware);\r\n                break;\r\n            case \"party\":\r\n                // TODO what to do when party is ambushed? Give bonus AP?\r\n                // for (let c of this.enemies) c.setCondition(CoreConditions.Stealth);\r\n                // for (let c of this.party) c.setCondition(CoreConditions.Unaware);\r\n                break;\r\n        }\r\n        this.roundNo = 0;\r\n        this.tickTime = TicksPerRound;\r\n        this.state = \"flow\";\r\n    }\r\n    battleEnd() {\r\n        if (this.ended)\r\n            throw new Error(`Cannot battleEnd() in ${this.state}`);\r\n        logger.info(\"battleEnd\");\r\n        this.state = \"ended\";\r\n        // TODO compute result\r\n        for (let p of this.participants) {\r\n            this.cleanupAfterCombat(p);\r\n        }\r\n    }\r\n    async battleClose() {\r\n        if (this.state !== \"ended\")\r\n            throw new Error(`Cannot battleClose() in ${this.state}`);\r\n        logger.info(\"battleClose\");\r\n        await this.awardLoot();\r\n        this.state = \"closed\";\r\n    }\r\n    /** End battle or switch to \"flow\" */\r\n    flow() {\r\n        if (this.partyLost || this.enemiesLost) {\r\n            this.battleEnd();\r\n            return;\r\n        }\r\n        this.state = \"flow\";\r\n    }\r\n    async advanceTime(maxDT) {\r\n        logger.trace(\"advanceTime {} {}.{} +{}\", this.state, this.roundNo, this.tickTime, maxDT);\r\n        if (this.state === \"npc\") {\r\n            await this.performAIAction(this.nextActor);\r\n            return;\r\n        }\r\n        if (this.state !== \"flow\") {\r\n            throw new Error(`Cannot advanceTime() in ${this.state} state`);\r\n        }\r\n        if (this.partyLost || this.enemiesLost) {\r\n            this.battleEnd();\r\n            return;\r\n        }\r\n        while (maxDT-- > 0) {\r\n            // check new round start\r\n            if (this.tickTime >= TicksPerRound) {\r\n                await this.nextRound();\r\n                return;\r\n            }\r\n            // TODO execute scheduled events\r\n            // find actor\r\n            let nextActor = this.participants.find(c => c.isAlive && c.ap >= ApToAct);\r\n            if (nextActor) {\r\n                if (nextActor instanceof _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_1__.PlayerCharacter) {\r\n                    // TODO if player-controller, actually\r\n                    this.state = \"pc\";\r\n                    this.nextActor = nextActor;\r\n                    return;\r\n                }\r\n                else {\r\n                    this.nextActor = nextActor;\r\n                    this.state = \"npc\";\r\n                    return;\r\n                }\r\n            }\r\n            // advance aps\r\n            for (let c of this.participants) {\r\n                if (c.isAlive)\r\n                    c.ap++;\r\n            }\r\n            this.tickTime++;\r\n        }\r\n    }\r\n    async doSingleStealthCheck(spotter, sneaker) {\r\n        logger.info(\"doSingleStealthCheck {} {}\", spotter, sneaker);\r\n        if (!spotter.isAlive)\r\n            return;\r\n        let spotSkill = spotter.skillValue(_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_11__.CoreSkills.Spot);\r\n        let stealthSkill = sneaker.skillValue(_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_11__.CoreSkills.Stealth);\r\n        let roll = this.rng.d20();\r\n        let bonus = spotSkill;\r\n        let dc = 10 + stealthSkill;\r\n        // TODO critical success/failure?\r\n        let success = roll + bonus >= dc;\r\n        let successIsGood = this.ownSide(sneaker) !== this.party;\r\n        this.logSkillCheck(roll, bonus, dc, successIsGood, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n            logref(spotter),\r\n            ' ',\r\n            \"Spot vs \",\r\n            logref(sneaker),\r\n            ' ',\r\n            \"Stealth check\"));\r\n        if (success) {\r\n            await this.noticeCreature(sneaker);\r\n        }\r\n    }\r\n    async doFullStealthCheck(creature) {\r\n        logger.debug(\"doFullStealthCheck {}\", creature);\r\n        for (let spotter of this.otherSide(creature)) {\r\n            if (!creature.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Stealth))\r\n                break;\r\n            await this.doSingleStealthCheck(spotter, creature);\r\n        }\r\n    }\r\n    async noticeCreature(creature) {\r\n        logger.debug(\"noticeCreature {}\", creature);\r\n        if (creature.removeCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Stealth)) {\r\n            this.logInfo((0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                logref(creature),\r\n                \" is found!\"));\r\n        }\r\n        for (let enemy of this.otherSide(creature)) {\r\n            if (enemy.removeCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Unaware)) {\r\n                this.logInfo((0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                    logref(enemy),\r\n                    \" is alerted!\"));\r\n            }\r\n        }\r\n    }\r\n    async nextRound() {\r\n        logger.info(\"nextRound()\");\r\n        this.tickTime -= TicksPerRound;\r\n        this.roundNo++;\r\n        this.logbr();\r\n        this.logInfo(\"Round \" + this.roundNo + \".\");\r\n        this.logbr();\r\n        for (let creature of this.participants) {\r\n            if (creature.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Stealth)) {\r\n                await this.doFullStealthCheck(creature);\r\n            }\r\n        }\r\n        // TODO advance effects\r\n    }\r\n    async performAIAction(actor) {\r\n        logger.debug(\"performAIAction {}\", actor.name);\r\n        let action = actor.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Unaware)\r\n            ? new _actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_10__.SkipCombatAction(actor)\r\n            : actor.ai.performAI(this);\r\n        await this.performAction(action);\r\n        logger.debug(\"/performAIAction {}\", actor.name);\r\n    }\r\n    log(messageClass, message) {\r\n        logger.info(\"{}\", message);\r\n        this.logHasNoBr = true;\r\n        /*if (this._logmsg > 0) {\r\n            this.ctx.logPanel.appendToLast(message)\r\n        } else {*/\r\n        this.ctx.logPanel.append((0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { className: \"log-message \" + (messageClass ?? \"\") }, message));\r\n        /*}*/\r\n    }\r\n    /* TODO need to organize message with sufficient atomicity\r\n    ex. A attacks B, deals 3 + 5 damage, kills, gets XP\r\n    private _logmsg = 0;\r\n    logStart(messageClass?:string) {\r\n        this._logmsg++;\r\n        this.ctx.logPanel.append(<span className={\"log-message \"+(messageClass??\"\")}/>)\r\n    }\r\n    logEnd() {\r\n        this._logmsg--;\r\n    }\r\n     */\r\n    logbr() {\r\n        if (this.logHasNoBr) {\r\n            this.logHasNoBr = false;\r\n            this.ctx.logPanel.append((0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"br\", null));\r\n        }\r\n    }\r\n    logInfo(message) {\r\n        this.log(\"-info\", message);\r\n    }\r\n    logAction(c, action, joiner = ': ') {\r\n        // TODO special hostile/friendly style?\r\n        this.log(\"-action\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n            logref(c),\r\n            joiner,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { className: \"--action\" }, action)));\r\n    }\r\n    logActionVs(actor, verb, target, action) {\r\n        // TODO special hostile/friendly style?\r\n        this.log(\"-action\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n            logref(actor),\r\n            \" \",\r\n            verb,\r\n            \" \",\r\n            logref(target),\r\n            \": \",\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { className: \"--action\" }, action)));\r\n    }\r\n    logSkillCheck(roll, bonus, dc, successIsGood, name) {\r\n        let success = roll + bonus >= dc;\r\n        let className = (success === successIsGood) ? \"text-roll-success\" : \"text-roll-fail\";\r\n        this.log(\"-check\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n            \"[\",\r\n            name,\r\n            \": \",\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: className },\r\n                success ? \"Success\" : \"Failure\",\r\n                \" (\",\r\n                roll,\r\n                bonus.signed(),\r\n                \" vs \",\r\n                dc,\r\n                \")\"),\r\n            \"]\"));\r\n    }\r\n    ////////////////////\r\n    // Creature utils //\r\n    ////////////////////\r\n    prepareForCombat(c) {\r\n        logger.debug(\"prepareForCombat {}\", c);\r\n        // TODO setup AI\r\n        c.ap = this.rng.nextInt(TicksPerRound);\r\n        this.logAction(c, \"Initiative roll (\" + c.ap + \").\");\r\n    }\r\n    cleanupAfterCombat(c) {\r\n        logger.debug(\"cleanupAfterCombat {}\", c);\r\n        // TODO clean combat buffs\r\n        for (let cc of c.conditions) {\r\n            if (cc.combatOnly)\r\n                c.removeCondition(cc);\r\n        }\r\n        c.ap = 0;\r\n        c.gobj = null;\r\n    }\r\n    adjacent(c1, c2) {\r\n        let go1 = c1.gobj;\r\n        let go2 = c2.gobj;\r\n        if (!go1 || !go2)\r\n            return false;\r\n        return this.grid.adjacent(go1, go2);\r\n    }\r\n    ////////////////////\r\n    // Combat actions //\r\n    ////////////////////\r\n    // TODO move (partially) to CombatRoll.process()\r\n    async processMeleeRoll(roll) {\r\n        // Calculate params\r\n        if (!roll.free)\r\n            roll.ap = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.meleeAttackApCost(roll);\r\n        roll.bonus = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.meleeAttackVs(roll.actor, roll.target);\r\n        roll.dc = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.meleeDefenseVs(roll.target, roll.actor);\r\n        roll.damageSpec = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.meleeDamageVs(roll.actor, roll.target);\r\n        // Strike\r\n        // TODO onStrike callback\r\n        if (roll.ap > 0) {\r\n            await this.deduceAP(roll.actor, roll.ap);\r\n        }\r\n        if (roll.roll === 0) {\r\n            roll.roll = this.rng.d20();\r\n        }\r\n        if (roll.roll === 1 && roll.canCritMiss) {\r\n            roll.hit = false;\r\n            roll.critMiss = true;\r\n        }\r\n        else if (roll.roll === 20 && roll.canCritHit) {\r\n            roll.hit = true;\r\n            roll.critHit = true;\r\n        }\r\n        else {\r\n            roll.hit = roll.roll + roll.bonus >= roll.dc;\r\n        }\r\n        // Hit\r\n        if (roll.hit) {\r\n            roll.damage = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_6__.CombatRules.rollDamage(roll.damageSpec, roll.critHit, 2);\r\n            await roll.onHit?.(roll, this);\r\n            if (roll.hit && !roll.cancelled) {\r\n                if (roll.critHit) {\r\n                    this.logActionVs(roll.actor, \"attacks\", roll.target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + roll.roll }, \"critical hit\"),\r\n                        \"!\"));\r\n                }\r\n                else {\r\n                    this.logActionVs(roll.actor, \"attacks\", roll.target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + roll.roll + roll.bonus.signed() + \" vs \" + roll.dc }, \"hit\"),\r\n                        \".\"));\r\n                }\r\n                await this.doDamages(roll.target, roll.damage, roll.actor);\r\n            }\r\n        }\r\n        else {\r\n            // TODO onMiss callback\r\n            if (roll.critMiss) {\r\n                this.logActionVs(roll.actor, \"attacks\", roll.target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + roll.roll }, \"critical miss\"),\r\n                    \"!\"));\r\n            }\r\n            else {\r\n                this.logActionVs(roll.actor, \"attacks\", roll.target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + roll.roll + roll.bonus.signed() + \" vs \" + roll.dc }, \"miss\"),\r\n                    \".\"));\r\n            }\r\n        }\r\n        if (roll.target.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Unaware)) {\r\n            roll.target.removeCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_9__.CoreConditions.Unaware);\r\n        }\r\n        return roll;\r\n    }\r\n    async performAction(action) {\r\n        logger.info(\"performAction {}\", action);\r\n        let result = await action.perform(this);\r\n        this.flow();\r\n        return result;\r\n    }\r\n    async doDamages(target, damage, source) {\r\n        for (let d of damage) {\r\n            // TODO synchronize animations\r\n            await this.doDamage(target, d.damage, d.damageType, source);\r\n        }\r\n    }\r\n    async doDamage(target, damage, damageType, source) {\r\n        logger.info(\"doDamage {} {} {} {}\", target, damage, damageType, source);\r\n        if (damage < 0)\r\n            damage = 0;\r\n        let originalDamage = damage;\r\n        // TODO conditioned DR, damage immunity/resistance/vulnerability\r\n        let dr = (0,_math_utils__WEBPACK_IMPORTED_MODULE_5__.coerce)(target.dmgRedAll, 0, damage);\r\n        damage -= dr;\r\n        if (damage < 0)\r\n            damage = 0;\r\n        let hint = \"\";\r\n        if (dr > 0) {\r\n            hint = \"\" + originalDamage + \" - \" + dr + \" DR\";\r\n        }\r\n        if (damage === 0) {\r\n            this.log(\"\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                \"(\",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: \"text-damage-none\", title: hint }, \"0\"),\r\n                \")\"));\r\n        }\r\n        else {\r\n            this.log(\"\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                \"(\",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: \"text-damage-\" + damageType.cssSuffix, title: hint },\r\n                    damage,\r\n                    \" \",\r\n                    damageType.name),\r\n                \")\"));\r\n            await this.deduceHP(target, damage, source);\r\n        }\r\n    }\r\n    async doLustDamage(target, damage, source) {\r\n        logger.info(\"doLustDamage {} {} {}\", target, damage, source);\r\n        if (damage < 0)\r\n            damage = 0;\r\n        // let originalDamage = damage;\r\n        // TODO lust resistance\r\n        if (damage === 0) {\r\n            this.log(\"\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                \"(\",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: \"text-damage-none\" }, \"0\"),\r\n                \")\"));\r\n        }\r\n        else {\r\n            this.log(\"\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                \"(\",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { class: \"text-lust\" }, damage),\r\n                \")\"));\r\n            await this.increaseLP(target, damage, source);\r\n        }\r\n    }\r\n    async deduceAP(creature, value) {\r\n        value |= 0;\r\n        logger.info(\"deduceAP {} {}\", creature, value);\r\n        this.ctx.animateValueChange(creature, \"ap\", creature.ap - value, AnimationTimeVeryFast);\r\n        creature.ap -= value;\r\n    }\r\n    async deduceEP(creature, value) {\r\n        logger.info(\"deduceEP {} {}\", creature, value);\r\n        this.ctx.animateValueChange(creature, \"ep\", creature.ep - value, AnimationTimeVeryFast);\r\n        creature.ep -= value;\r\n    }\r\n    async deduceHP(target, damage, source) {\r\n        logger.info(\"deduceHP {} {} {}\", target, damage, source);\r\n        let wasAlive = target.isAlive;\r\n        this.ctx.animateValueChange(target, \"hp\", target.hp - damage, AnimationTime);\r\n        target.hp -= damage;\r\n        if (wasAlive && !target.isAlive) {\r\n            // TODO consider handling death later, as an immediate follow-up event\r\n            await this.onDeath(target, source);\r\n        }\r\n    }\r\n    async increaseLP(target, change, source) {\r\n        logger.info(\"increaseLP {} {} {}\", target, change, source);\r\n        // TODO do not instalose\r\n        let wasAlive = target.isAlive;\r\n        this.ctx.animateValueChange(target, \"lp\", target.lp + change, AnimationTime);\r\n        target.lp += change;\r\n        if (wasAlive && !target.isAlive) {\r\n            // TODO consider handling death later, as an immediate follow-up event\r\n            await this.onDeath(target, source);\r\n        }\r\n    }\r\n    /**\r\n     * Handle death of {@param creature}\r\n     * @param killer\r\n     */\r\n    async onDeath(creature, killer) {\r\n        logger.info(\"onDeath {} {}\", creature, killer);\r\n        if (killer) {\r\n            this.log(\"-death\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"b\", null, creature.name),\r\n                \" is defeated by \",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"b\", null, killer.name),\r\n                \".\"));\r\n        }\r\n        else {\r\n            this.log(\"-death\", (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_4__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"b\", null, creature.name),\r\n                \" dies.\"));\r\n        }\r\n        // TODO death animation\r\n        if (killer && killer instanceof _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_1__.PlayerCharacter) {\r\n            await this.awardXpFor(killer, creature);\r\n        }\r\n    }\r\n    /**\r\n     * Award {@param player} XP for defeating {@param victim}\r\n     */\r\n    async awardXpFor(player, victim) {\r\n        logger.info(\"awardXpFor {} {}\", player, victim);\r\n        // TODO calculate xp from level\r\n        let xp = 50;\r\n        if (xp > 0) {\r\n            this.logInfo(\"+\" + xp + \" XP.\");\r\n            this.ctx.animateValueChange(player, \"xp\", player.xp + xp, AnimationTime);\r\n            player.xp += xp;\r\n            this.ctx.redraw();\r\n        }\r\n    }\r\n    async awardLoot() {\r\n        let loot = (0,_objects_Loot__WEBPACK_IMPORTED_MODULE_7__.mergeLoot)(this.enemies.map(e => e.loot));\r\n        logger.info(\"awardLoot rolled money = {} items = {}\", loot.money, loot.items);\r\n        let receiver = this.ctx.player;\r\n        // TODO +XXXX floatig number for gold\r\n        receiver.money += loot.money;\r\n        // TODO this isn't displayed properly!\r\n        this.logInfo(`You receive ${loot.money} gold.`);\r\n        if (loot.items.length > 0) {\r\n            await _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.gameController.openTransferMenu(_objects_Inventory__WEBPACK_IMPORTED_MODULE_8__.Inventory.wrap(loot.items, \"Loot\"), { /*use: false, equip: false, unequip: false*/});\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/CombatController.tsx?");

/***/ }),

/***/ "./src/engine/combat/CombatRoll.ts":
/*!*****************************************!*\
  !*** ./src/engine/combat/CombatRoll.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CombatRoll\": () => (/* binding */ CombatRoll)\n/* harmony export */ });\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/*\r\n * Created by aimozg on 14.09.2022.\r\n */\r\n\r\nclass CombatRoll {\r\n    // TODO This is overcomplicated. Alternative:\r\n    //  - hooks in fixed places: \"onStrike\", \"onHit\", \"onDamage\"\r\n    //  - conditional buffs: getAC(tags:[\"melee\", \"enemyTypeDemon\"])\r\n    constructor(actor, \r\n    // TODO target area or group\r\n    target, options) {\r\n        this.actor = actor;\r\n        this.target = target;\r\n        this.ability = null;\r\n        /**\r\n         * This action costs AP\r\n         */\r\n        this.free = false;\r\n        /**\r\n         * This roll was interrupted and should not be processed further\r\n         */\r\n        this.cancelled = false;\r\n        /**\r\n         * This roll landed a hit on the target\r\n         */\r\n        this.hit = false;\r\n        /**\r\n         * This roll has hit the target and manifested its effect\r\n         */\r\n        this.success = false;\r\n        /**\r\n         * This roll can critically hit\r\n         */\r\n        this.canCritHit = true;\r\n        /**\r\n         * This roll can critically miss\r\n         */\r\n        this.canCritMiss = true;\r\n        /**\r\n         * Was critical hit\r\n         */\r\n        this.critHit = false;\r\n        /**\r\n         * Was critical miss\r\n         */\r\n        this.critMiss = false;\r\n        /**\r\n         * Damage dice to be dealt\r\n         */\r\n        this.damageSpec = [];\r\n        /**\r\n         * Damage that was dealt (or to be dealt)\r\n         */\r\n        this.damage = [];\r\n        /**\r\n         * AP cost\r\n         */\r\n        this.ap = 0;\r\n        /**\r\n         * [roll] + [bonus] vs [dc]\r\n         */\r\n        this.roll = 0;\r\n        /**\r\n         * [roll] + [bonus] vs [dc]\r\n         */\r\n        this.bonus = 0;\r\n        /**\r\n         * [roll] + [bonus] vs [dc]\r\n         */\r\n        this.dc = 0;\r\n        this.onHit = null;\r\n        if (options)\r\n            Object.assign(this, options);\r\n    }\r\n    toString() {\r\n        let s = \"CombatRoll[\";\r\n        s += this.actor.name + \" vs \" + this.target.name + \";\";\r\n        if (this.free)\r\n            s += \" free\";\r\n        if (this.canCritHit && this.canCritMiss)\r\n            s += \" canCrit\";\r\n        else if (this.canCritHit)\r\n            s += \" canCritHit\";\r\n        else if (this.canCritMiss)\r\n            s += \" canCritMiss\";\r\n        if (this.hit)\r\n            s += \" hit\";\r\n        if (this.critHit)\r\n            s += \" critHit\";\r\n        if (this.critMiss)\r\n            s += \" critMiss\";\r\n        if (this.success)\r\n            s += \" success\";\r\n        if (!this.free)\r\n            s += \"; \" + this.ap + \" AP\";\r\n        s += \"; \" + this.roll + this.bonus.signed() + \" vs \" + this.dc;\r\n        if (this.damage.length > 0) {\r\n            s += \"; \" + this.damage.map(d => \"\" + d.damage + \" \" + d.damageType.name).join(\", \");\r\n        }\r\n        else if (this.damageSpec.length > 0) {\r\n            s += \"; \" + this.damageSpec.map(d => \"\" + d.damage + \" \" + d.damageType.name).join(\", \");\r\n        }\r\n        if (this.cancelled)\r\n            s += \"(cancelled)\";\r\n        s += \"]\";\r\n        return s;\r\n    }\r\n}\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__.LogManager.loggerFor(\"engine.combat.CombatRoll\");\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/CombatRoll.ts?");

/***/ }),

/***/ "./src/engine/combat/actions/MeleeAttackAction.tsx":
/*!*********************************************************!*\
  !*** ./src/engine/combat/actions/MeleeAttackAction.tsx ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MeleeAttackAction\": () => (/* binding */ MeleeAttackAction)\n/* harmony export */ });\n/* harmony import */ var _CombatAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CombatAction */ \"./src/engine/combat/CombatAction.ts\");\n/* harmony import */ var _CombatRoll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../CombatRoll */ \"./src/engine/combat/CombatRoll.ts\");\n/* harmony import */ var _utils_gridutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/gridutils */ \"./src/engine/utils/gridutils.ts\");\n\r\n\r\n\r\nclass MeleeAttackAction extends _CombatAction__WEBPACK_IMPORTED_MODULE_0__.CombatAction {\r\n    constructor(actor, target, free = false) {\r\n        super(actor);\r\n        this.target = target;\r\n        this.free = free;\r\n        this.label = \"Strike \" + this.target.name;\r\n        this.tooltip = \"Strike \" + this.target.name; // TODO details\r\n        if (actor.gobj.grid.adjacent(actor.gobj, target.gobj)) {\r\n            this.direction = _utils_gridutils__WEBPACK_IMPORTED_MODULE_2__.Direction.to(actor.gobj.pos, target.gobj.pos);\r\n        }\r\n    }\r\n    toString() {\r\n        return \"[MeleeAttackAction \" + this.actor.name + \" \" + this.target.name + (this.free ? \" (free)\" : \"\") + \"]\";\r\n    }\r\n    disabledReason(cc) {\r\n        // TODO impossible if actor has condition, or target is invulnerable/dead\r\n        // TODO certain melee weapon have longer reach\r\n        if (!cc.adjacent(this.actor, this.target))\r\n            return \"Too far\";\r\n        return \"\";\r\n    }\r\n    get dpadLabel() { return \"Strike\"; }\r\n    get dpadClass() { return \"dpad-strike\"; }\r\n    async perform(cc) {\r\n        return await cc.processMeleeRoll(new _CombatRoll__WEBPACK_IMPORTED_MODULE_1__.CombatRoll(this.actor, this.target, {\r\n            free: this.free\r\n        }));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/actions/MeleeAttackAction.tsx?");

/***/ }),

/***/ "./src/engine/combat/actions/SkipCombatAction.ts":
/*!*******************************************************!*\
  !*** ./src/engine/combat/actions/SkipCombatAction.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SkipCombatAction\": () => (/* binding */ SkipCombatAction)\n/* harmony export */ });\n/* harmony import */ var _CombatAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CombatAction */ \"./src/engine/combat/CombatAction.ts\");\n/* harmony import */ var _utils_gridutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/gridutils */ \"./src/engine/utils/gridutils.ts\");\n/*\r\n * Created by aimozg on 27.08.2022.\r\n */\r\n\r\n\r\nclass SkipCombatAction extends _CombatAction__WEBPACK_IMPORTED_MODULE_0__.CombatAction {\r\n    constructor(actor) {\r\n        super(actor);\r\n        this.direction = _utils_gridutils__WEBPACK_IMPORTED_MODULE_1__.Direction.CENTER;\r\n        this.label = \"Skip\";\r\n        this.tooltip = \"Skip your turn\";\r\n    }\r\n    disabledReason(cc) {\r\n        return \"\";\r\n    }\r\n    get dpadClass() { return \"dpad-skip\"; }\r\n    async perform(cc) {\r\n        cc.logAction(this.actor, \"does nothing.\", \" \");\r\n        await cc.deduceAP(this.actor, this.actor.ap);\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/actions/SkipCombatAction.ts?");

/***/ }),

/***/ "./src/engine/combat/actions/StepAction.ts":
/*!*************************************************!*\
  !*** ./src/engine/combat/actions/StepAction.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StepAction\": () => (/* binding */ StepAction)\n/* harmony export */ });\n/* harmony import */ var _CombatAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CombatAction */ \"./src/engine/combat/CombatAction.ts\");\n/* harmony import */ var _CombatController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../CombatController */ \"./src/engine/combat/CombatController.tsx\");\n/* harmony import */ var _utils_gridutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/gridutils */ \"./src/engine/utils/gridutils.ts\");\n/* harmony import */ var _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../game/combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/* harmony import */ var _objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../objects/creature/CoreConditions */ \"./src/engine/objects/creature/CoreConditions.ts\");\n/*\r\n * Created by aimozg on 21.10.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\nclass StepAction extends _CombatAction__WEBPACK_IMPORTED_MODULE_0__.CombatAction {\r\n    constructor(actor, target) {\r\n        super(actor);\r\n        this.target = target;\r\n        this.direction = _utils_gridutils__WEBPACK_IMPORTED_MODULE_2__.Direction.to(actor.gobj, target);\r\n        this.label = \"Step \" + this.direction.name;\r\n        this.tooltip = this.label;\r\n    }\r\n    get dpadLabel() { return \"Move\"; }\r\n    get dpadClass() { return \"dpad-move\"; }\r\n    disabledReason(cc) {\r\n        if (!cc.grid.hasxy(this.target.x, this.target.y))\r\n            return \"Occupied\";\r\n        if (!cc.grid.isempty(this.target))\r\n            return \"Occupied\";\r\n        return \"\";\r\n    }\r\n    async perform(cc) {\r\n        let actor = this.actor;\r\n        let gobj = actor.gobj;\r\n        // TODO ap cost\r\n        let apcost = 500;\r\n        apcost *= _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_3__.CombatRules.speedApFactorMove(actor.spe);\r\n        await cc.deduceAP(actor, apcost);\r\n        // TODO AOO, generic intercept (combat controller beforeMove)\r\n        let from = gobj.pos;\r\n        cc.grid.setPos(gobj, this.target);\r\n        await cc.grid.animateMovement(gobj, from, this.target, _CombatController__WEBPACK_IMPORTED_MODULE_1__.AnimationTimeFast).finished;\r\n        // TODO move to combat controller afterMove\r\n        if (actor.hasCondition(_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_4__.CoreConditions.Stealth)) {\r\n            await cc.doFullStealthCheck(actor);\r\n        }\r\n        return { success: true, intercepted: false };\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/actions/StepAction.ts?");

/***/ }),

/***/ "./src/engine/combat/actions/TeaseAction.tsx":
/*!***************************************************!*\
  !*** ./src/engine/combat/actions/TeaseAction.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TeaseAction\": () => (/* binding */ TeaseAction)\n/* harmony export */ });\n/* harmony import */ var _CombatAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CombatAction */ \"./src/engine/combat/CombatAction.ts\");\n/* harmony import */ var _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../game/combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n\r\n\r\n\r\n\r\nclass TeaseAction extends _CombatAction__WEBPACK_IMPORTED_MODULE_0__.CombatAction {\r\n    constructor(actor, target, free = false) {\r\n        super(actor);\r\n        this.target = target;\r\n        this.free = free;\r\n        this.label = \"Tease \" + this.target.name;\r\n        this.tooltip = \"Attempt to seduce \" + this.target.name + \" with your body\";\r\n    }\r\n    toString() {\r\n        return \"[TeaseAction \" + this.actor.name + \" \" + this.target.name + \" \" + (this.free ? \" (free)\" : \"\") + \"]\";\r\n    }\r\n    disabledReason(cc) {\r\n        // TODO impossible if actor has condition, or target is invulnerable/dead\r\n        return \"\";\r\n    }\r\n    async perform(cc) {\r\n        let attacker = this.actor;\r\n        let target = this.target;\r\n        if (!this.free) {\r\n            // TODO tease AP cost\r\n            let ap = 1000;\r\n            ap *= _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.speedApFactor(attacker.spe);\r\n            await cc.deduceAP(attacker, ap);\r\n        }\r\n        // TODO animations\r\n        // TODO preference&perversion-based results\r\n        let attack = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.teaseAttackVs(attacker, target);\r\n        let defense = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.teaseDefenseVs(target, attacker);\r\n        let toHit = defense - attack;\r\n        // TODO charisma\r\n        let attackRoll = cc.rng.d20();\r\n        let damage = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.teaseDamageVs(attacker, target);\r\n        let canCrit = true;\r\n        let critMult = 2;\r\n        let result = {\r\n            hit: false,\r\n            crit: false,\r\n            lust: 0\r\n        };\r\n        if (canCrit && attackRoll === 1) {\r\n            // TODO critical miss effects\r\n            result.crit = true;\r\n            cc.logActionVs(attacker, \"teases\", target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + attackRoll }, \"critical miss\"),\r\n                \"!\"));\r\n        }\r\n        else if (canCrit && attackRoll === 20) {\r\n            // TODO critical hit effects\r\n            result.hit = true;\r\n            result.crit = true;\r\n            cc.logActionVs(attacker, \"teases\", target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + attackRoll }, \"critical hit\"),\r\n                \"!\"));\r\n        }\r\n        else if (attackRoll !== 1 && attackRoll >= toHit || attackRoll === 20) {\r\n            cc.logActionVs(attacker, \"teases\", target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + attackRoll + attack.signed() + \" vs \" + defense }, \"hit\"),\r\n                \".\"));\r\n            result.hit = true;\r\n        }\r\n        else {\r\n            cc.logActionVs(attacker, \"teases\", target, (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { title: \"\" + attackRoll + \"+\" + attack.signed() + \" vs \" + defense }, \"miss\"),\r\n                \".\"));\r\n        }\r\n        if (result.hit) {\r\n            if (result.crit)\r\n                damage = _game_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.repeatPositive(damage, critMult);\r\n            result.lust = damage.roll(cc.rng);\r\n            await cc.doLustDamage(target, result.lust, attacker);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/actions/TeaseAction.tsx?");

/***/ }),

/***/ "./src/engine/combat/actions/UseAbilityAction.ts":
/*!*******************************************************!*\
  !*** ./src/engine/combat/actions/UseAbilityAction.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UseAbilityAction\": () => (/* binding */ UseAbilityAction)\n/* harmony export */ });\n/* harmony import */ var _CombatAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CombatAction */ \"./src/engine/combat/CombatAction.ts\");\n/* harmony import */ var _objects_Creature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../objects/Creature */ \"./src/engine/objects/Creature.ts\");\n/* harmony import */ var _AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../AbstractCombatAbility */ \"./src/engine/combat/AbstractCombatAbility.ts\");\n/*\r\n * Created by aimozg on 13.10.2022.\r\n */\r\n\r\n\r\n\r\nclass UseAbilityAction extends _CombatAction__WEBPACK_IMPORTED_MODULE_0__.CombatAction {\r\n    constructor(actor, ability, _target) {\r\n        super(actor);\r\n        this.ability = ability;\r\n        let target;\r\n        if (_target === \"self\") {\r\n            target = { type: _AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_2__.AbilityTargetType.SELF };\r\n        }\r\n        else if (_target instanceof _objects_Creature__WEBPACK_IMPORTED_MODULE_1__.Creature) {\r\n            target = { type: _AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_2__.AbilityTargetType.CREATURE, creature: _target };\r\n        }\r\n        else\r\n            target = _target;\r\n        if (ability.targetType !== target.type)\r\n            throw new Error(`Ability ${ability.name} incorrectly initialized with target ${target.type}`);\r\n        this.target = target;\r\n        this.label = ability.label(this);\r\n        this.tooltip = ability.tooltip(this);\r\n        this.energyCost = ability.energyCost(this);\r\n        this.apCost = ability.apCost(this);\r\n    }\r\n    disabledReason(cc) {\r\n        return this.ability.disabledReason(this);\r\n    }\r\n    get targetCreature() {\r\n        switch (this.target.type) {\r\n            case _AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_2__.AbilityTargetType.SELF:\r\n                return this.actor;\r\n            case _AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_2__.AbilityTargetType.CREATURE:\r\n                return this.target.creature;\r\n            default:\r\n                throw new Error(\"Target is not a creature\");\r\n        }\r\n    }\r\n    async perform(cc) {\r\n        return this.ability.perform(this, cc);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/combat/actions/UseAbilityAction.ts?");

/***/ }),

/***/ "./src/engine/logging/ConsoleLogger.ts":
/*!*********************************************!*\
  !*** ./src/engine/logging/ConsoleLogger.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ConsoleLogger\": () => (/* binding */ ConsoleLogger)\n/* harmony export */ });\n/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Logger */ \"./src/engine/logging/Logger.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\nclass ConsoleLogger extends _Logger__WEBPACK_IMPORTED_MODULE_0__.Logger {\r\n    constructor(name, level) {\r\n        super(level);\r\n        this.name = name;\r\n        let tag;\r\n        if (name.length <= ConsoleLogger.TAG_LENGTH) {\r\n            // \"com.package.Class\" ->\r\n            // \"[   com.package.Class]\"\r\n            tag = name;\r\n        }\r\n        else {\r\n            let parts = name.split(/\\./g);\r\n            let classname = parts.splice(-1, 1)[0];\r\n            if (classname.length >= ConsoleLogger.TAG_LENGTH) {\r\n                // \"com.package.SoLongNoPointShorteningPackages\" ->\r\n                // \"[SoLongNoPointShorten]\"\r\n                tag = classname.substring(0, ConsoleLogger.TAG_LENGTH);\r\n            }\r\n            else {\r\n                tag = classname;\r\n                let i = 0;\r\n                // \"com.game.utils.etc.ClassName\" -> (>20)\r\n                // \"c.game.utils.etc.ClassName\" -> (>20)\r\n                // \"c.g.utils.etc.ClassName\" -> (>20)\r\n                // \"c.g.u.etc.ClassName\" -> (<=20)\r\n                // \"[ c.g.u.etc.ClassName]\"\r\n                while (true) {\r\n                    let abbr = parts.join('.') + '.' + tag;\r\n                    if (abbr.length <= ConsoleLogger.TAG_LENGTH) {\r\n                        tag = abbr;\r\n                        break;\r\n                    }\r\n                    if (i >= parts.length) {\r\n                        // \"com.game.utils.misc.other.stuff.LongClassName\" ->\r\n                        // \"c.g.u.m.o.s.LongClassName\" -> (too long)\r\n                        // \"[.stuff.LongClassName]\r\n                        tag = classname.substring(classname.length - ConsoleLogger.TAG_LENGTH);\r\n                        break;\r\n                    }\r\n                    parts[i] = parts[i][0];\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n        this.tag = \"[\" + tag.padStart(ConsoleLogger.TAG_LENGTH, \" \") + \"]\";\r\n    }\r\n    doLog(level, message, ...rest) {\r\n        [message, rest] = _Logger__WEBPACK_IMPORTED_MODULE_0__.Logger.formatMessage(message, ...rest);\r\n        const dt = ((new Date().getTime() - t0) / 1000).toFixed(3).padStart(7, ' ');\r\n        switch (level) {\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.ERROR:\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.FATAL:\r\n                console.error(dt, this.tag, message, ...rest);\r\n                break;\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.WARNING:\r\n                console.warn(dt, this.tag, message, ...rest);\r\n                break;\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO:\r\n                console.info(dt, this.tag, message, ...rest);\r\n                break;\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.DEBUG:\r\n            case _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.TRACE:\r\n            default:\r\n                console.debug(dt, this.tag, message, ...rest);\r\n        }\r\n    }\r\n}\r\nConsoleLogger.TAG_LENGTH = 20;\r\nconst t0 = new Date().getTime();\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/logging/ConsoleLogger.ts?");

/***/ }),

/***/ "./src/engine/logging/LogManager.ts":
/*!******************************************!*\
  !*** ./src/engine/logging/LogManager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LogManager\": () => (/* binding */ LogManager)\n/* harmony export */ });\n/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Logger */ \"./src/engine/logging/Logger.ts\");\n/* harmony import */ var _ConsoleLogger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConsoleLogger */ \"./src/engine/logging/ConsoleLogger.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\n\r\nclass LogManager {\r\n    constructor() {\r\n        this.loggers = {};\r\n        this.levels = {\r\n            \"\": _Logger__WEBPACK_IMPORTED_MODULE_0__.LogLevel.INFO\r\n        };\r\n    }\r\n    get defaultLevel() {\r\n        return this.levels[\"\"];\r\n    }\r\n    set defaultLevel(level) {\r\n        this.setLevel(\"\", level);\r\n    }\r\n    setLevel(name, level) {\r\n        this.levels[name] = level;\r\n        for (let [k, v] of Object.entries(this.loggers)) {\r\n            v.level = this.levelFor(k);\r\n        }\r\n    }\r\n    levelFor(name) {\r\n        while (true) {\r\n            if (name in this.levels)\r\n                return this.levels[name];\r\n            let i = name.lastIndexOf('.');\r\n            if (i < 0)\r\n                return this.defaultLevel;\r\n            name = name.slice(0, i - 1);\r\n        }\r\n    }\r\n    createLogger(name) {\r\n        return new _ConsoleLogger__WEBPACK_IMPORTED_MODULE_1__.ConsoleLogger(name, this.levelFor(name));\r\n    }\r\n    loggerFor(name) {\r\n        var _a;\r\n        (_a = this.loggers)[name] ?? (_a[name] = this.createLogger(name));\r\n        return this.loggers[name];\r\n    }\r\n    static loggerFor(name) {\r\n        return LogManager.instance.loggerFor(name);\r\n    }\r\n}\r\nLogManager.instance = new LogManager();\r\nwindow.LogManager = LogManager;\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/logging/LogManager.ts?");

/***/ }),

/***/ "./src/engine/logging/Logger.ts":
/*!**************************************!*\
  !*** ./src/engine/logging/Logger.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LogLevel\": () => (/* binding */ LogLevel),\n/* harmony export */   \"Logger\": () => (/* binding */ Logger)\n/* harmony export */ });\nclass Logger {\r\n    constructor(level) {\r\n        this.level = level;\r\n    }\r\n    shouldLog(level) {\r\n        return level >= this.level;\r\n    }\r\n    log(level, message, ...rest) {\r\n        if (this.shouldLog(level)) {\r\n            if (message instanceof Error) {\r\n                rest = [message];\r\n                message = \"{}\";\r\n            }\r\n            else if (typeof message !== \"string\") {\r\n                message = String(message);\r\n            }\r\n            this.doLog(level, message, ...rest);\r\n        }\r\n    }\r\n    trace(message, ...rest) {\r\n        this.log(LogLevel.TRACE, message, ...rest);\r\n    }\r\n    debug(message, ...rest) {\r\n        this.log(LogLevel.DEBUG, message, ...rest);\r\n    }\r\n    info(message, ...rest) {\r\n        this.log(LogLevel.INFO, message, ...rest);\r\n    }\r\n    warn(message, ...rest) {\r\n        this.log(LogLevel.WARNING, message, ...rest);\r\n    }\r\n    error(message, ...rest) {\r\n        this.log(LogLevel.ERROR, message, ...rest);\r\n    }\r\n    fatal(message, ...rest) {\r\n        this.log(LogLevel.FATAL, message, ...rest);\r\n    }\r\n    static toString(x) {\r\n        if (typeof x === 'string')\r\n            return x;\r\n        if (typeof x === 'function')\r\n            return x.name;\r\n        if (x && typeof x === 'object' && x.props && typeof x.props === 'object') {\r\n            let v = x;\r\n            if (Array.isArray(v.props.children))\r\n                return v.props.children.map(c => Logger.toString(c)).join(\"\");\r\n            return Logger.toString(v.props.children);\r\n        }\r\n        if (Array.isArray(x)) {\r\n            if (x.length > 20) {\r\n                return \"[\" + x.slice(0, 20).map(c => Logger.toString(c)).join(\", \") + \", ...]\";\r\n            }\r\n            return \"[\" + x.map(c => Logger.toString(c)).join(\", \") + \"]\";\r\n        }\r\n        let s = String(x);\r\n        if (s === '[object Object]')\r\n            s = '[object ' + Object.getPrototypeOf(x).constructor.name + ']';\r\n        return s;\r\n    }\r\n    static formatMessage(message, ...rest) {\r\n        let s = message.replace(/\\{}/g, () => {\r\n            let x = rest.length === 0 ? \"[[missing argument]]\" : rest.splice(0, 1)[0];\r\n            return Logger.toString(x);\r\n        });\r\n        return [s, rest];\r\n    }\r\n}\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"ALL\"] = 0] = \"ALL\";\r\n    LogLevel[LogLevel[\"TRACE\"] = 1] = \"TRACE\";\r\n    LogLevel[LogLevel[\"DEBUG\"] = 2] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"INFO\"] = 3] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARNING\"] = 4] = \"WARNING\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 5] = \"ERROR\";\r\n    LogLevel[LogLevel[\"FATAL\"] = 6] = \"FATAL\";\r\n    LogLevel[LogLevel[\"NONE\"] = 7] = \"NONE\";\r\n})(LogLevel || (LogLevel = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/logging/Logger.ts?");

/***/ }),

/***/ "./src/engine/main.ts":
/*!****************************!*\
  !*** ./src/engine/main.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"runGame\": () => (/* binding */ runGame)\n/* harmony export */ });\n/* harmony import */ var _style_index_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/index.scss */ \"./src/engine/style/index.scss\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Game */ \"./src/engine/Game.ts\");\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n\r\n\r\nasync function main(options) {\r\n    let game = new _Game__WEBPACK_IMPORTED_MODULE_1__.Game(options);\r\n    await game.applicationStart();\r\n}\r\nfunction runGame(options) {\r\n    if (document.readyState === \"complete\") {\r\n        main(options).then();\r\n    }\r\n    else {\r\n        document.addEventListener(\"readystatechange\", () => {\r\n            if (document.readyState === \"complete\") {\r\n                main(options).then();\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/main.ts?");

/***/ }),

/***/ "./src/engine/math/Dice.ts":
/*!*********************************!*\
  !*** ./src/engine/math/Dice.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Dice\": () => (/* binding */ Dice),\n/* harmony export */   \"Dices\": () => (/* binding */ Dices),\n/* harmony export */   \"dice\": () => (/* binding */ dice)\n/* harmony export */ });\nclass Dice {\r\n    constructor(rolls, sides, bonus = 1, rangeFormat = false) {\r\n        this.rolls = rolls;\r\n        this.sides = sides;\r\n        this.bonus = bonus;\r\n        this.rangeFormat = rangeFormat;\r\n        if (!isFinite(rolls)\r\n            || !isFinite(sides)\r\n            || !isFinite(rolls)\r\n            || (sides | 0) < 0\r\n            || rangeFormat && rolls > 1)\r\n            throw new Error(`Invalid dice ${rolls} d ${sides} + ${bonus} / ${rangeFormat}`);\r\n        this.rolls |= 0;\r\n        this.sides |= 0;\r\n        this.bonus |= 0;\r\n        // 0dX && Xd0 -> 0\r\n        if (this.rolls === 0)\r\n            this.sides = 0;\r\n        else if (this.sides === 0)\r\n            this.rolls = 0;\r\n    }\r\n    toString() {\r\n        const { rolls, sides, bonus } = this;\r\n        if (rolls === 0 || sides === 0)\r\n            return String(bonus);\r\n        if (this.rangeFormat)\r\n            return String(this.min) + \"..\" + String(this.max);\r\n        let s = \"\" + rolls + \"d\" + sides;\r\n        if (bonus > 0)\r\n            s += \"+\" + bonus;\r\n        else if (bonus < 0)\r\n            s += bonus;\r\n        return s;\r\n    }\r\n    get min() { return this.bonus + this.rolls; }\r\n    get max() { return this.bonus + this.rolls * this.sides; }\r\n    roll(rng) {\r\n        return rng.dice(this.rolls, this.sides) + this.bonus;\r\n    }\r\n    inverse() {\r\n        return new Dice(-this.rolls, this.sides, -this.bonus);\r\n    }\r\n    withBonus(bonus) {\r\n        if (bonus === 0)\r\n            return this;\r\n        return new Dice(this.rolls, this.sides, this.bonus + bonus);\r\n    }\r\n    repeat(n) {\r\n        if (n === 0)\r\n            return Dices.ZERO;\r\n        if (n === 1)\r\n            return this;\r\n        return new Dice(this.rolls * n, this.sides, this.bonus * n);\r\n    }\r\n    static ranged(min, max) {\r\n        if (min > max)\r\n            throw new Error(`Invalid dice ${min}..${max}`);\r\n        if (min < 0 && max < 0)\r\n            return Dice.ranged(-max, -min).inverse();\r\n        return new Dice(1, max - min + 1, min - 1);\r\n    }\r\n    /**\r\n     * Spec formats:\r\n     * * X (can be signed)\r\n     * * XdY\r\n     * * XdY+Z, XdY-Z\r\n     * * X..Y (inclusive, can be signed)\r\n     */\r\n    static parse(spec) {\r\n        let rolls, sides, bonus;\r\n        let d = spec.indexOf('d');\r\n        if (d < 0) {\r\n            d = spec.indexOf('..');\r\n            if (d < 0) {\r\n                // X\r\n                bonus = parseInt(spec);\r\n                return new Dice(0, 0, bonus);\r\n            }\r\n            // X..Y\r\n            let min = parseInt(spec.substring(0, d));\r\n            let max = parseInt(spec.substring(d + 1));\r\n            return Dice.ranged(min, max);\r\n        }\r\n        // XdY\r\n        rolls = parseInt(spec.substring(0, d));\r\n        let p = spec.indexOf('+');\r\n        if (p < 0)\r\n            p = spec.indexOf(\"-\");\r\n        if (p < 0) {\r\n            sides = parseInt(spec.substring(d + 1));\r\n            bonus = 0;\r\n        }\r\n        else {\r\n            sides = parseInt(spec.substring(d + 1, p));\r\n            bonus = parseInt(spec.substring(p));\r\n        }\r\n        return new Dice(rolls, sides, bonus);\r\n    }\r\n}\r\nlet lib = new Map();\r\n/**\r\n * Spec formats:\r\n * * X (can be signed)\r\n * * XdY\r\n * * XdY+Z, XdY-Z\r\n * * X..Y (can be signed)\r\n */\r\nfunction dice(spec) {\r\n    if (lib.has(spec))\r\n        return lib.get(spec);\r\n    let dice = Dice.parse(spec);\r\n    if (dice.bonus === 0)\r\n        lib.set(spec, dice);\r\n    return dice;\r\n}\r\nconst Dices = {\r\n    ZERO: dice(\"0\"),\r\n    x1d2: dice(\"1d2\"),\r\n    x1d3: dice(\"1d3\"),\r\n    x1d4: dice(\"1d4\"),\r\n    x1d6: dice(\"1d6\"),\r\n    x2d6: dice(\"2d6\"),\r\n    x3d6: dice(\"3d6\"),\r\n    x4d6: dice(\"4d6\"),\r\n    x5d6: dice(\"5d6\"),\r\n    x6d6: dice(\"6d6\"),\r\n    x1d8: dice(\"1d8\"),\r\n    x1d10: dice(\"1d10\"),\r\n    x1d12: dice(\"1d12\"),\r\n    x1d20: dice(\"1d20\"),\r\n    x1d100: dice(\"1d100\"),\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/math/Dice.ts?");

/***/ }),

/***/ "./src/engine/math/Random.ts":
/*!***********************************!*\
  !*** ./src/engine/math/Random.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Random\": () => (/* binding */ Random)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\nclass Random {\r\n    constructor() {\r\n        this.hasNextGaussian = false;\r\n    }\r\n    /**\r\n     * Random float between 0 (inclusive) and 1 (exclusive)\r\n     */\r\n    next01() {\r\n        return this.nextBits(26) * (2 ** -26) + this.nextBits(27) * (2 ** -53);\r\n    }\r\n    nextFloat(...args) {\r\n        let x = this.next01();\r\n        if (arguments.length === 0)\r\n            return x;\r\n        let min, max;\r\n        if (arguments.length === 2) {\r\n            min = arguments[0];\r\n            max = arguments[1];\r\n        }\r\n        else if (arguments.length === 1) {\r\n            min = 0;\r\n            max = arguments[0];\r\n        }\r\n        let d = max - min;\r\n        return x * d + min;\r\n    }\r\n    nextBits(bitCount) {\r\n        bitCount |= 0;\r\n        if (bitCount === 0)\r\n            return 0;\r\n        if (bitCount < 0 || bitCount > 32)\r\n            throw new Error(\"Invalid bitCount\");\r\n        let x = this.nextI32();\r\n        if (bitCount === 32)\r\n            return x;\r\n        let mask = (1 << bitCount) - 1;\r\n        return x & mask;\r\n    }\r\n    /**\r\n     * Generate random integer:\r\n     * - nextInt(): random 32-bit integer\r\n     * - nextInt(max): between 0 (inclusive) and max (exclusive)\r\n     * - nextInt(min,max) between min (inclusive) and max (exclusive)\r\n     */\r\n    nextInt(...args) {\r\n        let min, max;\r\n        if (arguments.length === 0)\r\n            return this.nextI32();\r\n        if (arguments.length === 1) {\r\n            min = 0;\r\n            max = arguments[0];\r\n        }\r\n        if (arguments.length === 2) {\r\n            min = arguments[0];\r\n            max = arguments[1];\r\n        }\r\n        let n = max - min;\r\n        if (n === 0)\r\n            return min;\r\n        if (n < 0)\r\n            throw new Error(\"Invalid nextInt bounds\");\r\n        if (n > 1 << 30)\r\n            return Math.floor(this.nextFloat.apply(this, arguments));\r\n        let rnd = this.nextInt() >>> 1;\r\n        return rnd % n + min;\r\n    }\r\n    nextBoolean(trueChance = 0.5) {\r\n        if (trueChance <= 0.0)\r\n            return false;\r\n        if (trueChance >= 1.0)\r\n            return true;\r\n        return this.next01() < trueChance;\r\n    }\r\n    nextGaussian(variance = 1.0, mean = 0.0) {\r\n        let g;\r\n        if (this.hasNextGaussian) {\r\n            this.hasNextGaussian = false;\r\n            g = this.savedGaussian;\r\n        }\r\n        else {\r\n            let v1, v2, s;\r\n            do {\r\n                v1 = 2 * this.next01() - 1;\r\n                v2 = 2 * this.next01() - 1;\r\n                s = v1 * v1 + v2 * v2;\r\n            } while (s >= 1 || s == 0);\r\n            let multiplier = Math.sqrt(-2 * Math.log(s) / s);\r\n            this.savedGaussian = v2 * multiplier;\r\n            this.hasNextGaussian = true;\r\n            g = v1 * multiplier;\r\n        }\r\n        return g * variance + mean;\r\n    }\r\n    dice(rolls, sides) {\r\n        rolls |= 0;\r\n        sides |= 0;\r\n        if (rolls === 0 || sides === 0)\r\n            return 0;\r\n        if (sides === 1)\r\n            return rolls;\r\n        if (rolls < 0)\r\n            return -this.dice(-rolls, sides);\r\n        if (sides < 0)\r\n            throw new Error(\"Invalid dice \" + rolls + \"d\" + sides);\r\n        let accum = 0;\r\n        while (rolls-- > 0)\r\n            accum += 1 + this.nextInt(sides);\r\n        return accum;\r\n    }\r\n    d2(rolls = 1) { return this.dice(rolls, 2); }\r\n    d3(rolls = 1) { return this.dice(rolls, 3); }\r\n    d4(rolls = 1) { return this.dice(rolls, 4); }\r\n    d5(rolls = 1) { return this.dice(rolls, 5); }\r\n    d6(rolls = 1) { return this.dice(rolls, 6); }\r\n    d8(rolls = 1) { return this.dice(rolls, 8); }\r\n    d10(rolls = 1) { return this.dice(rolls, 10); }\r\n    d12(rolls = 1) { return this.dice(rolls, 12); }\r\n    d20(rolls = 1) { return this.dice(rolls, 20); }\r\n    d100(rolls = 1) { return this.dice(rolls, 100); }\r\n    roll(dice) {\r\n        return this.dice(dice.rolls, dice.sides) + dice.bonus;\r\n    }\r\n    /**\r\n     * Generate a random permutation of numbers between from (inclusive) and to (inclusive)\r\n     */\r\n    numberPermutation(to, from = 1) {\r\n        let n = from + 1 - to;\r\n        let result = new Int32Array(n);\r\n        for (let i = 0; i < n; i++)\r\n            result[i] = i + to;\r\n        this.shuffle(result);\r\n        return result;\r\n    }\r\n    /**\r\n     * In-place random permutation of elements of source\r\n     */\r\n    shuffle(source) {\r\n        let n = source.length;\r\n        // Fisher-Yates shuffle\r\n        for (let i = 0; i < n - 2; i++) {\r\n            let j = i + this.nextInt(n - i);\r\n            let old = source[i];\r\n            source[i] = source[j];\r\n            source[j] = old;\r\n        }\r\n        return source;\r\n    }\r\n    pick(source) {\r\n        if (source.length === 0)\r\n            throw new Error(\"Cannot pick from empty list\");\r\n        if (source.length === 1)\r\n            return source[0];\r\n        return source[this.nextInt(source.length)];\r\n    }\r\n    either(...options) {\r\n        return this.pick(options);\r\n    }\r\n    pickOrNull(source) {\r\n        if (source.length === 0)\r\n            return null;\r\n        return this.pick(source);\r\n    }\r\n    pickWeighted(source, weightFn) {\r\n        let e = this.pickWeightedOrNull(source, weightFn);\r\n        if (e === null)\r\n            throw new Error(\"Cannot pick from empty list\");\r\n        return e;\r\n    }\r\n    pickWeightedOrNull(source, weightFn) {\r\n        if (source.length === 0)\r\n            return null;\r\n        // Single-pass weighted random\r\n        // At each iteration i:\r\n        // - if Z <= w(i) / S(i), pick x_i\r\n        // - if Z >  w(i) / S(i), pick unchanged\r\n        // where Z is random(0..1), w(i) is weight of x_i,\r\n        // S(i) = w(1) + w(2) + ... + w(i) = partial sum\r\n        let pick = null;\r\n        let z = this.nextFloat();\r\n        let sum = 0;\r\n        for (let e of source) {\r\n            let w = weightFn(e);\r\n            if (w >= Infinity)\r\n                return e;\r\n            if (w <= 0)\r\n                continue;\r\n            if (isNaN(w))\r\n                throw new Error(\"Invalid weighted random element\");\r\n            sum += w;\r\n            if (z <= w / sum)\r\n                pick = e;\r\n        }\r\n        return pick;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/math/Random.ts?");

/***/ }),

/***/ "./src/engine/math/XorWowRandom.ts":
/*!*****************************************!*\
  !*** ./src/engine/math/XorWowRandom.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"XorWowRandom\": () => (/* binding */ XorWowRandom)\n/* harmony export */ });\n/* harmony import */ var _Random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Random */ \"./src/engine/math/Random.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\n/**\r\n * A modification of JetBrains XorWowRandom which exposes the state for serialization\r\n *\r\n * ----\r\n *\r\n * Random number generator, using Marsaglia's \"xorwow\" algorithm\r\n *\r\n * Cycles after 2^192 - 2^32 repetitions.\r\n *\r\n * For more details, see Marsaglia, George (July 2003). \"Xorshift RNGs\". Journal of Statistical Software. 8 (14). doi:10.18637/jss.v008.i14\r\n *\r\n * Available at https://www.jstatsoft.org/v08/i14/paper\r\n *\r\n */\r\nclass XorWowRandom extends _Random__WEBPACK_IMPORTED_MODULE_0__.Random {\r\n    constructor(x, y, z, w, v, addend, warmup = true) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n        this.v = v;\r\n        this.addend = addend;\r\n        this.x |= 0;\r\n        this.y |= 0;\r\n        this.z |= 0;\r\n        this.w |= 0;\r\n        this.v |= 0;\r\n        this.addend |= 0;\r\n        this.validate();\r\n        if (warmup)\r\n            for (let n = 64; n-- > 0;)\r\n                this.nextI32();\r\n    }\r\n    static create(seed1 = (Math.random() * (1 << 31)) | 0, seed2 = (Math.random() * (1 << 31)) | 0) {\r\n        return new XorWowRandom(seed1, seed2, 0, 0, ~seed1, (seed1 << 10) ^ (seed2 >>> 4), true);\r\n    }\r\n    validate() {\r\n        if (this.x === 0 && this.y === 0 && this.z === 0 && this.w === 0 && this.v === 0)\r\n            throw new Error(\"Initial state must have at least one non-zero element\");\r\n    }\r\n    saveState() {\r\n        return ['XorWowRandom', this.x, this.y, this.z, this.w, this.v, this.addend];\r\n    }\r\n    loadState(state) {\r\n        if (!Array.isArray(state) || state.length !== 7 || state[0] !== 'XorWowRandom')\r\n            throw new Error(\"Invalid random state for XorWowRandom\");\r\n        this.x = state[1] | 0;\r\n        this.y = state[2] | 0;\r\n        this.z = state[3] | 0;\r\n        this.w = state[4] | 0;\r\n        this.v = state[5] | 0;\r\n        this.addend = state[6] | 0;\r\n        this.validate();\r\n    }\r\n    nextI32() {\r\n        let t = this.x;\r\n        t = t ^ (t >>> 2);\r\n        // noinspection JSSuspiciousNameCombination\r\n        this.x = this.y;\r\n        this.y = this.z;\r\n        this.z = this.w;\r\n        let v0 = this.v;\r\n        this.w = v0;\r\n        t = (t ^ (t << 1)) ^ v0 ^ (v0 << 4);\r\n        this.v = t;\r\n        this.addend += 362437;\r\n        return (t + this.addend) | 0;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/math/XorWowRandom.ts?");

/***/ }),

/***/ "./src/engine/math/fxrng.ts":
/*!**********************************!*\
  !*** ./src/engine/math/fxrng.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _XorWowRandom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./XorWowRandom */ \"./src/engine/math/XorWowRandom.ts\");\n\r\nlet fxrng = _XorWowRandom__WEBPACK_IMPORTED_MODULE_0__.XorWowRandom.create();\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fxrng);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/math/fxrng.ts?");

/***/ }),

/***/ "./src/engine/math/utils.ts":
/*!**********************************!*\
  !*** ./src/engine/math/utils.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"atLeast\": () => (/* binding */ atLeast),\n/* harmony export */   \"atMost\": () => (/* binding */ atMost),\n/* harmony export */   \"coerce\": () => (/* binding */ coerce),\n/* harmony export */   \"lint\": () => (/* binding */ lint)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 21.07.2022.\r\n */\r\nfunction coerce(value, min, max) {\r\n    if (value < min)\r\n        return min;\r\n    if (value > max)\r\n        return max;\r\n    return value;\r\n}\r\nconst atLeast = Math.max;\r\nconst atMost = Math.min;\r\n/** Linear interpolation */\r\nfunction lint(t, value0, value1) {\r\n    return value0 + (value1 - value0) * t;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/math/utils.ts?");

/***/ }),

/***/ "./src/engine/objects/BaseItem.ts":
/*!****************************************!*\
  !*** ./src/engine/objects/BaseItem.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseItem\": () => (/* binding */ BaseItem),\n/* harmony export */   \"BaseItemComponent\": () => (/* binding */ BaseItemComponent),\n/* harmony export */   \"registerItemComponent\": () => (/* binding */ registerItemComponent)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/* harmony import */ var _Item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Item */ \"./src/engine/objects/Item.ts\");\n/*\r\n * Created by aimozg on 23.07.2022.\r\n */\r\n\r\n\r\nclass BaseItem {\r\n    constructor(resId, name) {\r\n        this.resId = resId;\r\n        this.name = name;\r\n        this.components = [];\r\n    }\r\n    get resType() { return _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeBaseItem; }\r\n    spawn() {\r\n        return new _Item__WEBPACK_IMPORTED_MODULE_1__.Item(this);\r\n    }\r\n    get isWeapon() { return !!this.weapon; }\r\n    ;\r\n    get isArmor() { return !!this.armor; }\r\n    ;\r\n    get isConsumable() { return !!this.consumable; }\r\n    ;\r\n}\r\nclass BaseItemComponent {\r\n    constructor(base) {\r\n        this.base = base;\r\n        base.components.push(this);\r\n    }\r\n}\r\nfunction registerItemComponent(propComp, propIs, propIf, accessor) {\r\n    Object.defineProperty(_Item__WEBPACK_IMPORTED_MODULE_1__.Item.prototype, propComp, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        get() {\r\n            return accessor(this.base);\r\n        }\r\n    });\r\n    Object.defineProperty(_Item__WEBPACK_IMPORTED_MODULE_1__.Item.prototype, propIs, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        get() {\r\n            return !!accessor(this.base);\r\n        }\r\n    });\r\n    Object.defineProperty(_Item__WEBPACK_IMPORTED_MODULE_1__.Item.prototype, propIf, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        get() {\r\n            return accessor(this.base) ? this : null;\r\n        }\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/BaseItem.ts?");

/***/ }),

/***/ "./src/engine/objects/Color.ts":
/*!*************************************!*\
  !*** ./src/engine/objects/Color.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Color\": () => (/* binding */ Color),\n/* harmony export */   \"colorSortKey\": () => (/* binding */ colorSortKey)\n/* harmony export */ });\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinycolor2 */ \"./node_modules/tinycolor2/tinycolor.js\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_0__);\n/*\r\n * Created by aimozg on 28.07.2022.\r\n */\r\n\r\nclass Color {\r\n    constructor(name, rgb) {\r\n        this.name = name;\r\n        this.rgb = rgb;\r\n        this.hsv = tinycolor2__WEBPACK_IMPORTED_MODULE_0__(this.rgb).toHsv();\r\n    }\r\n    equals(other) {\r\n        if (this === other)\r\n            return true;\r\n        if (other === null)\r\n            return false;\r\n        return this.name === other.name && this.rgb === other.rgb;\r\n    }\r\n}\r\nColor.DEFAULT_WHITE = new Color(\"white\", \"#ffffff\");\r\n/**\r\n * Key to sort the colors in order \"desaturated black-to-white, then saturated by hue\"\r\n */\r\nfunction colorSortKey(c) {\r\n    let { h, s, v } = c.hsv;\r\n    h = (h + 30) % 360;\r\n    if (s < 0.2 || v < 0.33)\r\n        return (v + s * h / 3600);\r\n    return 10 + (h + s * c.hsv.v / 10) / 360;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/Color.ts?");

/***/ }),

/***/ "./src/engine/objects/Creature.ts":
/*!****************************************!*\
  !*** ./src/engine/objects/Creature.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Creature\": () => (/* binding */ Creature),\n/* harmony export */   \"CreatureTexts\": () => (/* binding */ CreatureTexts)\n/* harmony export */ });\n/* harmony import */ var _rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../rules/TAttribute */ \"./src/engine/rules/TAttribute.ts\");\n/* harmony import */ var _rules_gender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rules/gender */ \"./src/engine/rules/gender.ts\");\n/* harmony import */ var _game_data_text_gender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../game/data/text/gender */ \"./src/game/data/text/gender.ts\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _game_data_items_NaturalWeaponLib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../game/data/items/NaturalWeaponLib */ \"./src/game/data/items/NaturalWeaponLib.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _MonsterAI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MonsterAI */ \"./src/engine/objects/MonsterAI.ts\");\n/* harmony import */ var _Inventory__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Inventory */ \"./src/engine/objects/Inventory.ts\");\n/* harmony import */ var _game_xp__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../game/xp */ \"./src/game/xp.ts\");\n/*\r\n * Created by aimozg on 10.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet objectIdCounter = 0;\r\nclass CreatureTexts {\r\n    constructor(creature) {\r\n        this.creature = creature;\r\n    }\r\n    get race() {\r\n        return this.creature.rgroup.name.toLowerCase();\r\n    }\r\n    get sex() {\r\n        switch (this.creature.sex) {\r\n            case \"n\": return \"sexless\";\r\n            case \"m\": return \"male\";\r\n            case \"f\": return \"female\";\r\n            case \"h\": return \"futanari\";\r\n        }\r\n    }\r\n}\r\nclass Creature {\r\n    ////////////////////////////////////////////////////////////////////////////////\r\n    //     METHODS\r\n    ////////////////////////////////////////////////////////////////////////////////\r\n    constructor() {\r\n        //////////////////////\r\n        // Body Stats - Data\r\n        //////////////////////\r\n        this.name = \"Unnamed\";\r\n        this._sex = _rules_gender__WEBPACK_IMPORTED_MODULE_1__.SEX_NONE;\r\n        this.genderOverride = null;\r\n        this.rgroup = _Game__WEBPACK_IMPORTED_MODULE_5__.Game.instance.idata.rgHumanoid;\r\n        this.txt = new CreatureTexts(this);\r\n        //////////////////////\r\n        // Main Stats - Data\r\n        //////////////////////\r\n        this.level = 1;\r\n        this.xp = 0;\r\n        this._hp = 1;\r\n        this._hpMax = 1;\r\n        this.baseHpPerLevel = 10;\r\n        this._ep = 1;\r\n        this._epMax = 1;\r\n        this.baseEpPerLevel = 10;\r\n        this._lp = 0;\r\n        this._lpMax = 1;\r\n        this.baseLpMax = 100;\r\n        //////////////////////\r\n        // Attributes - Data\r\n        //////////////////////\r\n        this.naturalAttrs = Array(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttributes.length).fill(5);\r\n        this.naturalLib = 0;\r\n        this.naturalPerv = 0;\r\n        this.cor = 0;\r\n        //--------------//\r\n        // Items - Data //\r\n        //--------------//\r\n        this._money = 0;\r\n        // TODO externalize\r\n        this._fists = _game_data_items_NaturalWeaponLib__WEBPACK_IMPORTED_MODULE_4__.NaturalWeaponLib.NaturalFists.spawn();\r\n        // TODO EquipmentSlot system\r\n        this._mainHandItem = null;\r\n        this._bodyArmor = null;\r\n        // TODO move inventory size to game rules\r\n        this.inventory = new _Inventory__WEBPACK_IMPORTED_MODULE_7__.Inventory(\"Inventory\", 20);\r\n        this.loot = { money: 0, items: [] };\r\n        ///////////////////\r\n        // Combat - Data //\r\n        ///////////////////\r\n        /** Action Points */\r\n        this.ap = 0;\r\n        this.gobj = null;\r\n        this.ai = new _MonsterAI__WEBPACK_IMPORTED_MODULE_6__.DefaultMonsterAI(this);\r\n        // TODO make these computable\r\n        this.abilities = [];\r\n        this.conditions = new Set();\r\n        //---------------//\r\n        // Skills - Data //\r\n        //---------------//\r\n        /** key: skill id */\r\n        this.naturalSkills = {};\r\n        ///////////////////\r\n        // Traits - Data //\r\n        ///////////////////\r\n        this.traits = new Set();\r\n    }\r\n    get sex() { return this._sex; }\r\n    get gender() {\r\n        return this.genderOverride ?? (0,_rules_gender__WEBPACK_IMPORTED_MODULE_1__.defaultGender)(this.sex); // TODO futa gender is fem-dependent\r\n    }\r\n    /////////////////////////\r\n    // Body Stats - Helpers\r\n    /////////////////////////\r\n    get pronouns() { return _game_data_text_gender__WEBPACK_IMPORTED_MODULE_2__.Pronouns[this.gender]; }\r\n    get hp() {\r\n        this.updateStats();\r\n        return this._hp;\r\n    }\r\n    set hp(value) {\r\n        if (!isFinite(value))\r\n            throw new Error(\"HP must be finite\");\r\n        this._hp = value;\r\n    }\r\n    get hpMax() {\r\n        this.updateStats();\r\n        return this._hpMax;\r\n    }\r\n    get ep() {\r\n        this.updateStats();\r\n        return this._ep;\r\n    }\r\n    set ep(value) {\r\n        if (!isFinite(value))\r\n            throw new Error(\"EP must be finite\");\r\n        this._ep = value;\r\n    }\r\n    get epMax() {\r\n        this.updateStats();\r\n        return this._epMax;\r\n    }\r\n    get lp() {\r\n        this.updateStats();\r\n        return this._lp;\r\n    }\r\n    set lp(value) {\r\n        if (!isFinite(value))\r\n            throw new Error(\"LP must be finite\");\r\n        this._lp = value;\r\n    }\r\n    get lpMax() {\r\n        this.updateStats();\r\n        return this._lpMax;\r\n    }\r\n    /////////////////////////\r\n    // Main Stats - Helpers\r\n    /////////////////////////\r\n    nextLevelXp() {\r\n        if (this.level >= _game_xp__WEBPACK_IMPORTED_MODULE_8__.MaxLevel)\r\n            return Infinity;\r\n        return _game_xp__WEBPACK_IMPORTED_MODULE_8__.XpPerLevel[this.level];\r\n    }\r\n    canLevelUp() {\r\n        return this.xp >= this.nextLevelXp();\r\n    }\r\n    get hpRatio() { return this.hp / this.hpMax; }\r\n    /////////////////////////\r\n    // Attributes - Helpers\r\n    /////////////////////////\r\n    get lib() {\r\n        return this.naturalLib + this.cor;\r\n    }\r\n    get perv() {\r\n        return Math.max(this.naturalPerv, this.cor);\r\n    }\r\n    attr(id) {\r\n        return this.naturalAttrs[id];\r\n    }\r\n    attrMod(id) { return this.attr(id) - 5; }\r\n    /** Strength */\r\n    get str() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.STR); }\r\n    /** Strength modifier */\r\n    get strMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.STR); }\r\n    /** Dexterity */\r\n    get dex() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.DEX); }\r\n    /** Dexterity modifier */\r\n    get dexMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.DEX); }\r\n    /** Constitution */\r\n    get con() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CON); }\r\n    /** Constitution modifier */\r\n    get conMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CON); }\r\n    /** Speed */\r\n    get spe() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.SPE); }\r\n    /** Perception modifier */\r\n    get speMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.SPE); }\r\n    /** Perception */\r\n    get per() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.PER); }\r\n    /** Perception modifier */\r\n    get perMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.PER); }\r\n    /** Intellect */\r\n    get int() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.INT); }\r\n    /** Intellect modifier */\r\n    get intMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.INT); }\r\n    /** Wisdom */\r\n    get wis() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.WIS); }\r\n    /** Wisdom modifier */\r\n    get wisMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.WIS); }\r\n    /** Charisma */\r\n    get cha() { return this.attr(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CHA); }\r\n    /** Charisma modifier */\r\n    get chaMod() { return this.attrMod(_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CHA); }\r\n    //---------------//\r\n    // Derived Stats //\r\n    //---------------//\r\n    /** Universal fortitude */\r\n    get fortitude() {\r\n        // TODO other sources (base value, buffs)\r\n        return this.conMod;\r\n    }\r\n    /** Universal reflex saving throw */\r\n    get reflex() {\r\n        // TODO other sources (base value, buffs)\r\n        return this.dexMod;\r\n    }\r\n    /** Universal willpower saving throw */\r\n    get willpower() {\r\n        // TODO other sources (base value, buffs)\r\n        return this.wisMod;\r\n    }\r\n    /** Universal damage reduction */\r\n    get dmgRedAll() {\r\n        let value = 0;\r\n        // TODO or natural armor\r\n        value += this.bodyArmor?.asArmor?.drBonus ?? 0;\r\n        // TODO other sources (equipment, buffs)\r\n        return value;\r\n    }\r\n    get money() { return this._money; }\r\n    set money(value) {\r\n        if (!isFinite(value))\r\n            throw new Error(\"Attempt to set money to \" + value);\r\n        this._money = value | 0;\r\n    }\r\n    get fists() { return this._fists; }\r\n    setFists(item) { this._fists = item; }\r\n    get mainHandItem() { return this._mainHandItem; }\r\n    setMainHandItem(item) { this._mainHandItem = item; }\r\n    get bodyArmor() { return this._bodyArmor; }\r\n    setBodyArmor(item) { this._bodyArmor = item; }\r\n    //-----------------//\r\n    // Items - Helpers //\r\n    //-----------------//\r\n    get currentWeapon() {\r\n        return this.mainHandItem?.ifWeapon ?? this.fists;\r\n    }\r\n    get meleeWeapon() {\r\n        let mw = this.mainHandItem;\r\n        if (mw?.ifWeapon /* TODO and mw is melee weapon */)\r\n            return mw;\r\n        return this.fists;\r\n    }\r\n    addToInventory(item) {\r\n        this.inventory.addItem(item);\r\n    }\r\n    removeFromInventory(item) {\r\n        if (this.inventory.removeItem(item)) {\r\n            return item;\r\n        }\r\n        return null;\r\n    }\r\n    //////////////////////\r\n    // Combat - Helpers //\r\n    //////////////////////\r\n    get isAlive() { return this.hp > 0; }\r\n    hasCondition(condition) {\r\n        return this.conditions.has(condition);\r\n    }\r\n    setCondition(condition) {\r\n        this.conditions.add(condition);\r\n    }\r\n    removeCondition(condition) {\r\n        return this.conditions.delete(condition);\r\n    }\r\n    //------------------//\r\n    // Skills - Helpers //\r\n    //------------------//\r\n    naturalSkillValue(skill) {\r\n        return this.naturalSkills[skill.resId] ?? 0;\r\n    }\r\n    skillValue(skill) {\r\n        return this.naturalSkillValue(skill) + (skill.attr >= 0 ? this.attrMod(skill.attr) : 0);\r\n    }\r\n    //////////////////////\r\n    // Traits - Helpers //\r\n    //////////////////////\r\n    traitList() {\r\n        return Array.from(this.traits.values()).sortOn(\"name\");\r\n    }\r\n    hasTrait(trait) {\r\n        if (typeof trait === 'string')\r\n            trait = _Game__WEBPACK_IMPORTED_MODULE_5__.Game.instance.data.trait(trait);\r\n        return this.traits.has(trait);\r\n    }\r\n    addTrait(trait) {\r\n        this.traits.add(trait);\r\n    }\r\n    ///////////////////\r\n    // Other Helpers //\r\n    ///////////////////\r\n    get rng() { return _Game__WEBPACK_IMPORTED_MODULE_5__.Game.instance.rng; }\r\n    updateStats() {\r\n        // hp max\r\n        let oldHpMax = this._hpMax;\r\n        let newHpMax = Math.max(1, this.level * (this.baseHpPerLevel + this.conMod));\r\n        if (newHpMax !== oldHpMax) {\r\n            if (this._hp > 0) {\r\n                this._hp = (0,_math_utils__WEBPACK_IMPORTED_MODULE_3__.coerce)(1, Math.round(this._hp * newHpMax / oldHpMax), newHpMax);\r\n            }\r\n            this._hpMax = newHpMax;\r\n        }\r\n        // ep max\r\n        let oldEpMax = this._epMax;\r\n        let newEpMax = Math.max(1, this.level * (this.baseEpPerLevel + this.conMod));\r\n        if (newEpMax !== oldEpMax) {\r\n            if (this._ep > 0) {\r\n                this._ep = (0,_math_utils__WEBPACK_IMPORTED_MODULE_3__.coerce)(1, Math.round(this._ep * newEpMax / oldEpMax), newEpMax);\r\n            }\r\n            this._epMax = newEpMax;\r\n        }\r\n        // lp max\r\n        let oldLpMax = this._lpMax;\r\n        let newLpMax = Math.max(1, this.baseLpMax);\r\n        if (newLpMax !== oldLpMax) {\r\n            if (this._lp > 0) {\r\n                this._lp = (0,_math_utils__WEBPACK_IMPORTED_MODULE_3__.coerce)(1, Math.round(this._lp * newLpMax / oldLpMax), newLpMax);\r\n            }\r\n            this._lpMax = newLpMax;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/Creature.ts?");

/***/ }),

/***/ "./src/engine/objects/Inventory.ts":
/*!*****************************************!*\
  !*** ./src/engine/objects/Inventory.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Inventory\": () => (/* binding */ Inventory)\n/* harmony export */ });\nclass Inventory {\r\n    constructor(name, size) {\r\n        this._name = name;\r\n        this.slots = [];\r\n        this.addSlots(size);\r\n    }\r\n    toString() { return `[Inventory \"${this.name}\"(${this.size})]`; }\r\n    [Symbol.iterator]() {\r\n        return this.slots[Symbol.iterator]();\r\n    }\r\n    get name() { return this._name; }\r\n    set name(value) { this._name = value; }\r\n    get size() { return this.slots.length; }\r\n    addSlots(n) {\r\n        while (n-- > 0) {\r\n            this.slots.push(null);\r\n        }\r\n    }\r\n    ensureSlots(n) {\r\n        if (this.size < n)\r\n            this.addSlots(n - this.size);\r\n    }\r\n    ensureEmptySlots(n) {\r\n        this.ensureSlots(this.size + n - this.emptySlotCount());\r\n    }\r\n    get items() {\r\n        return this.slots.filter(i => !!i);\r\n    }\r\n    get isEmpty() { return this.slots.every(e => !e); }\r\n    ;\r\n    get isFull() { return this.slots.every(e => !!e); }\r\n    ;\r\n    emptySlot() {\r\n        return this.slots.findIndex(i => !i);\r\n    }\r\n    emptySlotCount() {\r\n        return this.slots.count(i => !i);\r\n    }\r\n    canTake(item) {\r\n        // TODO stacking\r\n        return this.emptySlot() >= 0;\r\n    }\r\n    canTakeAll(items) {\r\n        // TODO stacking\r\n        return this.emptySlotCount() >= items.length;\r\n    }\r\n    addItem(item) {\r\n        if (this.includes(item))\r\n            throw new Error(`Item ${item} already in ${this}`);\r\n        let es = this.emptySlot(); // TODO stacking\r\n        if (es < 0)\r\n            return false;\r\n        this.slots[es] = item;\r\n        return true;\r\n    }\r\n    /**\r\n     * Add multiple items to this inventory\r\n     * @param items\r\n     * @return Leftover items\r\n     */\r\n    addAll(items) {\r\n        let miss = [];\r\n        for (let item of items) {\r\n            if (!this.addItem(item))\r\n                miss.push(item);\r\n        }\r\n        return miss;\r\n    }\r\n    removeItem(item) {\r\n        let idx = this.slots.indexOf(item);\r\n        if (idx < 0)\r\n            return false;\r\n        this.slots[idx] = null;\r\n        return true;\r\n    }\r\n    transferTo(item, target) {\r\n        let i = this.indexOf(item);\r\n        if (i < 0)\r\n            throw new Error(`Cannot transfer ${item}, not in ${this}`);\r\n        if (target.addItem(item)) {\r\n            this.slots[i] = null;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    includes(item) {\r\n        return this.slots.includes(item);\r\n    }\r\n    indexOf(item) {\r\n        return this.slots.indexOf(item);\r\n    }\r\n    filter(predicate, thisArg) {\r\n        return this.slots.filter(predicate, thisArg);\r\n    }\r\n    map(callback, thisArg) {\r\n        return this.slots.map(callback, thisArg);\r\n    }\r\n    static wrap(items, name = \"Items\") {\r\n        let inv = new Inventory(name, 0);\r\n        inv.slots.push(...items);\r\n        return inv;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/Inventory.ts?");

/***/ }),

/***/ "./src/engine/objects/Item.ts":
/*!************************************!*\
  !*** ./src/engine/objects/Item.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Item\": () => (/* binding */ Item)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 23.07.2022.\r\n */\r\nclass Item {\r\n    constructor(base) {\r\n        this.base = base;\r\n        this.customName = null;\r\n    }\r\n    get name() { return this.customName ?? this.base.name; }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/Item.ts?");

/***/ }),

/***/ "./src/engine/objects/ItemEffect.ts":
/*!******************************************!*\
  !*** ./src/engine/objects/ItemEffect.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ItemEffect\": () => (/* binding */ ItemEffect)\n/* harmony export */ });\nclass ItemEffect {\r\n    constructor(name) {\r\n        this.name = name;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/ItemEffect.ts?");

/***/ }),

/***/ "./src/engine/objects/Loot.ts":
/*!************************************!*\
  !*** ./src/engine/objects/Loot.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateLoot\": () => (/* binding */ generateLoot),\n/* harmony export */   \"mergeLoot\": () => (/* binding */ mergeLoot),\n/* harmony export */   \"setupLoot\": () => (/* binding */ setupLoot)\n/* harmony export */ });\n/* harmony import */ var _math_Dice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Dice */ \"./src/engine/math/Dice.ts\");\n\r\nfunction diceOrConst(rng, spec, defaultValue) {\r\n    if (spec === undefined)\r\n        return defaultValue;\r\n    if (typeof spec === 'string')\r\n        return (0,_math_Dice__WEBPACK_IMPORTED_MODULE_0__.dice)(spec).roll(rng);\r\n    if (Array.isArray(spec))\r\n        return rng.nextInt(spec[0], spec[1] + 1);\r\n    return spec;\r\n}\r\nfunction generateLoot(rng, table) {\r\n    let entry = rng.pickWeightedOrNull(table.variants, entry => entry.weight ?? 1);\r\n    if (!entry)\r\n        return { money: 0, items: [] };\r\n    let money = diceOrConst(rng, entry.money, 0);\r\n    if (money < 0)\r\n        money = 0;\r\n    let items = [];\r\n    for (let litem of entry.items ?? []) {\r\n        if (!rng.nextBoolean(litem.chance ?? 1))\r\n            continue;\r\n        // TODO item quantity\r\n        let quantity = diceOrConst(rng, litem.quantity, 1);\r\n        items.push(litem.base.spawn());\r\n    }\r\n    return {\r\n        money,\r\n        items\r\n    };\r\n}\r\n/**\r\n * Merges Loot objects into source[0] (the object is modified)\r\n * @return source[0]\r\n */\r\nfunction mergeLoot(source) {\r\n    if (source.length === 0)\r\n        return { money: 0, items: [] };\r\n    let target = source[0];\r\n    for (let i = 1; i < source.length; i++) {\r\n        let loot = source[i];\r\n        target.money += loot.money;\r\n        target.items.push(...loot.items);\r\n    }\r\n    return target;\r\n}\r\nfunction setupLoot(creature, table, rng = creature.rng) {\r\n    creature.loot = generateLoot(rng, table);\r\n    /*\r\n    TODO alternative to loot variable - adding items to the creature inventory\r\n    let loot = generateLoot(rng, table);\r\n    creature.money += loot.money;\r\n    creature.inventory.ensureEmptySlots(loot.items.length);\r\n    for (let item of loot.items) {\r\n        creature.inventory.addItem(item);\r\n    }\r\n\r\n     */\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/Loot.ts?");

/***/ }),

/***/ "./src/engine/objects/MonsterAI.ts":
/*!*****************************************!*\
  !*** ./src/engine/objects/MonsterAI.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DefaultMonsterAI\": () => (/* binding */ DefaultMonsterAI),\n/* harmony export */   \"MonsterAI\": () => (/* binding */ MonsterAI)\n/* harmony export */ });\n/* harmony import */ var _combat_actions_MeleeAttackAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../combat/actions/MeleeAttackAction */ \"./src/engine/combat/actions/MeleeAttackAction.tsx\");\n/* harmony import */ var _combat_actions_TeaseAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../combat/actions/TeaseAction */ \"./src/engine/combat/actions/TeaseAction.tsx\");\n/* harmony import */ var _combat_actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../combat/actions/SkipCombatAction */ \"./src/engine/combat/actions/SkipCombatAction.ts\");\n/* harmony import */ var _combat_actions_UseAbilityAction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../combat/actions/UseAbilityAction */ \"./src/engine/combat/actions/UseAbilityAction.ts\");\n/* harmony import */ var _combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../combat/AbstractCombatAbility */ \"./src/engine/combat/AbstractCombatAbility.ts\");\n/* harmony import */ var _combat_actions_StepAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../combat/actions/StepAction */ \"./src/engine/combat/actions/StepAction.ts\");\n/* harmony import */ var _utils_gridutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/gridutils */ \"./src/engine/utils/gridutils.ts\");\n/*\r\n * Created by aimozg on 19.09.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MonsterAI {\r\n    constructor(actor) {\r\n        this.actor = actor;\r\n    }\r\n    filterChoices(cc, choices) {\r\n        return choices.filter(c => c.isPossible(cc));\r\n    }\r\n    selectAction(cc, choices) {\r\n        if (choices.length === 0)\r\n            return new _combat_actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_2__.SkipCombatAction(this.actor);\r\n        return cc.rng.pick(choices);\r\n    }\r\n    performAI(cc) {\r\n        let choices = this.choices(cc);\r\n        choices = this.filterChoices(cc, choices);\r\n        return this.selectAction(cc, choices);\r\n    }\r\n}\r\nclass DefaultMonsterAI extends MonsterAI {\r\n    choices(cc) {\r\n        let actor = this.actor;\r\n        // TODO more complex AI\r\n        let target = cc.party.find(p => p.isAlive);\r\n        let options = [];\r\n        if (target) {\r\n            if (cc.adjacent(actor, target)) {\r\n                options.push(new _combat_actions_MeleeAttackAction__WEBPACK_IMPORTED_MODULE_0__.MeleeAttackAction(actor, target));\r\n            }\r\n            else {\r\n                let dir = _utils_gridutils__WEBPACK_IMPORTED_MODULE_6__.Direction.to(actor.gobj, target.gobj);\r\n                options.push(new _combat_actions_StepAction__WEBPACK_IMPORTED_MODULE_5__.StepAction(actor, dir.add(actor.gobj)));\r\n            }\r\n            options.push(new _combat_actions_TeaseAction__WEBPACK_IMPORTED_MODULE_1__.TeaseAction(actor, target));\r\n        }\r\n        for (let a of actor.abilities) {\r\n            if (a.hasTag(\"damaging\") || a.hasTag(\"debuff\") || a.hasTag(\"teasing\")) {\r\n                if (a.targetType === _combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_4__.AbilityTargetType.CREATURE && target) {\r\n                    options.push(new _combat_actions_UseAbilityAction__WEBPACK_IMPORTED_MODULE_3__.UseAbilityAction(actor, a, target));\r\n                }\r\n            }\r\n            else if (a.hasTag(\"buff\")) {\r\n                // TODO and not already active\r\n            }\r\n            else if (a.hasTag(\"healing\")) {\r\n                // TODO heal allies?\r\n                // TODO or creature but not other\r\n                if (a.targetType === _combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_4__.AbilityTargetType.SELF) {\r\n                    if (actor.hpRatio < 0.75) {\r\n                        options.push(new _combat_actions_UseAbilityAction__WEBPACK_IMPORTED_MODULE_3__.UseAbilityAction(actor, a, \"self\"));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/MonsterAI.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/BodyMaterial.ts":
/*!*****************************************************!*\
  !*** ./src/engine/objects/creature/BodyMaterial.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BodyMaterial\": () => (/* binding */ BodyMaterial),\n/* harmony export */   \"BodyMaterialType\": () => (/* binding */ BodyMaterialType)\n/* harmony export */ });\n/* harmony import */ var _Color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Color */ \"./src/engine/objects/Color.ts\");\n/* harmony import */ var _math_fxrng__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/string */ \"./src/engine/utils/string.ts\");\n/*\r\n * Created by aimozg on 01.08.2022.\r\n */\r\n\r\n\r\n\r\nclass BodyMaterial {\r\n    constructor(type, body) {\r\n        this.type = type;\r\n        this.body = body;\r\n        this._color1 = _Color__WEBPACK_IMPORTED_MODULE_0__.Color.DEFAULT_WHITE;\r\n        this._color2 = _Color__WEBPACK_IMPORTED_MODULE_0__.Color.DEFAULT_WHITE;\r\n    }\r\n    get colorName() {\r\n        if (this.singleColor)\r\n            return this.color1.name;\r\n        return this.color1.name + \" and \" + this.color2.name;\r\n    }\r\n    get color1() { return this._color1; }\r\n    get color2() { return this._color2; }\r\n    get singleColor() { return this.color1.equals(this.color2); }\r\n    get binaryColor() { return !this.singleColor; }\r\n    set color1(value) {\r\n        if (this.singleColor) {\r\n            this._color2 = value;\r\n        }\r\n        this._color1 = value;\r\n    }\r\n    set color2(value) {\r\n        this._color2 = value;\r\n    }\r\n    copyFrom(other) {\r\n        this._color1 = other._color1;\r\n        this._color2 = other._color2;\r\n    }\r\n    get isPresent() {\r\n        return this.body.parts.some(part => part.hasMaterial(this.type));\r\n    }\r\n    get name() { return this.type.name; }\r\n    // TODO extract to text common\r\n    verb(singular, plural) { return this.type.plural ? plural : singular; }\r\n    get isAre() { return this.verb(\"is\", \"are\"); }\r\n    get hasHave() { return this.verb(\"has\", \"have\"); }\r\n    textReplacer(s) {\r\n        if (s === 'color')\r\n            return this.colorName;\r\n        if (s === 'name')\r\n            return this.name;\r\n        if (s === 'shortName')\r\n            return this.shortName();\r\n        if (s === 'description')\r\n            return this.description();\r\n        if (s === 'is')\r\n            return this.isAre;\r\n        if (s === 'has')\r\n            return this.hasHave;\r\n        return s;\r\n    }\r\n    shortName() {\r\n        return this.formatPattern(\"{color} {name}\");\r\n    }\r\n    description() {\r\n        // TODO adj\r\n        return this.formatPattern(\"{shortName}\");\r\n    }\r\n    fullDescription() {\r\n        return this.formatPattern(_math_fxrng__WEBPACK_IMPORTED_MODULE_1__[\"default\"].either(\"[You] [have] {description}.\", \"[Your] {name} {is} {color}.\" // TODO adj\r\n        ));\r\n    }\r\n    formatPattern(pattern) {\r\n        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_2__.substitutePattern)(pattern, s => this.textReplacer(s))\r\n            .replace(/  +/g, ' ')\r\n            .trim();\r\n    }\r\n}\r\nclass BodyMaterialType {\r\n    constructor(id, name, plural) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.plural = plural;\r\n        this.index = BodyMaterialType.index++;\r\n        BodyMaterialType.All[this.index] = this;\r\n    }\r\n    get(body) {\r\n        return body.materials[this.index];\r\n    }\r\n    create(body) {\r\n        return new BodyMaterial(this, body);\r\n    }\r\n}\r\nBodyMaterialType.index = 0;\r\nBodyMaterialType.All = [];\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/BodyMaterial.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/BodyPart.ts":
/*!*************************************************!*\
  !*** ./src/engine/objects/creature/BodyPart.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BodyPart\": () => (/* binding */ BodyPart),\n/* harmony export */   \"BodyPartReference\": () => (/* binding */ BodyPartReference),\n/* harmony export */   \"BodyPartType\": () => (/* binding */ BodyPartType),\n/* harmony export */   \"DefaultBodyPartTexts\": () => (/* binding */ DefaultBodyPartTexts)\n/* harmony export */ });\n/* harmony import */ var _math_fxrng__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/string */ \"./src/engine/utils/string.ts\");\n/*\r\n * Created by aimozg on 22.07.2022.\r\n */\r\n\r\n\r\nconst DefaultBodyPartTexts = {\r\n    /** noun, singular (\"ear\") */\r\n    noun1: \"UNKNOWN PART\",\r\n    /** noun, singular (\"ears\") */\r\n    noun2: \"UNKNOWN PART\",\r\n    /** primary determiner */\r\n    type: [\"\"],\r\n    /** extra determiners (inserted before) */\r\n    adj: [\"\"],\r\n    /** extra descriptions (inserted after) */\r\n    suffix: [\"\"],\r\n    shortName1Pattern: \"{type} {noun1}\",\r\n    shortName2Pattern: \"{type} {noun2}\",\r\n    longName1Pattern: \"{adj} {shortName1} {suffix}\",\r\n    longName2Pattern: \"{adj} {shortName2} {suffix}\",\r\n    // TODO use \"number of noun\" fn\r\n    descriptionPattern: \"{count} {longName}\",\r\n    fullDescriptionPattern: \"[You] [have] {description}.\",\r\n};\r\nclass BodyPartType {\r\n    constructor(ref, id, name) {\r\n        this.ref = ref;\r\n        this.id = id;\r\n        this.name = name;\r\n        this.isPresent = this.id !== \"\";\r\n        this.count = this.id === \"\" ? 0 : 1;\r\n        this.size = this.id === \"\" ? 0 : 1;\r\n        // Usage note:\r\n        // noun1/2, shortName1/2 appear inside a bigger phrase (\"You have X, Y, and Z\")\r\n        // longName1/2 appear inside a phrase as a focus (\"She touches your X\")\r\n        // description is main focus of a sentence (\"You have X\" / \"You now have X\")\r\n        this.texts = Object.assign({}, DefaultBodyPartTexts);\r\n        /** noun, singular (\"ear\") */\r\n        this.noun1 = () => this.texts.noun1;\r\n        /** noun, plural (\"ears\") */\r\n        this.noun2 = () => this.texts.noun2;\r\n        /** noun, singular/plural depending on part count */\r\n        this.noun = part => part.count === 1 ? this.noun1(part) : this.noun2(part);\r\n        /** short name, singular, (\"fox ear\") */\r\n        this.shortName1 = part => this.formatPattern(this.texts.shortName1Pattern, part);\r\n        /** short name, plural, (\"fox ears\") */\r\n        this.shortName2 = part => this.formatPattern(this.texts.shortName2Pattern, part);\r\n        /** short name, (\"fox ear\"/\"fox ears\") */\r\n        this.shortName = part => part.count === 1 ? this.shortName1(part) : this.shortName2(part);\r\n        /** long name, singular (\"fuzzy fox ear\") */\r\n        this.longName1 = part => this.formatPattern(this.texts.longName1Pattern, part);\r\n        /** long name, plural (\"fuzzy fox ears\") */\r\n        this.longName2 = part => this.formatPattern(this.texts.longName2Pattern, part);\r\n        /** long name, (\"fuzzy fox ear\"/\"fuzzy fox ears\") */\r\n        this.longName = part => part.count === 1 ? this.longName1(part) : this.longName2(part);\r\n        /** description (\"a pair of fuzzy fox ears\") */\r\n        this.description = part => this.formatPattern(this.texts.descriptionPattern, part);\r\n        /** full description, sentence(s) (\"[You] [have] a pair of fuzzy fox ears.\") */\r\n        this.fullDescription = part => this.formatPattern(this.texts.fullDescriptionPattern, part);\r\n        ref.types.set(id, this);\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'count') {\r\n            if (this.count === 0)\r\n                return \"no\";\r\n            // TODO empty if count is default count?? and bring {count} back to description pattern\r\n            if (this.count === 1)\r\n                return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].either(\"one\", \"single\");\r\n            if (this.count === 2)\r\n                return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].either(\"two\", \"a pair of\");\r\n            if (this.count === 3)\r\n                return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].either(\"three\", \"a trio of\");\r\n            // TODO us \"number of noun\" fn\r\n            return String(this.count);\r\n        }\r\n        if (s === 'type')\r\n            return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(this.texts.type) ?? \"\";\r\n        if (s === 'adj')\r\n            return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].nextBoolean() ? _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(this.texts.adj) ?? \"\" : \"\";\r\n        if (s === 'suffix')\r\n            return _math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(this.texts.suffix) ?? \"\";\r\n        if (s === 'noun')\r\n            return this.noun(part);\r\n        if (s === 'noun1')\r\n            return this.noun1(part);\r\n        if (s === 'noun2')\r\n            return this.noun2(part);\r\n        if (s === 'shortName')\r\n            return this.shortName(part);\r\n        if (s === 'shortName1')\r\n            return this.shortName1(part);\r\n        if (s === 'shortName2')\r\n            return this.shortName2(part);\r\n        if (s === 'longName')\r\n            return this.longName(part);\r\n        if (s === 'longName1')\r\n            return this.longName1(part);\r\n        if (s === 'longName2')\r\n            return this.longName2(part);\r\n        if (s === 'description')\r\n            return this.description(part);\r\n        return s;\r\n    }\r\n    formatPattern(pattern, part) {\r\n        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_1__.substitutePattern)(pattern, s => this.textReplacer(s, part))\r\n            .replace(/  +/g, ' ')\r\n            .trim();\r\n    }\r\n    hasMaterial(material) { return this.materials.has(material); }\r\n}\r\nclass BodyPart {\r\n    constructor(body) {\r\n        this.body = body;\r\n        this._type = this.typeHuman();\r\n        this.size = this._type.size;\r\n        this.count = this._type.count;\r\n    }\r\n    get host() { return this.body.host; }\r\n    copyFrom(other) {\r\n        this.setType(other.type);\r\n        this.size = other.size;\r\n        this.count = other.count;\r\n    }\r\n    get type() { return this._type; }\r\n    setType(value) {\r\n        if (this._type === value)\r\n            return;\r\n        if (!this._type.isPresent && value.isPresent || this._type.isPresent && !value.isPresent) {\r\n            this.size = value.size;\r\n            this.count = value.count;\r\n        }\r\n        this._type = value;\r\n    }\r\n    get isPresent() { return this._type.isPresent; }\r\n    ;\r\n    hasMaterial(material) { return this.isPresent && this.type.hasMaterial(material); }\r\n    formatPattern(pattern) { return this.type.formatPattern(pattern, this); }\r\n    remove() {\r\n        this.setType(this.typeNone());\r\n    }\r\n    /** noun, singular (\"ear\") */\r\n    noun1() { return this.type.noun1(this); }\r\n    /** noun, plural (\"ears\") */\r\n    noun2() { return this.type.noun2(this); }\r\n    /** short name, singular (\"fox ear\") */\r\n    shortName1() { return this.type.shortName1(this); }\r\n    /** short name, plural (\"fox ears\") */\r\n    shortName2() { return this.type.shortName2(this); }\r\n    /** long name, singular (\"fuzzy fox ear\") */\r\n    longName1() { return this.type.longName1(this); }\r\n    /** long name, plural (\"fuzzy fox ears\") */\r\n    longName2() { return this.type.longName2(this); }\r\n    /** description (\"a pair of fuzzy fox ears\") */\r\n    description() { return this.type.description(this); }\r\n    /** full description, sentence(s) (\"[You] [have] a pair of fuzzy fox ears.\") */\r\n    fullDescription() { return this.type.fullDescription(this); }\r\n}\r\nclass BodyPartReference {\r\n    constructor(id) {\r\n        this.id = id;\r\n        this.index = BodyPartReference.index++;\r\n        this.types = new Map();\r\n        BodyPartReference.All[this.index] = this;\r\n    }\r\n    get(body) {\r\n        return body.parts[this.index];\r\n    }\r\n}\r\nBodyPartReference.index = 0;\r\nBodyPartReference.All = [];\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/BodyPart.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/Character.ts":
/*!**************************************************!*\
  !*** ./src/engine/objects/creature/Character.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Character\": () => (/* binding */ Character),\n/* harmony export */   \"CharacterBody\": () => (/* binding */ CharacterBody),\n/* harmony export */   \"resetToHumanBody\": () => (/* binding */ resetToHumanBody)\n/* harmony export */ });\n/* harmony import */ var _Creature__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Creature */ \"./src/engine/objects/Creature.ts\");\n/* harmony import */ var _BodyPart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _BodyMaterial__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BodyMaterial */ \"./src/engine/objects/creature/BodyMaterial.ts\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../math/utils */ \"./src/engine/math/utils.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\nclass Character extends _Creature__WEBPACK_IMPORTED_MODULE_0__.Creature {\r\n    constructor() {\r\n        super();\r\n        this.objectType = \"Character\";\r\n        this.body = new CharacterBody(this);\r\n        resetToHumanBody(this.body);\r\n    }\r\n    get sex() {\r\n        let penis = this.body.penis.isPresent;\r\n        let vagina = this.body.vagina.isPresent;\r\n        if (penis && vagina)\r\n            return \"h\";\r\n        if (penis)\r\n            return \"m\";\r\n        if (vagina)\r\n            return \"f\";\r\n        return \"n\";\r\n    }\r\n    setSex(sex) {\r\n        this.body.setSex(sex);\r\n    }\r\n}\r\nclass CharacterBody {\r\n    constructor(host) {\r\n        this.host = host;\r\n        this.parts = _BodyPart__WEBPACK_IMPORTED_MODULE_1__.BodyPartReference.All.map(ref => ref.create(this));\r\n        this.materials = _BodyMaterial__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialType.All.map(ref => ref.create(this));\r\n        this._height = 150;\r\n    }\r\n    get height() { return this._height; }\r\n    set height(value) {\r\n        this._height = (0,_math_utils__WEBPACK_IMPORTED_MODULE_3__.coerce)(value, CharacterBody.MinHeightCm, CharacterBody.MaxHeightCm);\r\n    }\r\n    setSex(sex) {\r\n        // TODO output?\r\n        if (sex === \"h\" || sex === \"m\") {\r\n            if (!this.penis.isPresent)\r\n                this.penis.setType(this.penis.typeHuman());\r\n        }\r\n        else {\r\n            this.penis.remove();\r\n        }\r\n        if (sex === \"h\" || sex === \"f\") {\r\n            if (!this.vagina.isPresent)\r\n                this.vagina.setType(this.vagina.typeHuman());\r\n        }\r\n        else {\r\n            this.vagina.remove();\r\n        }\r\n    }\r\n    copyFrom(src) {\r\n        this._height = src._height;\r\n        for (let i = 0; i < this.parts.length; i++)\r\n            this.parts[i].copyFrom(src.parts[i]);\r\n        for (let i = 0; i < this.materials.length; i++)\r\n            this.materials[i].copyFrom(src.materials[i]);\r\n    }\r\n}\r\nCharacterBody.MinHeightCm = 60;\r\nCharacterBody.MaxHeightCm = 1000;\r\nfunction resetToHumanBody(body) {\r\n    for (let bp of body.parts) {\r\n        bp.setType(bp.typeHuman());\r\n    }\r\n    body.penis.remove();\r\n    body.vagina.remove();\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/Character.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/CoreConditions.ts":
/*!*******************************************************!*\
  !*** ./src/engine/objects/creature/CoreConditions.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CoreConditions\": () => (/* binding */ CoreConditions)\n/* harmony export */ });\n/* harmony import */ var _CreatureCondition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CreatureCondition */ \"./src/engine/objects/creature/CreatureCondition.ts\");\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\n\r\nvar CoreConditions;\r\n(function (CoreConditions) {\r\n    CoreConditions.Unaware = new _CreatureCondition__WEBPACK_IMPORTED_MODULE_0__.CreatureCondition({\r\n        name: \"Unaware\",\r\n        icon: {\r\n            text: \"UA\",\r\n            fg: \"#222\",\r\n            bg: \"#888\"\r\n        },\r\n        combatOnly: true\r\n    });\r\n    CoreConditions.Stealth = new _CreatureCondition__WEBPACK_IMPORTED_MODULE_0__.CreatureCondition({\r\n        name: \"Sneaking\",\r\n        icon: {\r\n            text: \"Sn\",\r\n            fg: \"#8a8\",\r\n            bg: \"#242\"\r\n        },\r\n        combatOnly: true\r\n    });\r\n})(CoreConditions || (CoreConditions = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/CoreConditions.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/CoreSkills.ts":
/*!***************************************************!*\
  !*** ./src/engine/objects/creature/CoreSkills.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CoreSkills\": () => (/* binding */ CoreSkills)\n/* harmony export */ });\n/* harmony import */ var _Skill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Skill */ \"./src/engine/objects/creature/Skill.ts\");\n/* harmony import */ var _rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../rules/TAttribute */ \"./src/engine/rules/TAttribute.ts\");\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\n\r\n\r\nvar CoreSkills;\r\n(function (CoreSkills) {\r\n    CoreSkills.Ambush = new _Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_ambush\", {\r\n        name: \"Ambush\",\r\n        attr: _rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.PER,\r\n        description: \"Used in exploration. Successful Ambush check gives you the initiative in the encounter.\"\r\n    });\r\n    CoreSkills.Seduce = new _Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_seduce\", {\r\n        name: \"Seduce\",\r\n        attr: _rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.CHA,\r\n        description: \"Successful Seduce check makes enemy surrender.\"\r\n    });\r\n    CoreSkills.Spot = new _Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_spot\", {\r\n        name: \"Spot\",\r\n        attr: _rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.PER,\r\n        description: \"Detect stealthy enemies, rolled vs enemy Stealth skill.\"\r\n    });\r\n    CoreSkills.Stealth = new _Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_stealth\", {\r\n        name: \"Stealth\",\r\n        attr: _rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.DEX,\r\n        description: \"Move undetected, rolled vs enemy Spot skill.\"\r\n    });\r\n    CoreSkills.list = [\r\n        CoreSkills.Ambush,\r\n        CoreSkills.Seduce,\r\n        CoreSkills.Spot,\r\n        CoreSkills.Stealth\r\n    ];\r\n})(CoreSkills || (CoreSkills = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/CoreSkills.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/CreatureCondition.ts":
/*!**********************************************************!*\
  !*** ./src/engine/objects/creature/CreatureCondition.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreatureCondition\": () => (/* binding */ CreatureCondition)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\n// TODO put in registry\r\nclass CreatureCondition {\r\n    constructor(options) {\r\n        this.name = options.name;\r\n        this.icon = options.icon;\r\n        this.combatOnly = options?.combatOnly ?? false;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/CreatureCondition.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/PlayerCharacter.ts":
/*!********************************************************!*\
  !*** ./src/engine/objects/creature/PlayerCharacter.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlayerCharacter\": () => (/* binding */ PlayerCharacter)\n/* harmony export */ });\n/* harmony import */ var _Character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Character */ \"./src/engine/objects/creature/Character.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _place_Place__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../place/Place */ \"./src/engine/place/Place.ts\");\n/*\r\n * Created by aimozg on 10.07.2022.\r\n */\r\n\r\n\r\n\r\nclass PlayerCharacter extends _Character__WEBPACK_IMPORTED_MODULE_0__.Character {\r\n    ////////////\r\n    // Helpers\r\n    ////////////\r\n    constructor() {\r\n        super();\r\n        this.objectType = \"PlayerCharacter\";\r\n        this.place = _place_Place__WEBPACK_IMPORTED_MODULE_2__.Place.Limbo;\r\n        this.originId = \"unknown\";\r\n    }\r\n    get origin() { return _Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.idata.playerOrigins.find(o => o.id === this.originId); }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/PlayerCharacter.ts?");

/***/ }),

/***/ "./src/engine/objects/creature/Skill.ts":
/*!**********************************************!*\
  !*** ./src/engine/objects/creature/Skill.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Skill\": () => (/* binding */ Skill)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../symbols */ \"./src/engine/symbols.ts\");\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\n\r\nclass Skill {\r\n    constructor(resId, options) {\r\n        this.resId = resId;\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeSkill;\r\n        this.name = options.name;\r\n        this.attr = options.attr ?? -1;\r\n        this.description = options.description;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/creature/Skill.ts?");

/***/ }),

/***/ "./src/engine/objects/item/ArmorComponent.ts":
/*!***************************************************!*\
  !*** ./src/engine/objects/item/ArmorComponent.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArmorComponent\": () => (/* binding */ ArmorComponent)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n/*\r\n * Created by aimozg on 14.08.2022.\r\n */\r\n\r\nclass ArmorComponent extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItemComponent {\r\n    constructor(base, defenseBonus, drBonus) {\r\n        super(base);\r\n        this.defenseBonus = defenseBonus;\r\n        this.drBonus = drBonus;\r\n        if (base.armor)\r\n            throw new Error(\"Cannot add ArmorComponent to \" + base);\r\n        base.armor = this;\r\n    }\r\n}\r\n(0,_BaseItem__WEBPACK_IMPORTED_MODULE_0__.registerItemComponent)(\"asArmor\", \"isArmor\", \"ifArmor\", base => base.armor);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/ArmorComponent.ts?");

/***/ }),

/***/ "./src/engine/objects/item/BaseAbstractWeapon.ts":
/*!*******************************************************!*\
  !*** ./src/engine/objects/item/BaseAbstractWeapon.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseAbstractWeapon\": () => (/* binding */ BaseAbstractWeapon)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n/* harmony import */ var _WeaponComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WeaponComponent */ \"./src/engine/objects/item/WeaponComponent.ts\");\n\r\n\r\nclass BaseAbstractWeapon extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\r\n    constructor(resId, name, dmgSpec) {\r\n        super(resId, name);\r\n        this.dmgSpec = dmgSpec;\r\n        new _WeaponComponent__WEBPACK_IMPORTED_MODULE_1__.WeaponComponent(this, dmgSpec);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/BaseAbstractWeapon.ts?");

/***/ }),

/***/ "./src/engine/objects/item/BaseBodyArmor.ts":
/*!**************************************************!*\
  !*** ./src/engine/objects/item/BaseBodyArmor.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseBodyArmor\": () => (/* binding */ BaseBodyArmor)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n/* harmony import */ var _ArmorComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ArmorComponent */ \"./src/engine/objects/item/ArmorComponent.ts\");\n\r\n\r\nclass BaseBodyArmor extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\r\n    constructor(resId, name, defenseBonus, drBonus) {\r\n        super(resId, name);\r\n        new _ArmorComponent__WEBPACK_IMPORTED_MODULE_1__.ArmorComponent(this, defenseBonus, drBonus);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/BaseBodyArmor.ts?");

/***/ }),

/***/ "./src/engine/objects/item/BaseConsumable.ts":
/*!***************************************************!*\
  !*** ./src/engine/objects/item/BaseConsumable.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseConsumable\": () => (/* binding */ BaseConsumable)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n/* harmony import */ var _ConsumableComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConsumableComponent */ \"./src/engine/objects/item/ConsumableComponent.ts\");\n\r\n\r\nclass BaseConsumable extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItem {\r\n    constructor(resId, name, effects) {\r\n        super(resId, name);\r\n        new _ConsumableComponent__WEBPACK_IMPORTED_MODULE_1__.ConsumableComponent(this, effects);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/BaseConsumable.ts?");

/***/ }),

/***/ "./src/engine/objects/item/BaseMeleeWeapon.ts":
/*!****************************************************!*\
  !*** ./src/engine/objects/item/BaseMeleeWeapon.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseMeleeWeapon\": () => (/* binding */ BaseMeleeWeapon)\n/* harmony export */ });\n/* harmony import */ var _BaseAbstractWeapon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseAbstractWeapon */ \"./src/engine/objects/item/BaseAbstractWeapon.ts\");\n/*\r\n * Created by aimozg on 25.07.2022.\r\n */\r\n\r\nclass BaseMeleeWeapon extends _BaseAbstractWeapon__WEBPACK_IMPORTED_MODULE_0__.BaseAbstractWeapon {\r\n    constructor(resId, name, dmgSpec) {\r\n        super(resId, name, dmgSpec);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/BaseMeleeWeapon.ts?");

/***/ }),

/***/ "./src/engine/objects/item/BaseNaturalWeapon.ts":
/*!******************************************************!*\
  !*** ./src/engine/objects/item/BaseNaturalWeapon.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseNaturalWeapon\": () => (/* binding */ BaseNaturalWeapon)\n/* harmony export */ });\n/* harmony import */ var _BaseAbstractWeapon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseAbstractWeapon */ \"./src/engine/objects/item/BaseAbstractWeapon.ts\");\n/*\r\n * Created by aimozg on 24.07.2022.\r\n */\r\n\r\n// TODO @aimozg - I think: keep it singleton and pick damage/type/crit from creature\r\nclass BaseNaturalWeapon extends _BaseAbstractWeapon__WEBPACK_IMPORTED_MODULE_0__.BaseAbstractWeapon {\r\n    constructor(resId, name, dmgSpec) {\r\n        super(resId, name, dmgSpec);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/BaseNaturalWeapon.ts?");

/***/ }),

/***/ "./src/engine/objects/item/ConsumableComponent.ts":
/*!********************************************************!*\
  !*** ./src/engine/objects/item/ConsumableComponent.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ConsumableComponent\": () => (/* binding */ ConsumableComponent)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n\r\nclass ConsumableComponent extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItemComponent {\r\n    constructor(base, effects) {\r\n        super(base);\r\n        this.effects = effects;\r\n        if (base.consumable)\r\n            throw new Error(`Cannot add ConsumableComponent to ${base}`);\r\n        base.consumable = this;\r\n    }\r\n}\r\n(0,_BaseItem__WEBPACK_IMPORTED_MODULE_0__.registerItemComponent)(\"asConsumable\", \"isConsumable\", \"ifConsumable\", base => base.consumable);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/ConsumableComponent.ts?");

/***/ }),

/***/ "./src/engine/objects/item/WeaponComponent.ts":
/*!****************************************************!*\
  !*** ./src/engine/objects/item/WeaponComponent.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WeaponComponent\": () => (/* binding */ WeaponComponent)\n/* harmony export */ });\n/* harmony import */ var _BaseItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../BaseItem */ \"./src/engine/objects/BaseItem.ts\");\n/*\r\n * Created by aimozg on 13.08.2022.\r\n */\r\n\r\nclass WeaponComponent extends _BaseItem__WEBPACK_IMPORTED_MODULE_0__.BaseItemComponent {\r\n    constructor(base, dmgSpec) {\r\n        super(base);\r\n        this.dmgSpec = dmgSpec;\r\n        if (base.weapon)\r\n            throw new Error(\"Cannot add WeaponComponent to \" + base);\r\n        base.weapon = this;\r\n    }\r\n    get damage() { return this.dmgSpec.damage; }\r\n    get damageType() { return this.dmgSpec.damageType; }\r\n}\r\n(0,_BaseItem__WEBPACK_IMPORTED_MODULE_0__.registerItemComponent)(\"asWeapon\", \"isWeapon\", \"ifWeapon\", base => base.weapon);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/objects/item/WeaponComponent.ts?");

/***/ }),

/***/ "./src/engine/place/Place.ts":
/*!***********************************!*\
  !*** ./src/engine/place/Place.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Place\": () => (/* binding */ Place)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _scene_Encounter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scene/Encounter */ \"./src/engine/scene/Encounter.ts\");\n/*\r\n * Created by aimozg on 18.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\nclass Place {\r\n    constructor(resId, props) {\r\n        this.resId = resId;\r\n        this.props = props;\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypePlace;\r\n    }\r\n    displayName() { return this.props.displayName(); }\r\n    description() { return this.props.description(); }\r\n    onEnter() { this.props.onEnter(); }\r\n    onLeave() { this.props.onLeave(); }\r\n    onTime() { this.props.onTime(); }\r\n    canRest() { return this.props.canRest(); }\r\n    canManageInventory() { return this.props.canManageInventory(); }\r\n    canLevelUp() { return this.props.canLevelUp(); }\r\n    canExplore() { return !!this.props.encounters; }\r\n    get sceneId() { return this.props.scene(); }\r\n    get scene() { return _Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.data.scene(this.props.scene()); }\r\n    pickEncounter(rng = _Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.rng) {\r\n        return this.props.encounters.pickOrNull(rng);\r\n    }\r\n    static build(def) {\r\n        function wrapValue(value) {\r\n            if (typeof value === 'function')\r\n                return () => value(_Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.gameController);\r\n            return () => value;\r\n        }\r\n        function wrapValueDef(value, defaultValue) {\r\n            if (typeof value === 'function')\r\n                return () => value(_Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.gameController);\r\n            if (value === undefined)\r\n                return () => defaultValue;\r\n            return () => value;\r\n        }\r\n        function wrapFn(value) {\r\n            if (value)\r\n                return () => value(_Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.gameController);\r\n            return () => { };\r\n        }\r\n        let encounters;\r\n        if (typeof def.encounters === \"string\") {\r\n            // TODO load EncounterPool from DB\r\n            encounters = null;\r\n        }\r\n        else if (!def.encounters) {\r\n            encounters = null;\r\n        }\r\n        else if (Array.isArray(def.encounters)) {\r\n            encounters = new _scene_Encounter__WEBPACK_IMPORTED_MODULE_3__.EncounterPool(\"/$place\" + def.id, def.encounters.map(e => _scene_Encounter__WEBPACK_IMPORTED_MODULE_3__.Encounter.build(e)));\r\n        }\r\n        else {\r\n            encounters = new _scene_Encounter__WEBPACK_IMPORTED_MODULE_3__.EncounterPool(def.id, def.encounters.encounters.map(e => _scene_Encounter__WEBPACK_IMPORTED_MODULE_3__.Encounter.build(e)));\r\n        }\r\n        let props = {\r\n            encounters: encounters,\r\n            displayName: wrapValue(def.name),\r\n            description: wrapValue(def.description),\r\n            sidebarDescription: wrapValueDef(def.sidebar, (0,preact__WEBPACK_IMPORTED_MODULE_2__.h)(\"h1\", null, def.name)),\r\n            scene: wrapValue(def.scene),\r\n            onEnter: wrapFn(def.onEnter),\r\n            onLeave: wrapFn(def.onLeave),\r\n            onTime: wrapFn(def.onTime),\r\n            canRest: wrapValueDef(def.canRest, true),\r\n            canManageInventory: wrapValueDef(def.canManageInventory, true),\r\n            canLevelUp: wrapValueDef(def.canLevelUp, true)\r\n        };\r\n        return new Place(def.id, props);\r\n    }\r\n}\r\nPlace.Limbo = new Place(\"/Limbo\", {\r\n    encounters: null,\r\n    displayName: () => \"Limbo\",\r\n    description: () => \"Nothingness. If you're here, game is bugged\",\r\n    sidebarDescription: () => \"Limbo\",\r\n    onEnter() { },\r\n    onLeave() { },\r\n    onTime() { },\r\n    scene: () => \"\",\r\n    canRest: () => true,\r\n    canManageInventory: () => true,\r\n    canLevelUp: () => true\r\n});\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/place/Place.ts?");

/***/ }),

/***/ "./src/engine/place/PlaceContext.tsx":
/*!*******************************************!*\
  !*** ./src/engine/place/PlaceContext.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlaceContext\": () => (/* binding */ PlaceContext)\n/* harmony export */ });\n/* harmony import */ var _scene_SceneContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scene/SceneContext */ \"./src/engine/scene/SceneContext.tsx\");\n/* harmony import */ var _ui_panels_ScenePanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui/panels/ScenePanel */ \"./src/engine/ui/panels/ScenePanel.tsx\");\n/* harmony import */ var _ui_panels_PlaceSidebar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ui/panels/PlaceSidebar */ \"./src/engine/ui/panels/PlaceSidebar.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _text_output_InteractiveTextOutput__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../text/output/InteractiveTextOutput */ \"./src/engine/text/output/InteractiveTextOutput.tsx\");\n\r\n\r\n\r\n\r\n\r\nclass PlaceContext extends _scene_SceneContext__WEBPACK_IMPORTED_MODULE_0__.SceneContext {\r\n    constructor(place) {\r\n        super(place.sceneId, new _text_output_InteractiveTextOutput__WEBPACK_IMPORTED_MODULE_4__.InteractiveTextOutput(new _ui_panels_ScenePanel__WEBPACK_IMPORTED_MODULE_1__.ScenePanel()));\r\n        this.place = place;\r\n        this.sidebarRef = (0,preact__WEBPACK_IMPORTED_MODULE_3__.createRef)();\r\n    }\r\n    async display() {\r\n        this.sidebarRef.current?.enable();\r\n        this.sidebarRef.current?.forceUpdate();\r\n        await this.playCurrentScene();\r\n    }\r\n    get layout() {\r\n        return Object.assign(super.layout, {\r\n            right: (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(_ui_panels_PlaceSidebar__WEBPACK_IMPORTED_MODULE_2__.PlaceSidebar, { context: this, ref: this.sidebarRef })\r\n        });\r\n    }\r\n    canRest() {\r\n        return this.place.canRest();\r\n    }\r\n    async onRestClick() {\r\n        if (!this.canRest())\r\n            return;\r\n        this.disableActions();\r\n        this.say(\"You rest...\");\r\n        this.gc.recoverPlayer();\r\n        this.endButton();\r\n        await this.flush();\r\n    }\r\n    canManageInventory() {\r\n        return this.place.canManageInventory();\r\n    }\r\n    async onInventoryClick() {\r\n        if (!this.canManageInventory())\r\n            return;\r\n        await this.gc.openTransferMenu(null);\r\n    }\r\n    canLevelUp() {\r\n        return this.place.canLevelUp() && this.player.canLevelUp();\r\n    }\r\n    onLevelUpClick() {\r\n        this.say(\"This feature is not implemented yet...\");\r\n        // TODO implement levelup menu\r\n    }\r\n    canExplore() {\r\n        return this.player.isAlive && this.place.canExplore();\r\n    }\r\n    async onExploreClick() {\r\n        this.disableActions();\r\n        let encounter = this.place.pickEncounter();\r\n        if (!encounter) {\r\n            this.say(\"You find nothing\");\r\n            this.endButton();\r\n            await this.flush();\r\n            return;\r\n        }\r\n        await this.play(encounter.scene);\r\n    }\r\n    checkDeadEnd() {\r\n        if (!this.canExplore() && !this.canRest()) {\r\n            super.checkDeadEnd();\r\n        }\r\n    }\r\n    disableActions(andChoices = true) {\r\n        this.sidebarRef.current?.disable();\r\n        if (andChoices)\r\n            this.output.flip();\r\n    }\r\n    async buttonClick(c) {\r\n        this.disableActions(false);\r\n        await super.buttonClick(c);\r\n    }\r\n    onKeyboardEvent(event) {\r\n        if (this.sidebarRef.current?.handleKeyboardEvent(event))\r\n            return;\r\n        super.onKeyboardEvent(event);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/place/PlaceContext.tsx?");

/***/ }),

/***/ "./src/engine/res/GameData.ts":
/*!************************************!*\
  !*** ./src/engine/res/GameData.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameData\": () => (/* binding */ GameData)\n/* harmony export */ });\n/* harmony import */ var _ResLib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ResLib */ \"./src/engine/ResLib.ts\");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/* harmony import */ var _objects_Color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../objects/Color */ \"./src/engine/objects/Color.ts\");\n/*\r\n * Created by aimozg on 17.07.2022.\r\n */\r\n\r\n\r\n\r\nclass GameData {\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.classes = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeClass, \"CharacterClass\");\r\n        this.colorCache = new Map();\r\n        this.places = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypePlace, \"Place\");\r\n        this.racialGroups = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeRacialGroup, \"RacialGroup\");\r\n        this.scenes = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeScene, \"Scene\");\r\n        this.skills = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeSkill, \"Skill\");\r\n        this.tiles = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeTile, \"Tile\");\r\n        this.tilesByChar = null;\r\n        this.traits = new _ResLib__WEBPACK_IMPORTED_MODULE_0__.ResLib(_symbols__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ResTypeTrait, \"Trait\");\r\n    }\r\n    class(id) { return this.classes.get(id); }\r\n    colorByName(name, palette = \"common\") {\r\n        let ccKey = palette + \"/\" + name;\r\n        if (this.colorCache.has(ccKey))\r\n            return this.colorCache.get(ccKey);\r\n        let gdcolor = this.game.idata.colors.find(c => c.palette === palette && c.name === name);\r\n        if (!gdcolor) {\r\n            if (palette !== \"common\") {\r\n                gdcolor = this.game.idata.colors.find(c => c.palette === \"common\" && c.name === name);\r\n            }\r\n            if (!gdcolor)\r\n                throw new Error(\"Color not found: \" + ccKey);\r\n        }\r\n        let color = new _objects_Color__WEBPACK_IMPORTED_MODULE_2__.Color(gdcolor.name, gdcolor.rgb);\r\n        this.colorCache.set(ccKey, color);\r\n        return color;\r\n    }\r\n    colorsByNames(names, palette = \"common\") {\r\n        return names.map(name => this.colorByName(name, palette)).sortWith(_objects_Color__WEBPACK_IMPORTED_MODULE_2__.colorSortKey);\r\n    }\r\n    place(id) { return this.places.get(id); }\r\n    racialGroup(id) { return this.racialGroups.get(id); }\r\n    scene(scene) {\r\n        return typeof scene === 'string' ? this.scenes.get(scene) : scene;\r\n    }\r\n    sceneOrNull(id) { return this.scenes.getOrNull(id); }\r\n    skill(id) { return this.skills.get(id); }\r\n    tile(id) { return this.tiles.get(id); }\r\n    tileByChar(char) {\r\n        var _a, _b;\r\n        if (!this.tilesByChar) {\r\n            this.tilesByChar = {};\r\n            for (let tt of this.tiles.values()) {\r\n                (_a = this.tilesByChar)[_b = tt.ch] ?? (_a[_b] = tt);\r\n            }\r\n        }\r\n        let tt = this.tilesByChar[char];\r\n        if (!tt)\r\n            throw new Error(`Unknown tile '${char}'`);\r\n        return tt;\r\n    }\r\n    trait(id) {\r\n        return this.traits.get(id);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/res/GameData.ts?");

/***/ }),

/***/ "./src/engine/res/ResourceManager.ts":
/*!*******************************************!*\
  !*** ./src/engine/res/ResourceManager.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ResourceManager\": () => (/* binding */ ResourceManager)\n/* harmony export */ });\n/* harmony import */ var _combat_BattleGrid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../combat/BattleGrid */ \"./src/engine/combat/BattleGrid.ts\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tinycolor2 */ \"./node_modules/tinycolor2/tinycolor.js\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../objects/creature/CoreSkills */ \"./src/engine/objects/creature/CoreSkills.ts\");\n\r\n\r\n\r\n/**\r\n * Loads images and other resources required by game\r\n */\r\nclass ResourceManager {\r\n    constructor(game, options) {\r\n        this.game = game;\r\n        this.options = options;\r\n    }\r\n    async loadEssentialResources() {\r\n        // load everything required to launch the game\r\n        // mods go here too I guess\r\n        let idata = await this.options.loadGameData();\r\n        let data = this.game.data;\r\n        this.game.idata = idata;\r\n        data.classes.clear();\r\n        data.classes.registerMany(idata.classes);\r\n        data.places.clear();\r\n        data.places.registerMany(idata.places);\r\n        data.racialGroups.clear();\r\n        data.racialGroups.registerMany(idata.racialGroups);\r\n        data.scenes.clear();\r\n        for (let list of idata.scenes)\r\n            data.scenes.registerMany(list);\r\n        data.skills.clear();\r\n        data.skills.registerMany(_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__.CoreSkills.list);\r\n        data.skills.registerMany(idata.skills, true);\r\n        data.tiles.clear();\r\n        data.tiles.register(_combat_BattleGrid__WEBPACK_IMPORTED_MODULE_0__.TileType.FLOOR);\r\n        for (let gdtt of idata.tiles) {\r\n            let tt = new _combat_BattleGrid__WEBPACK_IMPORTED_MODULE_0__.TileType(gdtt.id, gdtt.name, gdtt.ch, tinycolor2__WEBPACK_IMPORTED_MODULE_1__(gdtt.fg ?? '#cccccc'), gdtt.bg ? tinycolor2__WEBPACK_IMPORTED_MODULE_1__(gdtt.bg) : null, !!gdtt.walkable && !gdtt.solid, !!gdtt.solid);\r\n            data.tiles.register(tt);\r\n        }\r\n        data.traits.clear();\r\n        data.traits.registerMany(idata.traits);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/res/ResourceManager.ts?");

/***/ }),

/***/ "./src/engine/rules/Damage.ts":
/*!************************************!*\
  !*** ./src/engine/rules/Damage.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DamageType\": () => (/* binding */ DamageType),\n/* harmony export */   \"baseDmgSpec\": () => (/* binding */ baseDmgSpec)\n/* harmony export */ });\n/* harmony import */ var _math_Dice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Dice */ \"./src/engine/math/Dice.ts\");\n\r\n/*\r\n * Created by aimozg on 24.07.2022.\r\n */\r\nclass DamageType {\r\n    constructor(id, name, cssSuffix) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.cssSuffix = cssSuffix;\r\n    }\r\n}\r\nfunction baseDmgSpec(damage, damageType) {\r\n    return {\r\n        damage: typeof damage === 'string' ? (0,_math_Dice__WEBPACK_IMPORTED_MODULE_0__.dice)(damage) : damage,\r\n        damageType,\r\n    };\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/Damage.ts?");

/***/ }),

/***/ "./src/engine/rules/DamageType.ts":
/*!****************************************!*\
  !*** ./src/engine/rules/DamageType.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DamageTypes\": () => (/* binding */ DamageTypes)\n/* harmony export */ });\n/* harmony import */ var _Damage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Damage */ \"./src/engine/rules/Damage.ts\");\n\r\nconst DamageTypes = {\r\n    SLASHING: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/slashing\", \"slashing\", \"slashing\"),\r\n    PIERCING: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/piercing\", \"piercing\", \"piercing\"),\r\n    BLUNT: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/blunt\", \"blunt\", \"blunt\"),\r\n    FIRE: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/fire\", \"fire\", \"fire\"),\r\n    ICE: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/ice\", \"ice\", \"ice\"),\r\n    SHOCK: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/shock\", \"shock\", \"shock\"),\r\n    ACID: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/acid\", \"acid\", \"acid\"),\r\n    MAGIC: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/magic\", \"magic\", \"magic\"),\r\n    DARKNESS: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/darkness\", \"darkness\", \"darkness\"),\r\n    LIGHT: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/light\", \"light\", \"light\"),\r\n    PURE: new _Damage__WEBPACK_IMPORTED_MODULE_0__.DamageType(\"/pure\", \"pure\", \"pure\"),\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/DamageType.ts?");

/***/ }),

/***/ "./src/engine/rules/RacialGroup.ts":
/*!*****************************************!*\
  !*** ./src/engine/rules/RacialGroup.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RacialGroup\": () => (/* binding */ RacialGroup)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\nclass RacialGroup {\r\n    constructor(resId, name) {\r\n        this.resId = resId;\r\n        this.name = name;\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeRacialGroup;\r\n    }\r\n}\r\nRacialGroup.INVALID = new RacialGroup(\"\", \"INVALID\");\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/RacialGroup.ts?");

/***/ }),

/***/ "./src/engine/rules/TAttribute.ts":
/*!****************************************!*\
  !*** ./src/engine/rules/TAttribute.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TAttribute\": () => (/* binding */ TAttribute),\n/* harmony export */   \"TAttributes\": () => (/* binding */ TAttributes)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\nvar TAttribute;\r\n(function (TAttribute) {\r\n    TAttribute[TAttribute[\"STR\"] = 0] = \"STR\";\r\n    TAttribute[TAttribute[\"DEX\"] = 1] = \"DEX\";\r\n    TAttribute[TAttribute[\"CON\"] = 2] = \"CON\";\r\n    TAttribute[TAttribute[\"SPE\"] = 3] = \"SPE\";\r\n    TAttribute[TAttribute[\"PER\"] = 4] = \"PER\";\r\n    TAttribute[TAttribute[\"INT\"] = 5] = \"INT\";\r\n    TAttribute[TAttribute[\"WIS\"] = 6] = \"WIS\";\r\n    TAttribute[TAttribute[\"CHA\"] = 7] = \"CHA\";\r\n})(TAttribute || (TAttribute = {}));\r\nconst TAttributes = [0, 1, 2, 3, 4, 5, 6, 7];\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/TAttribute.ts?");

/***/ }),

/***/ "./src/engine/rules/TraitType.ts":
/*!***************************************!*\
  !*** ./src/engine/rules/TraitType.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SimpleTraitType\": () => (/* binding */ SimpleTraitType),\n/* harmony export */   \"TraitType\": () => (/* binding */ TraitType)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n/*\r\n * Created by aimozg on 27.08.2022.\r\n */\r\n\r\nclass TraitType {\r\n    constructor(resId) {\r\n        this.resId = resId;\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeTrait;\r\n    }\r\n}\r\nclass SimpleTraitType extends TraitType {\r\n    constructor(resId, constName, constDescription) {\r\n        super(resId);\r\n        this.constName = constName;\r\n        this.constDescription = constDescription;\r\n    }\r\n    name(host) {\r\n        return this.constName;\r\n    }\r\n    description(host) {\r\n        return this.constDescription;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/TraitType.ts?");

/***/ }),

/***/ "./src/engine/rules/classes/CharacterClass.ts":
/*!****************************************************!*\
  !*** ./src/engine/rules/classes/CharacterClass.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CharacterClass\": () => (/* binding */ CharacterClass)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../symbols */ \"./src/engine/symbols.ts\");\n\r\nclass CharacterClass {\r\n    constructor() {\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeClass;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/classes/CharacterClass.ts?");

/***/ }),

/***/ "./src/engine/rules/gender.ts":
/*!************************************!*\
  !*** ./src/engine/rules/gender.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GENDERS\": () => (/* binding */ GENDERS),\n/* harmony export */   \"GENDER_FEMALE\": () => (/* binding */ GENDER_FEMALE),\n/* harmony export */   \"GENDER_MALE\": () => (/* binding */ GENDER_MALE),\n/* harmony export */   \"GENDER_OTHER\": () => (/* binding */ GENDER_OTHER),\n/* harmony export */   \"SEXES\": () => (/* binding */ SEXES),\n/* harmony export */   \"SEX_BOTH\": () => (/* binding */ SEX_BOTH),\n/* harmony export */   \"SEX_FEMALE\": () => (/* binding */ SEX_FEMALE),\n/* harmony export */   \"SEX_MALE\": () => (/* binding */ SEX_MALE),\n/* harmony export */   \"SEX_NONE\": () => (/* binding */ SEX_NONE),\n/* harmony export */   \"defaultGender\": () => (/* binding */ defaultGender)\n/* harmony export */ });\nconst SEX_NONE = 'n';\r\nconst SEX_MALE = 'm';\r\nconst SEX_FEMALE = 'f';\r\nconst SEX_BOTH = 'h';\r\n/*export const SEX_OTHER = 'x';*/\r\nconst SEXES = ['n', 'm', 'f', 'h' /*, 'x'*/];\r\nconst GENDER_MALE = 'm';\r\nconst GENDER_FEMALE = 'f';\r\nconst GENDER_OTHER = 'x';\r\nconst GENDERS = ['m', 'f', 'x'];\r\nfunction defaultGender(sex, futa = 'f') {\r\n    if (sex === 'n')\r\n        return 'x';\r\n    if (sex === 'm')\r\n        return 'm';\r\n    if (sex === 'h')\r\n        return futa;\r\n    return 'f';\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/rules/gender.ts?");

/***/ }),

/***/ "./src/engine/scene/Encounter.ts":
/*!***************************************!*\
  !*** ./src/engine/scene/Encounter.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Encounter\": () => (/* binding */ Encounter),\n/* harmony export */   \"EncounterPool\": () => (/* binding */ EncounterPool)\n/* harmony export */ });\n/* harmony import */ var _builder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./builder */ \"./src/engine/scene/builder.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/*\r\n * Created by aimozg on 21.09.2022.\r\n */\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__.LogManager.loggerFor(\"engine.scene.Encounter\");\r\nclass Encounter {\r\n    constructor(id, scene, chance = 1, when) {\r\n        this.id = id;\r\n        this.scene = scene;\r\n        this.chance = chance;\r\n        this.when = when;\r\n    }\r\n    toString() {\r\n        return `[Encounter ${this.id}]`;\r\n    }\r\n    static build(def) {\r\n        let scene;\r\n        if (typeof def.scene === 'string') {\r\n            scene = _Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.data.scene(def.scene);\r\n        }\r\n        else {\r\n            scene = (0,_builder__WEBPACK_IMPORTED_MODULE_0__.buildScene)(\"/$encounters\", def.name, def.scene);\r\n        }\r\n        return new Encounter(def.name, scene, def.chance ?? 1, def.when);\r\n    }\r\n    possible() {\r\n        return this.when?.(_Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.gameController) ?? true;\r\n    }\r\n}\r\nclass EncounterPool {\r\n    constructor(id, encounters) {\r\n        this.id = id;\r\n        this.encounters = encounters;\r\n    }\r\n    pickOrNull(rng) {\r\n        let result = rng.pickWeightedOrNull(this.encounters.filter(e => e.possible()), e => e.chance);\r\n        logger.info(\"picked {} from {}\", result, this);\r\n        return result;\r\n    }\r\n    toString() {\r\n        return `[EncounterPool ${this.id}]`;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/scene/Encounter.ts?");

/***/ }),

/***/ "./src/engine/scene/Scene.ts":
/*!***********************************!*\
  !*** ./src/engine/scene/Scene.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Scene\": () => (/* binding */ Scene)\n/* harmony export */ });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ \"./src/engine/symbols.ts\");\n\r\nclass Scene {\r\n    constructor(resId, sceneFn) {\r\n        this.resId = resId;\r\n        this.sceneFn = sceneFn;\r\n        this.resType = _symbols__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ResTypeScene;\r\n    }\r\n    async execute(context) {\r\n        await this.sceneFn(context);\r\n    }\r\n    toString() {\r\n        return `[Scene ${this.resId}]`;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/scene/Scene.ts?");

/***/ }),

/***/ "./src/engine/scene/SceneContext.tsx":
/*!*******************************************!*\
  !*** ./src/engine/scene/SceneContext.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SceneContext\": () => (/* binding */ SceneContext)\n/* harmony export */ });\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _utils_Deferred__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/Deferred */ \"./src/engine/utils/Deferred.ts\");\n/* harmony import */ var _ui_components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _ambush__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ambush */ \"./src/engine/scene/ambush.ts\");\n/* harmony import */ var _ui_KeyCodes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n/* harmony import */ var _objects_Inventory__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../objects/Inventory */ \"./src/engine/objects/Inventory.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_4__.LogManager.loggerFor(\"engine.scene.SceneContext\");\r\nclass SceneContext {\r\n    constructor(sceneId, output) {\r\n        this.output = output;\r\n        this.lastValue = '';\r\n        this.characterPanel = _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.screenManager.sharedPlayerPanel;\r\n        this._ended = false;\r\n        this.nextButtons = [];\r\n        this.currentButtons = [];\r\n        this._promise = new _utils_Deferred__WEBPACK_IMPORTED_MODULE_1__.Deferred();\r\n        this._dirty = true;\r\n        this.game = _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance;\r\n        this.state = _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.state;\r\n        this._scene = this.game.data.scene(sceneId);\r\n    }\r\n    toString() { return `SceneContext(${this.sceneId})`; }\r\n    get sceneId() { return this.scene.resId; }\r\n    get scene() { return this._scene; }\r\n    get promise() { return this._promise; }\r\n    get player() { return _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.state.player; }\r\n    get gc() { return _Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance.gameController; }\r\n    get ended() { return this._ended; }\r\n    get layout() {\r\n        return {\r\n            left: this.characterPanel.astsx,\r\n            center: this.output.panel.astsx\r\n        };\r\n    }\r\n    async beginScreen(append) {\r\n        logger.debug(\"beginScreen in {}\", this.sceneId);\r\n        if (!append)\r\n            this.clear();\r\n        this.nextButtons = [];\r\n        this.currentButtons = [];\r\n        this.characterPanel.update();\r\n    }\r\n    async flush() {\r\n        logger.debug(\"flush in {}\", this.sceneId);\r\n        if (this._ended) {\r\n            this._promise.tryResolve(String(this.lastValue ?? ''));\r\n            return;\r\n        }\r\n        if (!this._dirty)\r\n            return;\r\n        this.characterPanel.update();\r\n        this._dirty = false;\r\n        this.checkDeadEnd();\r\n        // TODO tooltip\r\n        this.output.appendAction((0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"div\", { class: \"choices\" }, this.nextButtons.map(btn => (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"div\", { class: \"choice\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: btn.label, disabled: btn.disabled, hotkey: btn.hotkey, className: \"-link\" + (btn.default ? \" -default\" : \"\"), onClick: () => this.buttonClick(btn) }),\r\n            btn.hint && (0,preact__WEBPACK_IMPORTED_MODULE_3__.h)(\"span\", { className: \"choice-hint\" }, btn.hint)))));\r\n        this.currentButtons = this.nextButtons;\r\n        this.nextButtons = [];\r\n        this.output.flush();\r\n    }\r\n    checkDeadEnd() {\r\n        if (this.nextButtons.length === 0) {\r\n            // TODO rescue\r\n            throw new Error(`Dead end in scene ${this.sceneId}.`);\r\n        }\r\n    }\r\n    async buttonClick(c) {\r\n        logger.debug(\"buttonClick {}\", c.value);\r\n        this._dirty = true;\r\n        if (c.clear) {\r\n            this.output.clear();\r\n        }\r\n        else {\r\n            this.output.flip(\"[\" + c.label + \"]\");\r\n        }\r\n        await c.callback();\r\n        setTimeout(() => this.flush(), 0);\r\n    }\r\n    async finish() {\r\n        this._dirty = true;\r\n        this._ended = true;\r\n        await this.flush();\r\n    }\r\n    async play(scene, append = false) {\r\n        logger.debug(\"play {}\", scene);\r\n        this._scene = this.game.data.scene(scene);\r\n        return this.playCurrentScene(append);\r\n    }\r\n    async playCurrentScene(append = false) {\r\n        this._dirty = true;\r\n        await this.beginScreen(append);\r\n        await this.scene.execute(this);\r\n        await this.flush();\r\n        return this.promise;\r\n    }\r\n    clear() {\r\n        logger.trace(\"clear\");\r\n        this._dirty = true;\r\n        this.output.flip();\r\n    }\r\n    say(text, parseTags = true) {\r\n        logger.trace(\"say {}\", text);\r\n        this._dirty = true;\r\n        this.output.print(text, parseTags);\r\n    }\r\n    choicelist(...choices) {\r\n        logger.trace(\"choiceList\");\r\n        this._dirty = true;\r\n        this.nextButtons = choices.filter(c => !c.hide).map((c, i) => {\r\n            let callback;\r\n            if ('scene' in c) {\r\n                callback = ((scene) => () => this.play(scene))(c.scene);\r\n            }\r\n            else if ('call' in c) {\r\n                callback = () => c.call(this);\r\n            }\r\n            else {\r\n                // TODO ()=>this.error\r\n                callback = () => { this.say(\"Error (no button callback)\"); };\r\n            }\r\n            let hint = c.hint;\r\n            let tooltip = c.tooltip;\r\n            let disabled = !!c.disabled;\r\n            if (typeof c.disabled === 'object') {\r\n                if (c.disabled.hint !== undefined)\r\n                    hint = c.disabled.hint;\r\n                if (c.disabled.tooltip !== undefined) {\r\n                    tooltip = tooltip ? (tooltip + \"<br>\") : \"\";\r\n                    tooltip += c.disabled.tooltip;\r\n                }\r\n            }\r\n            return {\r\n                clear: c.clear ?? false,\r\n                label: c.label,\r\n                hint,\r\n                tooltip,\r\n                default: c.default ?? false,\r\n                hotkey: c.hotkey ?? _ui_KeyCodes__WEBPACK_IMPORTED_MODULE_6__.KeyCodes.DefaultHotkeys[i],\r\n                value: 'value' in c ? c.value : c.label,\r\n                disabled,\r\n                callback\r\n            };\r\n        });\r\n    }\r\n    onKeyboardEvent(event) {\r\n        let hk = _ui_KeyCodes__WEBPACK_IMPORTED_MODULE_6__.KeyCodes.eventToHkString(event);\r\n        let btn = this.currentButtons.find(b => !b.disabled && b.hotkey === hk);\r\n        if (btn) {\r\n            event.preventDefault();\r\n            this.buttonClick(btn).then();\r\n        }\r\n    }\r\n    choices(choices) {\r\n        this._dirty = true;\r\n        this.choicelist(...Object.entries(choices).map(([k, v]) => {\r\n            if (typeof v === 'function') {\r\n                return { label: k, call: v };\r\n            }\r\n            else if (typeof v === 'string') {\r\n                return { label: k, scene: v };\r\n            }\r\n            else {\r\n                return Object.assign({ label: k }, v);\r\n            }\r\n        }));\r\n    }\r\n    async flipPage(label = \"Continue\", clear = false) {\r\n        logger.trace(\"flipPage...\");\r\n        this._dirty = true;\r\n        return new Promise((resolve) => {\r\n            this.choicelist({\r\n                label,\r\n                default: true,\r\n                clear,\r\n                call() {\r\n                    logger.debug(\"        ...done!\");\r\n                    resolve();\r\n                }\r\n            });\r\n            return this.flush();\r\n        });\r\n    }\r\n    next(sceneId, label = \"Continue\", clear = false) {\r\n        logger.trace(\"next {}\", sceneId);\r\n        this._dirty = true;\r\n        this.choicelist({\r\n            label,\r\n            default: true,\r\n            clear,\r\n            scene: sceneId\r\n        });\r\n    }\r\n    async ambush(def) {\r\n        await _ambush__WEBPACK_IMPORTED_MODULE_5__.AmbushRules.doAmbush(def, this);\r\n    }\r\n    async pickupItems(items) {\r\n        if (this.player.inventory.canTakeAll(items)) {\r\n            this.player.inventory.addAll(items);\r\n            await this.flipPage();\r\n        }\r\n        else {\r\n            await this.flipPage(\"Transfer\");\r\n            await this.gc.openTransferMenu(_objects_Inventory__WEBPACK_IMPORTED_MODULE_7__.Inventory.wrap(items));\r\n        }\r\n    }\r\n    endNow(value) {\r\n        logger.info(\"endNow {}\", value ?? '');\r\n        this._dirty = true;\r\n        if (this._ended) {\r\n            throw new Error(\"Duplicate end call\");\r\n        }\r\n        this.lastValue = value ?? this.lastValue ?? '';\r\n        this.finish().then();\r\n    }\r\n    endButton({ value, label = \"END\" } = {}) {\r\n        logger.info(\"endButton {}\", value ?? '');\r\n        this._dirty = true;\r\n        if (this._ended) {\r\n            throw new Error(\"Duplicate end call\");\r\n        }\r\n        this.lastValue = value ?? this.lastValue ?? '';\r\n        this.choicelist({\r\n            label: label,\r\n            call: () => {\r\n                this.finish().then();\r\n            }\r\n        });\r\n    }\r\n    async startBattleAndContinue(options) {\r\n        logger.info(\"startBattleAndContinue {}\", options);\r\n        let ctx = this.gc.startBattle(options);\r\n        return ctx.promise;\r\n    }\r\n    endAndBattle(options) {\r\n        logger.info(\"endAndBattle {}\", options);\r\n        this.promise.then(() => {\r\n            this.gc.startBattle(options);\r\n        });\r\n        this.endButton({ label: \"FIGHT\" });\r\n    }\r\n    endNowAndBattle(options) {\r\n        logger.info(\"endNowAndBattle {}\", options);\r\n        this.promise.then(() => {\r\n            this.gc.startBattle(options);\r\n        });\r\n        this.endNow();\r\n    }\r\n    ///////////////\r\n    // Utilities //\r\n    ///////////////\r\n    get rng() { return this.gc.rng; }\r\n    d20() { return this.rng.d20(); }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/scene/SceneContext.tsx?");

/***/ }),

/***/ "./src/engine/scene/ambush.ts":
/*!************************************!*\
  !*** ./src/engine/scene/ambush.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AmbushRules\": () => (/* binding */ AmbushRules)\n/* harmony export */ });\n/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/string */ \"./src/engine/utils/string.ts\");\n/* harmony import */ var _objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../objects/creature/CoreSkills */ \"./src/engine/objects/creature/CoreSkills.ts\");\n/*\r\n * Created by aimozg on 26.09.2022.\r\n */\r\n\r\n\r\nvar AmbushRules;\r\n(function (AmbushRules) {\r\n    function getAreaName(def, ctx) {\r\n        // TODO use def tags or ctx player location\r\n        return \"wilderness\";\r\n    }\r\n    AmbushRules.getAreaName = getAreaName;\r\n    function getThreatName(def, ctx) {\r\n        if (def.threatName !== undefined) {\r\n            return def.threatName;\r\n        }\r\n        if (def.monsters.length === 0) {\r\n            // TODO ctx.error()\r\n            return \"<p class='text-error'>ERROR Cannot generate Ambush-Success text for no monsters</p>\";\r\n        }\r\n        if (def.monsters.length === 1) {\r\n            return def.monsters[0].name;\r\n        }\r\n        // TODO if monsters have same name, use \"<N> <namePlural>\" (5 imps)\r\n        // TODO use numberOfThings\r\n        return \"\" + def.monsters.length + \" monsters\";\r\n    }\r\n    AmbushRules.getThreatName = getThreatName;\r\n    function defaultSuccessText(def, ctx) {\r\n        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"You notice {threat}, unaware of your presence.\", {\r\n            area: getAreaName(def, ctx),\r\n            threat: getThreatName(def, ctx)\r\n        });\r\n    }\r\n    AmbushRules.defaultSuccessText = defaultSuccessText;\r\n    function defaultFailText(def, ctx) {\r\n        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"You encunter {threat}. It's a fight!\", {\r\n            area: getAreaName(def, ctx),\r\n            threat: getThreatName(def, ctx)\r\n        });\r\n    }\r\n    AmbushRules.defaultFailText = defaultFailText;\r\n    function defaultCritFailText(def, ctx) {\r\n        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"Suddenly, a {threat} ambushes you!\", {\r\n            area: getAreaName(def, ctx),\r\n            threat: getThreatName(def, ctx)\r\n        });\r\n    }\r\n    AmbushRules.defaultCritFailText = defaultCritFailText;\r\n    function defaultSuccessOptions(def, ctx) {\r\n        let cd = [];\r\n        let threatName = getThreatName(def, ctx);\r\n        // TODO add talk option if present in def\r\n        /*\r\n        cd.push({\r\n            label: \"Talk\",\r\n            hint: substitutePattern(\"Greet {threat} and try to talk\")\r\n            call: def.talkScene\r\n        });\r\n         */\r\n        cd.push({\r\n            label: \"Seduce\",\r\n            tooltip: (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"Try to seduce {threat} with your body\", { threat: threatName }),\r\n            disabled: { hint: \"Not implemented yet \" },\r\n            call: (ctx) => defaultSuccessSeduce(def, ctx)\r\n        });\r\n        cd.push({\r\n            label: \"Rape\",\r\n            tooltip: (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"Skip the foreplay and fuck {threat}\", { threat: threatName }),\r\n            disabled: { hint: \"Not implemented yet \" },\r\n            call: (ctx) => defaultSuccessRape(def, ctx)\r\n        });\r\n        cd.push({\r\n            label: \"Sneak Attack\",\r\n            tooltip: \"Start the combat in sneak mode\",\r\n            call: (ctx) => defaultSuccessSneakAttack(def, ctx)\r\n        });\r\n        cd.push({\r\n            label: \"Leave\",\r\n            tooltip: (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.substitutePattern)(\"Leave {threat} alone\", { threat: threatName }),\r\n            call: (ctx) => defaultSuccessLeave(def, ctx)\r\n        });\r\n        return cd;\r\n    }\r\n    AmbushRules.defaultSuccessOptions = defaultSuccessOptions;\r\n    async function defaultSuccessSeduce(def, ctx) {\r\n        throw new Error(\"defaultSuccessSeduce not implemented\");\r\n    }\r\n    AmbushRules.defaultSuccessSeduce = defaultSuccessSeduce;\r\n    async function defaultSuccessRape(def, ctx) {\r\n        throw new Error(\"defaultSuccessRape not implemented\");\r\n    }\r\n    AmbushRules.defaultSuccessRape = defaultSuccessRape;\r\n    async function defaultSuccessSneakAttack(def, ctx) {\r\n        ctx.endNowAndBattle({\r\n            enemies: def.monsters,\r\n            ambushed: \"enemies\"\r\n        });\r\n    }\r\n    AmbushRules.defaultSuccessSneakAttack = defaultSuccessSneakAttack;\r\n    async function defaultSuccessLeave(def, ctx) {\r\n        ctx.endNow();\r\n    }\r\n    AmbushRules.defaultSuccessLeave = defaultSuccessLeave;\r\n    function calcAmbushDc(def) {\r\n        // TODO use monsters, tags, player skill\r\n        return 15;\r\n    }\r\n    AmbushRules.calcAmbushDc = calcAmbushDc;\r\n    async function doAmbushSuccess(def, ctx) {\r\n        let successOptions = def.successOptions ?? defaultSuccessOptions(def, ctx);\r\n        ctx.choicelist(...successOptions);\r\n    }\r\n    AmbushRules.doAmbushSuccess = doAmbushSuccess;\r\n    async function doAmbushFail(def, ctx, critFail) {\r\n        ctx.endAndBattle({\r\n            enemies: def.monsters,\r\n            ambushed: critFail ? \"party\" : undefined\r\n        });\r\n    }\r\n    AmbushRules.doAmbushFail = doAmbushFail;\r\n    async function doAmbush(def, ctx) {\r\n        let roll = def.roll ?? ctx.d20();\r\n        let bonus = ctx.player.skillValue(_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_1__.CoreSkills.Ambush);\r\n        let dc = def.dc ?? calcAmbushDc(def);\r\n        let diff = roll + bonus - dc;\r\n        let resultType;\r\n        let result;\r\n        let rollText = def.silent ? \"\" : `Ambush check ${roll}${bonus.signed()} vs DC ${dc}`;\r\n        if (diff >= 0) {\r\n            resultType = \"success\";\r\n            if (!def.silent)\r\n                ctx.say(`<p class='text-roll-skill text-roll-success'>\\\\[${rollText}: Success\\\\]</p>`);\r\n            result = def.success ?? defaultSuccessText(def, ctx);\r\n        }\r\n        else if (diff > -10) {\r\n            resultType = \"fail\";\r\n            if (!def.silent)\r\n                ctx.say(`<p class='text-roll-skill text-roll-fail'>\\\\[${rollText}: Failure\\\\]</p>`);\r\n            result = def.fail ?? defaultFailText(def, ctx);\r\n        }\r\n        else {\r\n            resultType = \"critFail\";\r\n            if (!def.silent)\r\n                ctx.say(`<p class='text-roll-skill text-roll-critfail'>\\\\[${rollText}: Critical Failure\\\\]</p>`);\r\n            result = def.fail ?? defaultCritFailText(def, ctx);\r\n        }\r\n        if (typeof result === \"function\") {\r\n            // Override default behaviour\r\n            await result(ctx);\r\n        }\r\n        else {\r\n            // Print text and apply default result\r\n            ctx.say(result);\r\n            if (resultType === 'success') {\r\n                await doAmbushSuccess(def, ctx);\r\n            }\r\n            else {\r\n                await doAmbushFail(def, ctx, resultType === 'critFail');\r\n            }\r\n        }\r\n    }\r\n    AmbushRules.doAmbush = doAmbush;\r\n})(AmbushRules || (AmbushRules = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/scene/ambush.ts?");

/***/ }),

/***/ "./src/engine/scene/builder.ts":
/*!*************************************!*\
  !*** ./src/engine/scene/builder.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buildScene\": () => (/* binding */ buildScene),\n/* harmony export */   \"buildScenes\": () => (/* binding */ buildScenes)\n/* harmony export */ });\n/* harmony import */ var _Scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Scene */ \"./src/engine/scene/Scene.ts\");\n/*\r\n * Created by aimozg on 17.07.2022.\r\n */\r\n\r\nfunction contentToSceneFn(content, addend) {\r\n    if (typeof content === 'string') {\r\n        return ctx => {\r\n            ctx.say(content);\r\n            addend(ctx);\r\n        };\r\n    }\r\n    else {\r\n        return ctx => {\r\n            content(ctx);\r\n            addend(ctx);\r\n        };\r\n    }\r\n}\r\nfunction doNextFn(next) {\r\n    return ctx => ctx.next(next);\r\n}\r\nfunction buildScene(namespace, id, def) {\r\n    let sceneFn;\r\n    if (typeof def === 'function') {\r\n        sceneFn = def;\r\n    }\r\n    else if ('content' in def) {\r\n        sceneFn = contentToSceneFn(def.content, doNextFn(def.next));\r\n    }\r\n    else {\r\n        throw new Error(\"SceneDef \" + id + \" is incomplete\");\r\n    }\r\n    return new _Scene__WEBPACK_IMPORTED_MODULE_0__.Scene(namespace + \"_\" + id, sceneFn);\r\n}\r\nfunction buildScenes(namespace, scenes) {\r\n    return Object.entries(scenes).map(([id, def]) => {\r\n        return buildScene(namespace, id, def);\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/scene/builder.ts?");

/***/ }),

/***/ "./src/engine/state/GameContext.ts":
/*!*****************************************!*\
  !*** ./src/engine/state/GameContext.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NullGameContext\": () => (/* binding */ NullGameContext)\n/* harmony export */ });\n/* harmony import */ var _utils_Deferred__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/Deferred */ \"./src/engine/utils/Deferred.ts\");\n/*\r\n * Created by aimozg on 19.07.2022.\r\n */\r\n\r\nclass NullGameContext {\r\n    constructor() {\r\n        this.promise = new _utils_Deferred__WEBPACK_IMPORTED_MODULE_0__.Deferred();\r\n    }\r\n    get ended() { return false; }\r\n    toString() { return \"NulLGameContext\"; }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/state/GameContext.ts?");

/***/ }),

/***/ "./src/engine/state/SaveManager.ts":
/*!*****************************************!*\
  !*** ./src/engine/state/SaveManager.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SaveManager\": () => (/* binding */ SaveManager)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n/**\r\n * Interacts with browser APIs to save/load saved states.\r\n */\r\nclass SaveManager {\r\n    constructor() {\r\n    }\r\n    isRecentSaveAvailable() {\r\n        return false;\r\n    }\r\n    async loadAutosaveData() {\r\n        throw new Error(\"Not implemented yet\");\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/state/SaveManager.ts?");

/***/ }),

/***/ "./src/engine/state/StateManager.ts":
/*!******************************************!*\
  !*** ./src/engine/state/StateManager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StateManager\": () => (/* binding */ StateManager)\n/* harmony export */ });\n/* harmony import */ var _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../objects/creature/PlayerCharacter */ \"./src/engine/objects/creature/PlayerCharacter.ts\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _GameContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameContext */ \"./src/engine/state/GameContext.ts\");\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__.LogManager.loggerFor(\"engine.state.StateManager\");\r\n/**\r\n * Global state holder and manager.\r\n * Performs conversion to/from JSON but doesn't write it into storage (that's SaveManager)\r\n */\r\nclass StateManager {\r\n    constructor() {\r\n        this._gcStack = [new _GameContext__WEBPACK_IMPORTED_MODULE_2__.NullGameContext()];\r\n    }\r\n    get player() { return this._player; }\r\n    //////////////////\r\n    // Mass managers\r\n    //////////////////\r\n    clearGameState() {\r\n        logger.info(\"clearGameState\");\r\n        this._player = new _objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_0__.PlayerCharacter();\r\n        this._gcStack = [new _GameContext__WEBPACK_IMPORTED_MODULE_2__.NullGameContext()];\r\n    }\r\n    importGameState(data) {\r\n        logger.info(\"importGameState\");\r\n        this.clearGameState();\r\n        // TODO importGameState\r\n        throw new Error(\"Not implemented\");\r\n    }\r\n    exportGameState() {\r\n        logger.info(\"exportGameState\");\r\n        let save = {};\r\n        return save;\r\n    }\r\n    ///////////////////////\r\n    // Granular accessors\r\n    ///////////////////////\r\n    /**\r\n     * Set player. To be called during new game start only!\r\n     */\r\n    setupPlayer(player) {\r\n        logger.debug(\"setupPlayer\");\r\n        this._player = player;\r\n    }\r\n    pushGameContext(context) {\r\n        logger.info(\"pushGameContext {}\", context);\r\n        this._gcStack.push(context);\r\n    }\r\n    currentContext() {\r\n        return this._gcStack[this._gcStack.length - 1];\r\n    }\r\n    flushGameContext() {\r\n        logger.debug(\"flushGameContext\");\r\n        while (true) {\r\n            let top = this._gcStack[this._gcStack.length - 1];\r\n            if (top.ended) {\r\n                logger.debug(\"game context ended {}\", top);\r\n                this._gcStack.pop();\r\n            }\r\n            else {\r\n                return top;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/state/StateManager.ts?");

/***/ }),

/***/ "./src/engine/symbols.ts":
/*!*******************************!*\
  !*** ./src/engine/symbols.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\nvar Symbols;\r\n(function (Symbols) {\r\n    Symbols.ResTypeBaseItem = Symbol(\"ResType_BaseItem\");\r\n    Symbols.ResTypeClass = Symbol(\"ResType_Class\");\r\n    Symbols.ResTypePlace = Symbol(\"ResType_Place\");\r\n    Symbols.ResTypeRacialGroup = Symbol(\"ResType_RacialGroup\");\r\n    Symbols.ResTypeScene = Symbol(\"ResType_Scene\");\r\n    Symbols.ResTypeSkill = Symbol(\"ResType_Skill\");\r\n    Symbols.ResTypeTile = Symbol(\"ResType_Tile\");\r\n    Symbols.ResTypeTrait = Symbol(\"ResType_Trait\");\r\n})(Symbols || (Symbols = {}));\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Symbols);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/symbols.ts?");

/***/ }),

/***/ "./src/engine/text/CommonText.ts":
/*!***************************************!*\
  !*** ./src/engine/text/CommonText.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CommonText\": () => (/* binding */ CommonText)\n/* harmony export */ });\nvar CommonText;\r\n(function (CommonText) {\r\n    function armorInfo(a) {\r\n        if (!a?.asArmor)\r\n            return \"-\";\r\n        let def = a.asArmor.defenseBonus ? \"Def \" + a.asArmor.defenseBonus : \"\";\r\n        let dr = a.asArmor.drBonus ? \"DR \" + a.asArmor.drBonus : \"\";\r\n        if (dr && def)\r\n            return def + \"/\" + dr;\r\n        if (dr)\r\n            return dr;\r\n        if (def)\r\n            return def;\r\n        return \"-\";\r\n    }\r\n    CommonText.armorInfo = armorInfo;\r\n    function weaponInfo(w) {\r\n        return w.asWeapon?.damage?.toString() ?? \"-\";\r\n    }\r\n    CommonText.weaponInfo = weaponInfo;\r\n    function itemInfo(i) {\r\n        if (i.isArmor)\r\n            return armorInfo(i);\r\n        if (i.isWeapon)\r\n            return weaponInfo(i);\r\n        return \"-\";\r\n    }\r\n    CommonText.itemInfo = itemInfo;\r\n})(CommonText || (CommonText = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/CommonText.ts?");

/***/ }),

/***/ "./src/engine/text/ParseTag.tsx":
/*!**************************************!*\
  !*** ./src/engine/text/ParseTag.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Parse\": () => (/* binding */ Parse)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _parser_Parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parser/Parser */ \"./src/engine/text/parser/Parser.ts\");\n/* harmony import */ var _utils_vnode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/vnode */ \"./src/engine/utils/vnode.ts\");\n\r\n\r\n\r\nclass Parse extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    render(props) {\r\n        let parser = props.parser ?? new _parser_Parser__WEBPACK_IMPORTED_MODULE_1__.Parser(props.self);\r\n        if (props.select)\r\n            parser.setTarget(props.select);\r\n        return (0,_utils_vnode__WEBPACK_IMPORTED_MODULE_2__.walkVNode)(props.children, (node, fn) => {\r\n            if (typeof node === 'string') {\r\n                fn.replace = parser.print(node);\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/ParseTag.tsx?");

/***/ }),

/***/ "./src/engine/text/output/InteractiveTextOutput.tsx":
/*!**********************************************************!*\
  !*** ./src/engine/text/output/InteractiveTextOutput.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InteractiveTextOutput\": () => (/* binding */ InteractiveTextOutput)\n/* harmony export */ });\n/* harmony import */ var _parser_Parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parser/Parser */ \"./src/engine/text/parser/Parser.ts\");\n/* harmony import */ var _TextOutput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextOutput */ \"./src/engine/text/output/TextOutput.tsx\");\n\r\n\r\nclass InteractiveTextOutput extends _TextOutput__WEBPACK_IMPORTED_MODULE_1__.TextOutput {\r\n    constructor(panel, parser = new _parser_Parser__WEBPACK_IMPORTED_MODULE_0__.Parser()) {\r\n        super(panel.pages, parser);\r\n        this.panel = panel;\r\n    }\r\n    appendAction(e) {\r\n        this.panel.addActions(e);\r\n    }\r\n    clear() {\r\n        this.panel.clear();\r\n    }\r\n    flush() {\r\n        this.panel.flush();\r\n    }\r\n    flip(suffix) {\r\n        this.panel.flipPage(suffix);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/output/InteractiveTextOutput.tsx?");

/***/ }),

/***/ "./src/engine/text/output/TextOutput.tsx":
/*!***********************************************!*\
  !*** ./src/engine/text/output/TextOutput.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextOutput\": () => (/* binding */ TextOutput)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _parser_Parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../parser/Parser */ \"./src/engine/text/parser/Parser.ts\");\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_1__.LogManager.loggerFor(\"engine.text.output.TextOutput\");\r\n/**\r\n * Parses texts and renders in into ScenePanel\r\n */\r\nclass TextOutput {\r\n    constructor(pages, parser = new _parser_Parser__WEBPACK_IMPORTED_MODULE_2__.Parser()) {\r\n        this.pages = pages;\r\n        this.parser = parser;\r\n    }\r\n    clear() {\r\n        this.pages.clear();\r\n    }\r\n    flush() {\r\n        this.pages.flush();\r\n    }\r\n    flip(suffix) {\r\n        this.pages.flipPage(suffix);\r\n    }\r\n    selectActor(actor) {\r\n        this.parser.setTarget(actor);\r\n    }\r\n    deselectActor() {\r\n        this.parser.deselectActor();\r\n    }\r\n    print(text, parseTags = true) {\r\n        this.append(this.parser.parse(text, parseTags));\r\n    }\r\n    append(input) {\r\n        let e = TextOutput.render(input);\r\n        this.pages.addContent(e);\r\n    }\r\n    appendNode(e) {\r\n        this.pages.addContent(e);\r\n    }\r\n    static render(input) {\r\n        if (Array.isArray(input))\r\n            return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, input.map(i => TextOutput.render(i)));\r\n        switch (input.type) {\r\n            case \"text\":\r\n                logger.trace(\"print text {}\", input.content);\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, input.content);\r\n            /*if (input.content.includes('\\n')) {\r\n                let parts = input.content.split('\\n');\r\n                return <Fragment>{parts.map((s,i)=>[i > 0 && <br/>,s])}</Fragment>\r\n            } else {\r\n                return <Fragment>{input.content}</Fragment>\r\n            }*/\r\n            case \"styledText\":\r\n                logger.trace(\"print styled {}\", input.className);\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"span\", { class: input.className }, TextOutput.render(input.content));\r\n            case \"error\":\r\n                logger.trace(\"print error {}\", input.content);\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"span\", { class: \"text-error\" }, String(input.content));\r\n            case \"hr\":\r\n                logger.trace(\"print hr\");\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"hr\", null);\r\n            case \"br\":\r\n                logger.trace(\"print br\");\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"br\", null);\r\n            case \"group\":\r\n                return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, input.content.map(i => TextOutput.render(i)));\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/output/TextOutput.tsx?");

/***/ }),

/***/ "./src/engine/text/parser/AbstractParser.ts":
/*!**************************************************!*\
  !*** ./src/engine/text/parser/AbstractParser.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbstractParser\": () => (/* binding */ AbstractParser)\n/* harmony export */ });\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _Parsed__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Parsed */ \"./src/engine/text/parser/Parsed.ts\");\n/* harmony import */ var _Lexer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Lexer */ \"./src/engine/text/parser/Lexer.ts\");\n/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/string */ \"./src/engine/utils/string.ts\");\n// noinspection RegExpRedundantEscape\r\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__.LogManager.loggerFor(\"engine.text.parser.AbstractParser\");\r\n// Lookahead regexes\r\n/** Plain text */\r\nconst LA_TEXT = /^[^\\\\\\[<\\n&]+/;\r\n/** Line break */\r\nconst LA_BR = /^\\n/;\r\n/** HTML Entity */\r\nconst LA_ENTITY = /^&(?:\\w+|#x[a-fA-F\\d]+|#\\d+);/;\r\n/** Escaped control char */\r\nconst LA_ESCAPED = /^\\\\./;\r\n/**\r\n * Simple `[parsertag]` or `[tag arguments]`.\r\n * Group 1 = tag name, group 2 = tag arguments (including any leading whitespace)\r\n */\r\nconst LA_SIMPLETAG = /^\\[([\\w-]+:?)([^\\]]*)\\]/;\r\n/** Non-tag in square brackets like `[1]` */\r\nconst LA_FALSETAG = /^\\[(?:\\W|\\\\.)/;\r\n/** Group 1 = tag name */\r\nconst LA_TAGSTART = /^\\[(\\w+)\\b/;\r\n/**\r\n * Group 1: tag name\r\n * Group 2: raw attributes string\r\n * Group 3: '/' or empty string before '>'\r\n */\r\nconst LA_HTMLTAGSTART = /^< *([\\w\\d:-]+) *((?: *[\\w\\d:_-]+(?: *=(?:\"[^\"]*\"|'[^']*'|[\\w\\d_-]+))?)*) *(\\/?)>/;\r\n/** Group 1 : tag name */\r\nconst LA_HTMLTAGEND = /^<\\/ *([\\w\\d:-]+) *>/;\r\nfunction parseHtmlAttrs(attrString) {\r\n    // whitespace\r\n    const ALA_WS = /^\\s+/;\r\n    // attribute with double-quoted value\r\n    const ALA_ATTR_DQ_VALUE = /^([\\w_@$:-]+)=\"([^\"]*)\"/;\r\n    const ALA_ATTR_SQ_VALUE = /^([\\w_@$:-]+)='([^']*)'/;\r\n    const ALA_ATTR_NQ_VALUE = /^([\\w_@$:-]+)=([^ &>]*)/;\r\n    const ALA_ATTR_NO_VALUE = /^([\\w_@$:-]+)(?= |$)/;\r\n    let attrs = {};\r\n    new _Lexer__WEBPACK_IMPORTED_MODULE_2__.Lexer(attrString).eatLoop(lexer => {\r\n        let match;\r\n        if ((match = lexer.tryEat(ALA_WS))) {\r\n            // do nothing\r\n        }\r\n        else if ((match = lexer.tryEat(ALA_ATTR_DQ_VALUE))\r\n            || (match = lexer.tryEat(ALA_ATTR_SQ_VALUE))\r\n            || (match = lexer.tryEat(ALA_ATTR_NQ_VALUE))\r\n            || (match = lexer.tryEat(ALA_ATTR_NO_VALUE))) {\r\n            attrs[match[1]] = match[2];\r\n        }\r\n        else {\r\n            logger.warn(\"Bad HTML attribute {}\", attrString);\r\n            lexer.halt();\r\n        }\r\n    });\r\n    return attrs;\r\n}\r\nclass AbstractParser {\r\n    constructor() {\r\n        this.allowedHtmlTags = new Set([\"b\", \"i\", \"u\", \"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"hr\", \"br\", \"span\", \"div\", \"sub\", \"sup\", \"em\", \"strong\"]);\r\n    }\r\n    evaluateHtmlTag(tag, attrs, single, current, push) {\r\n        if (tag === 'hr' && single) {\r\n            current.push({ type: 'hr' });\r\n        }\r\n        else if (tag === 'br' && single) {\r\n            current.push({ type: 'br' });\r\n        }\r\n        else if (this.allowedHtmlTags.has(tag) || tag.startsWith(\"text-\")) {\r\n            let cls = tag.startsWith(\"text-\") ? tag : (\"text-\" + tag);\r\n            if (attrs['class'])\r\n                cls += \" \" + attrs['class'];\r\n            let block = {\r\n                type: \"styledText\",\r\n                className: cls,\r\n                content: []\r\n            };\r\n            current.push(block);\r\n            push(tag, block.content);\r\n        }\r\n        else {\r\n            let error = `Unsupported HTML tag ${tag}`;\r\n            logger.warn(error);\r\n            current.push({ type: \"error\", content: error });\r\n        }\r\n    }\r\n    evaluateTag(tag, tagArgsRaw) {\r\n        let content = this.doEvaluateTag(tag.toLowerCase(), tagArgsRaw);\r\n        if (typeof content === 'string')\r\n            content = { type: \"group\", content: this.parse(content) };\r\n        switch ((0,_utils_string__WEBPACK_IMPORTED_MODULE_3__.adjustCaseMode)(tag)) {\r\n            case \"uppercase\":\r\n                (0,_Parsed__WEBPACK_IMPORTED_MODULE_1__.walkParsedText)(content, p => {\r\n                    p.content = p.content.toUpperCase();\r\n                });\r\n                break;\r\n            case \"capitalize\": {\r\n                let capd = false;\r\n                (0,_Parsed__WEBPACK_IMPORTED_MODULE_1__.walkParsedText)(content, p => {\r\n                    if (capd)\r\n                        return;\r\n                    let t2 = p.content.capitalize();\r\n                    if (p.content !== t2) {\r\n                        p.content = t2;\r\n                        capd = true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return content;\r\n    }\r\n    parse(input, parseTags = true) {\r\n        logger.trace(\"parse\", input, parseTags);\r\n        const result = [];\r\n        const stack = [{ tag: '', list: result }];\r\n        // noinspection JSMismatchedCollectionQueryUpdate\r\n        let current = result;\r\n        let currentTag = '';\r\n        new _Lexer__WEBPACK_IMPORTED_MODULE_2__.Lexer(input).eatLoop(lexer => {\r\n            let match;\r\n            if ((match = lexer.tryEat(LA_TEXT))) {\r\n                logger.trace(\"text '{}'\", match[0]);\r\n                current.push({ type: \"text\", content: match[0] });\r\n            }\r\n            else if ((match = lexer.tryEat(LA_ENTITY))) {\r\n                logger.trace(\"entity '{}'\", match[0]);\r\n                current.push({ type: \"text\", content: (0,_utils_string__WEBPACK_IMPORTED_MODULE_3__.parseXmlEntity)(match[0]) });\r\n            }\r\n            else if (lexer.tryEat(LA_BR)) {\r\n                logger.trace(\"br\");\r\n                current.push({ type: \"br\" });\r\n            }\r\n            else if ((match = lexer.tryEat(LA_ESCAPED))) {\r\n                logger.trace(\"escaped '{}'\", match[0][1]);\r\n                current.push({ type: \"text\", content: match[0][1] });\r\n            }\r\n            else if ((match = lexer.tryEat(LA_SIMPLETAG))) {\r\n                if (!parseTags) {\r\n                    current.push({ type: \"text\", content: match[0] });\r\n                }\r\n                else {\r\n                    let [_, tag, args] = match;\r\n                    logger.trace(\"simpletag '{}' '{}'\", tag, args);\r\n                    try {\r\n                        current.push(this.evaluateTag(tag, args));\r\n                    }\r\n                    catch (e) {\r\n                        logger.warn(e);\r\n                        current.push({ type: \"error\", content: e });\r\n                    }\r\n                }\r\n            }\r\n            else if ((match = lexer.tryEat(LA_FALSETAG))) {\r\n                logger.trace(\"falsetag '{}'\", match[0]);\r\n                current.push({ type: \"text\", content: match[0] });\r\n            }\r\n            else if ((match = lexer.tryEat(LA_TAGSTART))) {\r\n                logger.trace(\"tag '{}'\", match[0]);\r\n                // TODO implement complex tag parsing\r\n                throw new Error(\"Complex tag parsing not implemented\");\r\n            }\r\n            else if ((match = lexer.tryEat(LA_HTMLTAGSTART))) {\r\n                let [_, tag, attrs, ending] = match;\r\n                tag = tag.toLowerCase();\r\n                logger.trace(\"htmlstart '{}' '{}' '{}'\", tag, attrs, ending);\r\n                this.evaluateHtmlTag(tag, parseHtmlAttrs(attrs), !!ending, current, (tag, list) => {\r\n                    current = list;\r\n                    currentTag = tag;\r\n                    stack.push({ tag, list });\r\n                });\r\n            }\r\n            else if ((match = lexer.tryEat(LA_HTMLTAGEND))) {\r\n                let tag = match[1].toLowerCase();\r\n                logger.trace(\"htmlend '{}'\", tag);\r\n                if (tag === currentTag) {\r\n                    stack.pop();\r\n                    current = stack[stack.length - 1].list;\r\n                    currentTag = stack[stack.length - 1].tag;\r\n                }\r\n                else {\r\n                    let error = `Bad closing tag '${tag}', expected '${currentTag}'`;\r\n                    logger.warn(error);\r\n                    current.push({ type: \"error\", content: error });\r\n                }\r\n            }\r\n            else {\r\n                logger.warn('Cannot parse: {}', lexer.remainder);\r\n                current.push({ type: \"error\", content: lexer.remainder });\r\n                lexer.halt();\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/parser/AbstractParser.ts?");

/***/ }),

/***/ "./src/engine/text/parser/Lexer.ts":
/*!*****************************************!*\
  !*** ./src/engine/text/parser/Lexer.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Lexer\": () => (/* binding */ Lexer)\n/* harmony export */ });\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__.LogManager.loggerFor(\"engine.text.parser.Lexer\");\r\nclass Lexer {\r\n    constructor(input) {\r\n        this.input = input;\r\n        // TODO Optimization note: Don't cut string into parts, track index and use regexes' matchAt()\r\n        this.s = this.input;\r\n        this.match = null;\r\n    }\r\n    get remainder() {\r\n        return this.s;\r\n    }\r\n    get length() {\r\n        return this.s.length;\r\n    }\r\n    eol() {\r\n        return this.s.length === 0;\r\n    }\r\n    skip(n) {\r\n        this.s = this.s.slice(n);\r\n    }\r\n    eat(n) {\r\n        let part = this.s.slice(0, n);\r\n        logger.trace(\"Matched {}\", part);\r\n        this.skip(n);\r\n        return part;\r\n    }\r\n    tryEat(lookahead) {\r\n        lookahead.lastIndex = 0;\r\n        let match = lookahead.exec(this.s);\r\n        if (match) {\r\n            this.match = match;\r\n            logger.trace(\"Matched {}\", match[0]);\r\n            this.skip(match[0].length);\r\n        }\r\n        return match;\r\n    }\r\n    eatLoop(iter) {\r\n        let n = this.length + 1;\r\n        while (!this.eol()) {\r\n            if (this.length >= n) {\r\n                // Ensure string shortens as we go\r\n                throw new Error(`Parser stuck at '${this.remainder}'`);\r\n            }\r\n            n = this.length;\r\n            iter(this);\r\n        }\r\n    }\r\n    halt() {\r\n        this.s = '';\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/parser/Lexer.ts?");

/***/ }),

/***/ "./src/engine/text/parser/Parsed.ts":
/*!******************************************!*\
  !*** ./src/engine/text/parser/Parsed.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"walkParsed\": () => (/* binding */ walkParsed),\n/* harmony export */   \"walkParsedText\": () => (/* binding */ walkParsedText)\n/* harmony export */ });\nfunction walkParsed(e, fn) {\r\n    fn(e);\r\n    if (e.type === \"styledText\" || e.type === \"group\") {\r\n        e.content.forEach(p => {\r\n            walkParsed(p, fn);\r\n        });\r\n    }\r\n}\r\nfunction walkParsedText(e, fn) {\r\n    walkParsed(e, p => {\r\n        if (p.type === \"text\")\r\n            fn(p);\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/parser/Parsed.ts?");

/***/ }),

/***/ "./src/engine/text/parser/Parser.ts":
/*!******************************************!*\
  !*** ./src/engine/text/parser/Parser.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Parser\": () => (/* binding */ Parser)\n/* harmony export */ });\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _AbstractParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractParser */ \"./src/engine/text/parser/AbstractParser.ts\");\n/* harmony import */ var _output_TextOutput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../output/TextOutput */ \"./src/engine/text/output/TextOutput.tsx\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _math_fxrng__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _objects_creature_Character__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../objects/creature/Character */ \"./src/engine/objects/creature/Character.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_0__.LogManager.loggerFor(\"engine.text.Parser\");\r\nclass Parser extends _AbstractParser__WEBPACK_IMPORTED_MODULE_1__.AbstractParser {\r\n    constructor(self = _Game__WEBPACK_IMPORTED_MODULE_3__.Game.instance.state.player) {\r\n        super();\r\n        this.self = self;\r\n        this.target = _Game__WEBPACK_IMPORTED_MODULE_3__.Game.instance.state.player;\r\n        this.stack = [];\r\n        for (let tag of Parser.AllowedHtmlTags)\r\n            this.allowedHtmlTags.add(tag);\r\n    }\r\n    setTarget(creature) {\r\n        this.target = creature;\r\n    }\r\n    selectActor(creature) {\r\n        this.stack.push(this.target);\r\n        this.setTarget(creature);\r\n    }\r\n    deselectActor() {\r\n        this.setTarget(this.stack.pop() ?? this.self);\r\n    }\r\n    print(text) {\r\n        return _output_TextOutput__WEBPACK_IMPORTED_MODULE_2__.TextOutput.render(this.parse(text));\r\n    }\r\n    doEvaluateTag(tag, tagArgs) {\r\n        logger.trace(\"doEvaluateTag {} {}\", tag, tagArgs);\r\n        let isSelf = this.self && (this.self === this.target);\r\n        let target = this.target;\r\n        switch (tag) {\r\n            case 'either':\r\n            case 'either:':\r\n                return _math_fxrng__WEBPACK_IMPORTED_MODULE_4__[\"default\"].pick(tagArgs.split('|'));\r\n            case 'you':\r\n                return isSelf ? 'you' : target.name;\r\n            case 'your':\r\n                return isSelf ? 'your' : (target.name + \"'s\"); // TODO plural +\"'\"\r\n            case 'have':\r\n            case 'has':\r\n                return isSelf ? 'have' : 'has'; // TODO check target.isPlural\r\n            case 'is':\r\n            case 'are':\r\n                return isSelf ? 'are' : 'is'; // TODO check target.isPlural\r\n            case 'foot':\r\n                if (!(target instanceof _objects_creature_Character__WEBPACK_IMPORTED_MODULE_5__.Character))\r\n                    return \"foot\";\r\n                return target.body.legs.foot();\r\n            case 'feet':\r\n                if (!(target instanceof _objects_creature_Character__WEBPACK_IMPORTED_MODULE_5__.Character))\r\n                    return \"feet\";\r\n                return target.body.legs.feet();\r\n            case 'pg':\r\n                return {\r\n                    type: \"group\",\r\n                    content: [{ type: \"br\" }, { type: \"br\" }]\r\n                };\r\n            default:\r\n                throw new Error(\"Unknown tag \" + tag);\r\n        }\r\n    }\r\n}\r\nParser.AllowedHtmlTags = [\"hl\"];\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/text/parser/Parser.ts?");

/***/ }),

/***/ "./src/engine/ui/AbstractScreen.ts":
/*!*****************************************!*\
  !*** ./src/engine/ui/AbstractScreen.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbstractScreen\": () => (/* binding */ AbstractScreen)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n\r\n\r\nclass AbstractScreen {\r\n    constructor() {\r\n        this.container = document.createElement(\"div\");\r\n        this.container.className = \"screen\";\r\n    }\r\n    get game() {\r\n        return _Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance;\r\n    }\r\n    render() {\r\n        (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(this.node(), this.container);\r\n    }\r\n    onAdd() {\r\n    }\r\n    onActivate() {\r\n        this.container.classList.remove(\"screen-shaded\");\r\n    }\r\n    onDeactivate() {\r\n        this.container.classList.add(\"screen-shaded\");\r\n    }\r\n    onRemove() {\r\n    }\r\n    onKeyboardEvent(event) { }\r\n    animationFrame(dt, time) { }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/AbstractScreen.ts?");

/***/ }),

/***/ "./src/engine/ui/AppendNode.tsx":
/*!**************************************!*\
  !*** ./src/engine/ui/AppendNode.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AppendNode\": () => (/* binding */ AppendNode)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/*\r\n * Created by aimozg on 20.07.2022.\r\n */\r\n\r\nclass AppendNode extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.ref = (0,preact__WEBPACK_IMPORTED_MODULE_0__.createRef)();\r\n        this.fragment = document.createDocumentFragment();\r\n    }\r\n    componentDidMount() {\r\n        this.ref.current.parentNode.insertBefore(this.props.child, this.ref.current.nextSibling);\r\n        this.ref.current.remove();\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.child.parentNode?.removeChild(this.props.child);\r\n    }\r\n    shouldComponentUpdate() {\r\n        return false;\r\n    }\r\n    render() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { style: \"display:none\", ref: this.ref });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/AppendNode.tsx?");

/***/ }),

/***/ "./src/engine/ui/DomComponent.tsx":
/*!****************************************!*\
  !*** ./src/engine/ui/DomComponent.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DomComponent\": () => (/* binding */ DomComponent)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom */ \"./src/engine/utils/dom.ts\");\n/* harmony import */ var _AppendNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AppendNode */ \"./src/engine/ui/AppendNode.tsx\");\n\r\n\r\n\r\nclass DomComponent {\r\n    constructor(wireframe) {\r\n        this.node = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_1__.render1)(wireframe);\r\n    }\r\n    get astsx() { return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_AppendNode__WEBPACK_IMPORTED_MODULE_2__.AppendNode, { child: this.node }); }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/DomComponent.tsx?");

/***/ }),

/***/ "./src/engine/ui/KeyCodes.ts":
/*!***********************************!*\
  !*** ./src/engine/ui/KeyCodes.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"KeyCodes\": () => (/* binding */ KeyCodes)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 28.08.2022.\r\n */\r\nvar KeyCodes;\r\n(function (KeyCodes) {\r\n    // QWERTY fn row\r\n    KeyCodes.ESCAPE = \"Escape\";\r\n    KeyCodes.F1 = \"F1\";\r\n    KeyCodes.F2 = \"F2\";\r\n    KeyCodes.F3 = \"F3\";\r\n    KeyCodes.F4 = \"F4\";\r\n    KeyCodes.F5 = \"F5\";\r\n    KeyCodes.F6 = \"F6\";\r\n    KeyCodes.F7 = \"F7\";\r\n    KeyCodes.F8 = \"F8\";\r\n    KeyCodes.F9 = \"F9\";\r\n    KeyCodes.F10 = \"F10\";\r\n    KeyCodes.F11 = \"F11\";\r\n    KeyCodes.F12 = \"F12\";\r\n    // QWERTY digit row\r\n    KeyCodes.BACKQUOTE = \"Backquote\";\r\n    KeyCodes.DIGIT0 = \"Digit0\";\r\n    KeyCodes.DIGIT1 = \"Digit1\";\r\n    KeyCodes.DIGIT2 = \"Digit2\";\r\n    KeyCodes.DIGIT3 = \"Digit3\";\r\n    KeyCodes.DIGIT4 = \"Digit4\";\r\n    KeyCodes.DIGIT5 = \"Digit5\";\r\n    KeyCodes.DIGIT6 = \"Digit6\";\r\n    KeyCodes.DIGIT7 = \"Digit7\";\r\n    KeyCodes.DIGIT8 = \"Digit8\";\r\n    KeyCodes.DIGIT9 = \"Digit9\";\r\n    KeyCodes.MINUS = \"Minus\";\r\n    KeyCodes.EQUAL = \"Equal\";\r\n    KeyCodes.BACKSPACE = \"Backspace\";\r\n    // QWERTY alphabet row 1\r\n    KeyCodes.TAB = \"Tab\";\r\n    KeyCodes.KEYQ = \"KeyQ\";\r\n    KeyCodes.KEYW = \"KeyW\";\r\n    KeyCodes.KEYE = \"KeyE\";\r\n    KeyCodes.KEYR = \"KeyR\";\r\n    KeyCodes.KEYT = \"KeyT\";\r\n    KeyCodes.KEYY = \"KeyY\";\r\n    KeyCodes.KEYU = \"KeyU\";\r\n    KeyCodes.KEYI = \"KeyI\";\r\n    KeyCodes.KEYO = \"KeyO\";\r\n    KeyCodes.KEYP = \"KeyP\";\r\n    KeyCodes.BRACKETLEFT = \"BracketLeft\";\r\n    KeyCodes.BRACKETRIGHT = \"BracketRight\";\r\n    KeyCodes.BACKSLASH = \"Backslash\";\r\n    // QWERTY alphabet row 2\r\n    KeyCodes.CAPSLOCK = \"CapsLock\";\r\n    KeyCodes.KEYA = \"KeyA\";\r\n    KeyCodes.KEYS = \"KeyS\";\r\n    KeyCodes.KEYD = \"KeyD\";\r\n    KeyCodes.KEYF = \"KeyF\";\r\n    KeyCodes.KEYG = \"KeyG\";\r\n    KeyCodes.KEYH = \"KeyH\";\r\n    KeyCodes.KEYJ = \"KeyJ\";\r\n    KeyCodes.KEYK = \"KeyK\";\r\n    KeyCodes.KEYL = \"KeyL\";\r\n    KeyCodes.SEMICOLON = \"Semicolon\";\r\n    KeyCodes.QUOTE = \"Quote\";\r\n    KeyCodes.ENTER = \"Enter\";\r\n    // QWERTY alphabet row 3\r\n    KeyCodes.SHIFTLEFT = \"ShiftLeft\";\r\n    KeyCodes.KEYZ = \"KeyZ\";\r\n    KeyCodes.KEYX = \"KeyX\";\r\n    KeyCodes.KEYC = \"KeyC\";\r\n    KeyCodes.KEYV = \"KeyV\";\r\n    KeyCodes.KEYB = \"KeyB\";\r\n    KeyCodes.KEYN = \"KeyN\";\r\n    KeyCodes.KEYM = \"KeyM\";\r\n    KeyCodes.COMMA = \"Comma\";\r\n    KeyCodes.PERIOD = \"Period\";\r\n    KeyCodes.SLASH = \"Slash\";\r\n    KeyCodes.SHIFTRIGHT = \"ShiftRight\";\r\n    // QWERTY bottom row\r\n    KeyCodes.CONTROLLEFT = \"ControlLeft\";\r\n    KeyCodes.ALTLEFT = \"AltLeft\";\r\n    KeyCodes.SPACE = \"Space\";\r\n    KeyCodes.ALTRIGHT = \"AltRight\";\r\n    KeyCodes.CONTEXTMENU = \"ContextMenu\";\r\n    KeyCodes.CONTROLRIGHT = \"ControlRight\";\r\n    // QWERTY arrows area\r\n    KeyCodes.PRINTSCREEN = \"PrintScreen\";\r\n    KeyCodes.SCROLLLOCK = \"ScrollLock\";\r\n    KeyCodes.PAUSE = \"Pause\";\r\n    KeyCodes.INSERT = \"Insert\";\r\n    KeyCodes.DELETE = \"Delete\";\r\n    KeyCodes.HOME = \"Home\";\r\n    KeyCodes.END = \"End\";\r\n    KeyCodes.PAGEUP = \"PageUp\";\r\n    KeyCodes.PAGEDOWN = \"PageDown\";\r\n    KeyCodes.ARROWUP = \"ArrowUp\";\r\n    KeyCodes.ARROWLEFT = \"ArrowLeft\";\r\n    KeyCodes.ARROWDOWN = \"ArrowDown\";\r\n    KeyCodes.ARROWRIGHT = \"ArrowRight\";\r\n    // QWERTY numpad\r\n    KeyCodes.NUMLOCK = \"NumLock\";\r\n    KeyCodes.NUMPADDIVIDE = \"NumpadDivide\";\r\n    KeyCodes.NUMPADMULTIPLY = \"NumpadMultiply\";\r\n    KeyCodes.NUMPADSUBTRACT = \"NumpadSubtract\";\r\n    KeyCodes.NUMPADADD = \"NumpadAdd\";\r\n    KeyCodes.NUMPAD0 = \"Numpad0\";\r\n    KeyCodes.NUMPAD1 = \"Numpad1\";\r\n    KeyCodes.NUMPAD2 = \"Numpad2\";\r\n    KeyCodes.NUMPAD3 = \"Numpad3\";\r\n    KeyCodes.NUMPAD4 = \"Numpad4\";\r\n    KeyCodes.NUMPAD5 = \"Numpad5\";\r\n    KeyCodes.NUMPAD6 = \"Numpad6\";\r\n    KeyCodes.NUMPAD7 = \"Numpad7\";\r\n    KeyCodes.NUMPAD8 = \"Numpad8\";\r\n    KeyCodes.NUMPAD9 = \"Numpad9\";\r\n    KeyCodes.NUMPADDECIMAL = \"NumpadDecimal\";\r\n    KeyCodes.NUMPADENTER = \"NumpadEnter\";\r\n    KeyCodes.HOTKEY_PREFIX_CTRL = \"Ctrl+\";\r\n    KeyCodes.HOTKEY_PREFIX_SHIFT = \"Shift+\";\r\n    KeyCodes.HOTKEY_PREFIX_ALT = \"Alt+\";\r\n    KeyCodes.DefaultHotkeys = [\r\n        KeyCodes.DIGIT1,\r\n        KeyCodes.DIGIT2,\r\n        KeyCodes.DIGIT3,\r\n        KeyCodes.DIGIT4,\r\n        KeyCodes.DIGIT5,\r\n        KeyCodes.DIGIT6,\r\n        KeyCodes.DIGIT7,\r\n        KeyCodes.DIGIT8,\r\n        KeyCodes.DIGIT9,\r\n        KeyCodes.DIGIT0,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT1,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT2,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT3,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT4,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT5,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT6,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT7,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT8,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT9,\r\n        KeyCodes.HOTKEY_PREFIX_SHIFT + KeyCodes.DIGIT0,\r\n    ];\r\n    function eventToHk(event) {\r\n        let key = event.code;\r\n        return {\r\n            key: key,\r\n            ctrl: event.ctrlKey && key !== KeyCodes.CONTROLLEFT && key !== KeyCodes.CONTROLRIGHT,\r\n            alt: event.altKey && key !== KeyCodes.ALTLEFT && key !== KeyCodes.ALTRIGHT,\r\n            shift: event.shiftKey && key !== KeyCodes.SHIFTLEFT && key !== KeyCodes.SHIFTRIGHT,\r\n        };\r\n    }\r\n    KeyCodes.eventToHk = eventToHk;\r\n    function hkToString(hk) {\r\n        let key = hk.key;\r\n        if (hk.ctrl)\r\n            key = KeyCodes.HOTKEY_PREFIX_CTRL + key;\r\n        if (hk.alt)\r\n            key = KeyCodes.HOTKEY_PREFIX_ALT + key;\r\n        if (hk.shift)\r\n            key = KeyCodes.HOTKEY_PREFIX_SHIFT + key;\r\n        return key;\r\n    }\r\n    KeyCodes.hkToString = hkToString;\r\n    function eventToHkString(event) {\r\n        return hkToString(eventToHk(event));\r\n    }\r\n    KeyCodes.eventToHkString = eventToHkString;\r\n    function eventToHkShort(event) {\r\n        return hkToShort(eventToHk(event));\r\n    }\r\n    KeyCodes.eventToHkShort = eventToHkShort;\r\n    function hkLongToShort(hotkey) {\r\n        return hkToShort(stringToHk(hotkey));\r\n    }\r\n    KeyCodes.hkLongToShort = hkLongToShort;\r\n    function stringToHk(key) {\r\n        let ctrl = key.startsWith(KeyCodes.HOTKEY_PREFIX_CTRL);\r\n        if (ctrl)\r\n            key = key.slice(KeyCodes.HOTKEY_PREFIX_CTRL.length);\r\n        let alt = key.startsWith(KeyCodes.HOTKEY_PREFIX_ALT);\r\n        if (alt)\r\n            key = key.slice(KeyCodes.HOTKEY_PREFIX_ALT.length);\r\n        let shift = key.startsWith(KeyCodes.HOTKEY_PREFIX_SHIFT);\r\n        if (shift)\r\n            key = key.slice(KeyCodes.HOTKEY_PREFIX_SHIFT.length);\r\n        return { key, ctrl, alt, shift };\r\n    }\r\n    KeyCodes.stringToHk = stringToHk;\r\n    // TODO pick these from Keyboard API\r\n    //    await navigator.keyboard\r\n    const charKeys = {\r\n        [KeyCodes.BACKQUOTE]: '`',\r\n        [KeyCodes.DIGIT1]: '1',\r\n        [KeyCodes.DIGIT2]: '2',\r\n        [KeyCodes.DIGIT3]: '3',\r\n        [KeyCodes.DIGIT4]: '4',\r\n        [KeyCodes.DIGIT5]: '5',\r\n        [KeyCodes.DIGIT6]: '6',\r\n        [KeyCodes.DIGIT7]: '7',\r\n        [KeyCodes.DIGIT8]: '8',\r\n        [KeyCodes.DIGIT9]: '9',\r\n        [KeyCodes.DIGIT0]: '0',\r\n        [KeyCodes.MINUS]: '-',\r\n        [KeyCodes.EQUAL]: '=',\r\n        [KeyCodes.BRACKETLEFT]: '[',\r\n        [KeyCodes.BRACKETRIGHT]: ']',\r\n        [KeyCodes.BACKSLASH]: '\\\\',\r\n        [KeyCodes.SEMICOLON]: ';',\r\n        [KeyCodes.QUOTE]: \"'\",\r\n        [KeyCodes.COMMA]: ',',\r\n        [KeyCodes.PERIOD]: '.',\r\n        [KeyCodes.SLASH]: '/',\r\n    };\r\n    const charKeysShift = {\r\n        [KeyCodes.BACKQUOTE]: '~',\r\n        [KeyCodes.DIGIT1]: '!',\r\n        [KeyCodes.DIGIT2]: '@',\r\n        [KeyCodes.DIGIT3]: '#',\r\n        [KeyCodes.DIGIT4]: '$',\r\n        [KeyCodes.DIGIT5]: '%',\r\n        [KeyCodes.DIGIT6]: '^',\r\n        [KeyCodes.DIGIT7]: '&',\r\n        [KeyCodes.DIGIT8]: '*',\r\n        [KeyCodes.DIGIT9]: '(',\r\n        [KeyCodes.DIGIT0]: ')',\r\n        [KeyCodes.MINUS]: '_',\r\n        [KeyCodes.EQUAL]: '+',\r\n        [KeyCodes.BRACKETLEFT]: '{',\r\n        [KeyCodes.BRACKETRIGHT]: '}',\r\n        [KeyCodes.BACKSLASH]: '|',\r\n        [KeyCodes.SEMICOLON]: ':',\r\n        [KeyCodes.QUOTE]: '\"',\r\n        [KeyCodes.COMMA]: '<',\r\n        [KeyCodes.PERIOD]: '>',\r\n        [KeyCodes.SLASH]: '?',\r\n    };\r\n    const nonCharKeys = {\r\n        [KeyCodes.ESCAPE]: 'Esc',\r\n        [KeyCodes.TAB]: \"\",\r\n        [KeyCodes.BACKSPACE]: \"BkSp\",\r\n        [KeyCodes.ENTER]: \"\",\r\n        [KeyCodes.SPACE]: \"\",\r\n        [KeyCodes.INSERT]: \"Ins\",\r\n        [KeyCodes.DELETE]: \"Del\",\r\n        [KeyCodes.PAGEUP]: \"PgUp\",\r\n        [KeyCodes.PAGEDOWN]: \"PgDn\",\r\n        [KeyCodes.ARROWUP]: \"\",\r\n        [KeyCodes.ARROWLEFT]: \"\",\r\n        [KeyCodes.ARROWDOWN]: \"\",\r\n        [KeyCodes.ARROWRIGHT]: \"\",\r\n        [KeyCodes.NUMPAD0]: \"N0\",\r\n        [KeyCodes.NUMPAD1]: \"N1\",\r\n        [KeyCodes.NUMPAD2]: \"N2\",\r\n        [KeyCodes.NUMPAD3]: \"N3\",\r\n        [KeyCodes.NUMPAD4]: \"N4\",\r\n        [KeyCodes.NUMPAD5]: \"N5\",\r\n        [KeyCodes.NUMPAD6]: \"N6\",\r\n        [KeyCodes.NUMPAD7]: \"N7\",\r\n        [KeyCodes.NUMPAD8]: \"N8\",\r\n        [KeyCodes.NUMPAD9]: \"N9\",\r\n        [KeyCodes.NUMPADDIVIDE]: \"N/\",\r\n        [KeyCodes.NUMPADMULTIPLY]: \"N*\",\r\n        [KeyCodes.NUMPADSUBTRACT]: \"N-\",\r\n        [KeyCodes.NUMPADADD]: \"N+\",\r\n        [KeyCodes.NUMPADDECIMAL]: \"N.\",\r\n        [KeyCodes.NUMPADENTER]: \"N\",\r\n    };\r\n    function hkToShort(hk) {\r\n        let { key, ctrl, alt, shift } = hk;\r\n        let pfx = \"\";\r\n        if (ctrl && alt)\r\n            pfx += \"CA+\";\r\n        else if (ctrl)\r\n            pfx += \"C+\";\r\n        else if (alt)\r\n            pfx += \"A+\";\r\n        if (key.startsWith(\"Key\") && key.length === 4) {\r\n            let ch = key[3];\r\n            ch = shift ? ch.toUpperCase() : ch.toLowerCase();\r\n            return pfx + ch;\r\n        }\r\n        if (shift && key in charKeysShift)\r\n            return pfx + charKeysShift[key];\r\n        if (!shift && key in charKeys)\r\n            return pfx + charKeys[key];\r\n        if (shift)\r\n            pfx = \"\" + pfx;\r\n        if (key in nonCharKeys)\r\n            return pfx + nonCharKeys[key];\r\n        return pfx + key;\r\n    }\r\n    KeyCodes.hkToShort = hkToShort;\r\n})(KeyCodes || (KeyCodes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/KeyCodes.ts?");

/***/ }),

/***/ "./src/engine/ui/ScreenManager.ts":
/*!****************************************!*\
  !*** ./src/engine/ui/ScreenManager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ScreenManager\": () => (/* binding */ ScreenManager)\n/* harmony export */ });\n/* harmony import */ var _screens_EmptyScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./screens/EmptyScreen */ \"./src/engine/ui/screens/EmptyScreen.tsx\");\n/* harmony import */ var _screens_GameScreen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./screens/GameScreen */ \"./src/engine/ui/screens/GameScreen.tsx\");\n/* harmony import */ var _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./animations */ \"./src/engine/ui/animations.ts\");\n/* harmony import */ var _KeyCodes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n/* harmony import */ var _game_ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../game/ui/CreaturePanel */ \"./src/game/ui/CreaturePanel.tsx\");\n/* harmony import */ var _utils_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/time */ \"./src/engine/utils/time.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Game */ \"./src/engine/Game.ts\");\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = _logging_LogManager__WEBPACK_IMPORTED_MODULE_2__.LogManager.loggerFor(\"engine.ui.ScreenManager\");\r\nclass ScreenManager {\r\n    constructor(screenHolder) {\r\n        this.screenHolder = screenHolder;\r\n        this.screens = [];\r\n        this.gameScreen = new _screens_GameScreen__WEBPACK_IMPORTED_MODULE_1__.GameScreen();\r\n        this.sharedPlayerPanel = new _game_ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_5__.CreaturePanel(null);\r\n        this.addTop(new _screens_EmptyScreen__WEBPACK_IMPORTED_MODULE_0__.EmptyScreen());\r\n    }\r\n    get top() {\r\n        return this.screens[this.screens.length - 1];\r\n    }\r\n    removeTop(activateScreenBelow) {\r\n        let top = this.top;\r\n        logger.debug(\"removeTop\");\r\n        if (this.top) {\r\n            top.container.remove();\r\n            top.onDeactivate();\r\n            top.onRemove();\r\n        }\r\n        else {\r\n            throw new Error(\"Cannot removeTop, screen is empty\");\r\n        }\r\n        this.screens.splice(-1, 1);\r\n        if (activateScreenBelow)\r\n            this.top?.onActivate();\r\n    }\r\n    addTop(screen) {\r\n        logger.debug(\"addTop {}\", screen);\r\n        this.screens.push(screen);\r\n        this.screenHolder.append(screen.container);\r\n        screen.render();\r\n        screen.onAdd();\r\n        screen.onActivate();\r\n    }\r\n    async closeTop(transition) {\r\n        await (0,_animations__WEBPACK_IMPORTED_MODULE_3__.animateTransition)(this.top.container, transition, \"remove\");\r\n        this.removeTop(true);\r\n    }\r\n    async addOnTop(screen, transition) {\r\n        this.top?.onDeactivate();\r\n        this.addTop(screen);\r\n        await (0,_animations__WEBPACK_IMPORTED_MODULE_3__.animateTransition)(screen.container, transition, \"add\");\r\n    }\r\n    async replaceTop(screen, transition) {\r\n        await (0,_animations__WEBPACK_IMPORTED_MODULE_3__.animateTransition)(this.top.container, transition, \"remove\");\r\n        this.removeTop(false);\r\n        this.addTop(screen);\r\n        await (0,_animations__WEBPACK_IMPORTED_MODULE_3__.animateTransition)(screen.container, transition, \"add\");\r\n    }\r\n    handleKeyboardEvent(event) {\r\n        logger.trace(\"handleKeyboardEvent {} {}\", this.top, _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.eventToHkString(event));\r\n        this.top.onKeyboardEvent(event);\r\n    }\r\n    animationFrame() {\r\n        // TODO consider instead of propagating top-down maintaining a list of things that want animations. first - logic, then - FX. and a way to auto-unsubscribe if they are outside DOM\r\n        this.t2 = (0,_utils_time__WEBPACK_IMPORTED_MODULE_6__.milliTime)();\r\n        this.dt = this.t2 - this.t1;\r\n        _Game__WEBPACK_IMPORTED_MODULE_7__.Game.instance.gameController.animationFrame(this.dt, this.t2);\r\n        this.top.animationFrame(this.dt, this.t2);\r\n        this.t1 = this.t2;\r\n        requestAnimationFrame(() => this.animationFrame());\r\n    }\r\n    setupKeyboardInput() {\r\n        document.addEventListener(\"keydown\", event => {\r\n            this.handleKeyboardEvent(event);\r\n        }, true);\r\n    }\r\n    setupAnimations() {\r\n        this.t1 = (0,_utils_time__WEBPACK_IMPORTED_MODULE_6__.milliTime)();\r\n        requestAnimationFrame(() => this.animationFrame());\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/ScreenManager.ts?");

/***/ }),

/***/ "./src/engine/ui/animations.ts":
/*!*************************************!*\
  !*** ./src/engine/ui/animations.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AnimationOptions\": () => (/* binding */ AnimationOptions),\n/* harmony export */   \"TransitionAnimations\": () => (/* binding */ TransitionAnimations),\n/* harmony export */   \"animateTransition\": () => (/* binding */ animateTransition)\n/* harmony export */ });\n/* harmony import */ var shifty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shifty */ \"./node_modules/shifty/dist/shifty.js\");\n/* harmony import */ var shifty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(shifty__WEBPACK_IMPORTED_MODULE_0__);\n/*\r\n * Created by aimozg on 25.07.2022.\r\n */\r\n\r\nconst AnimationOptions = {\r\n    slow: 1000,\r\n    normal: 500,\r\n    fast: 333,\r\n    vfast: 167,\r\n};\r\nfunction stylePair(from, to, duration) {\r\n    function styleRenderer(element) {\r\n        return (state) => {\r\n            Object.assign(element.style, state);\r\n        };\r\n    }\r\n    return {\r\n        add: (element) => ({\r\n            from: from,\r\n            to: to,\r\n            start: styleRenderer(element),\r\n            duration: duration / 2,\r\n            render: styleRenderer(element),\r\n        }),\r\n        remove: (element) => ({\r\n            from: to,\r\n            to: from,\r\n            start: styleRenderer(element),\r\n            duration: duration / 2,\r\n            render: styleRenderer(element),\r\n        }),\r\n    };\r\n}\r\nconst TransitionAnimations = {\r\n    \"fade-slow\": stylePair({ opacity: 0 }, { opacity: 1 }, AnimationOptions.slow),\r\n    \"fade\": stylePair({ opacity: 0 }, { opacity: 1 }, AnimationOptions.normal),\r\n    \"fade-fast\": stylePair({ opacity: 0 }, { opacity: 1 }, AnimationOptions.fast),\r\n    \"fade-vfast\": stylePair({ opacity: 0 }, { opacity: 1 }, AnimationOptions.vfast),\r\n};\r\nfunction animateTransition(element, transition, type) {\r\n    if (!element || !transition)\r\n        return Promise.resolve();\r\n    let t = TransitionAnimations[transition]?.[type]?.(element);\r\n    if (!t)\r\n        return Promise.resolve();\r\n    return (0,shifty__WEBPACK_IMPORTED_MODULE_0__.tween)(t);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/animations.ts?");

/***/ }),

/***/ "./src/engine/ui/components/Bar.tsx":
/*!******************************************!*\
  !*** ./src/engine/ui/components/Bar.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Bar\": () => (/* binding */ Bar)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../math/utils */ \"./src/engine/math/utils.ts\");\n\r\n\r\nclass Bar extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    render(props) {\r\n        let style = {\r\n            background: props.bg,\r\n            height: props.height\r\n        };\r\n        let fgs = props.fgs ?? [props.fg];\r\n        let values = props.values ?? [props.value];\r\n        let classes = props.classes ?? [];\r\n        let min = props.min ?? 0;\r\n        let max = props.max ?? 1;\r\n        let children = props.children;\r\n        if (props.print) {\r\n            children = [values[0].format(props.format ?? \",d\"), props.children];\r\n        }\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { style: style, class: \"bar \" + (props.className ?? \"\") },\r\n            values.map((x, i) => (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { style: {\r\n                    left: 0,\r\n                    background: fgs[i],\r\n                    width: (isNaN(+x) || x <= min ? 0 : x >= max ? 100 :\r\n                        (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.coerce)((x - min) / max * 100, 1, 99)) + '%'\r\n                }, className: \"bar-value \" + (classes[i] ?? \"\") })),\r\n            children !== undefined && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"bar-content\" }, children));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/Bar.tsx?");

/***/ }),

/***/ "./src/engine/ui/components/Button.tsx":
/*!*********************************************!*\
  !*** ./src/engine/ui/components/Button.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Button\": () => (/* binding */ Button),\n/* harmony export */   \"execUIAction\": () => (/* binding */ execUIAction),\n/* harmony export */   \"uiActionEnabled\": () => (/* binding */ uiActionEnabled)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _KeyCodes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n\r\n\r\nfunction uiActionEnabled(a) {\r\n    if (typeof a.disabled === 'boolean')\r\n        return !a.disabled;\r\n    if (typeof a.disabled === 'function')\r\n        return !a.disabled();\r\n    return true;\r\n}\r\nfunction execUIAction(event, actions) {\r\n    let hk = _KeyCodes__WEBPACK_IMPORTED_MODULE_1__.KeyCodes.eventToHkString(event);\r\n    for (let action of actions) {\r\n        if (!uiActionEnabled(action))\r\n            continue;\r\n        if (action.hotkey === hk || action.hotkeys?.includes(hk)) {\r\n            action.callback();\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nclass Button extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.timeout = 0;\r\n        this.interval = 0;\r\n    }\r\n    onClick(ev) {\r\n        ev.preventDefault();\r\n        if (this.props.onClick)\r\n            this.props.onClick(ev);\r\n        if (this.props.action?.callback)\r\n            this.props.action?.callback();\r\n    }\r\n    onMouseDown(ev) {\r\n        ev.preventDefault();\r\n        this.timeout = window.setTimeout(() => {\r\n            this.interval = window.setInterval(() => {\r\n                if (this.props.onClick && !this.props.disabled) {\r\n                    this.props.onClick(ev);\r\n                }\r\n                else {\r\n                    this.clear();\r\n                }\r\n            }, 100);\r\n        }, 500);\r\n    }\r\n    onMouseLeave(ev) {\r\n        this.clear();\r\n    }\r\n    onMouseUp(ev) {\r\n        ev.preventDefault();\r\n        this.clear();\r\n    }\r\n    clear() {\r\n        if (this.timeout)\r\n            window.clearTimeout(this.timeout);\r\n        if (this.interval)\r\n            window.clearInterval(this.interval);\r\n        this.timeout = 0;\r\n        this.interval = 0;\r\n    }\r\n    componentWillUnmount() {\r\n        this.clear();\r\n    }\r\n    render(props, state, context) {\r\n        let hotkey = props.hotkey ?? props.action?.hotkey ?? props.action?.hotkeys?.[0];\r\n        let disabled = props.disabled ?? (props.action && !uiActionEnabled(props.action));\r\n        let hk = hotkey ? (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"span\", { class: \"--hk\" }, _KeyCodes__WEBPACK_IMPORTED_MODULE_1__.KeyCodes.hkLongToShort(hotkey)) : null;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"button\", { type: \"button\", class: props.className, disabled: !!disabled, onMouseDown: props.hold ? this.onMouseDown.bind(this) : undefined, onMouseUp: props.hold ? this.onMouseUp.bind(this) : undefined, onMouseLeave: props.hold ? this.onMouseLeave.bind(this) : undefined, onClick: this.onClick.bind(this) },\r\n            hk,\r\n            props.children,\r\n            props.label ?? props.action?.label);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/Button.tsx?");

/***/ }),

/***/ "./src/engine/ui/components/ButtonMenu.tsx":
/*!*************************************************!*\
  !*** ./src/engine/ui/components/ButtonMenu.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ButtonMenu\": () => (/* binding */ ButtonMenu)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ \"./src/engine/ui/components/Button.tsx\");\n\r\n\r\nclass ButtonMenu extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor(props, context) {\r\n        super(props, context);\r\n    }\r\n    click(e, item) {\r\n        e.target.blur();\r\n        this.props.onChange?.(item);\r\n    }\r\n    render(props, state, context) {\r\n        return props.items.map(item => (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { label: props.selected === item.value ? '<' + item.label + '>' : ('\\xA0' + item.label + '\\xA0'), className: (item.className ?? '') + ' ' +\r\n                (props.className ?? '') + ' ' +\r\n                (props.selected === item.value ? '-default' : ''), disabled: item.disabled, onClick: (e) => this.click(e, item.value) }));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/ButtonMenu.tsx?");

/***/ }),

/***/ "./src/engine/ui/components/ColorCircle.tsx":
/*!**************************************************!*\
  !*** ./src/engine/ui/components/ColorCircle.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColorCircle\": () => (/* binding */ ColorCircle)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _utils_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/css */ \"./src/engine/utils/css.ts\");\n/*\r\n * Created by aimozg on 04.08.2022.\r\n */\r\n\r\n\r\nclass ColorCircle extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    render(props) {\r\n        let style;\r\n        if (!props.color2) {\r\n            style = { backgroundColor: props.color };\r\n        }\r\n        else {\r\n            style = {\r\n                background: (0,_utils_css__WEBPACK_IMPORTED_MODULE_1__.stripedBackground)(props.color, props.color2, 0.5, -45)\r\n            };\r\n        }\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"color-circle \" + (props.className ?? \"\") + (props.clickable ? \" -clickable\" : \"\") + (props.selected ? \" -selected\" : \"\"), style: style, onClick: () => props.onClick?.() }, \"\\u00A0\");\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/ColorCircle.tsx?");

/***/ }),

/***/ "./src/engine/ui/components/GlyphCanvas.ts":
/*!*************************************************!*\
  !*** ./src/engine/ui/components/GlyphCanvas.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GlyphCanvas\": () => (/* binding */ GlyphCanvas),\n/* harmony export */   \"createCanvas\": () => (/* binding */ createCanvas),\n/* harmony export */   \"glyphColorToRGB\": () => (/* binding */ glyphColorToRGB)\n/* harmony export */ });\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinycolor2 */ \"./node_modules/tinycolor2/tinycolor.js\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../math/utils */ \"./src/engine/math/utils.ts\");\n/* harmony import */ var _utils_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/time */ \"./src/engine/utils/time.ts\");\n/*\r\n * Created by aimozg on 21.10.2022.\r\n */\r\n\r\n\r\n\r\nfunction glyphColorToRGB(color, phase) {\r\n    if (color instanceof tinycolor2__WEBPACK_IMPORTED_MODULE_0__) {\r\n        return color;\r\n    }\r\n    if (typeof color === 'string') {\r\n        return tinycolor2__WEBPACK_IMPORTED_MODULE_0__(color);\r\n    }\r\n    switch (color.speed) {\r\n        case \"normal\":\r\n            // phase = phase\r\n            break;\r\n        case \"fast\":\r\n            phase = phase * 2;\r\n            break;\r\n        case \"slow\":\r\n            phase = phase / 2;\r\n            break;\r\n        case \"blink\":\r\n            phase = (phase - Math.floor(phase)) > 0.75 ? 0.5 : 0;\r\n            break;\r\n        case \"fblink\":\r\n            phase = phase * 2;\r\n            phase = (phase - Math.floor(phase)) > 0.75 ? 0.5 : 0;\r\n            break;\r\n    }\r\n    phase = (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.coerce)(phase, 0, 1);\r\n    switch (color.fx) {\r\n        case \"tween\":\r\n            if (color.colors.length === 0)\r\n                throw new Error(`No colors specified`);\r\n            if (color.colors.length === 1)\r\n                return color.colors[0];\r\n            // 0..1 -> 0..N\r\n            phase = color.colors.length;\r\n            let i = Math.floor(phase), f = phase - i;\r\n            if (f === 0)\r\n                return color.colors[i];\r\n            let color1 = color.colors[i].toRgb(), color2 = color.colors[i].toRgb();\r\n            return tinycolor2__WEBPACK_IMPORTED_MODULE_0__({\r\n                r: (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.lint)(f, color1.r, color2.r),\r\n                g: (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.lint)(f, color1.g, color2.g),\r\n                b: (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.lint)(f, color1.b, color2.b),\r\n                a: (0,_math_utils__WEBPACK_IMPORTED_MODULE_1__.lint)(f, color1.a, color2.a),\r\n            });\r\n        case \"brighten\":\r\n            // a /\\ graph between (0,0), (0.5,1) and (1,0)\r\n            phase = 1 - Math.abs(phase - 0.5) * 2;\r\n            return color.color.brighten(phase * 10);\r\n        case \"darken\":\r\n            phase = 1 - Math.abs(phase - 0.5) * 2;\r\n            return color.color.darken(phase * 10);\r\n    }\r\n}\r\nfunction createCanvas(w, h, fill) {\r\n    let c = document.createElement(\"canvas\");\r\n    c.width = w;\r\n    c.height = h;\r\n    let c2d = c.getContext('2d');\r\n    if (fill) {\r\n        c2d.fillStyle = fill;\r\n        c2d.fillRect(0, 0, w, h);\r\n    }\r\n    return c2d;\r\n}\r\nclass GlyphCanvas {\r\n    constructor(c2d, sizing) {\r\n        this.c2d = c2d;\r\n        this.sizing = sizing;\r\n        // TODO move to config\r\n        this.font = \"32px monospace\";\r\n        // Cell size in pixel\r\n        this.cellWidth = 36;\r\n        this.cellHeight = 36;\r\n        // Text offset\r\n        this.x0 = 10;\r\n        this.y0 = -7;\r\n        // Empty space\r\n        this.padding = 0;\r\n        // Canvas size in cells\r\n        this.windowWidth = 28;\r\n        this.windowHeight = 20;\r\n        this.background = \"#333333\";\r\n        // TODO make it pixels\r\n        this.scrollX = 0;\r\n        this.scrollY = 0;\r\n        this.phase = 0;\r\n        this.animationSpeed = 1;\r\n        this.beforeRender = null;\r\n        this.afterRender = null;\r\n    }\r\n    get width() {\r\n        return this.windowWidth * this.cellWidth + this.padding * 2;\r\n    }\r\n    set width(value) {\r\n        if (this.sizing === \"force\")\r\n            return;\r\n        this.windowWidth = (value - this.padding * 2) / this.cellWidth;\r\n    }\r\n    get height() {\r\n        return this.windowHeight * this.cellHeight + this.padding * 2;\r\n    }\r\n    set height(value) {\r\n        if (this.sizing === \"force\")\r\n            return;\r\n        this.windowHeight = (value - this.padding * 2) / this.cellHeight;\r\n    }\r\n    scroll(dx, dy) {\r\n        this.scrollX += dx;\r\n        this.scrollY += dy;\r\n    }\r\n    renderGlyph(glyph, x, y) {\r\n        const c2d = this.c2d;\r\n        if (glyph.bg) {\r\n            c2d.fillStyle = glyphColorToRGB(glyph.bg, this.phase).toString();\r\n            c2d.fillRect(x, y, this.cellWidth, this.cellHeight);\r\n        }\r\n        if (glyph.ch && glyph.ch !== ' ') {\r\n            c2d.fillStyle = glyphColorToRGB(glyph.fg, this.phase).toString();\r\n            c2d.fillText(glyph.ch, this.x0 + x, y + this.y0 + this.cellHeight);\r\n        }\r\n    }\r\n    renderOverlay(overlay) {\r\n        let x = (overlay.col - this.scrollX) * this.cellWidth + this.padding;\r\n        let y = (overlay.row - this.scrollY) * this.cellHeight + this.padding;\r\n        switch (overlay.type) {\r\n            case \"image\":\r\n                this.c2d.drawImage(overlay.image, x, y);\r\n                break;\r\n            case \"glyph\":\r\n                this.c2d.font = this.font;\r\n                this.renderGlyph(overlay.glyph, x, y);\r\n                break;\r\n        }\r\n    }\r\n    render(source) {\r\n        this.beforeRender?.();\r\n        this.phase = this.animationSpeed * (0,_utils_time__WEBPACK_IMPORTED_MODULE_2__.milliTime)() / 1000;\r\n        const c2d = this.c2d;\r\n        const canvas = c2d.canvas;\r\n        switch (this.sizing) {\r\n            case \"force\":\r\n                if (canvas.width < this.width)\r\n                    canvas.width = this.width;\r\n                if (canvas.height < this.height)\r\n                    canvas.height = this.height;\r\n                break;\r\n            case \"fit\":\r\n                if (this.width !== canvas.clientWidth || this.height !== canvas.clientHeight) {\r\n                    // adjust scroll maintaining center position\r\n                    this.scrollX += (this.width - canvas.clientWidth) / this.cellWidth / 2;\r\n                    this.scrollY += (this.height - canvas.clientHeight) / this.cellHeight / 2;\r\n                    this.scrollX |= 0;\r\n                    this.scrollY |= 0;\r\n                    this.width = canvas.width = canvas.clientWidth;\r\n                    this.height = canvas.height = canvas.clientHeight;\r\n                }\r\n                break;\r\n        }\r\n        c2d.fillStyle = this.background;\r\n        c2d.fillRect(0, 0, this.width, this.height);\r\n        c2d.font = this.font;\r\n        let maxRow = Math.min(source.height, this.scrollY + this.windowHeight);\r\n        let maxCol = Math.min(source.width, this.scrollX + this.windowWidth);\r\n        let y = this.padding;\r\n        for (let row = this.scrollY; row < maxRow; row++) {\r\n            let x = this.padding;\r\n            for (let col = this.scrollX; col < maxCol; col++) {\r\n                let glyph = source.glyphAt(col, row);\r\n                if (glyph)\r\n                    this.renderGlyph(glyph, x, y);\r\n                x += this.cellWidth;\r\n            }\r\n            y += this.cellHeight;\r\n        }\r\n        for (let overlay of source.overlays?.() ?? []) {\r\n            if (overlay.hide)\r\n                continue;\r\n            this.renderOverlay(overlay);\r\n        }\r\n        this.afterRender?.();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/GlyphCanvas.ts?");

/***/ }),

/***/ "./src/engine/ui/components/ListColorPicker.tsx":
/*!******************************************************!*\
  !*** ./src/engine/ui/components/ListColorPicker.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ListColorPicker\": () => (/* binding */ ListColorPicker)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _ColorCircle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ColorCircle */ \"./src/engine/ui/components/ColorCircle.tsx\");\n\r\n\r\n\r\nclass ListColorPicker extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.setState({ value: props.startValue });\r\n    }\r\n    index() {\r\n        return this.state.value ? this.props.colors.indexOf(this.state.value) : -1;\r\n    }\r\n    prev() {\r\n        let i = this.index();\r\n        if (i === -1)\r\n            this.select(this.props.colors[0]);\r\n        else\r\n            this.select(this.props.colors[(i - 1 + this.props.colors.length) % this.props.colors.length]);\r\n    }\r\n    next() {\r\n        let i = this.index();\r\n        if (i === -1)\r\n            this.select(this.props.colors[0]);\r\n        else\r\n            this.select(this.props.colors[(i + 1) % this.props.colors.length]);\r\n    }\r\n    select(color) {\r\n        this.setState({ value: color });\r\n        this.props.onChange(color);\r\n    }\r\n    render(props, state) {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"list-color-picker\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { className: \"--prev\", label: \"<\", onClick: () => this.prev() }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"--selection\" },\r\n                state.value && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_ColorCircle__WEBPACK_IMPORTED_MODULE_2__.ColorCircle, { className: \"mx-2\", color: state.value.rgb }),\r\n                state?.value?.name),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { className: \"--next\", label: \">\", onClick: () => this.next() }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"--colors\" }, props.colors.map(color => (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_ColorCircle__WEBPACK_IMPORTED_MODULE_2__.ColorCircle, { color: color.rgb, selected: color === state.value, clickable: true, onClick: () => this.select(color) }))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/ListColorPicker.tsx?");

/***/ }),

/***/ "./src/engine/ui/components/TextInput.tsx":
/*!************************************************!*\
  !*** ./src/engine/ui/components/TextInput.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextInput\": () => (/* binding */ TextInput)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n\r\nclass TextInput extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor(props, context) {\r\n        super(props, context);\r\n    }\r\n    onInput(e) {\r\n        if (this.props.onChange)\r\n            this.props.onChange(e.target.value);\r\n    }\r\n    onChange(e) {\r\n        this.onInput(e);\r\n    }\r\n    render(props, state, context) {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"input\", { type: \"text\", class: props.className, disabled: !!props.disabled, value: props.value, onInput: this.onInput.bind(this), onChange: this.onChange.bind(this) });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/components/TextInput.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/BattleActionsPanel.tsx":
/*!*****************************************************!*\
  !*** ./src/engine/ui/panels/BattleActionsPanel.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BattleActionsPanel\": () => (/* binding */ BattleActionsPanel)\n/* harmony export */ });\n/* harmony import */ var _DomComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _KeyCodes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Button */ \"./src/engine/ui/components/Button.tsx\");\n\r\n\r\n\r\n\r\nclass BattleActionsPanel extends _DomComponent__WEBPACK_IMPORTED_MODULE_0__.DomComponent {\r\n    constructor(context) {\r\n        let refDPad = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        let refStarred = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        let refActions = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"combat-actions d-flex flex-column gap-4\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"combat-dpad grid-3 grid-v3\", ref: refDPad }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"combat-actions-starred grid-2 hidden\", ref: refStarred },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT1 }, \"Favourite 1\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT2 }, \"Favourite 2\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT3 }, \"Favourite 3\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT4 }, \"Favourite 4\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT5 }, \"Favourite 5\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT6 }, \"Favourite 6\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT7 }, \"Favourite 7\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT8 }, \"Favourite 8\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT9 }, \"Favourite 9\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DIGIT0 }, \"Favourite 10\")),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"combat-actions-list d-flex flex-wrap gap-1\", ref: refActions })));\r\n        this.context = context;\r\n        this.actions = [];\r\n        this.refDPad = refDPad;\r\n        this.refStarred = refStarred;\r\n        this.refActions = refActions;\r\n    }\r\n    hotkey(action, index) {\r\n        if (index in _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DefaultHotkeys)\r\n            return _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DefaultHotkeys[index];\r\n        return undefined;\r\n    }\r\n    showFinishBattle() {\r\n        let aFinish = {\r\n            label: \"Finish\",\r\n            // tooltip: \"Finish battle\", // TODO tooltip\r\n            hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.ENTER,\r\n            callback: () => this.context.onBattleFinishClick(),\r\n        };\r\n        this.actions = [aFinish];\r\n        this.renderDpadActions([]);\r\n        (0,preact__WEBPACK_IMPORTED_MODULE_1__.render)((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { action: aFinish, className: \"-big\" }), this.refActions.current);\r\n    }\r\n    renderDpadActions(dpadActions) {\r\n        (0,preact__WEBPACK_IMPORTED_MODULE_1__.render)(dpadActions.map((a, i) => a\r\n            ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { action: a, className: \"-big\" })\r\n            : (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { className: \"-big\", disabled: true, hotkey: BattleActionsPanel.DPadHotkeys[i][0] })), this.refDPad.current);\r\n    }\r\n    renderActions(actionList) {\r\n        (0,preact__WEBPACK_IMPORTED_MODULE_1__.render)(actionList.map(btn => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { action: btn })), this.refActions.current);\r\n    }\r\n    showActions(actions, playerCanAct) {\r\n        // TODO group actions and favourites\r\n        let actionList = [];\r\n        let dpadActions = Array(9).fill(undefined);\r\n        this.actions = [];\r\n        for (let a of actions) {\r\n            let enabled = a.isPossible(this.context.cc);\r\n            if (a.direction) {\r\n                let dirid = a.direction.id;\r\n                let old = dpadActions[dirid];\r\n                let oldEnabled = old && (0,_components_Button__WEBPACK_IMPORTED_MODULE_3__.uiActionEnabled)(old);\r\n                if (!old || enabled && !oldEnabled) {\r\n                    dpadActions[dirid] = {\r\n                        hotkeys: BattleActionsPanel.DPadHotkeys[dirid],\r\n                        label: a.dpadClass ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"span\", { class: a.dpadClass }, a.dpadLabel) : a.dpadLabel,\r\n                        // TODO tooltip\r\n                        disabled: () => !playerCanAct || !a.isPossible(this.context.cc),\r\n                        callback: () => this.context.execAction(a)\r\n                    };\r\n                    continue;\r\n                }\r\n                if (!enabled) {\r\n                    // If multiple actions on same directions, do not show disabled\r\n                    continue;\r\n                }\r\n            }\r\n            actionList.push({\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.DefaultHotkeys[actionList.length],\r\n                label: a.label,\r\n                // TODO tooltip\r\n                disabled: () => !playerCanAct || !a.isPossible(this.context.cc),\r\n                callback: () => this.context.execAction(a)\r\n            });\r\n        }\r\n        this.actions = [\r\n            ...dpadActions.filter(a => !!a),\r\n            ...actionList\r\n        ];\r\n        this.renderDpadActions(dpadActions);\r\n        this.renderActions(actionList);\r\n    }\r\n    onKeyboardEvent(event) {\r\n        (0,_components_Button__WEBPACK_IMPORTED_MODULE_3__.execUIAction)(event, this.actions);\r\n    }\r\n}\r\nBattleActionsPanel.DPadHotkeys = [\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYQ, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD7],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYW, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD8],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYE, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD9],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYA, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD4],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.ENTER, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD5],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYD, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD6],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYZ, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD1],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYS, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYX, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD2],\r\n    [_KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYC, _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.NUMPAD3],\r\n];\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/BattleActionsPanel.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/BattlePanel.tsx":
/*!**********************************************!*\
  !*** ./src/engine/ui/panels/BattlePanel.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BattlePanel\": () => (/* binding */ BattlePanel)\n/* harmony export */ });\n/* harmony import */ var _DomComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _components_GlyphCanvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/GlyphCanvas */ \"./src/engine/ui/components/GlyphCanvas.ts\");\n/*\r\n * Created by aimozg on 30.07.2022.\r\n */\r\n\r\n\r\n\r\nclass BattlePanel extends _DomComponent__WEBPACK_IMPORTED_MODULE_0__.DomComponent {\r\n    constructor(context) {\r\n        let refMain = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"combat-panel d-flex flex-grow-1 jc-stretch\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"canvas\", { className: \"flex-grow-1\", ref: refMain })));\r\n        this.context = context;\r\n        this.refMain = refMain;\r\n        this.canvas = new _components_GlyphCanvas__WEBPACK_IMPORTED_MODULE_2__.GlyphCanvas(refMain.current.getContext(\"2d\"), \"fit\");\r\n    }\r\n    init() {\r\n        this.canvas.windowWidth = this.context.grid.width;\r\n        this.canvas.windowHeight = this.context.grid.height;\r\n    }\r\n    animationFrame(dt, time) {\r\n        this.context.grid.animationFrame(dt);\r\n        this.canvas.render(this.context.grid);\r\n    }\r\n    update() {\r\n        this.canvas.render(this.context.grid);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/BattlePanel.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/LogPanel.tsx":
/*!*******************************************!*\
  !*** ./src/engine/ui/panels/LogPanel.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LogPanel\": () => (/* binding */ LogPanel)\n/* harmony export */ });\n/* harmony import */ var _DomComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _text_output_TextOutput__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../text/output/TextOutput */ \"./src/engine/text/output/TextOutput.tsx\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/dom */ \"./src/engine/utils/dom.ts\");\n\r\n\r\n\r\n\r\nclass LogPanel extends _DomComponent__WEBPACK_IMPORTED_MODULE_0__.DomComponent {\r\n    constructor() {\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"log-panel\" }));\r\n    }\r\n    print(p) {\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.renderAppend)(_text_output_TextOutput__WEBPACK_IMPORTED_MODULE_2__.TextOutput.render(p), this.node);\r\n    }\r\n    append(t) {\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.renderAppend)(t, this.node);\r\n    }\r\n    appendToLast(t) {\r\n        let last1 = this.last();\r\n        if (last1)\r\n            (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.renderAppend)(t, last1);\r\n        else\r\n            this.append(t);\r\n    }\r\n    last() {\r\n        return this.node.lastElementChild;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/LogPanel.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/PlaceSidebar.tsx":
/*!***********************************************!*\
  !*** ./src/engine/ui/panels/PlaceSidebar.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlaceSidebar\": () => (/* binding */ PlaceSidebar)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _KeyCodes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n\r\n\r\n\r\nclass PlaceSidebar extends preact__WEBPACK_IMPORTED_MODULE_0__.Component {\r\n    constructor(props, context) {\r\n        super(props, context);\r\n        this.aRest = {\r\n            disabled: () => this.state.disabled || !this.props.context.canRest(),\r\n            hotkey: PlaceSidebar.HkRest,\r\n            callback: () => this.props.context.onRestClick()\r\n        };\r\n        this.aInventory = {\r\n            disabled: () => this.state.disabled || !this.props.context.canManageInventory(),\r\n            hotkey: PlaceSidebar.HkInventory,\r\n            callback: () => this.props.context.onInventoryClick()\r\n        };\r\n        this.aLevelup = {\r\n            disabled: () => this.state.disabled || !this.props.context.canLevelUp(),\r\n            hotkey: PlaceSidebar.HkLevelUp,\r\n            callback: () => this.props.context.onLevelUpClick()\r\n        };\r\n        this.aExplore = {\r\n            disabled: () => this.state.disabled || !this.props.context.canExplore(),\r\n            hotkey: PlaceSidebar.HkExplore,\r\n            callback: () => this.props.context.onExploreClick()\r\n        };\r\n        this.actions = [this.aRest, this.aInventory, this.aLevelup, this.aExplore];\r\n        this.state = { disabled: false };\r\n    }\r\n    disable() {\r\n        this.setState({ disabled: true });\r\n    }\r\n    enable() {\r\n        this.setState({ disabled: false });\r\n    }\r\n    handleKeyboardEvent(e) {\r\n        return (0,_components_Button__WEBPACK_IMPORTED_MODULE_1__.execUIAction)(e, this.actions);\r\n    }\r\n    render(props, state) {\r\n        let pc = this.props.context;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"place-actions-panel\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"ma-2\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"place-name text-bold\" }, pc.place.displayName()),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"place-description text-small\" }, pc.place.description())),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"place-actions d-flex flex-column ai-stretch gap-2 ma-2\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { label: \"Rest\", className: \"-big\", action: this.aRest }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { label: \"Inventory\", className: \"-big\", action: this.aInventory }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { label: \"Level Up\", className: \"-big\", action: this.aLevelup }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { label: \"Explore\", className: \"-big\", action: this.aExplore })));\r\n    }\r\n}\r\nPlaceSidebar.HkRest = _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYR;\r\nPlaceSidebar.HkInventory = _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYI;\r\nPlaceSidebar.HkLevelUp = _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYP;\r\nPlaceSidebar.HkExplore = _KeyCodes__WEBPACK_IMPORTED_MODULE_2__.KeyCodes.KEYE;\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/PlaceSidebar.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/ScenePanel.tsx":
/*!*********************************************!*\
  !*** ./src/engine/ui/panels/ScenePanel.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ScenePanel\": () => (/* binding */ ScenePanel)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _DomComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/dom */ \"./src/engine/utils/dom.ts\");\n/* harmony import */ var _TextPages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TextPages */ \"./src/engine/ui/panels/TextPages.tsx\");\n/*\r\n * Created by aimozg on 19.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n// TODO inheritance instead of composition OR extract \"ITextPages\" interface\r\nclass ScenePanel extends _DomComponent__WEBPACK_IMPORTED_MODULE_1__.DomComponent {\r\n    constructor() {\r\n        let pages = new _TextPages__WEBPACK_IMPORTED_MODULE_3__.TextPages();\r\n        let refActions = (0,preact__WEBPACK_IMPORTED_MODULE_0__.createRef)();\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"scene-panel\" },\r\n            pages.astsx,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"scene-actions\", ref: refActions })));\r\n        this.nextActions = [];\r\n        this.pages = pages;\r\n        this.refActions = refActions;\r\n    }\r\n    clear() {\r\n        this.nextActions = [];\r\n        this.pages.clear();\r\n    }\r\n    flush() {\r\n        this.pages.flush();\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.removeChildren)(this.refActions.current);\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.renderAppend)(this.nextActions, this.refActions.current);\r\n        this.nextActions = [];\r\n    }\r\n    flipPage(tail) {\r\n        this.pages.flipPage(tail);\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.removeChildren)(this.refActions.current);\r\n    }\r\n    addContent(content) {\r\n        this.pages.addContent(content);\r\n    }\r\n    addActions(actions) {\r\n        this.nextActions.push(actions);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/ScenePanel.tsx?");

/***/ }),

/***/ "./src/engine/ui/panels/TextPages.tsx":
/*!********************************************!*\
  !*** ./src/engine/ui/panels/TextPages.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextPages\": () => (/* binding */ TextPages)\n/* harmony export */ });\n/* harmony import */ var _DomComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/dom */ \"./src/engine/utils/dom.ts\");\n\r\n\r\n\r\nclass TextPages extends _DomComponent__WEBPACK_IMPORTED_MODULE_0__.DomComponent {\r\n    constructor(className = \"text-pages\", pageClassName = \"text-page\") {\r\n        let refPages = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: className, ref: refPages }));\r\n        this.pageClassName = pageClassName;\r\n        this.nextContent = [];\r\n        this.lastPage = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.refPages = refPages;\r\n    }\r\n    clear() {\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.removeChildren)(this.refPages.current);\r\n        this.nextContent = [];\r\n    }\r\n    flush() {\r\n        let nextPage = (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: this.pageClassName + \" -current\", ref: this.lastPage }, this.nextContent);\r\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.renderAppend)(nextPage, this.refPages.current);\r\n        this.nextContent = [];\r\n    }\r\n    flipPage(tail) {\r\n        if (this.lastPage.current) {\r\n            this.lastPage.current.classList.remove('-current');\r\n            this.lastPage.current.classList.add('-history');\r\n            if (tail)\r\n                (0,_utils_dom__WEBPACK_IMPORTED_MODULE_2__.renderAppend)(tail, this.lastPage.current);\r\n        }\r\n    }\r\n    addContent(content) {\r\n        this.nextContent.push(content);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/panels/TextPages.tsx?");

/***/ }),

/***/ "./src/engine/ui/screens/EmptyScreen.tsx":
/*!***********************************************!*\
  !*** ./src/engine/ui/screens/EmptyScreen.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EmptyScreen\": () => (/* binding */ EmptyScreen)\n/* harmony export */ });\n/* harmony import */ var _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AbstractScreen */ \"./src/engine/ui/AbstractScreen.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n\r\n\r\nclass EmptyScreen extends _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__.AbstractScreen {\r\n    constructor() {\r\n        super();\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/screens/EmptyScreen.tsx?");

/***/ }),

/***/ "./src/engine/ui/screens/GameScreen.tsx":
/*!**********************************************!*\
  !*** ./src/engine/ui/screens/GameScreen.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameScreen\": () => (/* binding */ GameScreen)\n/* harmony export */ });\n/* harmony import */ var _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AbstractScreen */ \"./src/engine/ui/AbstractScreen.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n\r\n\r\nclass GameScreen extends _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__.AbstractScreen {\r\n    constructor() {\r\n        super();\r\n        this.layout = {};\r\n        this.root = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.top = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.center = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.left = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.right = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.bottom = (0,preact__WEBPACK_IMPORTED_MODULE_1__.createRef)();\r\n        this.render();\r\n    }\r\n    applyLayout(layout) {\r\n        this.layout = layout;\r\n        (0,preact__WEBPACK_IMPORTED_MODULE_1__.render)([], this.container);\r\n        this.render();\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"game-layout \" + (this.layout.className ?? \"\"), ref: this.root },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-top\", ref: this.top }, this.layout.top),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-midrow\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-left\", ref: this.left }, this.layout.left),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-midcol\" },\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-center\", ref: this.center }, this.layout.center),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"gl-bottom\", ref: this.bottom }, this.layout.bottom)),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"gl-right\", ref: this.right }, this.layout.right))));\r\n    }\r\n    onKeyboardEvent(event) {\r\n        this.keyboardEventListener?.(event);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/screens/GameScreen.tsx?");

/***/ }),

/***/ "./src/engine/ui/screens/InventoryScreen.tsx":
/*!***************************************************!*\
  !*** ./src/engine/ui/screens/InventoryScreen.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"InventoryScreen\": () => (/* binding */ InventoryScreen)\n/* harmony export */ });\n/* harmony import */ var _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AbstractScreen */ \"./src/engine/ui/AbstractScreen.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _KeyCodes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../KeyCodes */ \"./src/engine/ui/KeyCodes.ts\");\n/* harmony import */ var _text_CommonText__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../text/CommonText */ \"./src/engine/text/CommonText.ts\");\n/* harmony import */ var _utils_Deferred__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/Deferred */ \"./src/engine/utils/Deferred.ts\");\n/* harmony import */ var _text_output_TextOutput__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../text/output/TextOutput */ \"./src/engine/text/output/TextOutput.tsx\");\n/* harmony import */ var _panels_TextPages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../panels/TextPages */ \"./src/engine/ui/panels/TextPages.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// TODO log actions\r\nfunction unhotkey(a) {\r\n    return Object.assign({}, a, { hotkey: undefined });\r\n}\r\nclass InventoryScreen extends _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__.AbstractScreen {\r\n    /**\r\n     * If `other` is null, manage `creature`'s equipment.\r\n     * Otherwise, transfer items between `creature.inventory` and `other`\r\n     */\r\n    constructor(creature, other = null, options = {}) {\r\n        super();\r\n        this.creature = creature;\r\n        this.other = other;\r\n        this.isEquipmentScreen = !this.other;\r\n        this.main = this.creature.inventory;\r\n        this.promise = new _utils_Deferred__WEBPACK_IMPORTED_MODULE_6__.Deferred();\r\n        // TODO store category & position instead\r\n        this.selectedItem = null;\r\n        this.textOutput = new _text_output_TextOutput__WEBPACK_IMPORTED_MODULE_7__.TextOutput(new _panels_TextPages__WEBPACK_IMPORTED_MODULE_8__.TextPages());\r\n        this.mainInvMenus = [];\r\n        this.otherInvMenus = [];\r\n        this.aClose = {\r\n            label: \"Close\",\r\n            hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ESCAPE,\r\n            callback: () => this.close()\r\n        };\r\n        this.aTakeAll = {\r\n            label: \"Take All\",\r\n            hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.KEYA,\r\n            disabled: () => !this.options.take || this.main.isFull,\r\n            callback: () => this.transferAll(false)\r\n        };\r\n        this.basicActions = [\r\n            this.aClose,\r\n            {\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ARROWUP,\r\n                callback: () => this.moveSelection(-1)\r\n            }, {\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ARROWDOWN,\r\n                callback: () => this.moveSelection(+1)\r\n            }, {\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ARROWLEFT,\r\n                callback: () => this.selectCategory(0)\r\n            }, {\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ARROWRIGHT,\r\n                callback: () => this.selectCategory(1)\r\n            }\r\n        ];\r\n        this.actions = [];\r\n        this.options = Object.assign({\r\n            take: true,\r\n            put: true,\r\n            use: true,\r\n            equip: true,\r\n            unequip: true,\r\n            discard: true,\r\n        }, options);\r\n    }\r\n    async showModal() {\r\n        await this.game.screenManager.addOnTop(this, 'fade-fast');\r\n        await this.promise;\r\n    }\r\n    async close() {\r\n        await _Game__WEBPACK_IMPORTED_MODULE_3__.Game.instance.screenManager.closeTop(\"fade-fast\");\r\n        this.promise.resolve();\r\n    }\r\n    onActivate() {\r\n        if (this.promise.completed)\r\n            throw new Error(\"Cannot re-add InventoryScreen\");\r\n        super.onActivate();\r\n        this.update();\r\n    }\r\n    equipmentMenus() {\r\n        let c = this.creature;\r\n        let equipmentInfos = [{\r\n                slot: \"Main weapon\",\r\n                item: c.mainHandItem,\r\n                natural: c.fists,\r\n                // hotkey: KeyCodes.KEYW\r\n            }, {\r\n                slot: \"Body armor\",\r\n                item: c.bodyArmor,\r\n                // hotkey: KeyCodes.KEYA\r\n            }];\r\n        return equipmentInfos.map(ei => ({\r\n            item: ei.item ?? ei.natural ?? null,\r\n            slotName: ei.slot,\r\n            natural: ei.natural && !ei.item,\r\n            aSelect: this.selectItemAction(ei.item ?? ei.natural, ei.hotkey),\r\n            actions: ei.item ? this.itemActions(ei.item) : []\r\n        }));\r\n    }\r\n    // TODO consider moving it outside\r\n    itemActions(item) {\r\n        let inMain = this.main.includes(item);\r\n        let equipped = !inMain && this.isEquipmentScreen;\r\n        let result = [];\r\n        if (this.isEquipmentScreen) {\r\n            if (inMain) {\r\n                if (this.options.equip && this.isEquipable(item)) {\r\n                    result.push({\r\n                        position: 1,\r\n                        label: \"E\",\r\n                        longLabel: \"Equip\",\r\n                        hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.KEYE,\r\n                        // TODO disabled if fails canEquip\r\n                        callback: () => this.equip(item)\r\n                    });\r\n                }\r\n            }\r\n            else if (this.options.unequip) {\r\n                result.push({\r\n                    position: 1,\r\n                    label: \"U\",\r\n                    longLabel: \"Unequip\",\r\n                    hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.KEYU,\r\n                    // TODO disabled if fails canUnequip\r\n                    callback: () => this.unequip(item)\r\n                });\r\n            }\r\n        }\r\n        if (this.options.use && item.isConsumable) {\r\n            result.push({\r\n                position: 1,\r\n                label: \"U\",\r\n                longLabel: \"Use\",\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.KEYU,\r\n                // TODO disabled if fails canUse\r\n                callback: () => this.consume(item)\r\n            });\r\n        }\r\n        if (!this.isEquipmentScreen) {\r\n            if (inMain && this.options.put) {\r\n                result.push({\r\n                    position: 2,\r\n                    label: \"<\",\r\n                    longLabel: \"Store\",\r\n                    hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ENTER,\r\n                    // TODO disabled if item not transferable\r\n                    callback: () => this.transferItem(item)\r\n                });\r\n            }\r\n            else if (!inMain && this.options.take) {\r\n                result.push({\r\n                    position: 2,\r\n                    label: \">\",\r\n                    longLabel: \"Take\",\r\n                    hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.ENTER,\r\n                    // TODO disabled if item not transferable\r\n                    callback: () => this.transferItem(item)\r\n                });\r\n            }\r\n        }\r\n        if (!equipped && this.options.discard) {\r\n            result.push({\r\n                position: 2,\r\n                label: \"D\",\r\n                longLabel: \"Discard\",\r\n                hotkey: _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.DELETE,\r\n                // TODO disabled if item cannot be discarded\r\n                callback: () => this.discard(item)\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    inventoryMenus(inventory) {\r\n        return inventory.map((item, i) => {\r\n            if (!item) {\r\n                return {\r\n                    item: null,\r\n                    actions: []\r\n                };\r\n            }\r\n            return {\r\n                item: item,\r\n                aSelect: this.selectItemAction(item, _KeyCodes__WEBPACK_IMPORTED_MODULE_4__.KeyCodes.DefaultHotkeys[i]),\r\n                equipped: false,\r\n                actions: this.itemActions(item)\r\n            };\r\n        });\r\n    }\r\n    selectItemAction(item, hotkey, disabled) {\r\n        return {\r\n            hotkey: hotkey,\r\n            disabled: disabled || !item,\r\n            callback: () => item && this.selectItem(item)\r\n        };\r\n    }\r\n    update() {\r\n        // TODO equip/unequip/drop hotkeys\r\n        this.mainInvMenus = this.inventoryMenus(this.main);\r\n        this.otherInvMenus = !!this.other\r\n            ? this.inventoryMenus(this.other)\r\n            : this.equipmentMenus();\r\n        this.updateActions();\r\n        this.render();\r\n    }\r\n    updateActions() {\r\n        if (!this.main.includes(this.selectedItem) && !(this.otherInvMenus.find(im => im.item === this.selectedItem))) {\r\n            this.selectedItem = null;\r\n        }\r\n        this.actions = [...this.basicActions];\r\n        if (this.other)\r\n            this.actions.push(this.aTakeAll);\r\n        for (let im of [...this.mainInvMenus, ...this.otherInvMenus]) {\r\n            if (im.aSelect)\r\n                this.actions.push(im.aSelect);\r\n            if (im.item === this.selectedItem) {\r\n                this.actions.push(...im.actions);\r\n            }\r\n            else {\r\n                this.actions.push(...im.actions.map(a => unhotkey(a)));\r\n            }\r\n        }\r\n    }\r\n    isEquipable(item) {\r\n        // TODO check if has Equipable aspect and can be equipped\r\n        return item.isArmor || item.isWeapon;\r\n    }\r\n    selectItem(item) {\r\n        this.selectedItem = item;\r\n        this.updateActions();\r\n        this.render();\r\n    }\r\n    async unequip(item) {\r\n        await this.game.gameController.unequipToInventory(this.creature, item);\r\n        this.update();\r\n    }\r\n    async equip(item) {\r\n        await this.game.gameController.equipFromInventory(this.creature, item);\r\n        this.update();\r\n    }\r\n    async transferItem(item) {\r\n        if (!this.other)\r\n            throw new Error(`No storage to transfer item to/from`);\r\n        if (this.main.includes(item)) {\r\n            this.main.transferTo(item, this.other);\r\n        }\r\n        else if (this.other.includes(item)) {\r\n            this.other.transferTo(item, this.main);\r\n        }\r\n        this.update();\r\n    }\r\n    async transferAll(fromMain, andClose = true) {\r\n        if (!this.other)\r\n            throw new Error(`No storage to transfer item to/from`);\r\n        for (let item of (fromMain ? this.main : this.other)) {\r\n            if (item)\r\n                await this.transferItem(item);\r\n        }\r\n        if (andClose && (fromMain ? this.main : this.other).isEmpty) {\r\n            await this.close();\r\n        }\r\n    }\r\n    async consume(item) {\r\n        this.textOutput.clear();\r\n        if (this.creature.inventory.includes(item)) {\r\n            await this.game.gameController.consumeFromInventory(this.creature, item, this.textOutput);\r\n        }\r\n        else if (this.other && this.other?.includes(item)) {\r\n            await this.game.gameController.consumeItem(this.creature, item, this.textOutput);\r\n            this.other.removeItem(item);\r\n        }\r\n        this.textOutput.flush();\r\n        this.selectedItem = null;\r\n        this.update();\r\n    }\r\n    async discard(item) {\r\n        if (this.main.includes(item)) {\r\n            this.main.removeItem(item);\r\n        }\r\n        else {\r\n            this.other?.removeItem(item);\r\n        }\r\n        this.selectedItem = null;\r\n        this.update();\r\n    }\r\n    selCat() {\r\n        if (!this.selectedItem)\r\n            return -1;\r\n        if (this.mainInvMenus.some(im => im.item === this.selectedItem))\r\n            return 1;\r\n        return 0;\r\n    }\r\n    selIdx() {\r\n        if (!this.selectedItem)\r\n            return -1;\r\n        let i = this.mainInvMenus.findIndex(im => im.item === this.selectedItem);\r\n        if (i >= 0)\r\n            return i;\r\n        return this.otherInvMenus.findIndex(im => im.item === this.selectedItem);\r\n    }\r\n    moveSelection(d) {\r\n        let categories = [this.otherInvMenus, this.mainInvMenus];\r\n        let catNo = this.selCat();\r\n        let idx = this.selIdx();\r\n        if (catNo === -1 || idx === -1) {\r\n            // nothing selected, select first item or equipment\r\n            for (let cat of categories) {\r\n                if (this.selectFirstInCategory(cat))\r\n                    return;\r\n            }\r\n        }\r\n        else {\r\n            // goto next/prev non-empty slot\r\n            idx += d;\r\n            let cat = categories[catNo];\r\n            while (idx >= 0 && idx < cat.length) {\r\n                let im = cat[idx];\r\n                if (im.aSelect) {\r\n                    im.aSelect.callback();\r\n                    return;\r\n                }\r\n                idx += d;\r\n            }\r\n        }\r\n    }\r\n    selectFirstInCategory(cat) {\r\n        for (let im of cat) {\r\n            if (im.aSelect) {\r\n                im.aSelect.callback();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    selectCategory(n) {\r\n        this.selectFirstInCategory(n === 1 ? this.mainInvMenus : this.otherInvMenus);\r\n    }\r\n    renderItemMenu(im) {\r\n        let item = im.item;\r\n        let action1 = im.actions.find(a => a.position === 1);\r\n        let action2 = im.actions.find(a => a.position === 2);\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"inventory-row\" + (item && item === this.selectedItem ? \" -active\" : \"\") },\r\n            im.aSelect\r\n                ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { action: im.aSelect, className: \"-flat -icon\" })\r\n                : (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: !im.item || im.natural ? \"text-shadowed\" : \"\" }, item?.name ?? \"-\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: !im.item || im.natural ? \"text-shadowed\" : \"\" }, item && _text_CommonText__WEBPACK_IMPORTED_MODULE_5__.CommonText.itemInfo(item)),\r\n            action1\r\n                ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { action: action1 && unhotkey(action1), className: \"-flat -icon\" })\r\n                : (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            action2\r\n                ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { action: action2 && unhotkey(action2), className: \"-flat -icon\" })\r\n                : (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null));\r\n    }\r\n    node() {\r\n        let selitem = this.selectedItem;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"ui-box screen-inventory d-flex flex-column\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"grid-2 gap-4 flex-grow-1\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"grid-v2\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, this.isEquipmentScreen ? \"Equipment\" : this.other.name),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: this.isEquipmentScreen ? \"inventory-equipment\" : \"inventory-items\" }, this.otherInvMenus.map(im => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, im.slotName),\r\n                            this.renderItemMenu(im))))),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"inventory-iteminfo\" },\r\n                        selitem && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, selitem.name),\r\n                            selitem.asArmor && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                                \"Defense: \",\r\n                                selitem.asArmor.defenseBonus,\r\n                                \" \",\r\n                                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"br\", null),\r\n                                \"DR: \",\r\n                                selitem.asArmor.drBonus),\r\n                            selitem.asWeapon && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                                \"Damage: \",\r\n                                selitem.asWeapon.damage.toString(),\r\n                                \" \",\r\n                                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"br\", null),\r\n                                \"Damage type: \",\r\n                                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"span\", { class: 'text-damage-' + selitem.asWeapon.damageType.cssSuffix }, selitem.asWeapon.damageType.name)),\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-flex gap-4 my-4\" }, this.itemActions(selitem).map(action => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: action.longLabel, action: action, className: \"-big\" })))),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"my-4\" }, this.textOutput.pages.astsx))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, this.main.name),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"inventory-items\" }, this.mainInvMenus.map(im => this.renderItemMenu(im))))),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-flex gap-4 my-4\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                    \"Gold: \",\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"span\", { class: \"text-money\" }, this.creature.money.format(\",d\"))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"flex-grow-1\" }, \"\\u00A0\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { action: this.aTakeAll, className: \"-big\" }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { action: this.aClose, className: \"-big\" })));\r\n    }\r\n    onKeyboardEvent(event) {\r\n        (0,_components_Button__WEBPACK_IMPORTED_MODULE_2__.execUIAction)(event, this.actions);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/screens/InventoryScreen.tsx?");

/***/ }),

/***/ "./src/engine/ui/screens/MainMenuScreen.tsx":
/*!**************************************************!*\
  !*** ./src/engine/ui/screens/MainMenuScreen.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MainMenuScreen\": () => (/* binding */ MainMenuScreen)\n/* harmony export */ });\n/* harmony import */ var _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../AbstractScreen */ \"./src/engine/ui/AbstractScreen.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Button */ \"./src/engine/ui/components/Button.tsx\");\n\r\n\r\n\r\nclass MainMenuScreen extends _AbstractScreen__WEBPACK_IMPORTED_MODULE_0__.AbstractScreen {\r\n    constructor() {\r\n        super();\r\n    }\r\n    async onResumeGameClick() {\r\n        await this.game.screenManager.closeTop('fade');\r\n        await this.game.gameController.loadAutosave();\r\n    }\r\n    async onNewGameClick() {\r\n        let started = await this.game.gameController.startNewGame();\r\n        if (!started) {\r\n            await this.game.screenManager.addOnTop(this, 'fade');\r\n        }\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center text-intense screen-main-menu\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-xxxl mt-8\" }, this.game.info.title),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"\" }, this.game.info.subtitle),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-s mb-8\" }, this.game.info.version),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-flex flex-column ai-center gap-4\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: \"Resume Game\", disabled: !this.game.saveManager.isRecentSaveAvailable(), className: \"-big\", onClick: () => this.onResumeGameClick() }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: \"New Game\", className: \"-big\", onClick: () => this.onNewGameClick() })));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/ui/screens/MainMenuScreen.tsx?");

/***/ }),

/***/ "./src/engine/utils/Deferred.ts":
/*!**************************************!*\
  !*** ./src/engine/utils/Deferred.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Deferred\": () => (/* binding */ Deferred)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 17.07.2022.\r\n */\r\nclass Deferred extends Promise {\r\n    constructor(executor) {\r\n        let resolveFn, rejectFn;\r\n        let status = { resolved: false, rejected: false };\r\n        super((resolve, reject) => {\r\n            resolveFn = t => {\r\n                status.resolved = true;\r\n                resolve(t);\r\n            };\r\n            rejectFn = t => {\r\n                status.rejected = true;\r\n                reject(t);\r\n            };\r\n            if (executor)\r\n                executor(resolve, reject);\r\n        });\r\n        this.status = status;\r\n        this.resolve = resolveFn;\r\n        this.reject = rejectFn;\r\n    }\r\n    get resolved() { return this.status.resolved; }\r\n    get rejected() { return this.status.rejected; }\r\n    get completed() { return this.status.resolved || this.status.rejected; }\r\n    tryResolve(value) {\r\n        if (!this.completed)\r\n            this.resolve(value);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/Deferred.ts?");

/***/ }),

/***/ "./src/engine/utils/collections.ts":
/*!*****************************************!*\
  !*** ./src/engine/utils/collections.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createArray\": () => (/* binding */ createArray)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 21.07.2022.\r\n */\r\nfunction createArray(size, initializer) {\r\n    let arr = Array(size);\r\n    for (let i = 0; i < size; i++)\r\n        arr[i] = initializer(i, arr);\r\n    return arr;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/collections.ts?");

/***/ }),

/***/ "./src/engine/utils/css.ts":
/*!*********************************!*\
  !*** ./src/engine/utils/css.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"stripedBackground\": () => (/* binding */ stripedBackground)\n/* harmony export */ });\n/* harmony import */ var _math_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/utils */ \"./src/engine/math/utils.ts\");\n/*\r\n * Created by aimozg on 10.08.2022.\r\n */\r\n\r\nfunction stripedBackground(color1, color2, position = 0.5, angle = 90) {\r\n    position = (0,_math_utils__WEBPACK_IMPORTED_MODULE_0__.coerce)(position, 0, 1) * 100;\r\n    return 'linear-gradient(' +\r\n        angle + 'deg, ' +\r\n        color1 + ' ' + position + '%, ' +\r\n        color2 + ' ' + position + '%)';\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/css.ts?");

/***/ }),

/***/ "./src/engine/utils/dom.ts":
/*!*********************************!*\
  !*** ./src/engine/utils/dom.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"moveChildren\": () => (/* binding */ moveChildren),\n/* harmony export */   \"removeChildren\": () => (/* binding */ removeChildren),\n/* harmony export */   \"render1\": () => (/* binding */ render1),\n/* harmony export */   \"renderAppend\": () => (/* binding */ renderAppend)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/*\r\n * Created by aimozg on 17.07.2022.\r\n */\r\n\r\nfunction removeChildren(parent) {\r\n    if (!parent)\r\n        return;\r\n    let c;\r\n    while ((c = parent.firstChild))\r\n        parent.removeChild(c);\r\n}\r\nfunction moveChildren(source, dest, insertAfter = null) {\r\n    if (!source || !dest || source === dest)\r\n        return;\r\n    let c;\r\n    if (insertAfter) {\r\n        insertAfter = insertAfter.nextSibling;\r\n        while ((c = source.firstChild))\r\n            dest.insertBefore(c, insertAfter);\r\n    }\r\n    else {\r\n        while ((c = source.firstChild))\r\n            dest.appendChild(c);\r\n    }\r\n}\r\nfunction renderAppend(e, container) {\r\n    let tmp = document.createDocumentFragment();\r\n    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(e, tmp);\r\n    container.appendChild(tmp);\r\n}\r\nfunction render1(v) {\r\n    let tmp = document.createDocumentFragment();\r\n    (0,preact__WEBPACK_IMPORTED_MODULE_0__.render)(v, tmp);\r\n    return tmp.firstChild;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/dom.ts?");

/***/ }),

/***/ "./src/engine/utils/gridutils.ts":
/*!***************************************!*\
  !*** ./src/engine/utils/gridutils.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Direction\": () => (/* binding */ Direction)\n/* harmony export */ });\nclass Direction {\r\n    constructor(\r\n    /** Index in Direction.All list */\r\n    id, name, dx, dy) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.dx = dx;\r\n        this.dy = dy;\r\n    }\r\n    add(pos) {\r\n        return { x: pos.x + this.dx, y: pos.y + this.dy };\r\n    }\r\n    static to(from, to) {\r\n        return Direction.get(to.x - from.x, to.y - from.y);\r\n    }\r\n    static get(dx, dy) {\r\n        if (dy < 0) {\r\n            if (dx < 0)\r\n                return Direction.NORTHWEST;\r\n            if (dx > 0)\r\n                return Direction.NORTHEAST;\r\n            return Direction.NORTH;\r\n        }\r\n        if (dy > 0) {\r\n            if (dx < 0)\r\n                return Direction.SOUTHWEST;\r\n            if (dx > 0)\r\n                return Direction.SOUTHEAST;\r\n            return Direction.SOUTH;\r\n        }\r\n        if (dx < 0)\r\n            return Direction.WEST;\r\n        if (dx > 0)\r\n            return Direction.EAST;\r\n        return Direction.CENTER;\r\n    }\r\n}\r\nDirection.NORTHWEST = new Direction(0, \"northwest\", -1, -1);\r\nDirection.NORTH = new Direction(1, \"north\", 0, -1);\r\nDirection.NORTHEAST = new Direction(2, \"northeast\", +1, -1);\r\nDirection.WEST = new Direction(3, \"west\", -1, 0);\r\nDirection.CENTER = new Direction(4, \"center\", 0, 0);\r\nDirection.EAST = new Direction(5, \"east\", +1, 0);\r\nDirection.SOUTHWEST = new Direction(6, \"southwest\", -1, +1);\r\nDirection.SOUTH = new Direction(7, \"south\", 0, +1);\r\nDirection.SOUTHEAST = new Direction(8, \"southeast\", +1, +1);\r\nDirection.All = Object.freeze([\r\n    Direction.NORTHWEST, Direction.NORTH, Direction.NORTHEAST,\r\n    Direction.WEST, Direction.CENTER, Direction.EAST,\r\n    Direction.SOUTHWEST, Direction.SOUTH, Direction.SOUTHEAST,\r\n]);\r\nDirection.Steps = Object.freeze([\r\n    Direction.NORTHWEST, Direction.NORTH, Direction.NORTHEAST,\r\n    Direction.WEST, /*Direction.CENTER,*/ Direction.EAST,\r\n    Direction.SOUTHWEST, Direction.SOUTH, Direction.SOUTHEAST,\r\n]);\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/gridutils.ts?");

/***/ }),

/***/ "./src/engine/utils/math.ts":
/*!**********************************!*\
  !*** ./src/engine/utils/math.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"signValue\": () => (/* binding */ signValue)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\nfunction signValue(value, negative, zero, positive) {\r\n    return value > 0 ? positive : value < 0 ? negative : zero;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/math.ts?");

/***/ }),

/***/ "./src/engine/utils/string.ts":
/*!************************************!*\
  !*** ./src/engine/utils/string.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"adjustCase\": () => (/* binding */ adjustCase),\n/* harmony export */   \"adjustCaseMode\": () => (/* binding */ adjustCaseMode),\n/* harmony export */   \"parseXmlEntity\": () => (/* binding */ parseXmlEntity),\n/* harmony export */   \"substitutePattern\": () => (/* binding */ substitutePattern)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 05.07.2022.\r\n */\r\nfunction adjustCaseMode(reference) {\r\n    if (reference === reference.toUpperCase())\r\n        return \"uppercase\";\r\n    if (reference === reference.capitalize())\r\n        return \"capitalize\";\r\n    return \"keep\";\r\n}\r\nfunction adjustCase(reference, content) {\r\n    switch (adjustCaseMode(reference)) {\r\n        case \"capitalize\":\r\n            return content.capitalize();\r\n        case \"uppercase\":\r\n            return content.toUpperCase();\r\n        case \"keep\":\r\n        default:\r\n            return content;\r\n    }\r\n}\r\nconst knownEntities = new Map();\r\nconst tmpEl = document.createElement(\"span\");\r\nconst entityRex = /^&(?:\\w+|#x[a-fA-F\\d]+|#\\d+);$/;\r\nfunction parseXmlEntity(entity) {\r\n    if (knownEntities.has(entity))\r\n        return knownEntities.get(entity);\r\n    if (!entityRex.test(entity))\r\n        return entity;\r\n    tmpEl.innerHTML = entity;\r\n    let value = tmpEl.textContent;\r\n    knownEntities.set(entity, value);\r\n    return value;\r\n}\r\n/**\r\n * Replaces in {@param pattern} `\"{part}\"` with parts from {@param substitutions}\r\n */\r\nfunction substitutePattern(pattern, substitutions) {\r\n    let replacer;\r\n    if (typeof substitutions === 'function') {\r\n        replacer = substitutions;\r\n    }\r\n    else {\r\n        replacer = part => {\r\n            let v = substitutions[part];\r\n            return (typeof v === 'function') ? v() : String(v);\r\n        };\r\n    }\r\n    return pattern.replace(/\\{([\\w_]+)}/g, (match, s) => replacer(s) ?? match);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/string.ts?");

/***/ }),

/***/ "./src/engine/utils/time.ts":
/*!**********************************!*\
  !*** ./src/engine/utils/time.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"milliTime\": () => (/* binding */ milliTime)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 30.07.2022.\r\n */\r\nconst t0 = new Date().getTime();\r\nfunction milliTime() {\r\n    return new Date().getTime() - t0;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/time.ts?");

/***/ }),

/***/ "./src/engine/utils/vnode.ts":
/*!***********************************!*\
  !*** ./src/engine/utils/vnode.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"walkVNode\": () => (/* binding */ walkVNode)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 20.09.2022.\r\n */\r\nfunction walkVNodeList(nodes, callback) {\r\n    return nodes.map(node => {\r\n        let fn = {};\r\n        callback(node, fn);\r\n        if (fn.remove) {\r\n            return null;\r\n        }\r\n        else if ('replace' in fn) {\r\n            return fn.replace;\r\n        }\r\n        else if (fn.skip) {\r\n            return node;\r\n        }\r\n        else {\r\n            return walkVNode(node, callback);\r\n        }\r\n    });\r\n}\r\nfunction walkVNode(node, callback) {\r\n    if (node === undefined || node === null || node === '') {\r\n        return node;\r\n    }\r\n    if (typeof node === 'object') {\r\n        if (Array.isArray(node)) {\r\n            return walkVNodeList(node, callback);\r\n        }\r\n        let fn = {};\r\n        callback(node, fn);\r\n        if (fn.remove) {\r\n            return null;\r\n        }\r\n        else if ('replace' in fn) {\r\n            return fn.replace;\r\n        }\r\n        else if (fn.skip) {\r\n            return node;\r\n        }\r\n        else {\r\n            let vnode = node;\r\n            vnode.props.children = walkVNode(vnode.props.children, callback);\r\n            return vnode;\r\n        }\r\n    }\r\n    let fn = {};\r\n    callback(node, fn);\r\n    if (fn.remove) {\r\n        return null;\r\n    }\r\n    else if ('replace' in fn) {\r\n        return fn.replace;\r\n    }\r\n    else {\r\n        return node;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/engine/utils/vnode.ts?");

/***/ }),

/***/ "./src/extensions.ts":
/*!***************************!*\
  !*** ./src/extensions.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SORT_CASE_INSENSITIVE\": () => (/* binding */ SORT_CASE_INSENSITIVE),\n/* harmony export */   \"SORT_DESCENDING\": () => (/* binding */ SORT_DESCENDING),\n/* harmony export */   \"SORT_DESCENDING_CASE_INSENSITIVE\": () => (/* binding */ SORT_DESCENDING_CASE_INSENSITIVE)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\nconst SORT_CASE_INSENSITIVE = 1;\r\nconst SORT_DESCENDING = 2;\r\nconst SORT_DESCENDING_CASE_INSENSITIVE = 3;\r\nfunction initExtensions() {\r\n    function formatNumber(x, format) {\r\n        if (!isFinite(x))\r\n            return String(x);\r\n        let match = /^([+-]?)(,?)(\\d*)(?:\\.(\\d+))?([dfp])(%?)$/.exec(format);\r\n        if (!match)\r\n            throw new Error(\"Invalid or missing number format \" + format);\r\n        let [_, sign, comma, len, dec, type, percent] = match;\r\n        if (percent)\r\n            x *= 100;\r\n        sign ?? (sign = '');\r\n        if (sign === '-' && x >= 0) {\r\n            sign = ' ';\r\n        }\r\n        else if (x < 0) {\r\n            sign = '-';\r\n            x = -x;\r\n        }\r\n        if (type === 'd')\r\n            dec = '0';\r\n        let s;\r\n        switch (type) {\r\n            case 'd':\r\n            case 'f':\r\n                s = x.toFixed(+dec);\r\n                break;\r\n            case 'p':\r\n                s = x.toPrecision(+dec);\r\n                break;\r\n            default:\r\n                s = \"\" + x;\r\n        }\r\n        // Pad with zeros:  \"-000,001,234\"\r\n        // Pad with spaces: \"      -1,234\"\r\n        if (!comma && len && len[0] === '0') {\r\n            let nlen = +len - sign.length;\r\n            s = s.padStart(nlen, '0');\r\n        }\r\n        if (comma) {\r\n            let dotpos = s.indexOf('.');\r\n            let int = dotpos >= 0 ? s.substring(0, dotpos) : s;\r\n            let frac = dotpos >= 0 ? s.substring(dotpos) : '';\r\n            let n = int.length;\r\n            let cint = '';\r\n            let i = n % 3;\r\n            if (i)\r\n                cint = s.substring(0, i);\r\n            for (; i < n; i += 3) {\r\n                if (cint)\r\n                    cint += ',';\r\n                cint += s.substring(i, i + 3);\r\n            }\r\n            if (len && len[0] === '0') {\r\n                let nlen = +len - sign.length - frac.length;\r\n                while (cint.length < nlen) {\r\n                    if ((cint.length - 3) % 4 === 0)\r\n                        cint = ',' + cint;\r\n                    cint = '0' + cint;\r\n                }\r\n            }\r\n            s = cint + frac;\r\n        }\r\n        s = sign + s;\r\n        if (len && len[0] !== '0') {\r\n            s = s.padStart(+len, ' ');\r\n        }\r\n        return s;\r\n    }\r\n    Object.defineProperty(Number.prototype, \"format\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function (format) {\r\n            return formatNumber(this, format);\r\n        }\r\n    });\r\n    Object.defineProperty(Number.prototype, \"signed\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function () {\r\n            return (isFinite(this) && this >= 0) ? \"+\" + this : \"\" + this;\r\n        }\r\n    });\r\n    Object.defineProperty(String.prototype, \"capitalize\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function (skipPunctuation = true) {\r\n            if (!this)\r\n                return this;\r\n            if (skipPunctuation) {\r\n                return this.replace(/^\\W*\\w/, s => s.toUpperCase());\r\n            }\r\n            else {\r\n                let c = this[0].toUpperCase();\r\n                if (c === this[0])\r\n                    return this;\r\n                return c + this.slice(1);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Array.prototype, \"sortWith\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function (selector, options) {\r\n            let compareFn;\r\n            switch (options) {\r\n                case SORT_DESCENDING_CASE_INSENSITIVE:\r\n                    compareFn = (a, b) => String(b).toUpperCase().localeCompare(String(a).toUpperCase());\r\n                    break;\r\n                case SORT_DESCENDING:\r\n                    compareFn = (a, b) => selector(a) < selector(b) ? 1 : selector(a) > selector(b) ? -1 : 0;\r\n                    break;\r\n                case SORT_CASE_INSENSITIVE:\r\n                    compareFn = (a, b) => String(a).toUpperCase().localeCompare(String(b).toUpperCase());\r\n                    break;\r\n                case 0:\r\n                default:\r\n                    compareFn = (a, b) => selector(a) > selector(b) ? 1 : selector(a) < selector(b) ? -1 : 0;\r\n            }\r\n            this.sort(compareFn);\r\n            return this;\r\n        }\r\n    });\r\n    Object.defineProperty(Array.prototype, \"sortOn\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function (propName, options) {\r\n            this.sortWith(item => item[propName], options);\r\n            return this;\r\n        }\r\n    });\r\n    Object.defineProperty(Array.prototype, \"count\", {\r\n        enumerable: false,\r\n        writable: false,\r\n        configurable: false,\r\n        value: function (predicate, thisArg) {\r\n            let n = 0;\r\n            this.forEach((value, index) => {\r\n                if (predicate.call(thisArg, value, index, this))\r\n                    n++;\r\n            });\r\n            return n;\r\n        }\r\n    });\r\n}\r\ninitExtensions();\r\n\n\n//# sourceURL=webpack://aap18/./src/extensions.ts?");

/***/ }),

/***/ "./src/game/GameDataBuilder.ts":
/*!*************************************!*\
  !*** ./src/game/GameDataBuilder.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameDataBuilder\": () => (/* binding */ GameDataBuilder)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine/rules/RacialGroup */ \"./src/engine/rules/RacialGroup.ts\");\n/* harmony import */ var _engine_place_Place__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../engine/place/Place */ \"./src/engine/place/Place.ts\");\n/* harmony import */ var _engine_scene_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../engine/scene/builder */ \"./src/engine/scene/builder.ts\");\n/* harmony import */ var _engine_logging_LogManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../engine/logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../engine/objects/creature/Character */ \"./src/engine/objects/creature/Character.ts\");\n/* harmony import */ var _engine_rules_TraitType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../engine/rules/TraitType */ \"./src/engine/rules/TraitType.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GameDataBuilder {\r\n    constructor(options) {\r\n        this.logger = _engine_logging_LogManager__WEBPACK_IMPORTED_MODULE_3__.LogManager.loggerFor(\"GameDataBuilder\");\r\n        this.data = {\r\n            startingSceneId: options.startingSceneId,\r\n            classes: [],\r\n            colors: [],\r\n            places: [],\r\n            playerOrigins: [],\r\n            racialGroups: [],\r\n            rgHumanoid: _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup.INVALID,\r\n            scenes: [],\r\n            skills: [],\r\n            tiles: [],\r\n            traits: [],\r\n        };\r\n    }\r\n    // this magic translates to:\r\n    // propname is key of CharacterBody\r\n    // and ref is body part reference to body part that's also CharacterBody[propname]\r\n    addBodyPart(propname, ref) {\r\n        const index = ref.index;\r\n        Object.defineProperty(_engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__.CharacterBody.prototype, propname, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            get() {\r\n                return this.parts[index];\r\n            }\r\n        });\r\n    }\r\n    addBodyMaterial(propname, ref) {\r\n        const index = ref.index;\r\n        Object.defineProperty(_engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__.CharacterBody.prototype, propname, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            get() {\r\n                return this.materials[index];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Create accessors for CharacterBody named {@param prop1} and {@param prop2} to access material {@param ref}'s color1 and color2, and readonly property {@param props} for composite color name.\r\n     */\r\n    addBodyMaterialColor(prop1, prop2, props, ref) {\r\n        const index = ref.index;\r\n        Object.defineProperty(_engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__.CharacterBody.prototype, prop1, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            get() {\r\n                return this.materials[index].color1;\r\n            },\r\n            set(v) {\r\n                this.materials[index].color1 = v;\r\n            }\r\n        });\r\n        Object.defineProperty(_engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__.CharacterBody.prototype, prop2, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            get() {\r\n                return this.materials[index].color2;\r\n            },\r\n            set(v) {\r\n                this.materials[index].color2 = v;\r\n            }\r\n        });\r\n        Object.defineProperty(_engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_4__.CharacterBody.prototype, props, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            get() {\r\n                return this.materials[index].colorName;\r\n            }\r\n        });\r\n    }\r\n    addClasses(...classes) {\r\n        this.data.classes.push(...classes);\r\n    }\r\n    addColors(colors) {\r\n        this.data.colors.push(...colors);\r\n    }\r\n    addPlaces(...places) {\r\n        this.data.places.push(...places);\r\n    }\r\n    addPlayerOrigins(...origins) {\r\n        this.data.playerOrigins.push(...origins);\r\n    }\r\n    addRacialGroups(...groups) {\r\n        this.data.racialGroups.push(...groups);\r\n    }\r\n    addScenes(scenes) {\r\n        this.data.scenes.push(scenes);\r\n    }\r\n    addSkills(skills) {\r\n        this.data.skills.push(...skills);\r\n    }\r\n    addTiles(tiles) {\r\n        this.data.tiles.push(...tiles);\r\n    }\r\n    addTrait(trait) {\r\n        this.data.traits.push(trait);\r\n    }\r\n    addTraits(traits) {\r\n        this.data.traits.push(...traits);\r\n    }\r\n    mkTrait(id, name, desc) {\r\n        this.addTrait(new _engine_rules_TraitType__WEBPACK_IMPORTED_MODULE_5__.SimpleTraitType(id, name, desc));\r\n    }\r\n    buildPlace(def) {\r\n        this.addPlaces(_engine_place_Place__WEBPACK_IMPORTED_MODULE_1__.Place.build(def));\r\n    }\r\n    buildScenes(namespace, scenes) {\r\n        this.addScenes((0,_engine_scene_builder__WEBPACK_IMPORTED_MODULE_2__.buildScenes)(namespace, scenes));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/GameDataBuilder.ts?");

/***/ }),

/***/ "./src/game/chargen/ChargenController.ts":
/*!***********************************************!*\
  !*** ./src/game/chargen/ChargenController.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenController\": () => (/* binding */ ChargenController)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/objects/creature/PlayerCharacter */ \"./src/engine/objects/creature/PlayerCharacter.ts\");\n/* harmony import */ var _ChargenRules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChargenRules */ \"./src/game/chargen/ChargenRules.tsx\");\n/* harmony import */ var _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/rules/TAttribute */ \"./src/engine/rules/TAttribute.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _engine_rules_gender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/rules/gender */ \"./src/engine/rules/gender.ts\");\n/* harmony import */ var _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/objects/creature/Character */ \"./src/engine/objects/creature/Character.ts\");\n/* harmony import */ var _data_body_Breasts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/body/Breasts */ \"./src/game/data/body/Breasts.ts\");\n/* harmony import */ var _data_text_names__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/text/names */ \"./src/game/data/text/names.ts\");\n/* harmony import */ var _data_colors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/colors */ \"./src/game/data/colors.ts\");\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _data_stats__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../data/stats */ \"./src/game/data/stats.ts\");\n/* harmony import */ var _data_body_Penis__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../data/body/Penis */ \"./src/game/data/body/Penis.ts\");\n/* harmony import */ var _data_traits_starting__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../data/traits/starting */ \"./src/game/data/traits/starting.ts\");\n/*\r\n * Created by aimozg on 14.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ChargenController {\r\n    constructor(screen) {\r\n        this.screen = screen;\r\n        this.internalUpdate = false;\r\n        this.skills = {};\r\n        this.reset();\r\n    }\r\n    ///////////\r\n    // Rules //\r\n    ///////////\r\n    futanariAllowed() {\r\n        return this.origin === \"native\";\r\n    }\r\n    allowedRaces() {\r\n        // TODO list actual races from somewhere\r\n        return [{\r\n                label: \"Human\",\r\n                value: 'human'\r\n            }, {\r\n                label: 'Elf',\r\n                value: 'elf',\r\n                disabled: true\r\n            }, {\r\n                label: 'Half-cat',\r\n                value: 'half-cat',\r\n                disabled: true\r\n            }, {\r\n                label: 'Cat-morph',\r\n                value: 'beast-cat',\r\n                disabled: true\r\n            }, {\r\n                label: 'Half-wolf',\r\n                value: 'half-wolf',\r\n                disabled: true\r\n            }, {\r\n                label: 'Wolf-morph',\r\n                value: 'beast-wolf',\r\n                disabled: true\r\n            }, {\r\n                label: 'Half-fox',\r\n                value: 'half-fox',\r\n                disabled: true\r\n            }, {\r\n                label: 'Fox-morph',\r\n                value: 'beast-fox',\r\n                disabled: true\r\n            }];\r\n    }\r\n    allowedHairColors() {\r\n        // TODO race-dependent\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.colorsByNames(_data_colors__WEBPACK_IMPORTED_MODULE_8__.HumanHairColorNames, \"hair\");\r\n    }\r\n    allowedEyeColors() {\r\n        // TODO race-dependent\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.colorsByNames(_data_colors__WEBPACK_IMPORTED_MODULE_8__.HumanEyeColorNames, \"eyes\");\r\n    }\r\n    allowedSkinColors() {\r\n        // TODO race-dependent\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.colorsByNames(_data_colors__WEBPACK_IMPORTED_MODULE_8__.HumanSkinColorNames, \"skin\");\r\n    }\r\n    minBreastSize() {\r\n        return this.sex === 'm' ? _data_body_Breasts__WEBPACK_IMPORTED_MODULE_6__.BreastSizeTiers.FLAT.value : _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.breastsMinFemale;\r\n    }\r\n    maxBreastSize() {\r\n        return this.sex === 'm' ? _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.breastsMaxMale : _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.breastsMaxFemale;\r\n    }\r\n    allowedBreastSizes() {\r\n        let min = this.minBreastSize();\r\n        let max = this.maxBreastSize();\r\n        return _data_body_Breasts__WEBPACK_IMPORTED_MODULE_6__.BreastSizeTier.list().map(bst => ({\r\n            label: bst.name,\r\n            value: bst.value,\r\n            disabled: bst.value < min || bst.value > max\r\n        }));\r\n    }\r\n    minPenisSize() {\r\n        return this.body.penis.isPresent ? _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.penisMin : _data_body_Penis__WEBPACK_IMPORTED_MODULE_11__.PenisSizeTiers.NONE.value;\r\n    }\r\n    maxPenisSize() {\r\n        return this.body.penis.isPresent ? _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.penisMax : _data_body_Penis__WEBPACK_IMPORTED_MODULE_11__.PenisSizeTiers.NONE.value;\r\n    }\r\n    allowedPenisSizes() {\r\n        let min = this.minPenisSize();\r\n        let max = this.maxPenisSize();\r\n        return _data_body_Penis__WEBPACK_IMPORTED_MODULE_11__.PenisSizeTier.list().map(pst => ({\r\n            label: pst.name,\r\n            value: pst.value,\r\n            disabled: !this.body.penis.isPresent || pst.value < min || pst.value > max\r\n        }));\r\n    }\r\n    secondaryStats() {\r\n        return [{\r\n                key: \"lib\",\r\n                total: this.player.lib,\r\n                natural: this.player.naturalLib,\r\n                min: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.minLib,\r\n                max: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.maxLib,\r\n                meta: _data_stats__WEBPACK_IMPORTED_MODULE_10__.StatMetadata.lib\r\n            }, {\r\n                key: \"perv\",\r\n                total: this.player.perv,\r\n                natural: this.player.naturalPerv,\r\n                min: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.minPerv,\r\n                max: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.maxPerv,\r\n                meta: _data_stats__WEBPACK_IMPORTED_MODULE_10__.StatMetadata.perv\r\n            }, {\r\n                key: \"cor\",\r\n                total: this.player.cor,\r\n                natural: this.player.cor,\r\n                min: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.minCor,\r\n                max: _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.maxCor,\r\n                meta: _data_stats__WEBPACK_IMPORTED_MODULE_10__.StatMetadata.cor\r\n            }];\r\n    }\r\n    allowedSkills() {\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.skills.values().sortOn(\"name\");\r\n    }\r\n    skillMax(skill) {\r\n        // TODO affected by class\r\n        return _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.skillMax;\r\n    }\r\n    skillPointsTotal() {\r\n        return _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.skillPoints + Math.max(0, this.attrMod(_engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_2__.TAttribute.INT)) * _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.skillPointsPerIntMod;\r\n    }\r\n    getUpgradeableSkills() {\r\n        return this.allowedSkills().filter(skill => this.canIncSkill(skill));\r\n    }\r\n    allowedTraits(withNone = true) {\r\n        let list = _data_traits_starting__WEBPACK_IMPORTED_MODULE_12__.GdStartingTraits.ALL.map(t => ({\r\n            label: t.name(null),\r\n            value: t.resId\r\n        })).sortOn(\"label\");\r\n        if (withNone)\r\n            list.unshift({\r\n                label: \"(None)\",\r\n                value: null\r\n            });\r\n        return list;\r\n    }\r\n    /////////////\r\n    // Setters //\r\n    /////////////\r\n    setOrigin(originId) {\r\n        this.origin = originId;\r\n        this.internalUpdate = true;\r\n        if (this.sex === 'h' && !this.futanariAllowed()) {\r\n            this.setSex('f');\r\n        }\r\n        // TODO clear race if not allowed\r\n        this.internalUpdate = false;\r\n        this.update();\r\n    }\r\n    setName(name) {\r\n        this.name = name;\r\n        this.update();\r\n    }\r\n    setRandomName() {\r\n        this.name = (0,_data_text_names__WEBPACK_IMPORTED_MODULE_7__.randomName)((0,_engine_rules_gender__WEBPACK_IMPORTED_MODULE_4__.defaultGender)(this.sex));\r\n        this.update();\r\n    }\r\n    setSex(sex) {\r\n        this.sex = sex;\r\n        this.body.setSex(sex);\r\n        this.body.breasts.size = sex === 'm' ? _data_body_Breasts__WEBPACK_IMPORTED_MODULE_6__.BreastSizeTiers.FLAT.value : _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].nextInt(_ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.breastsMinFemale, _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.breastsMaxFemale + 1);\r\n        if (this.body.penis.isPresent) {\r\n            this.body.penis.size =\r\n                _data_body_Penis__WEBPACK_IMPORTED_MODULE_11__.PenisSizeTier.find(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].nextInt(_ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.penisMin, _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.penisMax + 1)).value;\r\n        }\r\n        this.body.height = 145 + (sex === 'm' ? _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].d6(2) : _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].d6(1)) * 5;\r\n        this.update();\r\n    }\r\n    setRace(race) {\r\n        this.race = race;\r\n        // TODO set body\r\n        this.update();\r\n    }\r\n    setClass(cclass) {\r\n        this.cclass = cclass;\r\n        this.update();\r\n    }\r\n    get classObject() {\r\n        if (!this.cclass)\r\n            return null;\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.classes.get(this.cclass);\r\n    }\r\n    setTrait(trait) {\r\n        this.trait = trait;\r\n        this.update();\r\n    }\r\n    get traitObject() {\r\n        if (!this.trait)\r\n            return null;\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.traits.get(this.trait);\r\n    }\r\n    ///////////////\r\n    // Internals //\r\n    ///////////////\r\n    reset() {\r\n        this.internalUpdate = true;\r\n        this.createEmptyPlayer();\r\n        this.updatePlayer();\r\n        this.internalUpdate = false;\r\n    }\r\n    createEmptyPlayer() {\r\n        this.body = new _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_5__.CharacterBody(null);\r\n        // Origin\r\n        this.origin = null;\r\n        // Identity\r\n        this.setSex(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].nextBoolean() ? 'm' : 'f');\r\n        this.setRandomName();\r\n        // Race\r\n        this.race = 'human';\r\n        // Appearance\r\n        this.body.hairColor1 = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(this.allowedHairColors());\r\n        this.body.eyes.color = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(this.allowedEyeColors());\r\n        this.body.skinColor1 = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(this.allowedSkinColors());\r\n        // Class\r\n        this.cclass = null;\r\n        // Attributes\r\n        this.attrs = Array(_engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_2__.TAttributes.length).fill(_ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.defaultAttr);\r\n        this.attrPoints = _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.attributePoints;\r\n        // Stats\r\n        this.lib = 0;\r\n        this.perv = 0;\r\n        this.cor = 0;\r\n        // Skills\r\n        this.skillPointsSpent = 0;\r\n        this.skills = {};\r\n        // Traits\r\n        this.trait = null;\r\n    }\r\n    /** Recreate player */\r\n    updatePlayer() {\r\n        // We recreate player from scratch on update to guard against possible exploits;\r\n        // alternatively, could keep same player and carefully revert when something edited in early steps\r\n        this.player = new _engine_objects_creature_PlayerCharacter__WEBPACK_IMPORTED_MODULE_0__.PlayerCharacter();\r\n        // Origin\r\n        if (this.origin)\r\n            this.player.originId = this.origin;\r\n        // Identity\r\n        this.player.name = this.name;\r\n        // Race\r\n        // TODO race\r\n        // Appearance\r\n        this.player.body.copyFrom(this.body);\r\n        // Class\r\n        // TODO class\r\n        // Attributes\r\n        for (let i = 0; i < this.attrs.length; i++)\r\n            this.player.naturalAttrs[i] = this.attrs[i];\r\n        // Stats\r\n        this.player.naturalLib = this.lib;\r\n        this.player.naturalPerv = this.perv;\r\n        this.player.cor = this.cor;\r\n        // Skills\r\n        for (let [id, value] of Object.entries(this.skills)) {\r\n            this.player.naturalSkills[id] = value;\r\n        }\r\n        // Traits\r\n        if (this.traitObject)\r\n            this.player.addTrait(this.traitObject);\r\n        this.player.origin.adjustPlayer?.(this.player);\r\n    }\r\n    createRandomPlayer() {\r\n        this.internalUpdate = true;\r\n        this.createEmptyPlayer();\r\n        // Origin\r\n        this.origin = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(_engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.idata.playerOrigins).id;\r\n        // Identity\r\n        this.setSex(this.futanariAllowed() ? _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].either('m', 'f', 'h') : _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].either('m', 'f'));\r\n        this.setRandomName();\r\n        // Race\r\n        // TODO random race\r\n        // Appearance\r\n        // random appearance is generated in createEmptyPlayer() and setSex()\r\n        // Class\r\n        this.cclass = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(_engine_Game__WEBPACK_IMPORTED_MODULE_9__.Game.instance.data.classes.keys());\r\n        // Attributes\r\n        // TODO class-dependent attributes\r\n        while (this.attrPoints > 0) {\r\n            let attr = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(_engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_2__.TAttributes);\r\n            if (this.attrPoints >= this.attrCost(attr))\r\n                this.attrInc(attr);\r\n        }\r\n        // Stats\r\n        // TODO class-dependent starting stats\r\n        // Skills\r\n        // TODO class-dependent starting skills\r\n        while (this.skillPointsSpent < this.skillPointsTotal()) {\r\n            let validSkills = this.getUpgradeableSkills();\r\n            if (validSkills.length === 0)\r\n                break;\r\n            this.skillInc(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(validSkills));\r\n        }\r\n        // Traits\r\n        // TODO class-dependent trait\r\n        this.trait = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pick(this.allowedTraits(false)).value;\r\n        // Finalize\r\n        this.updatePlayer();\r\n        this.internalUpdate = false;\r\n    }\r\n    update() {\r\n        if (this.internalUpdate)\r\n            return;\r\n        this.updatePlayer();\r\n        this.screen.update();\r\n    }\r\n    attrInc(id) {\r\n        this.attrPoints -= this.attrCost(id);\r\n        this.attrs[id]++;\r\n        this.update();\r\n    }\r\n    attrDec(id) {\r\n        this.attrs[id]--;\r\n        this.attrPoints += this.attrCost(id);\r\n        this.update();\r\n    }\r\n    attrCost(id) {\r\n        let x = this.attrs[id];\r\n        // 1 at 8 and below, +1 for each 2\r\n        return Math.max(1, 1 + Math.floor((x - 8) / 2));\r\n    }\r\n    attrMod(id) {\r\n        return this.attrs[id] - 5;\r\n    }\r\n    canIncAttr(id) {\r\n        return this.attrs[id] < _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.maxAttr && this.attrPoints >= this.attrCost(id);\r\n    }\r\n    canDecAttr(id) {\r\n        return this.attrs[id] > _ChargenRules__WEBPACK_IMPORTED_MODULE_1__.ChargenRules.minAttr;\r\n    }\r\n    statInc(stat) {\r\n        this[stat.key]++;\r\n        this.update();\r\n    }\r\n    statDec(stat) {\r\n        this[stat.key]--;\r\n        this.update();\r\n    }\r\n    canIncStat(stat) {\r\n        return stat.natural < stat.max;\r\n    }\r\n    canDecStat(stat) {\r\n        return stat.natural > stat.min;\r\n    }\r\n    canIncSkill(skill) {\r\n        return (this.skills[skill.resId] ?? 0) < this.skillMax(skill);\r\n    }\r\n    canDecSkill(skill) {\r\n        return (this.skills[skill.resId] ?? 0) > 0;\r\n    }\r\n    skillNatural(skill) {\r\n        return this.skills[skill.resId] ?? 0;\r\n    }\r\n    skillTotal(skill) {\r\n        return (this.skills[skill.resId] ?? 0) + (skill.attr >= 0 ? this.attrMod(skill.attr) : 0);\r\n    }\r\n    skillInc(skill) {\r\n        this.skills[skill.resId] = (this.skills[skill.resId] ?? 0) + 1;\r\n        this.skillPointsSpent++;\r\n        this.update();\r\n    }\r\n    skillDec(skill) {\r\n        this.skills[skill.resId] = (this.skills[skill.resId] ?? 0) - 1;\r\n        this.skillPointsSpent--;\r\n        this.update();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenController.ts?");

/***/ }),

/***/ "./src/game/chargen/ChargenRules.tsx":
/*!*******************************************!*\
  !*** ./src/game/chargen/ChargenRules.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenRules\": () => (/* binding */ ChargenRules)\n/* harmony export */ });\n/* harmony import */ var _data_body_Breasts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/body/Breasts */ \"./src/game/data/body/Breasts.ts\");\n/* harmony import */ var _data_body_Penis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/body/Penis */ \"./src/game/data/body/Penis.ts\");\n\r\n\r\nconst ChargenRules = {\r\n    minAttr: 2,\r\n    maxAttr: 15,\r\n    defaultAttr: 5,\r\n    attributePoints: 8,\r\n    minLib: -20,\r\n    maxLib: 20,\r\n    minPerv: 0,\r\n    maxPerv: 20,\r\n    minCor: 0,\r\n    maxCor: 10,\r\n    skillPoints: 4,\r\n    skillPointsPerIntMod: 1,\r\n    skillMax: 4,\r\n    breastsMaxMale: _data_body_Breasts__WEBPACK_IMPORTED_MODULE_0__.BreastSizeTiers.FLAT.value,\r\n    breastsMinFemale: _data_body_Breasts__WEBPACK_IMPORTED_MODULE_0__.BreastSizeTiers.FLAT.value,\r\n    breastsMaxFemale: _data_body_Breasts__WEBPACK_IMPORTED_MODULE_0__.BreastSizeTiers.H_CUP.value,\r\n    penisMin: _data_body_Penis__WEBPACK_IMPORTED_MODULE_1__.PenisSizeTiers.T1_VERY_SMALL.min,\r\n    penisMax: _data_body_Penis__WEBPACK_IMPORTED_MODULE_1__.PenisSizeTiers.T6_VERY_BIG.max,\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenRules.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStep.tsx":
/*!******************************************!*\
  !*** ./src/game/chargen/ChargenStep.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStep\": () => (/* binding */ ChargenStep)\n/* harmony export */ });\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n\r\nclass ChargenStep {\r\n    constructor(cc) {\r\n        this.cc = cc;\r\n        this.unlocked = false;\r\n    }\r\n    get player() { return this.cc.player; }\r\n    get game() {\r\n        return _engine_Game__WEBPACK_IMPORTED_MODULE_0__.Game.instance;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStep.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepAppearance.tsx":
/*!****************************************************!*\
  !*** ./src/game/chargen/ChargenStepAppearance.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepAppearance\": () => (/* binding */ ChargenStepAppearance)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_text_parser_Parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/text/parser/Parser */ \"./src/engine/text/parser/Parser.ts\");\n/* harmony import */ var _data_text_Appearance__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/text/Appearance */ \"./src/game/data/text/Appearance.tsx\");\n/* harmony import */ var _engine_ui_components_ListColorPicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/ui/components/ListColorPicker */ \"./src/engine/ui/components/ListColorPicker.tsx\");\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var _data_body_Hair__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/body/Hair */ \"./src/game/data/body/Hair.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepAppearance extends _ChargenStep__WEBPACK_IMPORTED_MODULE_1__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Appearance\";\r\n    }\r\n    complete() {\r\n        return true;\r\n    }\r\n    setHairColor(color) {\r\n        this.cc.body.hairColor1 = color;\r\n        this.cc.update();\r\n    }\r\n    setSkinColor(color) {\r\n        this.cc.body.skinColor1 = color;\r\n        this.cc.update();\r\n    }\r\n    setEyeColor(color) {\r\n        this.cc.body.eyes.color = color;\r\n        this.cc.update();\r\n    }\r\n    setHairLength(length) {\r\n        this.cc.body.hair.length = length;\r\n        this.cc.update();\r\n    }\r\n    setBreastSize(size) {\r\n        this.cc.body.breasts.size = size;\r\n        this.cc.update();\r\n    }\r\n    setPenisSize(size) {\r\n        this.cc.body.penis.size = size;\r\n        this.cc.update();\r\n    }\r\n    setHeight(value) {\r\n        if (!isFinite(value))\r\n            return;\r\n        this.cc.body.height = value;\r\n        this.cc.update();\r\n    }\r\n    node() {\r\n        let parser = new _engine_text_parser_Parser__WEBPACK_IMPORTED_MODULE_2__.Parser(this.player);\r\n        let body = this.player.body;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", null, \"Appearance\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"grid-12 gap-2\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-7 vscroll\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Height\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"input\", { type: \"number\", step: \"5\", value: body.height, min: \"120\", max: \"210\", class: \"ml-1\", onInput: event => this.setHeight(+event.target.value) }),\r\n                        \"cm\"),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Hair length\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"d-flex flex-wrap gap-1\" },\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_5__.ButtonMenu, { items: _data_body_Hair__WEBPACK_IMPORTED_MODULE_6__.HairLengthTier.list().map(hlt => ({ label: hlt.reach, value: hlt.value })), onChange: length => this.setHairLength(length), selected: body.hair.length })),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Hair color\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ListColorPicker__WEBPACK_IMPORTED_MODULE_4__.ListColorPicker, { colors: this.cc.allowedHairColors(), startValue: body.hairColor1, onChange: color => this.setHairColor(color) })),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Eye color\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ListColorPicker__WEBPACK_IMPORTED_MODULE_4__.ListColorPicker, { colors: this.cc.allowedEyeColors(), startValue: body.eyes.color, onChange: color => this.setEyeColor(color) })),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Skin color\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ListColorPicker__WEBPACK_IMPORTED_MODULE_4__.ListColorPicker, { colors: this.cc.allowedSkinColors(), startValue: body.skinColor1, onChange: color => this.setSkinColor(color) })),\r\n                    this.cc.maxBreastSize() > this.cc.minBreastSize() && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Breast size\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"d-flex flex-wrap gap-1\" },\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_5__.ButtonMenu, { items: this.cc.allowedBreastSizes(), onChange: size => this.setBreastSize(size), selected: body.breasts.size }))),\r\n                    this.cc.body.penis.isPresent && (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"label\", null, \"Penis size\"),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"d-flex flex-wrap gap-1\" },\r\n                            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_5__.ButtonMenu, { items: this.cc.allowedPenisSizes(), onChange: size => this.setPenisSize(size), selected: body.penis.size })))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { className: \"cols-5\" }, _data_text_Appearance__WEBPACK_IMPORTED_MODULE_3__.Appearance.characterAppearance(this.player, parser))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepAppearance.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepAttrs.tsx":
/*!***********************************************!*\
  !*** ./src/game/chargen/ChargenStepAttrs.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepAttrs\": () => (/* binding */ ChargenStepAttrs)\n/* harmony export */ });\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _data_stats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/stats */ \"./src/game/data/stats.ts\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n/*\r\n * Created by aimozg on 04.08.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepAttrs extends _ChargenStep__WEBPACK_IMPORTED_MODULE_0__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Attributes\";\r\n    }\r\n    complete() {\r\n        return this.cc.attrPoints === 0;\r\n    }\r\n    getAttrValueName(attr) {\r\n        // TODO move somewhere else\r\n        let x = this.player.attr(attr);\r\n        switch (x) {\r\n            case 0:\r\n                return \"Non-existant\";\r\n            case 1:\r\n                return \"Trash\";\r\n            case 2:\r\n                return \"Terrible\";\r\n            case 3:\r\n                return \"Bad\";\r\n            case 4:\r\n                return \"Poor\";\r\n            case 5:\r\n                return \"Average\";\r\n            case 6:\r\n                return \"Decent\";\r\n            case 7:\r\n                return \"Good\";\r\n            case 8:\r\n                return \"Great\";\r\n            case 9:\r\n                return \"Excellent\";\r\n            case 10:\r\n                return \"Superb\";\r\n            default:\r\n                return \"Superb\";\r\n        }\r\n    }\r\n    explainStat(meta) {\r\n        let skills = _engine_Game__WEBPACK_IMPORTED_MODULE_5__.Game.instance.data.skills.values().filter(skill => skill.attr === meta.id);\r\n        let s = meta.explain(this.player.attrMod(meta.id), this.player.attr(meta.id), this.player);\r\n        if (skills.length > 0) {\r\n            s += \" \" + this.player.attrMod(meta.id).signed() + \" to \" + skills.map(skill => skill.name).join(\", \") + \".\";\r\n        }\r\n        return s;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-grid ai-start gap-2\", style: \"grid-template-columns: repeat(5, max-content) 1fr\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", { class: \"cols-6\" }, \"Attributes\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"text-center\" }, \"Name\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"cols-3 text-center\" }, \"Value\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"text-center\" }, \"Description\"),\r\n            _data_stats__WEBPACK_IMPORTED_MODULE_3__.AttrMetadata.map(meta => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, meta.name),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { disabled: !this.cc.canDecAttr(meta.id), hold: true, onClick: () => this.cc.attrDec(meta.id), label: \"-\" }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: \"min-width:2rem\", class: \"text-center\" }, this.player.attr(meta.id)),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { disabled: !this.cc.canIncAttr(meta.id), hold: true, onClick: () => this.cc.attrInc(meta.id), label: \"+\" }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"mx-2\" }, this.getAttrValueName(meta.id)),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_4__.Parse, null,\r\n                        meta.description,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"br\", null),\r\n                        this.explainStat(meta))))),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-6\" },\r\n                \"You have \",\r\n                this.cc.attrPoints,\r\n                \" points to allocate. You get +1 to the attribute of your choice every 4 levels.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", { className: \"cols-6\" }, \"Derived stats\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Fortitude\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.fortitude),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Fortitude saving throw. Fortitude threats include poisons and diseases.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Reflex\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.reflex),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Reflex saving throw. Reflex threats include traps and projectiles.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Will\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.willpower),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Will saving throw. Will threats include seduction and mind control.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Max Health\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.hpMax),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Your character is knocked out when it reaches zero.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Max Energy\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.epMax),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Universal resource for special abilities.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, \"Max Lust\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.player.lpMax),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Having high Lust imposes a stat penalty and Seduction vulnerability.\"));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepAttrs.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepClass.tsx":
/*!***********************************************!*\
  !*** ./src/game/chargen/ChargenStepClass.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepClass\": () => (/* binding */ ChargenStepClass)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n\r\n\r\n\r\n\r\nclass ChargenStepClass extends _ChargenStep__WEBPACK_IMPORTED_MODULE_1__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Class\";\r\n        this.items = this.game.data.classes.values().map(cls => ({\r\n            label: cls.name.capitalize(),\r\n            value: cls.resId,\r\n            className: cls.isStartingClass ? '' : '-shadowed'\r\n        }));\r\n    }\r\n    complete() {\r\n        return !!this.cc.cclass && this.game.data.class(this.cc.cclass).isStartingClass;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", null, \"Class\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null, \"Picking a class unlocks traits, skills, and abilities. Every 6th level you can advance your class or pick another.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"grid-12\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-3 d-flex gap-2 flex-column ai-stretch mr-4\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_2__.ButtonMenu, { items: this.items, className: \"-big\", selected: this.cc.cclass, onChange: x => this.cc.setClass(x) })),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-9\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, null, this.cc.classObject?.description))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepClass.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepFinalize.tsx":
/*!**************************************************!*\
  !*** ./src/game/chargen/ChargenStepFinalize.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepFinalize\": () => (/* binding */ ChargenStepFinalize)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_text_parser_Parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/text/parser/Parser */ \"./src/engine/text/parser/Parser.ts\");\n/* harmony import */ var _data_text_Appearance__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/text/Appearance */ \"./src/game/data/text/Appearance.tsx\");\n/* harmony import */ var _ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/CreaturePanel */ \"./src/game/ui/CreaturePanel.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepFinalize extends _ChargenStep__WEBPACK_IMPORTED_MODULE_1__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Finalize\";\r\n        this.panel = new _ui_CreaturePanel__WEBPACK_IMPORTED_MODULE_4__.CreaturePanel(null, { collapsible: false });\r\n    }\r\n    complete() {\r\n        return false;\r\n    }\r\n    node() {\r\n        let pc = this.player;\r\n        let parser = new _engine_text_parser_Parser__WEBPACK_IMPORTED_MODULE_2__.Parser(pc);\r\n        this.panel.creature = pc;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", null, \"Review\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"grid-12 gap-4 text-justify\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-6\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null,\r\n                        \"You will play as \",\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", null,\r\n                            pc.origin.shortDesc,\r\n                            \", \",\r\n                            pc.name,\r\n                            \" the \",\r\n                            pc.txt.sex,\r\n                            \" \",\r\n                            this.cc.race,\r\n                            \" \",\r\n                            this.cc.classObject.name.capitalize(),\r\n                            \".\")),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h5\", null, \"Traits\"),\r\n                    pc.traits.size === 0 && \"(No strating traits)\",\r\n                    pc.traitList().map(t => (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", null, t.name(pc)),\r\n                        \" \\u2013 \",\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_5__.Parse, null, t.description(pc)))),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h5\", null, \"Appearance\"),\r\n                    _data_text_Appearance__WEBPACK_IMPORTED_MODULE_3__.Appearance.characterAppearance(pc, parser)),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-6\" }, this.panel.astsx)));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepFinalize.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepIdentity.tsx":
/*!**************************************************!*\
  !*** ./src/game/chargen/ChargenStepIdentity.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepIdentity\": () => (/* binding */ ChargenStepIdentity)\n/* harmony export */ });\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_ui_components_TextInput__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/ui/components/TextInput */ \"./src/engine/ui/components/TextInput.tsx\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepIdentity extends _ChargenStep__WEBPACK_IMPORTED_MODULE_2__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Identity\";\r\n    }\r\n    complete() {\r\n        return this.player.sex != 'n' && !!this.player.name;\r\n    }\r\n    node() {\r\n        let items = [{\r\n                label: \"Male\",\r\n                value: 'm'\r\n            }, {\r\n                label: \"Female\",\r\n                value: 'f'\r\n            }, {\r\n                label: \"Futanari\",\r\n                value: 'h',\r\n                disabled: !this.cc.futanariAllowed()\r\n            }];\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, \"Identity\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null, \"What's your name?\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_TextInput__WEBPACK_IMPORTED_MODULE_3__.TextInput, { value: this.player.name, onChange: name => this.cc.setName(name) }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_4__.Button, { label: \"Random\", onClick: () => this.cc.setRandomName() })),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null, \"What is your starting sex?\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_0__.ButtonMenu, { items: items, selected: this.player.sex, onChange: sex => this.cc.setSex(sex) })));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepIdentity.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepOrigin.tsx":
/*!************************************************!*\
  !*** ./src/game/chargen/ChargenStepOrigin.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepOrigin\": () => (/* binding */ ChargenStepOrigin)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n\r\n\r\n\r\n\r\nclass ChargenStepOrigin extends _ChargenStep__WEBPACK_IMPORTED_MODULE_2__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Origin\";\r\n        this.items = this.game.idata.playerOrigins.map(o => ({\r\n            label: o.name,\r\n            value: o.id\r\n        }));\r\n    }\r\n    complete() {\r\n        return !!this.cc.origin;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", null, \"Origins\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null, \"Where do you come from?\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"grid-12\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-3 d-flex flex-column ai-stretch mr-4\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_1__.ButtonMenu, { items: this.items, className: \"-big\", selected: this.cc.origin, onChange: (o) => {\r\n                            this.cc.setOrigin(o);\r\n                        } })),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-9\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, null, this.game.idata.playerOrigins.find(o => o.id === this.cc.origin)?.description))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepOrigin.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepRace.tsx":
/*!**********************************************!*\
  !*** ./src/game/chargen/ChargenStepRace.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepRace\": () => (/* binding */ ChargenStepRace)\n/* harmony export */ });\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n\r\n\r\n\r\nclass ChargenStepRace extends _ChargenStep__WEBPACK_IMPORTED_MODULE_2__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Race\";\r\n    }\r\n    complete() {\r\n        return !!this.cc.race;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact__WEBPACK_IMPORTED_MODULE_1__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, \"Race\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null, \"What is your starting race?\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"grid-12\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-3 d-flex flex-column ai-stretch mr-4\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_0__.ButtonMenu, { items: this.cc.allowedRaces(), selected: this.cc.race, onChange: race => {\r\n                            this.cc.setRace(race);\r\n                        } })),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-9\" })));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepRace.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepSkills.tsx":
/*!************************************************!*\
  !*** ./src/game/chargen/ChargenStepSkills.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepSkills\": () => (/* binding */ ChargenStepSkills)\n/* harmony export */ });\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _data_stats__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/stats */ \"./src/game/data/stats.ts\");\n/* harmony import */ var _engine_utils_math__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/utils/math */ \"./src/engine/utils/math.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepSkills extends _ChargenStep__WEBPACK_IMPORTED_MODULE_0__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Skills\";\r\n    }\r\n    complete() {\r\n        return this.cc.skillPointsSpent === this.cc.skillPointsTotal() || this.cc.getUpgradeableSkills().length === 0;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"h3\", null, \"Skills\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: {\r\n                    \"grid-template-columns\": \"auto repeat(7, 1fr) auto\"\r\n                }, class: \"d-grid gap-2 ai-start\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"text-center\" }, \"Name\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"cols-3 text-center\" }, \"Natural\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"cols-2 text-center\" }, \"Bonus\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", null),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"text-center\" }, \"Total\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"b\", { class: \"text-center\" }, \"Description\"),\r\n                this.cc.allowedSkills().map(skill => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-hl\" }, skill.name),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { disabled: !this.cc.canDecSkill(skill), hold: true, onClick: () => this.cc.skillDec(skill), label: \"-\" }),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: \"min-width:2rem\", class: \"text-center\" }, this.cc.skillNatural(skill)),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__.Button, { disabled: !this.cc.canIncSkill(skill), hold: true, onClick: () => this.cc.skillInc(skill), label: \"+\" }),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, skill.attr >= 0 && _data_stats__WEBPACK_IMPORTED_MODULE_4__.AttrMetadata[skill.attr].abbr),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: skill.attr >= 0 ?\r\n                            (0,_engine_utils_math__WEBPACK_IMPORTED_MODULE_5__.signValue)(this.cc.attrMod(skill.attr), 'text-negative', '', 'text-positive') : '' }, skill.attr >= 0 && this.cc.attrMod(skill.attr).signed()),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, \"=\"),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"mx-2\" + (0,_engine_utils_math__WEBPACK_IMPORTED_MODULE_5__.signValue)(this.cc.skillTotal(skill) - this.cc.skillNatural(skill), ' text-negative', '', ' text-positive') }, this.cc.skillTotal(skill)),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, skill.description))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2\" }, \"Points:\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"text-center\" }, this.cc.skillPointsTotal() - this.cc.skillPointsSpent),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-6\" })),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null, \"You raise your skills by using them, and with level-up points. Your character level affects your maximum skill value.\"));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepSkills.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepStats.tsx":
/*!***********************************************!*\
  !*** ./src/game/chargen/ChargenStepStats.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepStats\": () => (/* binding */ ChargenStepStats)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n/* harmony import */ var _engine_utils_math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/utils/math */ \"./src/engine/utils/math.ts\");\n\r\n\r\n\r\n\r\n\r\nclass ChargenStepStats extends _ChargenStep__WEBPACK_IMPORTED_MODULE_2__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Stats\";\r\n    }\r\n    complete() {\r\n        return true;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"d-grid gap-2\", style: \"grid-template-columns: repeat(6, max-content) 1fr\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", { class: \"cols-7\" }, \"Secondary stats\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", { className: \"text-center\" }, \"Name\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", { className: \"cols-3 text-center\" }, \"Natural\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", null),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", { className: \"text-center\" }, \"Total\"),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"b\", { className: \"text-center\" }, \"Description\"),\r\n                this.cc.secondaryStats().map(ss => (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"text-hl\" }, ss.meta.name),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !this.cc.canDecStat(ss), hold: true, onClick: () => this.cc.statDec(ss), label: \"-\" }),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { style: \"min-width:2rem\", className: \"text-center\" },\r\n                        \"(\",\r\n                        ss.natural,\r\n                        \")\"),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !this.cc.canIncStat(ss), hold: true, onClick: () => this.cc.statInc(ss), label: \"+\" }),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", null, \"=\"),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { style: \"min-width:2rem\", class: \"text-center mx-2\" + (0,_engine_utils_math__WEBPACK_IMPORTED_MODULE_4__.signValue)(ss.total - ss.natural, ' text-negative', '', ' text-positive') },\r\n                        ss.total >= 0 ? '\\xA0' : '',\r\n                        ss.total),\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, null, ss.meta.explain(ss.total, this.player))))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-7\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"i\", null, \"These stats are not beneficial, you can leave them unchanged.\"))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepStats.tsx?");

/***/ }),

/***/ "./src/game/chargen/ChargenStepTraits.tsx":
/*!************************************************!*\
  !*** ./src/game/chargen/ChargenStepTraits.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ChargenStepTraits\": () => (/* binding */ ChargenStepTraits)\n/* harmony export */ });\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _ChargenStep__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChargenStep */ \"./src/game/chargen/ChargenStep.tsx\");\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n\r\n\r\n\r\n\r\nclass ChargenStepTraits extends _ChargenStep__WEBPACK_IMPORTED_MODULE_1__.ChargenStep {\r\n    constructor(cc) {\r\n        super(cc);\r\n        this.label = \"Traits\";\r\n    }\r\n    complete() {\r\n        return true;\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(preact__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"h3\", null, \"Traits\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"p\", null, \"Pick your strating trait.\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"grid-12\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-3 d-flex flex-column ai-stretch mr-4\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_2__.ButtonMenu, { items: this.cc.allowedTraits(), onChange: x => this.cc.setTrait(x), selected: this.cc.trait })),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(\"div\", { class: \"cols-9\" },\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_0__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, null, this.cc.traitObject?.description(this.player)))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/chargen/ChargenStepTraits.tsx?");

/***/ }),

/***/ "./src/game/combat/CombatRules.ts":
/*!****************************************!*\
  !*** ./src/game/combat/CombatRules.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CombatRules\": () => (/* binding */ CombatRules)\n/* harmony export */ });\n/* harmony import */ var _engine_combat_actions_MeleeAttackAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/combat/actions/MeleeAttackAction */ \"./src/engine/combat/actions/MeleeAttackAction.tsx\");\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _engine_combat_actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/combat/actions/SkipCombatAction */ \"./src/engine/combat/actions/SkipCombatAction.ts\");\n/* harmony import */ var _engine_math_Dice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/math/Dice */ \"./src/engine/math/Dice.ts\");\n/* harmony import */ var _engine_utils_gridutils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/utils/gridutils */ \"./src/engine/utils/gridutils.ts\");\n/* harmony import */ var _engine_combat_actions_StepAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/combat/actions/StepAction */ \"./src/engine/combat/actions/StepAction.ts\");\n/* harmony import */ var _engine_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/objects/creature/CoreConditions */ \"./src/engine/objects/creature/CoreConditions.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar CombatRules;\r\n(function (CombatRules) {\r\n    function postSetup() { }\r\n    CombatRules.postSetup = postSetup;\r\n    function meleeAttackApCost(roll) {\r\n        let cost = 1000;\r\n        cost *= speedApFactor(roll.actor.spe);\r\n        return Math.round(cost);\r\n    }\r\n    CombatRules.meleeAttackApCost = meleeAttackApCost;\r\n    function playerActions(player, cc) {\r\n        let actions = [];\r\n        actions.push(new _engine_combat_actions_SkipCombatAction__WEBPACK_IMPORTED_MODULE_2__.SkipCombatAction(player));\r\n        // TODO targets\r\n        actions.push(new _engine_combat_actions_MeleeAttackAction__WEBPACK_IMPORTED_MODULE_0__.MeleeAttackAction(player, cc.enemies[0]));\r\n        for (let dir of _engine_utils_gridutils__WEBPACK_IMPORTED_MODULE_4__.Direction.Steps) {\r\n            actions.push(new _engine_combat_actions_StepAction__WEBPACK_IMPORTED_MODULE_5__.StepAction(player, dir.add(player.gobj)));\r\n        }\r\n        // TODO tease\r\n        // TODO abilities\r\n        return actions;\r\n    }\r\n    CombatRules.playerActions = playerActions;\r\n    function repeatPositive(dice, n) {\r\n        if (n < 2 || dice.bonus >= 0)\r\n            return dice.repeat(n);\r\n        return new _engine_math_Dice__WEBPACK_IMPORTED_MODULE_3__.Dice(n * dice.rolls, dice.sides, dice.bonus);\r\n    }\r\n    CombatRules.repeatPositive = repeatPositive;\r\n    function rollDamage(spec, crit, critMultiplier) {\r\n        let rng = _engine_Game__WEBPACK_IMPORTED_MODULE_1__.Game.instance.rng;\r\n        return spec.map(d => ({\r\n            damage: Math.max(1, crit && d.canCrit ? repeatPositive(d.damage, critMultiplier).roll(rng) : d.damage.roll(rng)),\r\n            damageType: d.damageType\r\n        }));\r\n    }\r\n    CombatRules.rollDamage = rollDamage;\r\n    function speedApFactor(speed) {\r\n        return 20 / (15 + speed);\r\n    }\r\n    CombatRules.speedApFactor = speedApFactor;\r\n    function speedApFactorMove(speed) {\r\n        return 10 / (5 + speed);\r\n    }\r\n    CombatRules.speedApFactorMove = speedApFactorMove;\r\n    // TODO move to extension functions\r\n    /**\r\n     * Attack rating with current melee weapon\r\n     */\r\n    function meleeAttack(attacker) {\r\n        let value = attacker.strMod;\r\n        return value;\r\n    }\r\n    CombatRules.meleeAttack = meleeAttack;\r\n    function meleeAttackVs(attacker, target) {\r\n        // TODO target-dependent effects\r\n        return meleeAttack(attacker);\r\n    }\r\n    CombatRules.meleeAttackVs = meleeAttackVs;\r\n    function defenseNatural(creature) {\r\n        return 5;\r\n    }\r\n    CombatRules.defenseNatural = defenseNatural;\r\n    function defenseDodge(creature) {\r\n        let value = 0;\r\n        value += creature.dexMod;\r\n        return value;\r\n    }\r\n    CombatRules.defenseDodge = defenseDodge;\r\n    function defenseArmor(creature) {\r\n        return creature.bodyArmor?.asArmor?.defenseBonus ?? 0;\r\n    }\r\n    CombatRules.defenseArmor = defenseArmor;\r\n    function defense(creature) {\r\n        let value = defenseNatural(creature);\r\n        if (!creature.hasCondition(_engine_objects_creature_CoreConditions__WEBPACK_IMPORTED_MODULE_6__.CoreConditions.Unaware)) {\r\n            value += defenseDodge(creature);\r\n        }\r\n        value += defenseArmor(creature);\r\n        // TODO enchantments\r\n        return value;\r\n    }\r\n    CombatRules.defense = defense;\r\n    /**\r\n     * Melee defense rating\r\n     */\r\n    function meleeDefense(creature) {\r\n        return defense(creature);\r\n    }\r\n    CombatRules.meleeDefense = meleeDefense;\r\n    function meleeDefenseVs(creature, attacker) {\r\n        // TODO target-dependent effects\r\n        return meleeDefense(creature);\r\n    }\r\n    CombatRules.meleeDefenseVs = meleeDefenseVs;\r\n    function baseMeleeDamage(attacker) {\r\n        let weapon = attacker.meleeWeapon.asWeapon;\r\n        let primary = {\r\n            damage: weapon.damage,\r\n            damageType: weapon.damageType,\r\n            canCrit: true\r\n        };\r\n        primary.damage = primary.damage.withBonus(attacker.strMod);\r\n        // TODO enchantments\r\n        return [primary];\r\n    }\r\n    CombatRules.baseMeleeDamage = baseMeleeDamage;\r\n    function meleeDamageVs(attacker, target) {\r\n        // TODO target-dependent effects\r\n        return baseMeleeDamage(attacker);\r\n    }\r\n    CombatRules.meleeDamageVs = meleeDamageVs;\r\n    // TODO customize teases - diff parts, preferences, perversion, skills\r\n    function teaseAttackVs(attacker, target) {\r\n        return attacker.chaMod;\r\n    }\r\n    CombatRules.teaseAttackVs = teaseAttackVs;\r\n    function teaseDefenseVs(creature, attacker) {\r\n        return creature.willpower;\r\n    }\r\n    CombatRules.teaseDefenseVs = teaseDefenseVs;\r\n    function teaseDamageVs(attacker, target) {\r\n        return _engine_math_Dice__WEBPACK_IMPORTED_MODULE_3__.Dices.x1d10.withBonus(attacker.chaMod);\r\n    }\r\n    CombatRules.teaseDamageVs = teaseDamageVs;\r\n})(CombatRules || (CombatRules = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/combat/CombatRules.ts?");

/***/ }),

/***/ "./src/game/data/bodyParts.ts":
/*!************************************!*\
  !*** ./src/game/data/bodyParts.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterBodyParts\": () => (/* binding */ gdRegisterBodyParts)\n/* harmony export */ });\n/* harmony import */ var _body_Ears__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./body/Ears */ \"./src/game/data/body/Ears.ts\");\n/* harmony import */ var _body_Eyes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./body/Eyes */ \"./src/game/data/body/Eyes.ts\");\n/* harmony import */ var _body_Tail__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./body/Tail */ \"./src/game/data/body/Tail.ts\");\n/* harmony import */ var _body_Arms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./body/Arms */ \"./src/game/data/body/Arms.ts\");\n/* harmony import */ var _body_Materials__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./body/Materials */ \"./src/game/data/body/Materials.ts\");\n/* harmony import */ var _body_Legs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./body/Legs */ \"./src/game/data/body/Legs.ts\");\n/* harmony import */ var _body_Hair__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./body/Hair */ \"./src/game/data/body/Hair.ts\");\n/* harmony import */ var _body_Wings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./body/Wings */ \"./src/game/data/body/Wings.ts\");\n/* harmony import */ var _body_Horns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./body/Horns */ \"./src/game/data/body/Horns.ts\");\n/* harmony import */ var _body_Face__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./body/Face */ \"./src/game/data/body/Face.ts\");\n/* harmony import */ var _body_Breasts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./body/Breasts */ \"./src/game/data/body/Breasts.ts\");\n/* harmony import */ var _body_Penis__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./body/Penis */ \"./src/game/data/body/Penis.ts\");\n/* harmony import */ var _body_Vagina__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./body/Vagina */ \"./src/game/data/body/Vagina.ts\");\n/* harmony import */ var _body_Coat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./body/Coat */ \"./src/game/data/body/Coat.ts\");\n/* harmony import */ var _body_Skin__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./body/Skin */ \"./src/game/data/body/Skin.ts\");\n/*\r\n * Created by aimozg on 22.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction gdRegisterBodyParts(gd) {\r\n    gd.logger.debug(\"gdRegisterBodyParts\");\r\n    gd.addBodyPart(\"arms\", _body_Arms__WEBPACK_IMPORTED_MODULE_3__.ArmsRef);\r\n    gd.addBodyPart(\"breasts\", _body_Breasts__WEBPACK_IMPORTED_MODULE_10__.BreastsRef);\r\n    gd.addBodyPart(\"coat\", _body_Coat__WEBPACK_IMPORTED_MODULE_13__.CoatRef);\r\n    gd.addBodyPart(\"ears\", _body_Ears__WEBPACK_IMPORTED_MODULE_0__.EarsRef);\r\n    gd.addBodyPart(\"eyes\", _body_Eyes__WEBPACK_IMPORTED_MODULE_1__.EyesRef);\r\n    gd.addBodyPart(\"face\", _body_Face__WEBPACK_IMPORTED_MODULE_9__.FaceRef);\r\n    gd.addBodyPart(\"hair\", _body_Hair__WEBPACK_IMPORTED_MODULE_6__.HairRef);\r\n    gd.addBodyPart(\"horns\", _body_Horns__WEBPACK_IMPORTED_MODULE_8__.HornsRef);\r\n    gd.addBodyPart(\"legs\", _body_Legs__WEBPACK_IMPORTED_MODULE_5__.LegsRef);\r\n    gd.addBodyPart(\"penis\", _body_Penis__WEBPACK_IMPORTED_MODULE_11__.PenisRef);\r\n    gd.addBodyPart(\"skin\", _body_Skin__WEBPACK_IMPORTED_MODULE_14__.SkinRef);\r\n    gd.addBodyPart(\"tail\", _body_Tail__WEBPACK_IMPORTED_MODULE_2__.TailRef);\r\n    gd.addBodyPart(\"vagina\", _body_Vagina__WEBPACK_IMPORTED_MODULE_12__.VaginaRef);\r\n    gd.addBodyPart(\"wings\", _body_Wings__WEBPACK_IMPORTED_MODULE_7__.WingsRef);\r\n    gd.addBodyMaterial(\"bmSkin\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.SKIN);\r\n    gd.addBodyMaterial(\"bmHair\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.HAIR);\r\n    gd.addBodyMaterial(\"bmFur\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.FUR);\r\n    gd.addBodyMaterial(\"bmScales\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.SCALES);\r\n    gd.addBodyMaterial(\"bmChitin\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.CHITIN);\r\n    gd.addBodyMaterial(\"bmFeathers\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.FEATHERS);\r\n    gd.addBodyMaterialColor(\"skinColor1\", \"skinColor2\", \"skinColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.SKIN);\r\n    gd.addBodyMaterialColor(\"hairColor1\", \"hairColor2\", \"hairColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.HAIR);\r\n    gd.addBodyMaterialColor(\"furColor1\", \"furColor2\", \"furColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.FUR);\r\n    gd.addBodyMaterialColor(\"scaleColor1\", \"scaleColor2\", \"scaleColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.SCALES);\r\n    gd.addBodyMaterialColor(\"chitinColor1\", \"chitinColor2\", \"chitinColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.CHITIN);\r\n    gd.addBodyMaterialColor(\"featherColor1\", \"featherColor2\", \"featherColors\", _body_Materials__WEBPACK_IMPORTED_MODULE_4__.BodyMaterialTypes.FEATHERS);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/bodyParts.ts?");

/***/ }),

/***/ "./src/game/data/body/Arms.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Arms.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArmPart\": () => (/* binding */ ArmPart),\n/* harmony export */   \"ArmType\": () => (/* binding */ ArmType),\n/* harmony export */   \"ArmTypes\": () => (/* binding */ ArmTypes),\n/* harmony export */   \"ArmsRef\": () => (/* binding */ ArmsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 01.08.2022.\r\n */\r\n\r\n\r\n\r\nclass ArmType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(ArmsRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.SKIN]);\r\n        this.texts = Object.assign({}, _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.DefaultBodyPartTexts, {\r\n            noun1: \"arm\",\r\n            noun2: \"arms\",\r\n            fingerNoun1: \"finger\",\r\n            fingerNoun2: \"fingers\",\r\n            fingerAdj: [\"\"],\r\n            descriptionPattern: \"{count} {longName} [either:with|ending with] {fingerAdj} {fingerNoun2}\"\r\n        });\r\n        this.count = this.isPresent ? 2 : 0;\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'fingerNoun1')\r\n            return this.texts.fingerNoun1;\r\n        if (s === 'fingerNoun2')\r\n            return this.texts.fingerNoun2;\r\n        if (s === 'fingerAdj')\r\n            return _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(this.texts.fingerAdj);\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass ArmPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return ArmsRef; }\r\n    typeNone() { return ArmTypes.NONE; }\r\n    typeHuman() { return ArmTypes.HUMAN; }\r\n}\r\nconst ArmsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/arms\"); }\r\n    create(body) {\r\n        return new ArmPart(body);\r\n    }\r\n};\r\nvar ArmTypes;\r\n(function (ArmTypes) {\r\n    ArmTypes.NONE = new class extends ArmType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no arm\";\r\n            this.texts.shortName2Pattern = \"no arms\";\r\n            this.texts.descriptionPattern = \"no arms\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    ArmTypes.HUMAN = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\", \"unremarkable\"];\r\n            this.texts.fingerAdj = [\"ordinary\", \"normal\", \"human\"];\r\n        }\r\n    };\r\n    ////////\r\n    ArmTypes.BUNNY = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"rabbit\", \"bunny\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.fingerAdj = [\"soft\", \"padded\", \"bunny\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    ArmTypes.CAT = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.fingerAdj = [\"soft\", \"padded\", \"cat\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    ArmTypes.DOG = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/dog\", \"dog\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.fingerAdj = [\"soft\", \"padded\", \"dog\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    ArmTypes.FOX = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.fingerAdj = [\"soft\", \"padded\", \"fox\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    ArmTypes.WOLF = new class extends ArmType {\r\n        constructor() {\r\n            super(\"/wolf\", \"wolf\");\r\n            this.texts.type = [\"wolf\", \"lupine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.fingerAdj = [\"soft\", \"padded\", \"wolf\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(ArmTypes || (ArmTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Arms.ts?");

/***/ }),

/***/ "./src/game/data/body/Breasts.ts":
/*!***************************************!*\
  !*** ./src/game/data/body/Breasts.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BreastPart\": () => (/* binding */ BreastPart),\n/* harmony export */   \"BreastSizeTier\": () => (/* binding */ BreastSizeTier),\n/* harmony export */   \"BreastSizeTiers\": () => (/* binding */ BreastSizeTiers),\n/* harmony export */   \"BreastType\": () => (/* binding */ BreastType),\n/* harmony export */   \"BreastTypes\": () => (/* binding */ BreastTypes),\n/* harmony export */   \"BreastsRef\": () => (/* binding */ BreastsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/*\r\n * Created by aimozg on 10.08.2022.\r\n */\r\n\r\n\r\n\r\nclass BreastType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(BreastsRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.noun1 = () => _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].either(\"breast\", \"tit\");\r\n        this.noun2 = () => _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].either(\"breasts\", \"tits\");\r\n        this.count = this.isPresent ? 2 : 0;\r\n        this.texts.noun1 = \"breast\";\r\n        this.texts.noun2 = \"breasts\";\r\n        this.texts.shortName1Pattern = \"{sizePrefix} {noun1}\";\r\n        this.texts.shortName2Pattern = \"{sizePrefix} {noun2}\";\r\n        this.texts.longName1Pattern = \"{count} {adj} {sizeFull} {suffix}\";\r\n        this.texts.longName2Pattern = \"{count} {adj} {sizeFull} {suffix}\";\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'count' && part.size === 0)\r\n            return '';\r\n        if (s === 'breasts')\r\n            return this.textReplacer('noun', part);\r\n        if (s === 'sizePrefixNoCup')\r\n            return BreastSizeTier.find(part.size).shortPrefixNoCup(part);\r\n        if (s === 'sizePrefix')\r\n            return BreastSizeTier.find(part.size).shortPrefix(part);\r\n        if (s === 'cup')\r\n            return BreastSizeTier.find(part.size).name;\r\n        if (s === 'sizeFull')\r\n            return BreastSizeTier.find(part.size).longDesc(part);\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass BreastPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n        this.size = 0;\r\n    }\r\n    ref() { return BreastsRef; }\r\n    typeNone() { return BreastTypes.NONE; }\r\n    typeHuman() { return BreastTypes.NORMAL; }\r\n}\r\nconst BreastsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/breasts\"); }\r\n    create(body) {\r\n        return new BreastPart(body);\r\n    }\r\n};\r\nclass BreastSizeTier {\r\n    constructor(options) {\r\n        this.value = options.value;\r\n        this.name = options.name ?? (options.cup + \"-cup\");\r\n        this.cup = options.cup;\r\n        this.shortPrefixes = options.shortPrefix;\r\n        this.longDescPatterns = options.longDesc ?? [\"{sizePrefixNoCup} {cup} {breasts}\"];\r\n        BreastSizeTier.All.set(this.value, this);\r\n        if ((BreastSizeTier.Max?.value ?? 0) < this.value)\r\n            BreastSizeTier.Max = this;\r\n    }\r\n    shortPrefix(breasts) {\r\n        if (this.cup && _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].nextBoolean())\r\n            return this.cup + \"-cup\";\r\n        return this.shortPrefixNoCup(breasts);\r\n    }\r\n    shortPrefixNoCup(breasts) {\r\n        return breasts.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.shortPrefixes));\r\n    }\r\n    longDesc(breasts) {\r\n        return breasts.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.longDescPatterns));\r\n    }\r\n    static find(value) {\r\n        if (BreastSizeTier.All.has(value))\r\n            return BreastSizeTier.All.get(value);\r\n        return BreastSizeTier.Max;\r\n    }\r\n    static list() {\r\n        return Array.from(BreastSizeTier.All.values()).sortOn(\"value\");\r\n    }\r\n}\r\nBreastSizeTier.All = new Map();\r\nvar BreastSizeTiers;\r\n(function (BreastSizeTiers) {\r\n    BreastSizeTiers.FLAT = new BreastSizeTier({\r\n        value: 0,\r\n        name: \"flat\",\r\n        cup: \"\",\r\n        shortPrefix: [\"flat\"],\r\n        longDesc: [\"flat chest\"]\r\n    });\r\n    BreastSizeTiers.A_CUP = new BreastSizeTier({\r\n        value: 1,\r\n        cup: \"A\",\r\n        shortPrefix: [\"tiny\", \"very small\"]\r\n    });\r\n    BreastSizeTiers.B_CUP = new BreastSizeTier({\r\n        value: 2,\r\n        cup: \"B\",\r\n        shortPrefix: [\"small\"]\r\n    });\r\n    BreastSizeTiers.C_CUP = new BreastSizeTier({\r\n        value: 3,\r\n        cup: \"C\",\r\n        shortPrefix: [\"nice\", \"average-sized\"]\r\n    });\r\n    BreastSizeTiers.D_CUP = new BreastSizeTier({\r\n        value: 4,\r\n        cup: \"D\",\r\n        shortPrefix: [\"large\", \"big\", \"hand-filling\", \"jiggly\"]\r\n    });\r\n    BreastSizeTiers.DD_CUP = new BreastSizeTier({\r\n        value: 5,\r\n        cup: \"DD\",\r\n        shortPrefix: [\"large\", \"big\", \"hand-filling\", \"jiggly\"]\r\n    });\r\n    BreastSizeTiers.E_CUP = new BreastSizeTier({\r\n        value: 6,\r\n        cup: \"E\",\r\n        shortPrefix: [\"sizeable\", \"hand-overflowing\", \"jiggly\", \"pillowy\"]\r\n    });\r\n    BreastSizeTiers.F_CUP = new BreastSizeTier({\r\n        value: 7,\r\n        cup: \"F\",\r\n        shortPrefix: [\"sizeable\", \"hand-overflowing\", \"jiggling\", \"pillowy\"]\r\n    });\r\n    BreastSizeTiers.G_CUP = new BreastSizeTier({\r\n        value: 8,\r\n        cup: \"F\",\r\n        shortPrefix: [\"sizeable\", \"huge\", \"jiggling\", \"pillowy\"]\r\n    });\r\n    BreastSizeTiers.H_CUP = new BreastSizeTier({\r\n        value: 8,\r\n        cup: \"H\",\r\n        shortPrefix: [\"massive\", \"huge\", \"jiggling\", \"pillowy\"]\r\n    });\r\n})(BreastSizeTiers || (BreastSizeTiers = {}));\r\nvar BreastTypes;\r\n(function (BreastTypes) {\r\n    BreastTypes.NONE = new class extends BreastType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no breast\";\r\n            this.texts.shortName2Pattern = \"no breasts\";\r\n            this.texts.descriptionPattern = \"no breasts\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    BreastTypes.NORMAL = new class extends BreastType {\r\n        constructor() {\r\n            super(\"/normal\", \"normal\");\r\n            this.texts.type = [\"normal\"];\r\n        }\r\n    };\r\n})(BreastTypes || (BreastTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Breasts.ts?");

/***/ }),

/***/ "./src/game/data/body/Coat.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Coat.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CoatPart\": () => (/* binding */ CoatPart),\n/* harmony export */   \"CoatRef\": () => (/* binding */ CoatRef),\n/* harmony export */   \"CoatType\": () => (/* binding */ CoatType),\n/* harmony export */   \"CoatTypes\": () => (/* binding */ CoatTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/*\r\n * Created by aimozg on 19.09.2022.\r\n */\r\n\r\nclass CoatType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(CoatRef, id, name);\r\n        this.materials = new Set();\r\n        this.texts.shortName1Pattern = \"{color} {noun1}\";\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n        this.texts.fullDescriptionPattern = \"[Your] body is covered by {description}.\";\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === \"color\")\r\n            return this.colors(part);\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass CoatPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return CoatRef; }\r\n    typeNone() { return CoatTypes.NONE; }\r\n    typeHuman() { return CoatTypes.NONE; }\r\n}\r\nconst CoatRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/coat\"); }\r\n    create(body) {\r\n        return new CoatPart(body);\r\n    }\r\n};\r\nvar CoatTypes;\r\n(function (CoatTypes) {\r\n    CoatTypes.NONE = new class extends CoatType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.noun1 = \"coat\";\r\n            this.texts.shortName1Pattern = \"no coat\";\r\n            this.texts.descriptionPattern = \"no coat\";\r\n            this.texts.fullDescriptionPattern = \"[Your] body is not covered by fur, scales, or any other coat. \";\r\n        }\r\n        colors(part) {\r\n            return \"no\";\r\n        }\r\n    };\r\n    CoatTypes.FUR = new class extends CoatType {\r\n        constructor() {\r\n            super(\"/fur\", \"fur\");\r\n            this.texts.noun1 = \"fur\";\r\n        }\r\n        colors(part) {\r\n            return part.body.furColors;\r\n        }\r\n    };\r\n})(CoatTypes || (CoatTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Coat.ts?");

/***/ }),

/***/ "./src/game/data/body/Ears.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Ears.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EarPart\": () => (/* binding */ EarPart),\n/* harmony export */   \"EarType\": () => (/* binding */ EarType),\n/* harmony export */   \"EarTypes\": () => (/* binding */ EarTypes),\n/* harmony export */   \"EarsRef\": () => (/* binding */ EarsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 22.07.2022.\r\n */\r\n\r\n\r\nclass EarType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(EarsRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.count = this.isPresent ? 2 : 0;\r\n        this.texts.noun1 = \"ear\";\r\n        this.texts.noun2 = \"ears\";\r\n    }\r\n}\r\nclass EarPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return EarsRef; }\r\n    typeNone() { return EarTypes.NONE; }\r\n    typeHuman() { return EarTypes.HUMAN; }\r\n}\r\nconst EarsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/ears\"); }\r\n    create(body) {\r\n        return new EarPart(body);\r\n    }\r\n};\r\nvar EarTypes;\r\n(function (EarTypes) {\r\n    EarTypes.NONE = new class extends EarType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.description = () => \"no ears\";\r\n            this.texts.noun1 = \"no ear\";\r\n            this.texts.noun2 = \"no ears\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    EarTypes.HUMAN = new class extends EarType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\", \"unremarkable\"];\r\n        }\r\n    };\r\n    ////////\r\n    EarTypes.BUNNY = new class extends EarType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"rabbit\", \"bunny\"];\r\n            this.texts.adj = [\"floppy\", \"long\", \"fuzzy\", \"furry\", \"long floppy\", \"long fuzzy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    EarTypes.CAT = new class extends EarType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"cute\", \"soft\", \"small\", \"fuzzy\", \"furry\", \"cute fuzzy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    EarTypes.COW = new class extends EarType {\r\n        constructor() {\r\n            super(\"/cow\", \"cow\");\r\n            this.texts.type = [\"cow\", \"bovine\"];\r\n            this.texts.adj = [\"fuzzy\", \"floppy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    EarTypes.DOG = new class extends EarType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"fuzzy\", \"soft\", \"furry\", \"floppy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    EarTypes.FOX = new class extends EarType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.adj = [\"cute\", \"soft\", \"fuzzy\", \"fluffy\", \"perky\", \"pointy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    EarTypes.WOLF = new class extends EarType {\r\n        constructor() {\r\n            super(\"/wolf\", \"wolf\");\r\n            this.texts.type = [\"wolf\", \"lupine\"];\r\n            this.texts.adj = [\"fuzzy\", \"soft\", \"furry\", \"pointy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(EarTypes || (EarTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Ears.ts?");

/***/ }),

/***/ "./src/game/data/body/Eyes.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Eyes.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EyePart\": () => (/* binding */ EyePart),\n/* harmony export */   \"EyeType\": () => (/* binding */ EyeType),\n/* harmony export */   \"EyeTypes\": () => (/* binding */ EyeTypes),\n/* harmony export */   \"EyesRef\": () => (/* binding */ EyesRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _engine_objects_Color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/objects/Color */ \"./src/engine/objects/Color.ts\");\n/*\r\n * Created by aimozg on 26.07.2022.\r\n */\r\n\r\n\r\nclass EyeType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(EyesRef, id, name);\r\n        this.materials = new Set();\r\n        this.count = this.isPresent ? 2 : 0;\r\n        this.texts.noun1 = \"eye\";\r\n        this.texts.noun2 = \"eyes\";\r\n        this.texts.shortName1Pattern = \"{color} {type} {noun1}\";\r\n        this.texts.shortName2Pattern = \"{color} {type} {noun2}\";\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === \"color\")\r\n            return part.color.name;\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass EyePart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n        this.color = _engine_objects_Color__WEBPACK_IMPORTED_MODULE_1__.Color.DEFAULT_WHITE;\r\n    }\r\n    ref() { return EyesRef; }\r\n    typeNone() { return EyeTypes.NONE; }\r\n    typeHuman() { return EyeTypes.HUMAN; }\r\n    copyFrom(other) {\r\n        super.copyFrom(other);\r\n        this.color = other.color;\r\n    }\r\n}\r\nconst EyesRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/eyes\"); }\r\n    create(body) {\r\n        return new EyePart(body);\r\n    }\r\n};\r\nvar EyeTypes;\r\n(function (EyeTypes) {\r\n    EyeTypes.NONE = new class extends EyeType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no eye\";\r\n            this.texts.shortName2Pattern = \"no eyes\";\r\n            this.texts.descriptionPattern = \"no eyes\";\r\n        }\r\n    };\r\n    EyeTypes.HUMAN = new class extends EyeType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\", \"unremarkable\"];\r\n        }\r\n    };\r\n    ////////\r\n    EyeTypes.BUNNY = new class extends EyeType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"rabbit\", \"bunny\"];\r\n        }\r\n    };\r\n    EyeTypes.CAT = new class extends EyeType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"beastial\", \"predatory\"];\r\n            this.texts.suffix = [\"\", \"with vertical-slit pupils\"];\r\n        }\r\n    };\r\n    EyeTypes.FOX = new class extends EyeType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.suffix = [\"beasital\", \"predatory\"];\r\n        }\r\n    };\r\n})(EyeTypes || (EyeTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Eyes.ts?");

/***/ }),

/***/ "./src/game/data/body/Face.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Face.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FacePart\": () => (/* binding */ FacePart),\n/* harmony export */   \"FaceRef\": () => (/* binding */ FaceRef),\n/* harmony export */   \"FaceType\": () => (/* binding */ FaceType),\n/* harmony export */   \"FaceTypes\": () => (/* binding */ FaceTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 10.08.2022.\r\n */\r\n\r\n\r\n// TODO face part flags: hasMuzzle, isHumanLike\r\nclass FaceType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(FaceRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.texts.noun1 = \"face\";\r\n        this.texts.noun2 = \"faces\";\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n    }\r\n}\r\nclass FacePart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return FaceRef; }\r\n    typeNone() { return FaceTypes.NONE; }\r\n    typeHuman() { return FaceTypes.HUMAN; }\r\n}\r\nconst FaceRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() {\r\n        super(\"/face\");\r\n    }\r\n    create(body) {\r\n        return new FacePart(body);\r\n    }\r\n};\r\nvar FaceTypes;\r\n(function (FaceTypes) {\r\n    FaceTypes.NONE = new class extends FaceType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no face\";\r\n            this.texts.shortName2Pattern = \"no faces\";\r\n            this.texts.descriptionPattern = \"no face\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    FaceTypes.HUMAN = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\"];\r\n        }\r\n    };\r\n    ////////\r\n    FaceTypes.BUNNY = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"bunny\", \"rabbit\"];\r\n            this.texts.adj = [\"fur-covered\", \"fuzzy\"];\r\n            this.texts.suffix = [\"with short muzzle\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    FaceTypes.CAT = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"fur-covered\", \"fuzzy\"];\r\n            this.texts.suffix = [\"with short muzzle\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    FaceTypes.DOG = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/dog\", \"dog\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"fur-covered\", \"fuzzy\"];\r\n            this.texts.suffix = [\"with long muzzle\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    FaceTypes.FOX = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.adj = [\"fur-covered\", \"fuzzy\"];\r\n            this.texts.suffix = [\"with long muzzle\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    FaceTypes.WOLF = new class extends FaceType {\r\n        constructor() {\r\n            super(\"/wolf\", \"wolf\");\r\n            this.texts.type = [\"wolf\", \"lupine\"];\r\n            this.texts.adj = [\"fur-covered\", \"fuzzy\"];\r\n            this.texts.suffix = [\"with long muzzle\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(FaceTypes || (FaceTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Face.ts?");

/***/ }),

/***/ "./src/game/data/body/Hair.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Hair.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HairLengthTier\": () => (/* binding */ HairLengthTier),\n/* harmony export */   \"HairLengthTiers\": () => (/* binding */ HairLengthTiers),\n/* harmony export */   \"HairPart\": () => (/* binding */ HairPart),\n/* harmony export */   \"HairRef\": () => (/* binding */ HairRef),\n/* harmony export */   \"HairType\": () => (/* binding */ HairType),\n/* harmony export */   \"HairTypes\": () => (/* binding */ HairTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/*\r\n * Created by aimozg on 07.08.2022.\r\n */\r\n\r\n\r\n\r\nclass HairType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(HairRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.HAIR]);\r\n        this.texts.noun1 = \"hair\";\r\n        this.texts.noun2 = \"hairs\";\r\n        this.texts.shortName1Pattern = \"{lengthPrefix} {color} {noun1}\";\r\n        this.texts.longName1Pattern = \"{adj} {lengthFull} {suffix}\";\r\n        this.texts.descriptionPattern = \"{longName1}\";\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'hair')\r\n            return this.formatPattern(\"{color} {type} {noun1}\", part);\r\n        if (s === 'lengthPrefix')\r\n            return HairLengthTier.find(part.size).shortPrefix(part);\r\n        if (s === 'lengthFull')\r\n            return HairLengthTier.find(part.size).longDesc(part);\r\n        if (s === 'color')\r\n            return part.body.hairColors;\r\n        if (s === 'color1')\r\n            return part.body.hairColor1.name;\r\n        if (s === 'color2')\r\n            return part.body.hairColor2.name;\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass HairPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return HairRef; }\r\n    typeNone() { return HairTypes.NONE; }\r\n    typeHuman() { return HairTypes.NORMAL; }\r\n    get isPresent() {\r\n        return this.size > 0 && super.isPresent;\r\n    }\r\n    get length() { return this.size; }\r\n    set length(value) { this.size = value; }\r\n}\r\nconst HairRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/hair\"); }\r\n    create(body) {\r\n        return new HairPart(body);\r\n    }\r\n};\r\nclass HairLengthTier {\r\n    constructor(options) {\r\n        this.value = options.value;\r\n        this.name = options.name;\r\n        this.reach = options.reach;\r\n        this.shortPrefixes = options.shortPrefix;\r\n        this.longDescPatterns = options.longDesc;\r\n        HairLengthTier.All.set(this.value, this);\r\n        if ((HairLengthTier.Max?.value ?? 0) < this.value)\r\n            HairLengthTier.Max = this;\r\n    }\r\n    shortPrefix(hair) {\r\n        return hair.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.shortPrefixes));\r\n    }\r\n    longDesc(hair) {\r\n        return hair.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.longDescPatterns));\r\n    }\r\n    static find(value) {\r\n        if (HairLengthTier.All.has(value))\r\n            return HairLengthTier.All.get(value);\r\n        return HairLengthTier.Max;\r\n    }\r\n    static list() {\r\n        return Array.from(HairLengthTier.All.values()).sortOn(\"value\");\r\n    }\r\n}\r\nHairLengthTier.All = new Map();\r\nvar HairLengthTiers;\r\n(function (HairLengthTiers) {\r\n    HairLengthTiers.T0_BALD = new HairLengthTier({\r\n        value: 0,\r\n        name: \"bald\",\r\n        reach: \"bald\",\r\n        shortPrefix: [\"no\"],\r\n        longDesc: [\"bald head\", \"no hair\"]\r\n    });\r\n    /** Very short */\r\n    HairLengthTiers.T1_VERY_SHORT = new HairLengthTier({\r\n        value: 1,\r\n        name: \"very short\",\r\n        reach: \"very short\",\r\n        shortPrefix: [\"very short\"],\r\n        longDesc: [\"very short {hair}\"]\r\n    });\r\n    /** Ear-length */\r\n    HairLengthTiers.T2_SHORT = new HairLengthTier({\r\n        value: 2,\r\n        name: \"short\",\r\n        reach: \"ear\",\r\n        shortPrefix: [\"short\"],\r\n        longDesc: [\"short {hair}\"]\r\n    });\r\n    /** Chin-length (average masculine)  */\r\n    HairLengthTiers.T3_BELOW_AVERAGE = new HairLengthTier({\r\n        value: 3,\r\n        name: \"average\",\r\n        reach: \"chin\",\r\n        shortPrefix: [\"average length\", \"chin-length\"],\r\n        longDesc: [\"{hair} reaching your chin\", \"chin-length {hair}\"]\r\n    });\r\n    /** Shoulder-length (average feminine) */\r\n    HairLengthTiers.T4_ABOVE_AVERAGE = new HairLengthTier({\r\n        value: 4,\r\n        name: \"shoulder-length\",\r\n        reach: \"shoulder\",\r\n        shortPrefix: [\"somewhat long\", \"shoulder-length\"],\r\n        longDesc: [\"{hair} reaching your shoulders\", \"shoulder-length {hair}\"]\r\n    });\r\n    /** Reaches chest/middle of back */\r\n    HairLengthTiers.T5_LONG = new HairLengthTier({\r\n        value: 5,\r\n        name: \"long\",\r\n        reach: \"chest\",\r\n        shortPrefix: [\"long\", \"chest-long\"],\r\n        longDesc: [\"long {hair} [either:reaching|that reaches] [either:your chest|middle of your back]\", \"chest-long {hair}\"]\r\n    });\r\n    /** Waist-long hair */\r\n    HairLengthTiers.T6_VERY_LONG = new HairLengthTier({\r\n        value: 6,\r\n        name: \"very long\",\r\n        reach: \"waist\",\r\n        shortPrefix: [\"very long\", \"waist-long\"],\r\n        longDesc: [\"very long {hair} [either:reaching|that reaches] [either:your butt|your waist|your hips]\", \"[either:waist|butt|hip]-long {hair}\"]\r\n    });\r\n    /** Knee-long */\r\n    HairLengthTiers.T7_EXTREMELY_LONG = new HairLengthTier({\r\n        value: 7,\r\n        name: \"extremely long\",\r\n        reach: \"knee\",\r\n        shortPrefix: [\"extremely long\", \"knee-length\"],\r\n        longDesc: [\"extremely long {hair} [either:reaching|that reaches] your knees\", \"knee-length {hair}\"]\r\n    }); /* TODO what if no knees? */\r\n    /** Feet-long */\r\n    HairLengthTiers.T8_ABSURDLY_LONG = new HairLengthTier({\r\n        value: 8,\r\n        name: \"absurdly long\",\r\n        reach: \"foot\",\r\n        shortPrefix: [\"absurdly long\", \"feet-reaching\", \"floor-dragging\"],\r\n        longDesc: [\"absurdly long {hair} [either:reaching|that reaches] your [feet]\"]\r\n    });\r\n})(HairLengthTiers || (HairLengthTiers = {}));\r\nvar HairTypes;\r\n(function (HairTypes) {\r\n    HairTypes.NONE = new class extends HairType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no hair\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    HairTypes.NORMAL = new class extends HairType {\r\n        constructor() {\r\n            super(\"/normal\", \"normal\");\r\n            this.texts.type = [\"normal\"];\r\n        }\r\n    };\r\n})(HairTypes || (HairTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Hair.ts?");

/***/ }),

/***/ "./src/game/data/body/Horns.ts":
/*!*************************************!*\
  !*** ./src/game/data/body/Horns.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HornPart\": () => (/* binding */ HornPart),\n/* harmony export */   \"HornType\": () => (/* binding */ HornType),\n/* harmony export */   \"HornTypes\": () => (/* binding */ HornTypes),\n/* harmony export */   \"HornsRef\": () => (/* binding */ HornsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/*\r\n * Created by aimozg on 10.08.2022.\r\n */\r\n\r\n// TODO color/keratin material\r\n// TODO sizes\r\nclass HornType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(HornsRef, id, name);\r\n        this.materials = new Set();\r\n        this.count = this.isPresent ? 2 : 0;\r\n        this.texts.noun1 = \"horn\";\r\n        this.texts.noun2 = \"horns\";\r\n    }\r\n}\r\nclass HornPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return HornsRef; }\r\n    typeNone() { return HornTypes.NONE; }\r\n    typeHuman() { return HornTypes.NONE; }\r\n}\r\nconst HornsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() {\r\n        super(\"/horns\");\r\n    }\r\n    create(body) {\r\n        return new HornPart(body);\r\n    }\r\n};\r\nvar HornTypes;\r\n(function (HornTypes) {\r\n    HornTypes.NONE = new class extends HornType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no horn\";\r\n            this.texts.shortName2Pattern = \"no horns\";\r\n            this.texts.descriptionPattern = \"no horns\";\r\n        }\r\n    };\r\n    ////////\r\n    HornTypes.COW = new class extends HornType {\r\n        constructor() {\r\n            super(\"/cow\", \"cow\");\r\n            // TODO distinction by gender? [mf:bull|cow]\r\n            this.texts.type = [\"cow\", \"bovine\"];\r\n            // TODO adjs\r\n        }\r\n    };\r\n})(HornTypes || (HornTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Horns.ts?");

/***/ }),

/***/ "./src/game/data/body/Legs.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Legs.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LegPart\": () => (/* binding */ LegPart),\n/* harmony export */   \"LegType\": () => (/* binding */ LegType),\n/* harmony export */   \"LegTypes\": () => (/* binding */ LegTypes),\n/* harmony export */   \"LegsRef\": () => (/* binding */ LegsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 01.08.2022.\r\n */\r\n\r\n\r\n\r\n// TODO different leg configurations: biped(2), digitrigrade(2) taur(4), drider(8), kraken(8/10), blob(0/1)\r\nclass LegType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(LegsRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.SKIN]);\r\n        this.texts = Object.assign({}, _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.DefaultBodyPartTexts, {\r\n            noun1: \"leg\",\r\n            noun2: \"legs\",\r\n            footNoun: \"foot\",\r\n            feetNoun: \"feet\",\r\n            footAdj: [\"\"],\r\n            descriptionPattern: \"{count} {longName} [either:with|ending with] {footAdj} {feetNoun}\"\r\n        });\r\n        this.count = this.isPresent ? 2 : 0;\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'footNoun')\r\n            return this.foot(part);\r\n        if (s === 'feetNoun')\r\n            return this.feet(part);\r\n        if (s === 'footAdj')\r\n            return _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(this.texts.footAdj);\r\n        return super.textReplacer(s, part);\r\n    }\r\n    foot(part) { return this.texts.footNoun; }\r\n    feet(part) { return this.texts.feetNoun; }\r\n}\r\nclass LegPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return LegsRef; }\r\n    typeNone() { return LegTypes.NONE; }\r\n    typeHuman() { return LegTypes.HUMAN; }\r\n    foot() { return this.type.foot(this); }\r\n    feet() { return this.type.feet(this); }\r\n}\r\nconst LegsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/legs\"); }\r\n    create(body) {\r\n        return new LegPart(body);\r\n    }\r\n};\r\nvar LegTypes;\r\n(function (LegTypes) {\r\n    LegTypes.NONE = new class extends LegType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.shortName1Pattern = \"no leg\";\r\n            this.texts.shortName2Pattern = \"no legs\";\r\n            this.texts.descriptionPattern = \"no legs\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    LegTypes.HUMAN = new class extends LegType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\", \"unremarkable\"];\r\n            this.texts.footAdj = [\"ordinary\", \"normal\", \"human\"];\r\n        }\r\n    };\r\n    ////////\r\n    LegTypes.BUNNY = new class extends LegType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"rabbit\", \"bunny\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.footAdj = [\"soft\", \"padded\", \"bunny\"];\r\n            this.texts.footNoun = \"paw\";\r\n            this.texts.feetNoun = \"paws\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    LegTypes.CAT = new class extends LegType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.footAdj = [\"soft\", \"padded\", \"cat\"];\r\n            this.texts.footNoun = \"paw\";\r\n            this.texts.feetNoun = \"paws\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    LegTypes.COW = new class extends LegType {\r\n        constructor() {\r\n            super(\"/cow\", \"cow\");\r\n            this.texts.type = [\"cow\", \"bovine\"];\r\n            this.texts.adj = [\"furry\"];\r\n            this.texts.footAdj = [\"\"];\r\n            this.texts.footNoun = \"hoof\";\r\n            this.texts.feetNoun = \"hooves\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    LegTypes.DOG = new class extends LegType {\r\n        constructor() {\r\n            super(\"/dog\", \"dog\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.footAdj = [\"soft\", \"padded\", \"dog\"];\r\n            this.texts.footNoun = \"paw\";\r\n            this.texts.feetNoun = \"paws\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    LegTypes.FOX = new class extends LegType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.footAdj = [\"soft\", \"padded\", \"fox\"];\r\n            this.texts.footNoun = \"paw\";\r\n            this.texts.feetNoun = \"paws\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    LegTypes.WOLF = new class extends LegType {\r\n        constructor() {\r\n            super(\"/wolf\", \"wolf\");\r\n            this.texts.type = [\"wolf\", \"lupine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"soft\"];\r\n            this.texts.footAdj = [\"soft\", \"padded\", \"wolf\"];\r\n            this.texts.footNoun = \"paw\";\r\n            this.texts.feetNoun = \"paws\";\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_2__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(LegTypes || (LegTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Legs.ts?");

/***/ }),

/***/ "./src/game/data/body/Materials.ts":
/*!*****************************************!*\
  !*** ./src/game/data/body/Materials.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BodyMaterialTypes\": () => (/* binding */ BodyMaterialTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyMaterial */ \"./src/engine/objects/creature/BodyMaterial.ts\");\n/*\r\n * Created by aimozg on 02.08.2022.\r\n */\r\n\r\nvar BodyMaterialTypes;\r\n(function (BodyMaterialTypes) {\r\n    BodyMaterialTypes.SKIN = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/skin\", \"skin\", false);\r\n    BodyMaterialTypes.HAIR = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/hair\", \"hair\", false);\r\n    BodyMaterialTypes.FUR = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/fur\", \"fur\", false);\r\n    BodyMaterialTypes.SCALES = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/scales\", \"scales\", true);\r\n    BodyMaterialTypes.CHITIN = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/chitin\", \"chitin\", false);\r\n    BodyMaterialTypes.FEATHERS = new _engine_objects_creature_BodyMaterial__WEBPACK_IMPORTED_MODULE_0__.BodyMaterialType(\"/feathers\", \"feathers\", true);\r\n})(BodyMaterialTypes || (BodyMaterialTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Materials.ts?");

/***/ }),

/***/ "./src/game/data/body/Penis.ts":
/*!*************************************!*\
  !*** ./src/game/data/body/Penis.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PenisPart\": () => (/* binding */ PenisPart),\n/* harmony export */   \"PenisRef\": () => (/* binding */ PenisRef),\n/* harmony export */   \"PenisSizeTier\": () => (/* binding */ PenisSizeTier),\n/* harmony export */   \"PenisSizeTiers\": () => (/* binding */ PenisSizeTiers),\n/* harmony export */   \"PenisType\": () => (/* binding */ PenisType),\n/* harmony export */   \"PenisTypes\": () => (/* binding */ PenisTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/*\r\n * Created by aimozg on 13.08.2022.\r\n */\r\n\r\n\r\n\r\nclass PenisType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(PenisRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        // TODO size/type-dependent\r\n        this.noun1 = () => _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].either(\"penis\", \"cock\", \"dick\");\r\n        this.noun2 = () => _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].either(\"penises\", \"cocks\", \"dicks\");\r\n        this.texts.noun1 = \"penis\";\r\n        this.texts.noun2 = \"penises\";\r\n        this.texts.longName1Pattern = \"{adj} {sizeFull} {suffix}\";\r\n        this.texts.longName2Pattern = \"{adj} {sizeFull} {suffix}\";\r\n        // TODO length\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === 'penis')\r\n            return this.formatPattern('{type} {noun}', part);\r\n        if (s === 'sizePrefix')\r\n            return PenisSizeTier.find(part.size).shortPrefix(part);\r\n        if (s === 'sizeFull')\r\n            return PenisSizeTier.find(part.size).longDesc(part);\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass PenisPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return PenisRef; }\r\n    typeNone() { return PenisTypes.NONE; }\r\n    typeHuman() { return PenisTypes.HUMAN; }\r\n}\r\nconst PenisRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/penis\"); }\r\n    create(body) {\r\n        return new PenisPart(body);\r\n    }\r\n};\r\nclass PenisSizeTier {\r\n    constructor(options) {\r\n        this.min = options.min ?? options.value;\r\n        this.max = options.max ?? options.value;\r\n        this.value = Math.floor((this.min + this.max) / 2);\r\n        this.name = options.name;\r\n        this.shortPrefixes = options.shortPrefix;\r\n        this.longDescPatterns = options.longDesc ?? this.shortPrefixes.map(spx => spx + \" {penis}\");\r\n        PenisSizeTier.All.push(this);\r\n        PenisSizeTier.All.sortOn(\"min\");\r\n        if ((PenisSizeTier.Max?.max ?? 0) < this.max)\r\n            PenisSizeTier.Max = this;\r\n    }\r\n    contains(value) {\r\n        return this.min <= value && value <= this.max;\r\n    }\r\n    shortPrefix(penis) {\r\n        return penis.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.shortPrefixes));\r\n    }\r\n    longDesc(penis) {\r\n        return penis.formatPattern(_engine_math_fxrng__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(this.longDescPatterns));\r\n    }\r\n    static find(value) {\r\n        return PenisSizeTier.All.find(pst => pst.contains(value)) ?? PenisSizeTier.Max;\r\n    }\r\n    static list() {\r\n        return PenisSizeTier.All.slice();\r\n    }\r\n}\r\nPenisSizeTier.All = [];\r\nvar PenisSizeTiers;\r\n(function (PenisSizeTiers) {\r\n    PenisSizeTiers.NONE = new PenisSizeTier({\r\n        value: 0,\r\n        name: \"no\",\r\n        shortPrefix: [\"non-existant\"]\r\n    });\r\n    PenisSizeTiers.T0_SMALL = new PenisSizeTier({\r\n        value: 1,\r\n        name: \"micro\",\r\n        shortPrefix: [\"tiny\", \"micro\", \"clit-like\"],\r\n        longDesc: [\"tiny clit-like {penis}\"]\r\n    });\r\n    PenisSizeTiers.T1_VERY_SMALL = new PenisSizeTier({\r\n        min: 2,\r\n        max: 3,\r\n        name: \"mini\",\r\n        shortPrefix: [\"very small\", \"very short\", \"mini\"]\r\n    });\r\n    PenisSizeTiers.T2_SMALL = new PenisSizeTier({\r\n        min: 4,\r\n        max: 5,\r\n        name: \"small\",\r\n        shortPrefix: [\"small\", \"short\"],\r\n        longDesc: [\"[either:short|small] {penis}\"]\r\n    });\r\n    PenisSizeTiers.T4_AVERAGE = new PenisSizeTier({\r\n        min: 6,\r\n        max: 8,\r\n        name: \"average\",\r\n        shortPrefix: [\"average\", \"average-length\", \"decent\"]\r\n    });\r\n    PenisSizeTiers.T5_BIG = new PenisSizeTier({\r\n        min: 9,\r\n        max: 10,\r\n        name: \"big\",\r\n        shortPrefix: [\"big\", \"large\", \"long\"],\r\n        longDesc: [\"[either:big|large|long][either:| and thick] {penis}\"]\r\n    });\r\n    PenisSizeTiers.T6_VERY_BIG = new PenisSizeTier({\r\n        min: 11,\r\n        max: 12,\r\n        name: \"very big\",\r\n        shortPrefix: [\"very big\", \"very large\", \"very long\"],\r\n        longDesc: [\"very [either:big|large|long][either:| and very thick| and thick] {penis}\"]\r\n    });\r\n    PenisSizeTiers.T7_HUGE = new PenisSizeTier({\r\n        min: 13,\r\n        max: 15,\r\n        name: \"huge\",\r\n        shortPrefix: [\"huge\"]\r\n    });\r\n    PenisSizeTiers.T8_MASSIVE = new PenisSizeTier({\r\n        min: 16,\r\n        max: 18,\r\n        name: \"massive\",\r\n        shortPrefix: [\"massive\", \"enormous\"]\r\n    });\r\n    PenisSizeTiers.T9_GIGANTIC = new PenisSizeTier({\r\n        min: 19,\r\n        max: 21,\r\n        name: \"gigantic\",\r\n        shortPrefix: [\"gigantic\", \"giant\", \"extremely large\", \"extremely big\"]\r\n    });\r\n})(PenisSizeTiers || (PenisSizeTiers = {}));\r\nvar PenisTypes;\r\n(function (PenisTypes) {\r\n    PenisTypes.NONE = new class extends PenisType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.noun1 = \"no penis\";\r\n            this.texts.noun2 = \"no penises\";\r\n            this.texts.descriptionPattern = \"no penis\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    PenisTypes.HUMAN = new class extends PenisType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\"];\r\n        }\r\n    };\r\n    ////////\r\n    PenisTypes.CAT = new class extends PenisType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"barbed\", \"pointy\", \"furry\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    PenisTypes.DOG = new class extends PenisType {\r\n        constructor() {\r\n            super(\"/dog\", \"dog\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"knotted\", \"pointy\", \"furry\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(PenisTypes || (PenisTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Penis.ts?");

/***/ }),

/***/ "./src/game/data/body/Skin.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Skin.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SkinPart\": () => (/* binding */ SkinPart),\n/* harmony export */   \"SkinRef\": () => (/* binding */ SkinRef),\n/* harmony export */   \"SkinType\": () => (/* binding */ SkinType),\n/* harmony export */   \"SkinTypes\": () => (/* binding */ SkinTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 19.09.2022.\r\n */\r\n\r\n\r\nclass SkinType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(SkinRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.texts.noun1 = \"skin\";\r\n        this.texts.shortName1Pattern = \"{color} {noun1}\";\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n    }\r\n    colors(part) {\r\n        return part.body.skinColors;\r\n    }\r\n    textReplacer(s, part) {\r\n        if (s === \"color\")\r\n            return this.colors(part);\r\n        return super.textReplacer(s, part);\r\n    }\r\n}\r\nclass SkinPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return SkinRef; }\r\n    typeNone() { return SkinTypes.NONE; }\r\n    typeHuman() { return SkinTypes.NORMAL; }\r\n}\r\nconst SkinRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/skin\"); }\r\n    create(body) {\r\n        return new SkinPart(body);\r\n    }\r\n};\r\nvar SkinTypes;\r\n(function (SkinTypes) {\r\n    SkinTypes.NONE = new class extends SkinType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    SkinTypes.NORMAL = new class extends SkinType {\r\n        constructor() {\r\n            super(\"/normal\", \"normal\");\r\n        }\r\n    };\r\n})(SkinTypes || (SkinTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Skin.ts?");

/***/ }),

/***/ "./src/game/data/body/Tail.ts":
/*!************************************!*\
  !*** ./src/game/data/body/Tail.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TailPart\": () => (/* binding */ TailPart),\n/* harmony export */   \"TailRef\": () => (/* binding */ TailRef),\n/* harmony export */   \"TailType\": () => (/* binding */ TailType),\n/* harmony export */   \"TailTypes\": () => (/* binding */ TailTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 28.07.2022.\r\n */\r\n\r\n\r\nclass TailType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(TailRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.texts.noun1 = \"tail\";\r\n        this.texts.noun2 = \"tails\";\r\n    }\r\n}\r\nclass TailPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return TailRef; }\r\n    typeNone() { return TailTypes.NONE; }\r\n    typeHuman() { return TailTypes.NONE; }\r\n}\r\nconst TailRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() {\r\n        super(\"/tail\");\r\n    }\r\n    create(body) {\r\n        return new TailPart(body);\r\n    }\r\n};\r\nvar TailTypes;\r\n(function (TailTypes) {\r\n    TailTypes.NONE = new class extends TailType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.noun1 = \"no tail\";\r\n            this.texts.noun2 = \"no tails\";\r\n            this.texts.descriptionPattern = \"no tail\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    ////////\r\n    TailTypes.BUNNY = new class extends TailType {\r\n        constructor() {\r\n            super(\"/bunny\", \"bunny\");\r\n            this.texts.type = [\"rabbit\", \"bunny\"];\r\n            this.texts.adj = [\"fuzzy\", \"round\", \"small\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    TailTypes.CAT = new class extends TailType {\r\n        constructor() {\r\n            super(\"/cat\", \"cat\");\r\n            this.texts.type = [\"cat\", \"feline\"];\r\n            this.texts.adj = [\"cute\", \"fuzzy\", \"furry\", \"fluffy\", \"long\", \"soft\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    TailTypes.COW = new class extends TailType {\r\n        constructor() {\r\n            super(\"/cow\", \"cow\");\r\n            this.texts.type = [\"cow\", \"bovine\"];\r\n            this.texts.adj = [\"long\", \"floppy\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    TailTypes.DOG = new class extends TailType {\r\n        constructor() {\r\n            super(\"/dog\", \"dog\");\r\n            this.texts.type = [\"dog\", \"canine\"];\r\n            this.texts.adj = [\"fuzzy\", \"furry\", \"fluffy\", \"long\", \"soft\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    TailTypes.FOX = new class extends TailType {\r\n        constructor() {\r\n            super(\"/fox\", \"fox\");\r\n            this.texts.type = [\"fox\", \"vulpine\"];\r\n            this.texts.adj = [\"cute\", \"soft\", \"fuzzy\", \"furry\", \"fluffy\", \"long\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n    TailTypes.WOLF = new class extends TailType {\r\n        constructor() {\r\n            super(\"/wolf\", \"wolf\");\r\n            this.texts.type = [\"wolf\", \"lupine\"];\r\n            this.texts.adj = [\"soft\", \"fuzzy\", \"furry\", \"fluffy\", \"long\"];\r\n            this.materials.add(_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.FUR);\r\n        }\r\n    };\r\n})(TailTypes || (TailTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Tail.ts?");

/***/ }),

/***/ "./src/game/data/body/Vagina.ts":
/*!**************************************!*\
  !*** ./src/game/data/body/Vagina.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"VaginaPart\": () => (/* binding */ VaginaPart),\n/* harmony export */   \"VaginaRef\": () => (/* binding */ VaginaRef),\n/* harmony export */   \"VaginaType\": () => (/* binding */ VaginaType),\n/* harmony export */   \"VaginaTypes\": () => (/* binding */ VaginaTypes)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/* harmony import */ var _Materials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Materials */ \"./src/game/data/body/Materials.ts\");\n/*\r\n * Created by aimozg on 13.08.2022.\r\n */\r\n\r\n\r\nclass VaginaType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(VaginaRef, id, name);\r\n        this.materials = new Set([_Materials__WEBPACK_IMPORTED_MODULE_1__.BodyMaterialTypes.SKIN]);\r\n        this.texts.noun1 = \"vagina\";\r\n        this.texts.noun2 = \"vaginas\";\r\n        // TODO properties (wetness/tightness)\r\n        this.texts.descriptionPattern = \"{longName}\";\r\n    }\r\n}\r\nclass VaginaPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return VaginaRef; }\r\n    typeNone() { return VaginaTypes.NONE; }\r\n    typeHuman() { return VaginaTypes.HUMAN; }\r\n}\r\nconst VaginaRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/vagina\"); }\r\n    create(body) {\r\n        return new VaginaPart(body);\r\n    }\r\n};\r\nvar VaginaTypes;\r\n(function (VaginaTypes) {\r\n    VaginaTypes.NONE = new class extends VaginaType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.texts.noun1 = \"no vagina\";\r\n            this.texts.noun2 = \"no vaginas\";\r\n            this.texts.descriptionPattern = \"no vagina\";\r\n            this.materials.clear();\r\n        }\r\n    };\r\n    VaginaTypes.HUMAN = new class extends VaginaType {\r\n        constructor() {\r\n            super(\"/human\", \"human\");\r\n            this.texts.type = [\"human\"];\r\n            this.texts.adj = [\"ordinary\", \"normal\"];\r\n        }\r\n    };\r\n})(VaginaTypes || (VaginaTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Vagina.ts?");

/***/ }),

/***/ "./src/game/data/body/Wings.ts":
/*!*************************************!*\
  !*** ./src/game/data/body/Wings.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WingPart\": () => (/* binding */ WingPart),\n/* harmony export */   \"WingType\": () => (/* binding */ WingType),\n/* harmony export */   \"WingTypes\": () => (/* binding */ WingTypes),\n/* harmony export */   \"WingsRef\": () => (/* binding */ WingsRef)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/creature/BodyPart */ \"./src/engine/objects/creature/BodyPart.ts\");\n/*\r\n * Created by aimozg on 07.08.2022.\r\n */\r\n// TODO somehow should support arm-wings\r\n\r\nclass WingType extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartType {\r\n    constructor(id, name) {\r\n        super(WingsRef, id, name);\r\n        this.count = this.isPresent ? 2 : 0;\r\n        this.texts.noun1 = \"wing\";\r\n        this.texts.noun2 = \"wings\";\r\n    }\r\n}\r\nclass WingPart extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPart {\r\n    constructor(body) {\r\n        super(body);\r\n    }\r\n    ref() { return WingsRef; }\r\n    typeNone() { return WingTypes.NONE; }\r\n    typeHuman() { return WingTypes.NONE; }\r\n}\r\nconst WingsRef = new class extends _engine_objects_creature_BodyPart__WEBPACK_IMPORTED_MODULE_0__.BodyPartReference {\r\n    constructor() { super(\"/wings\"); }\r\n    create(body) {\r\n        return new WingPart(body);\r\n    }\r\n};\r\nvar WingTypes;\r\n(function (WingTypes) {\r\n    WingTypes.NONE = new class extends WingType {\r\n        constructor() {\r\n            super(\"\", \"none\");\r\n            this.materials = new Set();\r\n            this.texts.shortName1Pattern = \"no wing\";\r\n            this.texts.shortName2Pattern = \"no wings\";\r\n            this.texts.descriptionPattern = \"no wings\";\r\n        }\r\n    };\r\n})(WingTypes || (WingTypes = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/body/Wings.ts?");

/***/ }),

/***/ "./src/game/data/classes.ts":
/*!**********************************!*\
  !*** ./src/game/data/classes.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterClasses\": () => (/* binding */ gdRegisterClasses)\n/* harmony export */ });\n/* harmony import */ var _classes_ClassWarrior__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classes/ClassWarrior */ \"./src/game/data/classes/ClassWarrior.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\nfunction gdRegisterClasses(gd) {\r\n    gd.logger.debug(\"gdRegisterClasses\");\r\n    gd.addClasses(new _classes_ClassWarrior__WEBPACK_IMPORTED_MODULE_0__.ClassWarrior());\r\n}\r\n/*\r\nexport function gdClases():GDClass[] {\r\n    return [{\r\n        id: \"warrior\",\r\n        name: \"Warrior\",\r\n        startingClass: true,\r\n        description: \"\" +\r\n            \"\\n\\n\" +\r\n            // \"Skills: \" +\r\n            // \"\\n\" +\r\n            \"Subclasses: Duelist, Barbarian, Paladin\"\r\n    }, {\r\n        id: \"rogue\",\r\n        name: \"Rogue\",\r\n        startingClass: false,\r\n        description: \"\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Assassin, Ranger\"\r\n    }, {\r\n        id: \"mage\",\r\n        name: \"Mage\",\r\n        startingClass: false,\r\n        description: \"\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Sorcerer, Necromancer, Druid\"\r\n    }, {\r\n        id: \"adventurer\",\r\n        name: \"Adventurer\",\r\n        startingClass: false,\r\n        description: \"An all-rounder survivalist/treasure hunter class.\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Explorer, Shifter\"\r\n    }, {\r\n        id: \"cultivator\",\r\n        name: \"Cultivator\",\r\n        startingClass: false,\r\n        description: \"Cultivate ki to empower your body and soul.\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Body Cultivator, Soul Cultivator, Mind Cultivator\"\r\n    }, {\r\n        id: \"slacker\",\r\n        name: \"Slacker\",\r\n        startingClass: false,\r\n        description: \"Why fight when you can have fun? Persuade or seduce others\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Bard, Seducer\"\r\n    }, ]\r\n}\r\n*/\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/classes.ts?");

/***/ }),

/***/ "./src/game/data/classes/ClassWarrior.ts":
/*!***********************************************!*\
  !*** ./src/game/data/classes/ClassWarrior.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClassWarrior\": () => (/* binding */ ClassWarrior)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_classes_CharacterClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/rules/classes/CharacterClass */ \"./src/engine/rules/classes/CharacterClass.ts\");\n/*\r\n * Created by aimozg on 05.07.2022.\r\n */\r\n\r\nclass ClassWarrior extends _engine_rules_classes_CharacterClass__WEBPACK_IMPORTED_MODULE_0__.CharacterClass {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resId = \"warrior\";\r\n        this.description = \"Melee fighter and weapon master.\" +\r\n            \"\\n\\n\" +\r\n            \"Subclasses: Duelist, Barbarian, Paladin.\";\r\n        this.isStartingClass = true;\r\n        this.name = \"warrior\";\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/classes/ClassWarrior.ts?");

/***/ }),

/***/ "./src/game/data/colors.ts":
/*!*********************************!*\
  !*** ./src/game/data/colors.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HumanEyeColorNames\": () => (/* binding */ HumanEyeColorNames),\n/* harmony export */   \"HumanHairColorNames\": () => (/* binding */ HumanHairColorNames),\n/* harmony export */   \"HumanSkinColorNames\": () => (/* binding */ HumanSkinColorNames),\n/* harmony export */   \"gdRegisterColors\": () => (/* binding */ gdRegisterColors)\n/* harmony export */ });\nfunction gdRegisterColors(gd) {\r\n    gd.logger.debug(\"gdRegisterColors\");\r\n    const commonColors = [\r\n        { name: \"albino\", rgb: '#f2f2e8', palette: \"common\" },\r\n        { name: \"amber\", rgb: '#ff6224', palette: \"common\" },\r\n        { name: \"aphotic blue-black\", rgb: '#08155e', palette: \"common\" },\r\n        { name: \"aqua\", rgb: '#00cccc', palette: \"common\" },\r\n        { name: \"ashen grayish-blue\", rgb: '#93b6c8', palette: \"common\" },\r\n        { name: \"ashen\", rgb: '#817d79', palette: \"common\" },\r\n        { name: \"auburn\", rgb: '#732d26', palette: \"common\" },\r\n        { name: \"black\", rgb: '#333333', palette: \"common\" },\r\n        { name: \"blazing red\", rgb: '#ff6224', palette: \"common\" },\r\n        { name: \"blonde\", rgb: '#e0c685', palette: \"common\" },\r\n        { name: \"blood red\", rgb: '#d56c6c', palette: \"common\" },\r\n        { name: \"blue\", rgb: '#405fce', palette: \"common\" },\r\n        { name: \"bluish black\", rgb: '#22263a', palette: \"common\" },\r\n        { name: \"bright pink\", rgb: '#f000f0', palette: \"common\" },\r\n        { name: \"bronze\", rgb: '#a89148', palette: \"common\" },\r\n        { name: \"brown\", rgb: '#664400', palette: \"common\" },\r\n        { name: \"caramel\", rgb: '#c39350', palette: \"common\" },\r\n        { name: \"cerulean\", rgb: '#377bc3', palette: \"common\" },\r\n        { name: \"chocolate\", rgb: '#4a3b2b', palette: \"common\" },\r\n        { name: \"creamy white\", rgb: '#f2ebde', palette: \"common\" },\r\n        { name: \"crimson\", rgb: '#dc143c', palette: \"common\" },\r\n        { name: \"crystal\", rgb: '#bc81ca', palette: \"common\" },\r\n        { name: \"dark blue\", rgb: '#3d529e', palette: \"common\" },\r\n        { name: \"dark gray\", rgb: '#534f59', palette: \"common\" },\r\n        { name: \"dark green\", rgb: '#36582d', palette: \"common\" },\r\n        { name: \"dark purple\", rgb: '#a700bd', palette: \"common\" },\r\n        { name: \"dark\", rgb: '#694e44', palette: \"common\" },\r\n        { name: \"deep blue\", rgb: '#1e3667', palette: \"common\" },\r\n        { name: \"deep red\", rgb: '#742525', palette: \"common\" },\r\n        { name: \"ebony\", rgb: '#3d3529', palette: \"common\" },\r\n        { name: \"eldritch green\", rgb: '#87d981', palette: \"common\" },\r\n        { name: \"eldritch purple\", rgb: '#7a5f95', palette: \"common\" },\r\n        { name: \"emerald\", rgb: '#4cc875', palette: \"common\" },\r\n        { name: \"fair\", rgb: '#edccbf', palette: \"common\" },\r\n        { name: \"flaxen\", rgb: '#e1ba94', palette: \"common\" },\r\n        { name: \"ghastly white\", rgb: '#f9f9fa', palette: \"common\" },\r\n        { name: \"ghostly pale\", rgb: '#e3deed', palette: \"common\" },\r\n        { name: \"glacial blue\", rgb: '#94f6ff', palette: \"common\" },\r\n        { name: \"glacial white\", rgb: '#dee5f2', palette: \"common\" },\r\n        { name: \"golden blonde\", rgb: '#f5d88a', palette: \"common\" },\r\n        { name: \"golden\", rgb: '#ffdd00', palette: \"common\" },\r\n        { name: \"gray\", rgb: '#808080', palette: \"common\" },\r\n        { name: \"grayish-blue\", rgb: '#3f3f50', palette: \"common\" },\r\n        { name: \"green\", rgb: '#08a108', palette: \"common\" },\r\n        { name: \"indigo\", rgb: '#4d0080', palette: \"common\" },\r\n        { name: \"iridescent gray\", rgb: '#999999', palette: \"common\" },\r\n        { name: \"leaf green\", rgb: '#5eba5e', palette: \"common\" },\r\n        { name: \"light blonde\", rgb: '#ffe78f', palette: \"common\" },\r\n        { name: \"light blue\", rgb: '#b1c8ec', palette: \"common\" },\r\n        { name: \"light gray\", rgb: '#c4d1d9', palette: \"common\" },\r\n        { name: \"light green\", rgb: '#c5eec3', palette: \"common\" },\r\n        { name: \"light pink\", rgb: '#ffbdcb', palette: \"common\" },\r\n        { name: \"light purple\", rgb: '#e4cdf3', palette: \"common\" },\r\n        { name: \"light\", rgb: '#feebd7', palette: \"common\" },\r\n        { name: \"lime green\", rgb: '#73df72', palette: \"common\" },\r\n        { name: \"magenta\", rgb: '#470036', palette: \"common\" },\r\n        { name: \"mahogany\", rgb: '#81473b', palette: \"common\" },\r\n        { name: \"mediterranean-toned\", rgb: '#ac7339', palette: \"common\" },\r\n        { name: \"metallic golden\", rgb: '#ddc469', palette: \"common\" },\r\n        { name: \"metallic silver\", rgb: '#cfedfc', palette: \"common\" },\r\n        { name: \"metallic\", rgb: '#9c9c9c', palette: \"common\" },\r\n        { name: \"midnight black\", rgb: '#171622', palette: \"common\" },\r\n        { name: \"midnight purple\", rgb: '#47314b', palette: \"common\" },\r\n        { name: \"midnight\", rgb: '#30354a', palette: \"common\" },\r\n        { name: \"milky white\", rgb: '#f4dfdc', palette: \"common\" },\r\n        { name: \"neon blue\", rgb: '#29eaff', palette: \"common\" },\r\n        { name: \"olive\", rgb: '#ddad72', palette: \"common\" },\r\n        { name: \"orange\", rgb: '#ffa600', palette: \"common\" },\r\n        { name: \"pale purple\", rgb: '#d3d4e9', palette: \"common\" },\r\n        { name: \"pale white\", rgb: '#fff4eb', palette: \"common\" },\r\n        { name: \"pale yellow\", rgb: '#eeecaa', palette: \"common\" },\r\n        { name: \"pale\", rgb: '#f2e8e3', palette: \"common\" },\r\n        { name: \"peach\", rgb: '#f4c0a4', palette: \"common\" },\r\n        { name: \"pearly\", rgb: '#ffd6ff', palette: \"common\" },\r\n        { name: \"pink\", rgb: '#ffb3b3', palette: \"common\" },\r\n        { name: \"platinum blonde\", rgb: '#f7f3e8', palette: \"common\" },\r\n        { name: \"platinum crimson\", rgb: '#ff745c', palette: \"common\" },\r\n        { name: \"pure white\", rgb: '#ffffff', palette: \"common\" },\r\n        { name: \"purple\", rgb: '#7a007a', palette: \"common\" },\r\n        { name: \"purplish black\", rgb: '#391939', palette: \"common\" },\r\n        { name: \"purplish black\", rgb: '#7d597a', palette: \"common\" },\r\n        { name: \"purplish pink\", rgb: '#bc81ca', palette: \"common\" },\r\n        { name: \"quartz white\", rgb: '#ffffff', palette: \"common\" },\r\n        { name: \"raven\", rgb: '#101728', palette: \"common\" },\r\n        { name: \"red\", rgb: '#f02c0a', palette: \"common\" },\r\n        { name: \"reddish orange\", rgb: '#df8453', palette: \"common\" },\r\n        { name: \"rough gray\", rgb: '#525252', palette: \"common\" },\r\n        { name: \"russet\", rgb: '#aa6546', palette: \"common\" },\r\n        { name: \"sable\", rgb: '#d6caa9', palette: \"common\" },\r\n        { name: \"sandy blonde\", rgb: '#ebd69e', palette: \"common\" },\r\n        { name: \"sandy brown\", rgb: '#a28d57', palette: \"common\" },\r\n        { name: \"sanguine\", rgb: '#c03030', palette: \"common\" },\r\n        { name: \"shiny black\", rgb: '#1c262c', palette: \"common\" },\r\n        { name: \"silver blonde\", rgb: '#fcfaf8', palette: \"common\" },\r\n        { name: \"silver white\", rgb: '#eff3f6', palette: \"common\" },\r\n        { name: \"silver\", rgb: '#d8e0e9', palette: \"common\" },\r\n        { name: \"snowy\", rgb: '#dddfe4', palette: \"common\" },\r\n        { name: \"snow white\", rgb: '#f9f9fa', palette: \"common\" },\r\n        { name: \"spectral blue\", rgb: '#29eaff', palette: \"common\" },\r\n        { name: \"stormy blue\", rgb: '#2f308d', palette: \"common\" },\r\n        { name: \"tan\", rgb: '#a3845c', palette: \"common\" },\r\n        { name: \"tawny\", rgb: '#b97f27', palette: \"common\" },\r\n        { name: \"turquoise\", rgb: '#1ed9dc', palette: \"common\" },\r\n        { name: \"white\", rgb: '#e6e6eb', palette: \"common\" },\r\n        { name: \"yellow\", rgb: '#fff70f', palette: \"common\" },\r\n        { name: \"yellowish-green\", rgb: '#e1eca7', palette: \"common\" },\r\n    ];\r\n    const skinColors = [\r\n    //{name: \"pale\", rgb: '#f2e8e3', palette: \"skin\"},\r\n    ];\r\n    const hairColors = [\r\n        { name: \"black\", rgb: '#334252', palette: \"hair\" },\r\n        { name: \"brown\", rgb: '#674f42', palette: \"hair\" },\r\n        { name: \"gray\", rgb: '#647a7d', palette: \"hair\" },\r\n        { name: \"red\", rgb: '#d85741', palette: \"hair\" },\r\n        { name: \"white\", rgb: '#aeaba3', palette: \"hair\" },\r\n    ];\r\n    const eyeColors = [\r\n    //{name: \"pale\", rgb: '#f2e8e3', palette: \"eye\"},\r\n    ];\r\n    gd.addColors(skinColors);\r\n    gd.addColors(hairColors);\r\n    gd.addColors(eyeColors);\r\n    gd.addColors(commonColors);\r\n}\r\nlet HumanHairColorNames = [\r\n    \"ashen\",\r\n    \"auburn\",\r\n    \"black\",\r\n    \"blazing red\",\r\n    \"blonde\",\r\n    \"blood red\",\r\n    \"bluish black\",\r\n    \"brown\",\r\n    \"caramel\",\r\n    \"chocolate\",\r\n    \"dark gray\",\r\n    \"ebony\",\r\n    \"flaxen\",\r\n    \"golden blonde\",\r\n    \"golden\",\r\n    \"gray\",\r\n    \"light blonde\",\r\n    \"light gray\",\r\n    \"mahogany\",\r\n    \"midnight black\",\r\n    \"orange\",\r\n    \"pearly\",\r\n    \"platinum blonde\",\r\n    \"platinum crimson\",\r\n    \"pure white\",\r\n    \"raven\",\r\n    \"red\",\r\n    \"reddish orange\",\r\n    \"rough gray\",\r\n    \"russet\",\r\n    \"sandy blonde\",\r\n    \"sanguine\",\r\n    \"shiny black\",\r\n    \"silver blonde\",\r\n    \"silver white\",\r\n    \"silver\",\r\n    \"snowy\",\r\n    \"snow white\",\r\n    \"tawny\",\r\n    \"white\",\r\n];\r\nlet HumanSkinColorNames = [\r\n    \"ashen\",\r\n    \"bronze\",\r\n    \"caramel\",\r\n    \"dark\",\r\n    \"ebony\",\r\n    \"fair\",\r\n    \"light\",\r\n    \"mediterranean-toned\",\r\n    \"olive\",\r\n    \"pale\",\r\n    \"peach\",\r\n    \"reddish orange\",\r\n    \"tan\",\r\n    \"white\"\r\n];\r\nlet HumanEyeColorNames = [\r\n    \"amber\",\r\n    \"aqua\",\r\n    \"black\",\r\n    \"blue\",\r\n    \"brown\",\r\n    \"crimson\",\r\n    \"dark blue\",\r\n    // \"dark brown\",\r\n    \"dark gray\",\r\n    \"dark green\",\r\n    \"deep blue\",\r\n    \"deep red\",\r\n    \"emerald\",\r\n    \"green\",\r\n    \"light blue\",\r\n    \"light gray\",\r\n    \"light green\",\r\n    \"red\",\r\n];\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/colors.ts?");

/***/ }),

/***/ "./src/game/data/items/ArmorLib.ts":
/*!*****************************************!*\
  !*** ./src/game/data/items/ArmorLib.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArmorLib\": () => (/* binding */ ArmorLib)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_item_BaseBodyArmor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/item/BaseBodyArmor */ \"./src/engine/objects/item/BaseBodyArmor.ts\");\n/*\r\n * Created by aimozg on 15.08.2022.\r\n */\r\n\r\nvar ArmorLib;\r\n(function (ArmorLib) {\r\n    ArmorLib.LeatherArmor = new _engine_objects_item_BaseBodyArmor__WEBPACK_IMPORTED_MODULE_0__.BaseBodyArmor(\"/barm_leather\", \"leather armor\", 1, 0);\r\n})(ArmorLib || (ArmorLib = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/items/ArmorLib.ts?");

/***/ }),

/***/ "./src/game/data/items/ConsumableLib.ts":
/*!**********************************************!*\
  !*** ./src/game/data/items/ConsumableLib.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ConsumableLib\": () => (/* binding */ ConsumableLib)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_item_BaseConsumable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/item/BaseConsumable */ \"./src/engine/objects/item/BaseConsumable.ts\");\n/* harmony import */ var _effects_HealEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./effects/HealEffect */ \"./src/game/data/items/effects/HealEffect.ts\");\n\r\n\r\nvar ConsumableLib;\r\n(function (ConsumableLib) {\r\n    ConsumableLib.PotionHealingLesser = new _engine_objects_item_BaseConsumable__WEBPACK_IMPORTED_MODULE_0__.BaseConsumable(\"/icPotionHpLesser\", \"Lesser Healing Potion\", [\r\n        new _effects_HealEffect__WEBPACK_IMPORTED_MODULE_1__.HealEffect(\"1d6\")\r\n    ]);\r\n})(ConsumableLib || (ConsumableLib = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/items/ConsumableLib.ts?");

/***/ }),

/***/ "./src/game/data/items/MeleeWeaponLib.ts":
/*!***********************************************!*\
  !*** ./src/game/data/items/MeleeWeaponLib.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MeleeWeaponLib\": () => (/* binding */ MeleeWeaponLib)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_item_BaseMeleeWeapon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/item/BaseMeleeWeapon */ \"./src/engine/objects/item/BaseMeleeWeapon.ts\");\n/* harmony import */ var _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/rules/DamageType */ \"./src/engine/rules/DamageType.ts\");\n/* harmony import */ var _engine_rules_Damage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/rules/Damage */ \"./src/engine/rules/Damage.ts\");\n/*\r\n * Created by aimozg on 25.07.2022.\r\n */\r\n\r\n\r\n\r\n/*\r\n * Base values (by Liadri):\r\n *\r\n * Dice power sequence 1d2, 1d3, 1d4, 1d6, 1d8, 1d10, 2d6, 3d6, 4d6\r\n * Start with main attack 1d10\r\n * -1 for special attack totaling +2 dice power\r\n * -1 for special property\r\n * +3 if two-handed\r\n *\r\n * Examples:\r\n *\r\n * Longsword:\r\n * - 1d8 slashing (3d6 2H)\r\n * - 1d3 piercing (1d8 2H)\r\n *\r\n * Dagger:\r\n * - 1d6 piercing\r\n * - Fast (-20% attack AP cost)\r\n * - Sneaky (can do sneak attack)\r\n * - Small (attack scales with speed, 1H only)\r\n */\r\nvar MeleeWeaponLib;\r\n(function (MeleeWeaponLib) {\r\n    MeleeWeaponLib.Dagger = new _engine_objects_item_BaseMeleeWeapon__WEBPACK_IMPORTED_MODULE_0__.BaseMeleeWeapon(\"/mwpn_dagger\", \"dagger\", (0,_engine_rules_Damage__WEBPACK_IMPORTED_MODULE_2__.baseDmgSpec)(\"1d4\", _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__.DamageTypes.SLASHING));\r\n})(MeleeWeaponLib || (MeleeWeaponLib = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/items/MeleeWeaponLib.ts?");

/***/ }),

/***/ "./src/game/data/items/NaturalWeaponLib.ts":
/*!*************************************************!*\
  !*** ./src/game/data/items/NaturalWeaponLib.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NaturalWeaponLib\": () => (/* binding */ NaturalWeaponLib)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_item_BaseNaturalWeapon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/objects/item/BaseNaturalWeapon */ \"./src/engine/objects/item/BaseNaturalWeapon.ts\");\n/* harmony import */ var _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/rules/DamageType */ \"./src/engine/rules/DamageType.ts\");\n/* harmony import */ var _engine_rules_Damage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/rules/Damage */ \"./src/engine/rules/Damage.ts\");\n/*\r\n * Created by aimozg on 24.07.2022.\r\n */\r\n\r\n\r\n\r\nvar NaturalWeaponLib;\r\n(function (NaturalWeaponLib) {\r\n    NaturalWeaponLib.NaturalFists = new _engine_objects_item_BaseNaturalWeapon__WEBPACK_IMPORTED_MODULE_0__.BaseNaturalWeapon(\"/nwpn_fists\", \"fists\", (0,_engine_rules_Damage__WEBPACK_IMPORTED_MODULE_2__.baseDmgSpec)(\"1d3\", _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__.DamageTypes.BLUNT));\r\n})(NaturalWeaponLib || (NaturalWeaponLib = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/items/NaturalWeaponLib.ts?");

/***/ }),

/***/ "./src/game/data/items/effects/HealEffect.ts":
/*!***************************************************!*\
  !*** ./src/game/data/items/effects/HealEffect.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HealEffect\": () => (/* binding */ HealEffect)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_ItemEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../engine/objects/ItemEffect */ \"./src/engine/objects/ItemEffect.ts\");\n/* harmony import */ var _engine_math_Dice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/math/Dice */ \"./src/engine/math/Dice.ts\");\n\r\n\r\nclass HealEffect extends _engine_objects_ItemEffect__WEBPACK_IMPORTED_MODULE_0__.ItemEffect {\r\n    constructor(power) {\r\n        if (typeof power === \"string\")\r\n            power = (0,_engine_math_Dice__WEBPACK_IMPORTED_MODULE_1__.dice)(power);\r\n        super(\"Heal \" + power);\r\n        this.power = power;\r\n    }\r\n    async apply(gc, creature, output) {\r\n        let amount = this.power.roll(gc.rng);\r\n        await gc.restoreHp(creature, amount, output);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/items/effects/HealEffect.ts?");

/***/ }),

/***/ "./src/game/data/origins.ts":
/*!**********************************!*\
  !*** ./src/game/data/origins.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterOrigins\": () => (/* binding */ gdRegisterOrigins)\n/* harmony export */ });\nfunction gdRegisterOrigins(gd) {\r\n    gd.logger.debug(\"gdRegisterOrigins\");\r\n    gd.addPlayerOrigins({\r\n        id: 'unknown',\r\n        name: 'Unknown',\r\n        shortDesc: \"one of unknown origin\",\r\n        description: \"Your origins are a mystery.\" +\r\n            \"\\n\\n\" +\r\n            \"<i>No starting bonuses.</i>\"\r\n    }, {\r\n        id: 'native',\r\n        name: 'Native',\r\n        shortDesc: \"a native to this world\",\r\n        description: \"You're an orphan, native to this world who spend their early life in a poor village. Your first attempt to scavenge a magical ruin for riches went badly, and you've triggered some kind of teleportation trap. You don't recognize the new landscape and even the stars and seasons seem to be off.\" +\r\n            \"\\n\\n\" +\r\n            \"<i>Extra starting races: Halfkins and Beastkins. <b>(NOT IMPLEMENTED)</b><br/>\" +\r\n            \"Can start as a futanari. <br/>\" +\r\n            \"Bonus starting skills. <b>(NOT IMPLEMENTED)</b><br/>\" +\r\n            \"Basic starting items. <b>(NOT IMPLEMENTED)</b></i>\",\r\n        introText: \"You're an orphan, native to this world who spend their early life in a poor village. Your first attempt to scavenge a magical ruin for riches went badly, and you've triggered some kind of teleportation trap. \"\r\n    }, {\r\n        id: 'champion',\r\n        name: 'Champion',\r\n        shortDesc: \"a champion from other world\",\r\n        description: \"You're a knight who led the purge of a village of Notingnam, a dark village with foul traditions, buried deep in the wilds. After executing demon-worshipping heretics, you've discovered a portal to some kind of Demon Realm. You and your loyal followers entered it bravely, but you were the only one who passed through. \" +\r\n            \"\\n\\n\" +\r\n            \"<i>Extra starting races: Elf, Half-Elf, Dwarf. <b>(NOT IMPLEMENTED)</b><br/>\" +\r\n            \"Bonus XP: start at level 2.<br/>\" +\r\n            \"Good starting equipment. <b>(NOT IMPLEMENTED)</b></i>\",\r\n        introText: \"You're a knight who led the purge of a village of Notingnam, a dark village with foul traditions, buried deep in the wilds. After executing demon-worshipping heretics, you've discovered a portal to some kind of Demon Realm. You and your loyal followers entered it bravely...\",\r\n        adjustPlayer: (pc) => {\r\n            pc.xp += 1000;\r\n        }\r\n    }, {\r\n        id: 'isekai',\r\n        name: 'Isekai Hero',\r\n        shortDesc: \"a traveler from other world\",\r\n        description: \"You're an ordinary highschool student who just turned eighteen. Overstressed by upcoming exams and constant pranks from your childhood friend of opposite sex, you rushed to the school but were hit by a truck. By the will of unknown powers, you were reincarnated in an 18+ fantasy world. \" +\r\n            \"\\n\\n\" +\r\n            \"<i>Lucky Newbie: Bonus defense, and XP gain until level 6. <b>(NOT IMPLEMENTED)</b></i>\",\r\n        introText: \"You're an ordinary highschool student who just turned eighteen. Overstressed by upcoming exams and constant pranks from your childhood friend of opposite sex, you rushed to the school but were hit by a truck. By the will of unknown powers, you were reincarnated in an 18+ fantasy world. \"\r\n    } /*, {\r\n        id: 'amnesia',\r\n        name: 'Amnesiac',\r\n        description:\r\n            \"You have no idea who you are. \" +\r\n            \"Strangely, you're able to fluently speak, read, and write the language of this world.\" +\r\n            \"\\n\\n\" +\r\n            \"<i>Starting race: Human.</i>\"\r\n    }*/);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/origins.ts?");

/***/ }),

/***/ "./src/game/data/racialGroups.ts":
/*!***************************************!*\
  !*** ./src/game/data/racialGroups.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RGID_BEAST\": () => (/* binding */ RGID_BEAST),\n/* harmony export */   \"RGID_CONSTRUCT\": () => (/* binding */ RGID_CONSTRUCT),\n/* harmony export */   \"RGID_DEITY\": () => (/* binding */ RGID_DEITY),\n/* harmony export */   \"RGID_DEMON\": () => (/* binding */ RGID_DEMON),\n/* harmony export */   \"RGID_ELEMENTAL\": () => (/* binding */ RGID_ELEMENTAL),\n/* harmony export */   \"RGID_HUMANOID\": () => (/* binding */ RGID_HUMANOID),\n/* harmony export */   \"RGID_LICH\": () => (/* binding */ RGID_LICH),\n/* harmony export */   \"RGID_MAGICAL_BEAST\": () => (/* binding */ RGID_MAGICAL_BEAST),\n/* harmony export */   \"RGID_SLIME\": () => (/* binding */ RGID_SLIME),\n/* harmony export */   \"RGID_SPIRIT\": () => (/* binding */ RGID_SPIRIT),\n/* harmony export */   \"RGID_UNDEAD\": () => (/* binding */ RGID_UNDEAD),\n/* harmony export */   \"RacialGroups\": () => (/* binding */ RacialGroups),\n/* harmony export */   \"gdRegisterRacialGroups\": () => (/* binding */ gdRegisterRacialGroups)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/rules/RacialGroup */ \"./src/engine/rules/RacialGroup.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\nconst RGID_BEAST = 'beast';\r\nconst RGID_CONSTRUCT = 'construct';\r\nconst RGID_DEITY = 'deity';\r\nconst RGID_DEMON = 'demon';\r\nconst RGID_ELEMENTAL = 'elemental';\r\nconst RGID_HUMANOID = 'humanoid';\r\nconst RGID_LICH = 'lich';\r\nconst RGID_MAGICAL_BEAST = 'magical_beast';\r\nconst RGID_SLIME = 'slime';\r\nconst RGID_SPIRIT = 'spirit';\r\nconst RGID_UNDEAD = 'undead';\r\nconst RacialGroups = {\r\n    BEAST: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_BEAST, 'Beast'),\r\n    CONSTRUCT: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_CONSTRUCT, 'Construct'),\r\n    DEITY: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_DEITY, 'Deity'),\r\n    DEMON: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_DEMON, 'Demon'),\r\n    ELEMENTAL: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_ELEMENTAL, 'Elemental'),\r\n    HUMANOID: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_HUMANOID, 'Humanoid'),\r\n    LICH: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_LICH, 'Lich'),\r\n    MAGICAL_BEAST: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_MAGICAL_BEAST, 'Magical Beast'),\r\n    SLIME: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_SLIME, 'Slime'),\r\n    SPIRIT: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_SPIRIT, 'Spirit'),\r\n    UNDEAD: new _engine_rules_RacialGroup__WEBPACK_IMPORTED_MODULE_0__.RacialGroup(RGID_UNDEAD, 'Undead'),\r\n};\r\nfunction gdRegisterRacialGroups(gd) {\r\n    gd.logger.debug(\"gdRegisterRacialGroups\");\r\n    gd.data.rgHumanoid = RacialGroups.HUMANOID;\r\n    gd.addRacialGroups(...Object.values(RacialGroups));\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/racialGroups.ts?");

/***/ }),

/***/ "./src/game/data/skills.ts":
/*!*********************************!*\
  !*** ./src/game/data/skills.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Skills\": () => (/* binding */ Skills),\n/* harmony export */   \"gdRegisterSkills\": () => (/* binding */ gdRegisterSkills)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_Skill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/objects/creature/Skill */ \"./src/engine/objects/creature/Skill.ts\");\n/* harmony import */ var _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/rules/TAttribute */ \"./src/engine/rules/TAttribute.ts\");\n/* harmony import */ var _engine_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/objects/creature/CoreSkills */ \"./src/engine/objects/creature/CoreSkills.ts\");\n/*\r\n * Created by aimozg on 20.11.2022.\r\n */\r\n\r\n\r\n\r\nvar Skills;\r\n(function (Skills) {\r\n    Skills.Ambush = _engine_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__.CoreSkills.Ambush;\r\n    Skills.Alchemy = new _engine_objects_creature_Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_alchemy\", {\r\n        name: \"Alchemy\",\r\n        attr: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.INT,\r\n        description: \"Alchemical crafting.\"\r\n    });\r\n    Skills.Arcana = new _engine_objects_creature_Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_arcana\", {\r\n        name: \"Arcana\",\r\n        attr: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.INT,\r\n        description: \"I don't know what it does, ask Lia.\"\r\n    });\r\n    Skills.Enchanting = new _engine_objects_creature_Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_enchanting\", {\r\n        name: \"Enchanting\",\r\n        attr: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.INT,\r\n        description: \"Magical crafting.\"\r\n    });\r\n    Skills.Seduce = _engine_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__.CoreSkills.Seduce;\r\n    Skills.Smithing = new _engine_objects_creature_Skill__WEBPACK_IMPORTED_MODULE_0__.Skill(\"/sk_smithing\", {\r\n        name: \"Smithing\",\r\n        attr: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_1__.TAttribute.STR,\r\n        description: \"Weapon and armor crafting, and other metalwork.\"\r\n    });\r\n    Skills.Spot = _engine_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__.CoreSkills.Spot;\r\n    Skills.Stealth = _engine_objects_creature_CoreSkills__WEBPACK_IMPORTED_MODULE_2__.CoreSkills.Stealth;\r\n    Skills.list = [\r\n        // Ambush,\r\n        Skills.Alchemy,\r\n        Skills.Arcana,\r\n        Skills.Enchanting,\r\n        // Seduce,\r\n        Skills.Smithing,\r\n        // Spot,\r\n        // Stealth\r\n    ];\r\n})(Skills || (Skills = {}));\r\nfunction gdRegisterSkills(gd) {\r\n    gd.addSkills(Skills.list);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/skills.ts?");

/***/ }),

/***/ "./src/game/data/stats.ts":
/*!********************************!*\
  !*** ./src/game/data/stats.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AttrMetadata\": () => (/* binding */ AttrMetadata),\n/* harmony export */   \"StatMetadata\": () => (/* binding */ StatMetadata)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/rules/TAttribute */ \"./src/engine/rules/TAttribute.ts\");\n/* harmony import */ var _combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n/*\r\n * Created by aimozg on 10.08.2022.\r\n */\r\n\r\n\r\nconst AttrMetadata = [\r\n    {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.STR,\r\n        name: 'Strength',\r\n        abbr: \"STR\",\r\n        description: 'Raw physical power.',\r\n        explain: (mod) => `${mod.signed()} melee damage (non-small weapons), ${(mod * 5).signed()}% huge weapon accuracy.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.DEX,\r\n        name: 'Dexterity',\r\n        abbr: \"DEX\",\r\n        description: 'Finesse and coordination.',\r\n        explain: (mod) => `${(mod * 5).signed()}% dodge, ${mod.signed()} reflex, ${(mod * 5).signed()}% medium and large weapon accuracy, ${mod.signed()} small weapon damage.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CON,\r\n        name: 'Constitution',\r\n        abbr: \"CON\",\r\n        description: 'Endurance.',\r\n        explain: (mod) => `${mod.signed()} HP and energy per level, ${mod.signed()} fortitude.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.SPE,\r\n        name: 'Speed',\r\n        abbr: \"SPE\",\r\n        description: 'Decreases actions\\' AP cost.',\r\n        explain: (mod, value) => `${(_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.speedApFactor(value) - 1).format('+d%')}% action AP cost, ${(_combat_CombatRules__WEBPACK_IMPORTED_MODULE_1__.CombatRules.speedApFactorMove(value) - 1).format('+d%')}% move AP cost, ${(mod * 5).signed()}% small weapon accuracy.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.PER,\r\n        name: 'Perception',\r\n        abbr: \"PER\",\r\n        description: 'Eyesight, hearing, and other senses.',\r\n        explain: (mod) => `${(mod * 5).signed()}% ranged accuracy.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.INT,\r\n        name: 'Intellect',\r\n        abbr: \"INT\",\r\n        description: 'Analytical abilities.',\r\n        explain: (mod) => `${mod.signed()} to skill points per level. ${(mod * 5).signed()}% skill growth speed.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.WIS,\r\n        name: 'Wisdom',\r\n        abbr: \"WIS\",\r\n        description: 'Common sense and willpower.',\r\n        explain: (mod) => `${mod.signed()} to willpower.`\r\n    }, {\r\n        id: _engine_rules_TAttribute__WEBPACK_IMPORTED_MODULE_0__.TAttribute.CHA,\r\n        name: 'Charisma',\r\n        abbr: \"CHA\",\r\n        description: 'Physical and personal attractiveness.',\r\n        explain: (mod) => `${mod.signed()} to something seduction-related.`\r\n    }\r\n];\r\nconst StatMetadata = {\r\n    lib: {\r\n        id: \"lib\",\r\n        name: \"Libido\",\r\n        description: 'Affects lust gain',\r\n        explain: (value) => {\r\n            if (value < 0)\r\n                return `Lose ${-value} lust per hour.`;\r\n            if (value === 0)\r\n                return 'No passive lust gain or decay.';\r\n            return `Gain ${value} lust per hour.`;\r\n        }\r\n    },\r\n    perv: {\r\n        id: \"perv\",\r\n        name: \"Perversion\",\r\n        description: \"Your character's degrees of lewdity.\",\r\n        // TODO Explain perversion values in detail (from hand-holding to nipplecunt fisting)\r\n        explain: () => \"Your character's degrees of lewdity.\"\r\n    },\r\n    cor: {\r\n        id: \"cor\",\r\n        name: \"Corruption\",\r\n        description: \"\",\r\n        explain: (value) => `${value.signed()} min. Perversion. ${value.signed()} Libido.`\r\n    }\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/stats.ts?");

/***/ }),

/***/ "./src/game/data/text/Appearance.tsx":
/*!*******************************************!*\
  !*** ./src/game/data/text/Appearance.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Appearance\": () => (/* binding */ Appearance)\n/* harmony export */ });\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _engine_ui_components_ColorCircle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/ui/components/ColorCircle */ \"./src/engine/ui/components/ColorCircle.tsx\");\n/* harmony import */ var _engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../engine/text/ParseTag */ \"./src/engine/text/ParseTag.tsx\");\n/*\r\n * Created by aimozg on 04.08.2022.\r\n */\r\n\r\n\r\n\r\n\r\n// TODO Diversify descriptions - \"You have DESC TYPE\" | \"Your TYPE is DESC\" | \"CUSTOMDESC\"\r\nvar Appearance;\r\n(function (Appearance) {\r\n    function characterAppearance(pc, parser) {\r\n        parser.setTarget(pc);\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, { parser: parser },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                \"You are \",\r\n                pc.body.height.toFixed(),\r\n                \"cm tall \",\r\n                pc.txt.sex,\r\n                \" \",\r\n                pc.rgroup.name.toLowerCase(),\r\n                \". \"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                pc.body.face.fullDescription(),\r\n                \" \",\r\n                pc.body.hair.fullDescription(),\r\n                \" \",\r\n                pc.body.ears.fullDescription(),\r\n                \" \",\r\n                pc.body.eyes.fullDescription(),\r\n                \" \",\r\n                pc.body.horns.isPresent && pc.body.horns.fullDescription(),\r\n                \" \"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                pc.body.skin.fullDescription(),\r\n                \" \",\r\n                pc.body.coat.isPresent && pc.body.coat.fullDescription(),\r\n                \" \"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                pc.body.arms.fullDescription(),\r\n                \" \",\r\n                pc.body.legs.fullDescription(),\r\n                \" \",\r\n                pc.body.wings.isPresent && pc.body.wings.fullDescription(),\r\n                \" \",\r\n                pc.body.tail.isPresent && pc.body.tail.fullDescription(),\r\n                \" \"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n                pc.body.breasts.fullDescription(),\r\n                \" \",\r\n                pc.body.penis.isPresent && pc.body.penis.fullDescription(),\r\n                \" \",\r\n                pc.body.vagina.isPresent && pc.body.vagina.fullDescription(),\r\n                \" \"),\r\n            Appearance.characterColors(pc, parser));\r\n    }\r\n    Appearance.characterAppearance = characterAppearance;\r\n    function characterColors(pc, parser) {\r\n        parser.setTarget(pc);\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_text_ParseTag__WEBPACK_IMPORTED_MODULE_3__.Parse, { parser: parser },\r\n                pc.body.materials.map(m => m.isPresent &&\r\n                    (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_ColorCircle__WEBPACK_IMPORTED_MODULE_2__.ColorCircle, { color: m.color1.rgb, color2: m.binaryColor ? m.color2.rgb : undefined, className: \"-small mr-2\" }),\r\n                        m.fullDescription(),\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"br\", null))),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_ColorCircle__WEBPACK_IMPORTED_MODULE_2__.ColorCircle, { color: pc.body.eyes.color.rgb, className: \"-small mr-2\" }),\r\n                \"[You] [have] \",\r\n                pc.body.eyes.color.name,\r\n                \" eyes.\",\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"br\", null)));\r\n    }\r\n    Appearance.characterColors = characterColors;\r\n})(Appearance || (Appearance = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/text/Appearance.tsx?");

/***/ }),

/***/ "./src/game/data/text/gender.ts":
/*!**************************************!*\
  !*** ./src/game/data/text/gender.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Pronouns\": () => (/* binding */ Pronouns),\n/* harmony export */   \"SexNames\": () => (/* binding */ SexNames)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/rules/gender */ \"./src/engine/rules/gender.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\nlet Pronouns = {\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.GENDER_MALE]: { they: 'he', them: 'him', their: 'his', theirs: 'his', themselves: 'himself' },\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.GENDER_FEMALE]: { they: 'she', them: 'her', their: 'her', theirs: 'hers', themselves: 'herself' },\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.GENDER_OTHER]: { they: 'they', them: 'them', their: 'their', theirs: 'theirs', themselves: 'themselves' },\r\n};\r\nlet SexNames = {\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.SEX_NONE]: 'sexless',\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.SEX_MALE]: 'male',\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.SEX_FEMALE]: 'female',\r\n    [_engine_rules_gender__WEBPACK_IMPORTED_MODULE_0__.SEX_BOTH]: 'futanari',\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/text/gender.ts?");

/***/ }),

/***/ "./src/game/data/text/names.ts":
/*!*************************************!*\
  !*** ./src/game/data/text/names.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"randomName\": () => (/* binding */ randomName)\n/* harmony export */ });\n/* harmony import */ var _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/math/fxrng */ \"./src/engine/math/fxrng.ts\");\n/*\r\n * Created by aimozg on 13.07.2022.\r\n */\r\n\r\nfunction randomName(gender, generator = 'markov', flavor = '', rng = _engine_math_fxrng__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\r\n    // if (generator === 'random') generator = rng.pick(['markov', 'list']) as TNameGenerator\r\n    switch (generator) {\r\n        case 'list':\r\n            return namegenList(gender, flavor, rng);\r\n        case \"markov\":\r\n            return namegenMarkov(gender, flavor, rng);\r\n        // case \"rcv\":\r\n        // \treturn namegenRcv(gender == 'f' ? 0.75 : gender == 'm' ? 0.25 : 0.5, rng);\r\n    }\r\n}\r\nconst MND_FantasyMale = {\r\n    \"pairs\": { \"^\": { \"a\": 29, \"b\": 11, \"c\": 15, \"d\": 20, \"e\": 12, \"f\": 11, \"g\": 13, \"h\": 5, \"i\": 6, \"j\": 13, \"k\": 15, \"l\": 10, \"m\": 15, \"n\": 10, \"o\": 5, \"p\": 7, \"r\": 19, \"s\": 22, \"t\": 16, \"u\": 4, \"v\": 2, \"w\": 7, \"x\": 2, \"y\": 3, \"z\": 8, \"q\": 1 }, \"a\": { \"a\": 2, \"r\": 41, \"e\": 7, \"i\": 6, \"l\": 16, \"g\": 8, \"m\": 13, \"n\": 43, \"k\": 6, \"c\": 7, \"s\": 16, \"y\": 6, \"v\": 3, \"f\": 1, \"t\": 3, \"b\": 1, \"p\": 2, \"$\": 9, \"z\": 3, \"u\": 4, \"x\": 1, \"w\": 2, \"d\": 2, \"h\": 1 }, \"r\": { \"i\": 24, \"o\": 17, \"$\": 42, \"a\": 21, \"n\": 4, \"l\": 2, \"t\": 4, \"m\": 2, \"e\": 18, \"k\": 2, \"d\": 4, \"w\": 1, \"g\": 3, \"r\": 5, \"y\": 10, \"u\": 3, \"f\": 1, \"s\": 1, \"p\": 1, \"b\": 1 }, \"i\": { \"n\": 20, \"a\": 8, \"s\": 20, \"r\": 10, \"u\": 5, \"l\": 6, \"c\": 6, \"g\": 3, \"v\": 3, \"t\": 5, \"o\": 3, \"m\": 6, \"e\": 7, \"$\": 7, \"d\": 1, \"q\": 1, \"k\": 1, \"x\": 1 }, \"n\": { \"$\": 80, \"a\": 13, \"c\": 4, \"i\": 10, \"d\": 13, \"e\": 13, \"o\": 4, \"t\": 6, \"n\": 7, \"g\": 1, \"s\": 1, \"j\": 1, \"u\": 1, \"l\": 1, \"k\": 1, \"z\": 1, \"y\": 1 }, \"o\": { \"n\": 31, \"r\": 25, \"p\": 1, \"b\": 3, \"j\": 1, \"$\": 2, \"y\": 1, \"m\": 3, \"a\": 3, \"t\": 3, \"l\": 5, \"s\": 2, \"d\": 2, \"k\": 2, \"g\": 2, \"o\": 2, \"u\": 1, \"e\": 2, \"x\": 1, \"h\": 2, \"w\": 1 }, \"e\": { \"n\": 22, \"r\": 24, \"$\": 19, \"l\": 18, \"m\": 5, \"e\": 4, \"k\": 3, \"s\": 7, \"a\": 6, \"d\": 6, \"o\": 2, \"u\": 1, \"g\": 4, \"t\": 2, \"i\": 3, \"c\": 1, \"x\": 2, \"y\": 14, \"v\": 2, \"w\": 1, \"b\": 1, \"p\": 1 }, \"l\": { \"a\": 20, \"k\": 1, \"$\": 14, \"h\": 1, \"l\": 7, \"e\": 12, \"t\": 2, \"f\": 2, \"u\": 1, \"o\": 5, \"g\": 2, \"i\": 8, \"c\": 1, \"m\": 2, \"y\": 2, \"n\": 1 }, \"g\": { \"a\": 11, \"o\": 3, \"u\": 5, \"e\": 5, \"i\": 1, \"r\": 3, \"n\": 1, \"h\": 2, \"$\": 5, \"w\": 2 }, \"m\": { \"a\": 12, \"m\": 1, \"o\": 8, \"i\": 6, \"y\": 3, \"e\": 7, \"$\": 8, \"b\": 3, \"u\": 2 }, \"k\": { \"i\": 13, \"s\": 1, \"o\": 2, \"$\": 3, \"a\": 3, \"h\": 1, \"r\": 2, \"e\": 7, \"l\": 1, \"y\": 2 }, \"c\": { \"h\": 5, \"a\": 6, \"l\": 2, \"y\": 2, \"o\": 7, \"u\": 2, \"e\": 5, \"$\": 2, \"k\": 3, \"n\": 1 }, \"h\": { \"$\": 11, \"a\": 19, \"u\": 3, \"o\": 4, \"r\": 3, \"b\": 1, \"e\": 5, \"i\": 3, \"k\": 1, \"t\": 2, \"y\": 1 }, \"t\": { \"h\": 18, \"r\": 3, \"i\": 7, \"$\": 9, \"o\": 8, \"e\": 6, \"a\": 4, \"y\": 2, \"n\": 2 }, \"s\": { \"$\": 26, \"t\": 12, \"h\": 13, \"a\": 10, \"m\": 2, \"s\": 2, \"o\": 7, \"i\": 7, \"y\": 3, \"p\": 2, \"e\": 2, \"l\": 1 }, \"u\": { \"r\": 8, \"s\": 12, \"t\": 2, \"$\": 1, \"l\": 3, \"n\": 3, \"e\": 2, \"m\": 1, \"g\": 2, \"f\": 1, \"b\": 3, \"d\": 1, \"i\": 1 }, \"y\": { \"d\": 6, \"$\": 24, \"t\": 2, \"n\": 8, \"l\": 6, \"r\": 5, \"s\": 2, \"o\": 1, \"c\": 1, \"x\": 1, \"a\": 3 }, \"d\": { \"e\": 13, \"a\": 13, \"$\": 7, \"o\": 6, \"r\": 8, \"i\": 3, \"d\": 2, \"y\": 2, \"s\": 1, \"n\": 2 }, \"b\": { \"i\": 4, \"o\": 2, \"r\": 6, \"e\": 4, \"n\": 1, \"a\": 2, \"u\": 1, \"l\": 2, \"y\": 2 }, \"p\": { \"$\": 1, \"a\": 4, \"i\": 1, \"h\": 4, \"e\": 4 }, \"v\": { \"i\": 2, \"o\": 4, \"e\": 3, \"a\": 1 }, \"f\": { \"a\": 5, \"n\": 1, \"e\": 3, \"i\": 2, \"$\": 2, \"r\": 2, \"l\": 1 }, \"w\": { \"u\": 1, \"e\": 1, \"y\": 3, \"$\": 3, \"n\": 1, \"h\": 1, \"i\": 2, \"r\": 2 }, \"j\": { \"a\": 4, \"e\": 4, \"o\": 4, \"i\": 1, \"u\": 2 }, \"z\": { \"u\": 2, \"a\": 3, \"e\": 2, \"y\": 1, \"i\": 2, \"$\": 1, \"o\": 1 }, \"x\": { \"a\": 1, \"$\": 5, \"y\": 1, \"i\": 1 }, \"q\": { \"u\": 2 } },\r\n    \"counts\": { \"^\": 281, \"a\": 203, \"r\": 166, \"i\": 113, \"n\": 158, \"o\": 95, \"e\": 148, \"l\": 81, \"g\": 38, \"m\": 50, \"k\": 35, \"c\": 35, \"h\": 53, \"t\": 59, \"s\": 87, \"u\": 40, \"y\": 59, \"d\": 57, \"b\": 24, \"p\": 14, \"v\": 10, \"f\": 16, \"w\": 14, \"j\": 15, \"z\": 12, \"x\": 8, \"q\": 2 },\r\n    \"balances\": { \"a\": { \"a\": 42, \"r\": 79, \"i\": 43, \"n\": 95, \"o\": 28, \"e\": 42, \"l\": 34, \"g\": 13, \"m\": 22, \"k\": 16, \"c\": 12, \"h\": 20, \"t\": 20, \"s\": 36, \"u\": 17, \"y\": 16, \"d\": 16, \"v\": 4, \"f\": 4, \"b\": 4, \"p\": 4, \"z\": 5, \"x\": 5, \"w\": 3 }, \"r\": { \"i\": 43, \"n\": 52, \"o\": 28, \"a\": 47, \"g\": 9, \"r\": 17, \"l\": 18, \"c\": 6, \"h\": 10, \"t\": 14, \"s\": 26, \"u\": 9, \"m\": 11, \"e\": 32, \"y\": 21, \"k\": 8, \"d\": 8, \"w\": 2, \"f\": 2, \"b\": 4, \"p\": 3, \"z\": 2, \"x\": 1, \"v\": 1 }, \"i\": { \"n\": 36, \"a\": 17, \"s\": 29, \"h\": 7, \"o\": 14, \"p\": 1, \"r\": 21, \"t\": 14, \"i\": 6, \"u\": 12, \"l\": 12, \"c\": 7, \"k\": 3, \"d\": 7, \"g\": 6, \"m\": 9, \"e\": 23, \"v\": 3, \"b\": 2, \"w\": 2, \"y\": 6, \"q\": 2, \"x\": 1 }, \"o\": { \"n\": 56, \"r\": 37, \"p\": 1, \"a\": 16, \"g\": 8, \"u\": 7, \"s\": 13, \"i\": 18, \"m\": 7, \"o\": 9, \"d\": 6, \"b\": 3, \"j\": 1, \"t\": 7, \"y\": 8, \"h\": 5, \"l\": 11, \"e\": 8, \"c\": 1, \"k\": 3, \"q\": 1, \"x\": 2, \"w\": 1 }, \"e\": { \"n\": 50, \"a\": 27, \"i\": 25, \"r\": 45, \"t\": 13, \"l\": 30, \"m\": 10, \"y\": 25, \"h\": 10, \"e\": 25, \"k\": 6, \"s\": 18, \"o\": 13, \"d\": 16, \"c\": 4, \"u\": 4, \"w\": 3, \"f\": 1, \"g\": 11, \"j\": 1, \"x\": 3, \"p\": 2, \"v\": 2, \"b\": 2, \"z\": 1 }, \"n\": { \"a\": 24, \"i\": 27, \"n\": 19, \"k\": 7, \"c\": 7, \"y\": 11, \"u\": 7, \"s\": 14, \"d\": 15, \"l\": 7, \"e\": 24, \"r\": 14, \"o\": 10, \"t\": 9, \"h\": 5, \"f\": 1, \"g\": 3, \"m\": 4, \"b\": 2, \"j\": 1, \"q\": 1, \"z\": 1, \"x\": 2 }, \"l\": { \"a\": 28, \"g\": 6, \"r\": 14, \"m\": 4, \"k\": 3, \"i\": 18, \"n\": 25, \"c\": 5, \"h\": 10, \"y\": 12, \"v\": 1, \"u\": 3, \"s\": 10, \"l\": 9, \"e\": 21, \"t\": 7, \"f\": 2, \"o\": 14, \"d\": 5, \"x\": 2, \"w\": 3 }, \"g\": { \"a\": 21, \"r\": 17, \"o\": 7, \"n\": 20, \"u\": 8, \"s\": 8, \"l\": 6, \"t\": 5, \"h\": 5, \"d\": 5, \"f\": 2, \"e\": 9, \"w\": 3, \"i\": 7, \"b\": 1, \"m\": 3, \"y\": 1 }, \"m\": { \"a\": 17, \"r\": 16, \"m\": 2, \"o\": 17, \"n\": 16, \"i\": 13, \"c\": 4, \"y\": 3, \"t\": 5, \"h\": 4, \"e\": 16, \"d\": 5, \"l\": 5, \"k\": 2, \"u\": 5, \"s\": 6, \"g\": 4, \"b\": 3, \"q\": 1, \"z\": 1, \"x\": 1 }, \"k\": { \"i\": 18, \"n\": 15, \"s\": 4, \"t\": 6, \"o\": 5, \"r\": 12, \"a\": 11, \"l\": 10, \"h\": 2, \"e\": 14, \"g\": 3, \"y\": 6, \"d\": 2, \"m\": 1, \"b\": 1, \"z\": 1 }, \"c\": { \"h\": 8, \"a\": 14, \"l\": 6, \"s\": 8, \"v\": 2, \"i\": 9, \"r\": 13, \"t\": 4, \"n\": 11, \"c\": 1, \"y\": 5, \"u\": 5, \"o\": 10, \"m\": 3, \"b\": 1, \"e\": 13, \"k\": 3, \"p\": 1, \"z\": 1 }, \"t\": { \"h\": 18, \"a\": 21, \"s\": 5, \"u\": 6, \"r\": 21, \"l\": 4, \"i\": 11, \"n\": 19, \"b\": 2, \"e\": 18, \"t\": 4, \"o\": 13, \"c\": 3, \"k\": 3, \"z\": 2, \"d\": 1, \"g\": 2, \"m\": 4, \"y\": 7 }, \"h\": { \"a\": 24, \"s\": 6, \"u\": 5, \"r\": 20, \"o\": 13, \"p\": 2, \"i\": 11, \"t\": 7, \"n\": 18, \"b\": 1, \"e\": 14, \"c\": 1, \"k\": 2, \"l\": 9, \"m\": 2, \"g\": 2, \"z\": 1, \"d\": 3, \"y\": 4, \"w\": 2, \"x\": 1, \"h\": 1 }, \"u\": { \"r\": 15, \"s\": 18, \"t\": 9, \"h\": 2, \"b\": 4, \"e\": 8, \"l\": 3, \"f\": 2, \"n\": 15, \"a\": 5, \"i\": 7, \"o\": 3, \"d\": 3, \"m\": 2, \"u\": 2, \"g\": 3, \"y\": 2, \"c\": 1 }, \"s\": { \"t\": 16, \"r\": 20, \"a\": 25, \"l\": 4, \"h\": 16, \"o\": 19, \"p\": 3, \"v\": 1, \"i\": 15, \"n\": 31, \"m\": 8, \"d\": 6, \"e\": 17, \"s\": 6, \"k\": 2, \"c\": 4, \"u\": 5, \"g\": 2, \"w\": 3, \"y\": 9 }, \"y\": { \"d\": 7, \"e\": 11, \"n\": 25, \"t\": 3, \"h\": 1, \"i\": 3, \"s\": 3, \"l\": 8, \"a\": 11, \"r\": 8, \"c\": 3, \"o\": 5, \"g\": 1, \"x\": 1, \"y\": 2, \"k\": 1 }, \"d\": { \"e\": 28, \"n\": 29, \"a\": 22, \"c\": 4, \"l\": 10, \"m\": 7, \"o\": 17, \"r\": 20, \"y\": 9, \"t\": 5, \"h\": 2, \"k\": 3, \"s\": 6, \"i\": 8, \"d\": 3, \"f\": 1, \"u\": 2, \"v\": 1, \"q\": 1, \"w\": 1, \"x\": 2 }, \"b\": { \"i\": 8, \"s\": 6, \"h\": 1, \"o\": 7, \"p\": 1, \"r\": 15, \"a\": 9, \"g\": 2, \"u\": 2, \"n\": 6, \"e\": 8, \"t\": 1, \"k\": 3, \"y\": 6, \"l\": 5, \"c\": 1 }, \"v\": { \"i\": 3, \"r\": 5, \"u\": 1, \"s\": 1, \"o\": 4, \"e\": 3, \"c\": 1, \"n\": 3, \"a\": 3, \"k\": 1, \"l\": 1, \"y\": 2 }, \"f\": { \"a\": 9, \"f\": 1, \"n\": 9, \"e\": 8, \"r\": 12, \"m\": 1, \"i\": 9, \"o\": 1, \"t\": 2, \"h\": 1, \"c\": 1, \"k\": 2, \"u\": 1, \"x\": 1, \"s\": 2, \"l\": 2, \"y\": 2 }, \"w\": { \"u\": 1, \"l\": 4, \"f\": 1, \"e\": 6, \"i\": 4, \"r\": 4, \"d\": 1, \"y\": 4, \"s\": 1, \"t\": 3, \"a\": 2, \"n\": 9, \"h\": 1, \"o\": 1, \"w\": 1 }, \"j\": { \"a\": 9, \"b\": 1, \"r\": 4, \"k\": 1, \"s\": 4, \"e\": 11, \"g\": 1, \"d\": 4, \"i\": 4, \"t\": 2, \"o\": 5, \"j\": 1, \"m\": 1, \"y\": 3, \"n\": 5, \"u\": 2, \"c\": 1 }, \"p\": { \"a\": 6, \"s\": 4, \"i\": 4, \"g\": 1, \"u\": 1, \"e\": 9, \"d\": 1, \"r\": 6, \"m\": 2, \"h\": 4, \"l\": 2, \"n\": 5, \"y\": 3, \"o\": 3, \"t\": 1, \"x\": 1, \"c\": 1 }, \"z\": { \"u\": 2, \"l\": 1, \"a\": 6, \"r\": 4, \"e\": 4, \"n\": 4, \"j\": 1, \"i\": 5, \"b\": 1, \"y\": 2, \"d\": 1, \"p\": 1, \"h\": 2, \"o\": 1 }, \"x\": { \"a\": 2, \"r\": 2, \"f\": 1, \"x\": 1, \"y\": 1, \"o\": 1, \"n\": 1, \"i\": 1, \"s\": 1 }, \"q\": { \"u\": 2, \"e\": 1, \"i\": 1, \"n\": 2 } },\r\n    \"n\": 281, \"maxcc\": 4, \"maxvv\": 2\r\n};\r\nconst MND_FantasyFemale = {\r\n    \"pairs\": { \"^\": { \"a\": 29, \"b\": 9, \"c\": 14, \"d\": 14, \"e\": 15, \"f\": 8, \"g\": 8, \"h\": 6, \"i\": 7, \"j\": 13, \"k\": 14, \"l\": 20, \"m\": 18, \"n\": 11, \"o\": 3, \"p\": 6, \"q\": 2, \"r\": 17, \"s\": 26, \"t\": 11, \"u\": 1, \"v\": 8, \"x\": 1, \"y\": 4, \"w\": 6, \"z\": 5 }, \"a\": { \"d\": 7, \"$\": 80, \"i\": 11, \"e\": 3, \"l\": 12, \"m\": 9, \"n\": 35, \"r\": 27, \"s\": 11, \"h\": 3, \"b\": 2, \"t\": 3, \"u\": 3, \"v\": 2, \"p\": 3, \"k\": 3, \"y\": 5, \"w\": 2, \"c\": 2, \"g\": 3, \"z\": 1 }, \"d\": { \"e\": 12, \"r\": 8, \"i\": 7, \"o\": 7, \"u\": 1, \"d\": 2, \"a\": 5, \"y\": 2, \"s\": 1, \"n\": 2 }, \"e\": { \"l\": 27, \"$\": 35, \"n\": 23, \"r\": 22, \"t\": 4, \"a\": 6, \"y\": 16, \"s\": 11, \"e\": 5, \"c\": 1, \"v\": 5, \"m\": 4, \"p\": 3, \"i\": 4, \"x\": 2, \"w\": 1, \"d\": 3, \"g\": 1, \"b\": 1 }, \"l\": { \"a\": 26, \"i\": 23, \"v\": 3, \"y\": 6, \"e\": 17, \"l\": 10, \"$\": 9, \"o\": 7, \"u\": 1, \"n\": 1, \"m\": 1 }, \"i\": { \"d\": 3, \"e\": 15, \"s\": 27, \"k\": 5, \"n\": 23, \"l\": 9, \"a\": 16, \"b\": 1, \"t\": 4, \"v\": 5, \"o\": 4, \"$\": 8, \"g\": 3, \"z\": 2, \"f\": 1, \"h\": 1, \"r\": 7, \"q\": 1, \"c\": 3, \"m\": 2, \"x\": 1 }, \"r\": { \"i\": 25, \"a\": 23, \"t\": 3, \"w\": 2, \"n\": 2, \"$\": 15, \"r\": 7, \"e\": 19, \"l\": 2, \"o\": 9, \"u\": 1, \"s\": 2, \"d\": 2, \"m\": 1, \"y\": 9, \"p\": 1, \"b\": 1, \"g\": 1 }, \"n\": { \"n\": 11, \"e\": 22, \"$\": 54, \"a\": 21, \"d\": 9, \"g\": 1, \"i\": 8, \"o\": 4, \"u\": 2, \"c\": 4, \"y\": 2, \"t\": 2, \"l\": 1, \"k\": 1, \"z\": 1 }, \"s\": { \"$\": 16, \"l\": 2, \"e\": 5, \"h\": 17, \"a\": 16, \"s\": 9, \"r\": 1, \"m\": 2, \"c\": 1, \"o\": 7, \"t\": 4, \"y\": 5, \"i\": 4, \"k\": 1, \"p\": 2 }, \"k\": { \"o\": 1, \"i\": 10, \"a\": 5, \"y\": 3, \"e\": 6, \"l\": 1, \"r\": 1, \"$\": 1 }, \"o\": { \"$\": 1, \"m\": 3, \"r\": 12, \"n\": 18, \"l\": 4, \"v\": 1, \"s\": 1, \"p\": 2, \"t\": 3, \"d\": 2, \"c\": 1, \"x\": 2, \"g\": 1, \"o\": 2, \"k\": 1, \"u\": 1, \"e\": 2, \"a\": 2, \"b\": 2, \"h\": 2, \"w\": 1 }, \"v\": { \"i\": 5, \"a\": 10, \"e\": 6, \"$\": 1, \"o\": 3 }, \"m\": { \"i\": 11, \"$\": 5, \"a\": 9, \"e\": 7, \"o\": 3, \"u\": 2, \"y\": 2, \"b\": 2 }, \"y\": { \"$\": 28, \"r\": 7, \"n\": 9, \"t\": 2, \"a\": 5, \"l\": 8, \"v\": 1, \"c\": 1, \"d\": 4, \"x\": 1, \"s\": 1 }, \"b\": { \"e\": 7, \"r\": 6, \"i\": 3, \"a\": 1, \"l\": 2, \"y\": 2 }, \"t\": { \"h\": 9, \"i\": 6, \"l\": 1, \"r\": 2, \"n\": 3, \"t\": 1, \"a\": 6, \"e\": 4, \"y\": 2, \"o\": 5, \"$\": 4 }, \"h\": { \"$\": 9, \"l\": 1, \"a\": 20, \"e\": 4, \"o\": 3, \"i\": 5, \"r\": 2, \"y\": 2, \"k\": 1, \"t\": 3, \"u\": 1 }, \"w\": { \"e\": 2, \"i\": 4, \"$\": 3, \"y\": 2, \"n\": 1, \"h\": 1, \"r\": 2 }, \"c\": { \"a\": 6, \"e\": 5, \"h\": 4, \"i\": 1, \"l\": 1, \"y\": 4, \"t\": 2, \"o\": 2, \"k\": 2 }, \"g\": { \"e\": 3, \"a\": 8, \"u\": 2, \"w\": 3, \"n\": 1, \"h\": 1, \"$\": 1 }, \"f\": { \"e\": 3, \"i\": 2, \"f\": 1, \"a\": 2, \"l\": 1, \"r\": 1 }, \"u\": { \"n\": 3, \"l\": 2, \"r\": 3, \"$\": 1, \"t\": 1, \"a\": 1, \"b\": 3, \"g\": 1, \"s\": 3, \"e\": 1, \"d\": 1, \"i\": 1 }, \"z\": { \"m\": 1, \"z\": 1, \"i\": 3, \"$\": 1, \"a\": 2, \"e\": 1, \"o\": 1 }, \"j\": { \"a\": 3, \"e\": 5, \"o\": 3, \"u\": 2 }, \"p\": { \"h\": 7, \"p\": 1, \"e\": 5, \"y\": 1, \"u\": 1, \"a\": 3 }, \"q\": { \"u\": 3 }, \"x\": { \"a\": 2, \"$\": 4, \"i\": 1 } },\r\n    \"counts\": { \"^\": 276, \"a\": 227, \"d\": 47, \"e\": 174, \"l\": 104, \"i\": 141, \"r\": 125, \"n\": 143, \"s\": 92, \"k\": 28, \"o\": 64, \"v\": 25, \"m\": 41, \"y\": 67, \"b\": 21, \"t\": 43, \"h\": 51, \"w\": 15, \"c\": 27, \"g\": 19, \"f\": 10, \"u\": 21, \"z\": 10, \"j\": 13, \"p\": 18, \"q\": 3, \"x\": 7 },\r\n    \"balances\": { \"a\": { \"d\": 19, \"e\": 55, \"l\": 36, \"a\": 49, \"i\": 55, \"r\": 49, \"n\": 74, \"s\": 26, \"k\": 9, \"o\": 12, \"v\": 3, \"m\": 13, \"y\": 18, \"b\": 6, \"t\": 14, \"h\": 14, \"w\": 5, \"g\": 5, \"u\": 7, \"c\": 4, \"p\": 5, \"x\": 3, \"z\": 2 }, \"d\": { \"e\": 24, \"l\": 12, \"a\": 23, \"i\": 16, \"d\": 3, \"r\": 12, \"n\": 25, \"s\": 5, \"h\": 2, \"v\": 2, \"o\": 11, \"m\": 3, \"k\": 1, \"u\": 2, \"y\": 9, \"q\": 1, \"w\": 1, \"x\": 2 }, \"e\": { \"l\": 40, \"a\": 48, \"i\": 30, \"d\": 9, \"e\": 33, \"n\": 56, \"r\": 31, \"s\": 34, \"t\": 10, \"h\": 11, \"y\": 29, \"c\": 3, \"v\": 6, \"g\": 6, \"m\": 5, \"o\": 10, \"f\": 2, \"p\": 4, \"k\": 4, \"x\": 3, \"w\": 1, \"b\": 2, \"z\": 1 }, \"l\": { \"a\": 53, \"i\": 41, \"d\": 6, \"e\": 37, \"n\": 29, \"v\": 3, \"y\": 15, \"s\": 13, \"l\": 16, \"r\": 12, \"c\": 2, \"t\": 9, \"b\": 1, \"h\": 6, \"u\": 3, \"z\": 2, \"o\": 12, \"p\": 2, \"k\": 2, \"x\": 2, \"w\": 3, \"g\": 1, \"m\": 1 }, \"i\": { \"d\": 6, \"e\": 41, \"n\": 45, \"s\": 34, \"k\": 6, \"o\": 12, \"l\": 23, \"i\": 11, \"a\": 58, \"y\": 8, \"b\": 3, \"t\": 11, \"h\": 10, \"v\": 5, \"g\": 3, \"r\": 16, \"z\": 3, \"m\": 5, \"f\": 2, \"u\": 3, \"q\": 2, \"c\": 4, \"x\": 1, \"w\": 1 }, \"r\": { \"i\": 42, \"e\": 40, \"n\": 35, \"s\": 22, \"a\": 54, \"b\": 5, \"t\": 6, \"h\": 6, \"w\": 3, \"l\": 12, \"r\": 10, \"d\": 3, \"g\": 6, \"p\": 3, \"o\": 12, \"x\": 1, \"u\": 1, \"k\": 3, \"m\": 3, \"y\": 19, \"c\": 2, \"z\": 1, \"v\": 1 }, \"n\": { \"n\": 18, \"e\": 39, \"a\": 39, \"d\": 11, \"r\": 10, \"h\": 5, \"g\": 1, \"l\": 8, \"i\": 19, \"u\": 4, \"o\": 8, \"y\": 15, \"t\": 4, \"s\": 8, \"f\": 2, \"v\": 1, \"c\": 7, \"k\": 7, \"b\": 1, \"q\": 1, \"z\": 1, \"m\": 1, \"x\": 2 }, \"k\": { \"o\": 1, \"i\": 14, \"n\": 9, \"a\": 13, \"t\": 2, \"h\": 2, \"e\": 14, \"r\": 11, \"d\": 3, \"y\": 7, \"l\": 4, \"g\": 1, \"m\": 1, \"b\": 1, \"s\": 1, \"z\": 1 }, \"s\": { \"l\": 12, \"i\": 17, \"n\": 28, \"e\": 23, \"a\": 52, \"h\": 22, \"y\": 13, \"s\": 16, \"b\": 1, \"r\": 11, \"m\": 5, \"p\": 4, \"k\": 2, \"c\": 4, \"d\": 3, \"w\": 3, \"v\": 3, \"o\": 12, \"t\": 6, \"u\": 1 }, \"v\": { \"i\": 10, \"n\": 11, \"a\": 19, \"g\": 1, \"e\": 12, \"l\": 6, \"y\": 3, \"r\": 6, \"s\": 2, \"k\": 2, \"p\": 1, \"u\": 1, \"d\": 2, \"h\": 1, \"o\": 5, \"v\": 1, \"m\": 1 }, \"m\": { \"i\": 22, \"l\": 10, \"y\": 3, \"a\": 27, \"k\": 3, \"n\": 12, \"e\": 18, \"d\": 7, \"r\": 13, \"s\": 5, \"o\": 8, \"p\": 1, \"h\": 3, \"g\": 3, \"u\": 3, \"t\": 3, \"b\": 2, \"q\": 1, \"c\": 2, \"z\": 1, \"x\": 1 }, \"b\": { \"e\": 11, \"t\": 2, \"h\": 2, \"l\": 8, \"i\": 8, \"s\": 4, \"a\": 9, \"r\": 10, \"y\": 6, \"k\": 2, \"o\": 3, \"g\": 1, \"n\": 3, \"c\": 1 }, \"t\": { \"h\": 9, \"i\": 14, \"s\": 5, \"e\": 17, \"a\": 24, \"l\": 5, \"n\": 11, \"r\": 11, \"t\": 2, \"y\": 8, \"v\": 2, \"m\": 3, \"k\": 1, \"o\": 6, \"c\": 2, \"g\": 1, \"b\": 1 }, \"w\": { \"e\": 8, \"n\": 13, \"d\": 1, \"o\": 2, \"l\": 4, \"y\": 4, \"i\": 5, \"t\": 3, \"h\": 2, \"a\": 1, \"w\": 1, \"r\": 3 }, \"h\": { \"l\": 11, \"e\": 16, \"y\": 6, \"a\": 34, \"r\": 16, \"n\": 18, \"i\": 16, \"o\": 9, \"k\": 1, \"t\": 5, \"d\": 3, \"s\": 9, \"w\": 3, \"v\": 1, \"p\": 1, \"u\": 1, \"x\": 1, \"h\": 1 }, \"c\": { \"a\": 19, \"i\": 8, \"t\": 4, \"l\": 11, \"n\": 7, \"m\": 2, \"e\": 15, \"s\": 5, \"h\": 5, \"r\": 11, \"y\": 6, \"v\": 1, \"o\": 4, \"p\": 1, \"u\": 1, \"k\": 2, \"z\": 1 }, \"y\": { \"r\": 13, \"a\": 15, \"n\": 25, \"e\": 13, \"t\": 2, \"h\": 1, \"l\": 10, \"v\": 3, \"i\": 5, \"c\": 3, \"s\": 2, \"o\": 4, \"d\": 4, \"x\": 1, \"y\": 2, \"k\": 1 }, \"o\": { \"m\": 4, \"i\": 18, \"k\": 4, \"n\": 39, \"a\": 21, \"r\": 16, \"l\": 11, \"y\": 7, \"v\": 2, \"s\": 3, \"e\": 15, \"p\": 4, \"h\": 6, \"t\": 6, \"d\": 3, \"g\": 4, \"c\": 1, \"x\": 3, \"o\": 3, \"u\": 2, \"q\": 1, \"b\": 2, \"w\": 1 }, \"g\": { \"e\": 8, \"l\": 7, \"i\": 6, \"n\": 15, \"a\": 13, \"d\": 3, \"r\": 1, \"m\": 1, \"u\": 3, \"w\": 3, \"o\": 2, \"y\": 2, \"t\": 3, \"h\": 2, \"s\": 5 }, \"f\": { \"e\": 6, \"y\": 3, \"i\": 6, \"o\": 1, \"n\": 5, \"a\": 5, \"f\": 1, \"r\": 7, \"s\": 2, \"l\": 2, \"k\": 1 }, \"u\": { \"n\": 8, \"d\": 2, \"u\": 2, \"l\": 3, \"a\": 8, \"r\": 6, \"e\": 6, \"t\": 6, \"b\": 3, \"i\": 4, \"s\": 6, \"y\": 2, \"g\": 1, \"o\": 1, \"c\": 1 }, \"z\": { \"m\": 1, \"a\": 5, \"z\": 1, \"i\": 5, \"e\": 5, \"n\": 2, \"p\": 1, \"h\": 2, \"y\": 1, \"r\": 2, \"o\": 1 }, \"j\": { \"a\": 6, \"s\": 5, \"m\": 2, \"i\": 5, \"n\": 9, \"e\": 14, \"f\": 2, \"r\": 3, \"o\": 4, \"v\": 1, \"p\": 1, \"h\": 1, \"y\": 3, \"d\": 2, \"u\": 2, \"t\": 1, \"c\": 1 }, \"p\": { \"h\": 7, \"i\": 5, \"n\": 6, \"e\": 12, \"p\": 1, \"a\": 8, \"l\": 4, \"y\": 4, \"r\": 6, \"t\": 2, \"u\": 1, \"m\": 1, \"s\": 2, \"o\": 3, \"x\": 1, \"c\": 1 }, \"q\": { \"u\": 3, \"a\": 2, \"r\": 1, \"e\": 1, \"i\": 1, \"n\": 2 }, \"x\": { \"a\": 4, \"n\": 2, \"i\": 1, \"s\": 1 } },\r\n    \"n\": 276, \"maxcc\": 3, \"maxvv\": 2\r\n};\r\nconst MND_FantasyNeutral = {\r\n    \"pairs\": { \"^\": { \"a\": 44, \"b\": 13, \"c\": 22, \"d\": 26, \"e\": 19, \"f\": 13, \"g\": 19, \"h\": 7, \"i\": 11, \"j\": 17, \"k\": 19, \"l\": 23, \"m\": 25, \"n\": 15, \"o\": 6, \"p\": 8, \"q\": 2, \"r\": 23, \"s\": 37, \"t\": 21, \"u\": 5, \"v\": 10, \"x\": 3, \"y\": 5, \"w\": 7, \"z\": 8 }, \"a\": { \"d\": 7, \"$\": 83, \"i\": 12, \"e\": 8, \"l\": 24, \"m\": 16, \"n\": 56, \"r\": 55, \"s\": 19, \"h\": 3, \"b\": 3, \"t\": 5, \"u\": 5, \"v\": 4, \"p\": 4, \"a\": 2, \"g\": 8, \"k\": 6, \"c\": 7, \"y\": 6, \"f\": 1, \"z\": 3, \"x\": 1, \"w\": 2 }, \"d\": { \"e\": 17, \"r\": 13, \"i\": 9, \"o\": 10, \"u\": 1, \"d\": 3, \"a\": 14, \"$\": 7, \"y\": 2, \"s\": 1, \"n\": 2 }, \"e\": { \"l\": 36, \"$\": 39, \"n\": 29, \"r\": 33, \"t\": 6, \"a\": 8, \"y\": 16, \"s\": 14, \"e\": 7, \"c\": 2, \"v\": 5, \"m\": 6, \"p\": 3, \"i\": 5, \"k\": 3, \"d\": 6, \"o\": 2, \"u\": 1, \"g\": 4, \"x\": 2, \"w\": 1, \"b\": 1 }, \"l\": { \"a\": 38, \"i\": 25, \"v\": 3, \"y\": 6, \"e\": 20, \"l\": 12, \"$\": 15, \"o\": 9, \"u\": 2, \"k\": 1, \"h\": 1, \"t\": 2, \"f\": 2, \"g\": 2, \"c\": 1, \"m\": 2, \"n\": 1 }, \"i\": { \"d\": 3, \"e\": 16, \"s\": 36, \"k\": 5, \"n\": 35, \"l\": 11, \"a\": 19, \"b\": 1, \"t\": 7, \"v\": 6, \"o\": 5, \"$\": 10, \"g\": 5, \"z\": 2, \"f\": 1, \"h\": 1, \"r\": 12, \"u\": 5, \"c\": 6, \"m\": 6, \"q\": 1, \"x\": 1 }, \"r\": { \"i\": 37, \"a\": 36, \"t\": 6, \"w\": 3, \"n\": 6, \"$\": 43, \"r\": 8, \"e\": 26, \"l\": 3, \"o\": 19, \"u\": 4, \"s\": 2, \"d\": 5, \"m\": 2, \"k\": 2, \"g\": 3, \"y\": 10, \"f\": 1, \"p\": 1, \"b\": 1 }, \"n\": { \"n\": 12, \"e\": 25, \"$\": 88, \"a\": 31, \"d\": 19, \"g\": 2, \"i\": 13, \"o\": 5, \"u\": 2, \"c\": 6, \"y\": 2, \"t\": 6, \"s\": 1, \"j\": 1, \"l\": 1, \"k\": 1, \"z\": 1 }, \"s\": { \"$\": 31, \"l\": 2, \"e\": 5, \"h\": 22, \"a\": 24, \"s\": 10, \"r\": 1, \"m\": 3, \"c\": 1, \"o\": 9, \"t\": 13, \"y\": 6, \"i\": 8, \"k\": 1, \"p\": 2 }, \"k\": { \"o\": 3, \"i\": 16, \"a\": 8, \"y\": 3, \"s\": 1, \"$\": 3, \"h\": 1, \"r\": 2, \"e\": 7, \"l\": 1 }, \"o\": { \"$\": 3, \"m\": 5, \"r\": 29, \"n\": 35, \"l\": 7, \"v\": 1, \"s\": 3, \"p\": 3, \"t\": 4, \"d\": 3, \"c\": 1, \"x\": 2, \"b\": 3, \"j\": 1, \"y\": 1, \"a\": 3, \"k\": 2, \"g\": 2, \"o\": 2, \"u\": 1, \"e\": 2, \"h\": 2, \"w\": 1 }, \"v\": { \"i\": 7, \"a\": 10, \"e\": 7, \"$\": 1, \"o\": 5 }, \"m\": { \"i\": 14, \"$\": 9, \"a\": 15, \"e\": 10, \"o\": 9, \"u\": 3, \"y\": 4, \"m\": 1, \"b\": 3 }, \"y\": { \"$\": 29, \"r\": 10, \"n\": 11, \"t\": 3, \"a\": 5, \"l\": 9, \"v\": 1, \"d\": 6, \"s\": 2, \"o\": 1, \"c\": 1, \"x\": 1 }, \"b\": { \"e\": 8, \"r\": 7, \"i\": 5, \"o\": 2, \"n\": 1, \"a\": 2, \"u\": 1, \"l\": 2, \"y\": 2 }, \"t\": { \"h\": 27, \"i\": 10, \"l\": 1, \"r\": 4, \"n\": 3, \"t\": 1, \"a\": 9, \"e\": 7, \"y\": 3, \"$\": 9, \"o\": 8 }, \"h\": { \"$\": 17, \"l\": 1, \"a\": 28, \"e\": 9, \"o\": 5, \"i\": 6, \"r\": 4, \"y\": 2, \"k\": 2, \"t\": 3, \"u\": 3, \"b\": 1 }, \"w\": { \"e\": 3, \"i\": 4, \"u\": 1, \"y\": 3, \"$\": 3, \"n\": 1, \"h\": 1, \"r\": 2 }, \"c\": { \"a\": 9, \"e\": 6, \"h\": 6, \"i\": 1, \"l\": 3, \"y\": 5, \"t\": 2, \"o\": 7, \"u\": 2, \"$\": 2, \"k\": 3, \"n\": 1 }, \"g\": { \"e\": 7, \"a\": 14, \"u\": 6, \"w\": 4, \"n\": 2, \"o\": 3, \"i\": 1, \"r\": 3, \"h\": 2, \"$\": 5 }, \"f\": { \"e\": 5, \"i\": 3, \"f\": 1, \"a\": 5, \"n\": 1, \"$\": 2, \"r\": 2, \"l\": 1 }, \"u\": { \"n\": 5, \"l\": 5, \"r\": 10, \"$\": 2, \"t\": 3, \"a\": 1, \"b\": 4, \"s\": 12, \"e\": 2, \"m\": 1, \"g\": 2, \"f\": 1, \"d\": 1, \"i\": 1 }, \"z\": { \"m\": 1, \"z\": 1, \"i\": 3, \"u\": 2, \"a\": 3, \"e\": 2, \"y\": 1, \"$\": 1, \"o\": 1 }, \"j\": { \"a\": 5, \"e\": 6, \"o\": 5, \"i\": 1, \"u\": 2 }, \"p\": { \"h\": 8, \"p\": 1, \"e\": 5, \"y\": 1, \"u\": 1, \"$\": 1, \"a\": 4, \"i\": 1 }, \"q\": { \"u\": 3 }, \"x\": { \"a\": 3, \"$\": 5, \"y\": 1, \"i\": 1 } },\r\n    \"counts\": { \"^\": 408, \"a\": 340, \"d\": 79, \"e\": 229, \"l\": 142, \"i\": 194, \"r\": 218, \"n\": 216, \"s\": 138, \"k\": 45, \"o\": 116, \"v\": 30, \"m\": 68, \"y\": 79, \"b\": 30, \"t\": 82, \"h\": 81, \"w\": 18, \"c\": 47, \"g\": 47, \"f\": 20, \"u\": 50, \"z\": 15, \"j\": 19, \"p\": 22, \"q\": 3, \"x\": 10 },\r\n    \"balances\": { \"a\": { \"d\": 28, \"e\": 72, \"l\": 58, \"a\": 81, \"i\": 74, \"r\": 104, \"n\": 124, \"s\": 45, \"k\": 19, \"o\": 29, \"v\": 6, \"m\": 26, \"y\": 21, \"b\": 7, \"t\": 27, \"h\": 29, \"w\": 5, \"g\": 14, \"u\": 19, \"c\": 13, \"p\": 6, \"f\": 4, \"z\": 5, \"x\": 5 }, \"d\": { \"e\": 38, \"l\": 15, \"a\": 38, \"i\": 21, \"d\": 5, \"r\": 26, \"n\": 37, \"s\": 9, \"h\": 4, \"v\": 2, \"o\": 21, \"m\": 9, \"k\": 4, \"u\": 3, \"y\": 10, \"c\": 4, \"t\": 5, \"f\": 1, \"q\": 1, \"w\": 1, \"x\": 2 }, \"e\": { \"l\": 55, \"a\": 62, \"i\": 45, \"d\": 20, \"e\": 45, \"n\": 74, \"r\": 57, \"s\": 41, \"t\": 19, \"h\": 18, \"y\": 30, \"c\": 6, \"v\": 6, \"g\": 12, \"m\": 11, \"o\": 17, \"f\": 3, \"p\": 4, \"k\": 10, \"u\": 4, \"w\": 3, \"j\": 1, \"x\": 3, \"b\": 2, \"z\": 1 }, \"l\": { \"a\": 71, \"i\": 48, \"d\": 9, \"e\": 42, \"n\": 40, \"v\": 4, \"y\": 18, \"s\": 18, \"l\": 18, \"r\": 21, \"c\": 6, \"t\": 13, \"b\": 1, \"h\": 13, \"u\": 6, \"z\": 2, \"o\": 18, \"p\": 2, \"k\": 4, \"g\": 6, \"m\": 4, \"f\": 2, \"x\": 2, \"w\": 3 }, \"i\": { \"d\": 11, \"e\": 46, \"n\": 65, \"s\": 51, \"k\": 7, \"o\": 18, \"l\": 26, \"i\": 14, \"a\": 66, \"y\": 8, \"b\": 4, \"t\": 19, \"h\": 14, \"v\": 6, \"g\": 8, \"r\": 27, \"z\": 3, \"m\": 11, \"f\": 2, \"u\": 13, \"p\": 1, \"c\": 7, \"w\": 2, \"q\": 2, \"x\": 1 }, \"r\": { \"i\": 65, \"e\": 50, \"n\": 66, \"s\": 39, \"a\": 84, \"b\": 6, \"t\": 18, \"h\": 15, \"w\": 4, \"l\": 23, \"r\": 20, \"d\": 10, \"g\": 11, \"p\": 4, \"o\": 30, \"x\": 2, \"u\": 10, \"k\": 9, \"c\": 6, \"m\": 11, \"y\": 21, \"f\": 2, \"z\": 2, \"v\": 1 }, \"n\": { \"n\": 27, \"e\": 44, \"a\": 57, \"d\": 21, \"r\": 20, \"h\": 9, \"g\": 4, \"l\": 11, \"i\": 32, \"u\": 9, \"o\": 12, \"y\": 16, \"t\": 11, \"s\": 18, \"f\": 3, \"v\": 1, \"c\": 10, \"k\": 9, \"m\": 4, \"b\": 2, \"j\": 1, \"q\": 1, \"z\": 1, \"x\": 2 }, \"k\": { \"o\": 6, \"i\": 22, \"n\": 18, \"a\": 19, \"t\": 7, \"h\": 4, \"e\": 17, \"r\": 16, \"d\": 3, \"y\": 7, \"s\": 4, \"l\": 10, \"g\": 3, \"m\": 1, \"b\": 1, \"z\": 1 }, \"s\": { \"l\": 14, \"i\": 25, \"n\": 42, \"e\": 29, \"a\": 69, \"h\": 29, \"y\": 15, \"s\": 18, \"b\": 1, \"r\": 27, \"m\": 9, \"p\": 5, \"k\": 4, \"c\": 6, \"d\": 7, \"w\": 4, \"v\": 4, \"o\": 21, \"t\": 17, \"u\": 5, \"g\": 2 }, \"v\": { \"i\": 13, \"n\": 12, \"a\": 21, \"g\": 1, \"e\": 13, \"l\": 7, \"y\": 3, \"r\": 8, \"s\": 3, \"k\": 3, \"p\": 1, \"u\": 2, \"d\": 2, \"h\": 1, \"o\": 7, \"v\": 1, \"m\": 1, \"c\": 1 }, \"m\": { \"i\": 28, \"l\": 13, \"y\": 5, \"a\": 35, \"k\": 4, \"n\": 21, \"e\": 23, \"d\": 9, \"r\": 23, \"s\": 8, \"o\": 19, \"p\": 1, \"h\": 6, \"g\": 5, \"u\": 6, \"t\": 7, \"m\": 2, \"c\": 4, \"b\": 3, \"q\": 1, \"z\": 1, \"x\": 1 }, \"b\": { \"e\": 12, \"t\": 3, \"h\": 3, \"l\": 8, \"i\": 11, \"s\": 9, \"a\": 13, \"r\": 16, \"o\": 7, \"p\": 1, \"g\": 2, \"u\": 2, \"n\": 6, \"k\": 3, \"y\": 6, \"c\": 1 }, \"t\": { \"h\": 27, \"i\": 22, \"s\": 10, \"e\": 28, \"a\": 39, \"l\": 8, \"n\": 22, \"r\": 29, \"t\": 5, \"y\": 9, \"v\": 2, \"m\": 5, \"k\": 4, \"u\": 6, \"b\": 2, \"o\": 13, \"c\": 3, \"z\": 2, \"d\": 1, \"g\": 2 }, \"w\": { \"e\": 9, \"n\": 14, \"d\": 2, \"o\": 2, \"l\": 5, \"y\": 5, \"i\": 6, \"t\": 4, \"h\": 2, \"u\": 1, \"f\": 1, \"r\": 4, \"s\": 1, \"a\": 2, \"w\": 1 }, \"h\": { \"l\": 15, \"e\": 24, \"y\": 6, \"a\": 47, \"r\": 29, \"n\": 24, \"i\": 20, \"o\": 14, \"k\": 3, \"t\": 8, \"d\": 4, \"s\": 12, \"w\": 3, \"v\": 1, \"u\": 5, \"p\": 2, \"b\": 1, \"c\": 1, \"m\": 2, \"g\": 2, \"z\": 1, \"x\": 1, \"h\": 1 }, \"c\": { \"a\": 27, \"i\": 14, \"t\": 7, \"l\": 14, \"n\": 13, \"m\": 4, \"e\": 17, \"s\": 10, \"h\": 9, \"r\": 17, \"y\": 8, \"v\": 3, \"c\": 1, \"u\": 5, \"o\": 10, \"b\": 1, \"k\": 3, \"p\": 1, \"z\": 1 }, \"y\": { \"r\": 17, \"a\": 20, \"n\": 31, \"e\": 15, \"t\": 4, \"h\": 2, \"l\": 12, \"v\": 3, \"i\": 6, \"c\": 4, \"s\": 4, \"o\": 6, \"d\": 7, \"g\": 1, \"x\": 1, \"y\": 2, \"k\": 1 }, \"o\": { \"m\": 9, \"i\": 30, \"k\": 5, \"n\": 68, \"a\": 30, \"r\": 42, \"l\": 15, \"y\": 9, \"v\": 2, \"s\": 15, \"e\": 16, \"p\": 5, \"h\": 8, \"t\": 10, \"d\": 7, \"g\": 9, \"c\": 2, \"x\": 3, \"u\": 7, \"o\": 9, \"b\": 3, \"j\": 1, \"q\": 1, \"w\": 1 }, \"g\": { \"e\": 15, \"l\": 12, \"i\": 12, \"n\": 27, \"a\": 28, \"d\": 8, \"r\": 18, \"m\": 4, \"u\": 10, \"w\": 5, \"o\": 8, \"y\": 2, \"t\": 6, \"h\": 6, \"s\": 10, \"f\": 2, \"b\": 1 }, \"f\": { \"e\": 11, \"y\": 3, \"i\": 10, \"o\": 2, \"n\": 10, \"a\": 10, \"f\": 2, \"r\": 14, \"m\": 1, \"t\": 2, \"h\": 1, \"c\": 1, \"k\": 2, \"u\": 1, \"x\": 1, \"s\": 2, \"l\": 2 }, \"u\": { \"n\": 18, \"d\": 4, \"u\": 3, \"l\": 6, \"a\": 13, \"r\": 19, \"e\": 10, \"t\": 11, \"b\": 5, \"i\": 8, \"s\": 18, \"h\": 2, \"f\": 2, \"o\": 3, \"m\": 2, \"g\": 3, \"y\": 2, \"c\": 1 }, \"z\": { \"m\": 1, \"a\": 7, \"z\": 1, \"i\": 7, \"e\": 6, \"u\": 2, \"l\": 1, \"r\": 4, \"n\": 4, \"j\": 1, \"b\": 1, \"y\": 2, \"d\": 1, \"p\": 1, \"h\": 2, \"o\": 1 }, \"j\": { \"a\": 11, \"s\": 6, \"m\": 2, \"i\": 7, \"n\": 9, \"e\": 17, \"f\": 2, \"r\": 5, \"o\": 7, \"v\": 1, \"p\": 1, \"h\": 1, \"b\": 1, \"k\": 1, \"g\": 1, \"d\": 4, \"t\": 2, \"j\": 1, \"y\": 3, \"u\": 2, \"c\": 1 }, \"p\": { \"h\": 8, \"i\": 7, \"n\": 6, \"e\": 14, \"p\": 1, \"a\": 11, \"l\": 5, \"y\": 4, \"r\": 7, \"t\": 2, \"u\": 2, \"s\": 4, \"g\": 1, \"d\": 1, \"m\": 2, \"o\": 3, \"x\": 1, \"c\": 1 }, \"q\": { \"u\": 3, \"a\": 2, \"r\": 1, \"e\": 1, \"i\": 1, \"n\": 2 }, \"x\": { \"a\": 6, \"n\": 3, \"r\": 2, \"f\": 1, \"x\": 1, \"y\": 1, \"o\": 1, \"i\": 1, \"s\": 1 } },\r\n    \"n\": 408, \"maxcc\": 4, \"maxvv\": 2\r\n};\r\nconst MarkovFlavors = {\r\n    'fantasy': { 'm': MND_FantasyMale, 'f': MND_FantasyFemale, 'x': MND_FantasyNeutral }\r\n};\r\nfunction isvowel(s) {\r\n    return s === 'a' || s === 'i' || s === 'e' || s === 'o' || s === 'u';\r\n}\r\nfunction isconsonant(s) {\r\n    return s !== 'y' && !isvowel(s);\r\n}\r\nfunction namegenMarkov(gender, flavor, rng) {\r\n    if (!(flavor in MarkovFlavors))\r\n        flavor = 'fantasy';\r\n    let mnd = MarkovFlavors[flavor][gender];\r\n    let length = rng.d3() + rng.d4() + rng.d5();\r\n    let minlength = 3;\r\n    let prev = '^';\r\n    let s = '';\r\n    let i = 0;\r\n    let niter = 100;\r\n    let cc = 0, vv = 0, nvy = 0, d = false;\r\n    function pick(prev) {\r\n        let n = rng.nextInt(mnd.counts[prev]);\r\n        for (let next in mnd.pairs[prev]) {\r\n            n -= mnd.pairs[prev][next];\r\n            if (n <= 0)\r\n                return next;\r\n        }\r\n        return '<?' + prev + '?>';\r\n    }\r\n    while (niter-- > 0) {\r\n        // pick 2 follow-ups and select most fitting\r\n        let next1 = pick(prev);\r\n        let next2 = pick(prev);\r\n        let next;\r\n        if (next1 === '$') {\r\n            next = next2;\r\n        }\r\n        else if (next2 === '$') {\r\n            next = next1;\r\n        }\r\n        else if (prev === '^') {\r\n            next = rng.nextBoolean() ? next1 : next2;\r\n        }\r\n        else {\r\n            // pick by \"balance\", pick letter most \"liked\" by previous\r\n            let b1 = 0, b2 = 0;\r\n            for (let c of s) {\r\n                b1 += (mnd.balances[c] ?? {})[next1] ?? 0;\r\n                b2 += (mnd.balances[c] ?? {})[next2] ?? 0;\r\n            }\r\n            next = b1 > b2 ? next1 : next2;\r\n        }\r\n        // reroll if...\r\n        if (d && next === prev)\r\n            continue; // repeating same letter 3 times\r\n        if (isvowel(next) && vv >= mnd.maxvv)\r\n            continue; // too many consecutive vowels\r\n        if (isconsonant(next) && cc >= mnd.maxcc)\r\n            continue; // same for consonants\r\n        if (isvowel(next) || next === 'y')\r\n            nvy++;\r\n        if (isvowel(next))\r\n            vv++;\r\n        else\r\n            vv = 0;\r\n        if (isconsonant(next))\r\n            cc++;\r\n        else\r\n            cc = 0;\r\n        d = next === prev;\r\n        if (next === '$') {\r\n            if (nvy === 0)\r\n                continue; // reroll if no vowels or 'y'\r\n            if (i >= length) {\r\n                // offer end after reaching required length\r\n                break;\r\n            }\r\n            // offer end before required length\r\n            if (i < minlength)\r\n                continue;\r\n            else if (i === length - 1 && rng.nextBoolean())\r\n                continue; // can stop one letter short\r\n            else\r\n                continue;\r\n        }\r\n        else if (i >= length && next !== '$' && nvy > 0) {\r\n            // no end after reaching required length\r\n            if (i === length) {\r\n                if (rng.nextBoolean())\r\n                    continue; // can stop one letter extra\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (next === '$')\r\n            break;\r\n        if (next.includes('?'))\r\n            break;\r\n        s += next;\r\n        prev = next;\r\n        i++;\r\n    }\r\n    if (s.length === 0)\r\n        return '';\r\n    s = s[0].toUpperCase() + s.slice(1);\r\n    return s;\r\n}\r\n// Name generator - random consonant-vowel sequence of length 3..9\r\nconst rfnVowels = [\r\n    'a', 'e', 'i', 'o', 'u',\r\n    'a', 'e', 'i', 'o', 'u',\r\n    'ea', 'ae', 'ee', 'ie', 'ia',\r\n    'y'\r\n];\r\nconst rfnConstants = [\r\n    'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'r', 's', 't', 'v', 'w', 'x', 'z',\r\n    'b', 'd', 'f', 'l', 'n', 'r', 's', 't',\r\n    'b', 'd', 'f', 'l', 'n', 'r', 's', 't',\r\n    'gh', 'll', 'ph', 'kh', 'th', 'st'\r\n];\r\nfunction namegenRcv(femininity, rng) {\r\n    let name = '';\r\n    let c = rng.nextBoolean() ? 'c' : 'v';\r\n    let n = rng.d3() + rng.d6();\r\n    while (n-- > 0) {\r\n        if (c === 'c') {\r\n            name += rng.pick(rfnConstants);\r\n            c = 'v';\r\n        }\r\n        else {\r\n            name += rng.pick(rfnVowels);\r\n            c = 'c';\r\n        }\r\n    }\r\n    return name.capitalize();\r\n}\r\nconst NameLists = {\r\n    'european': {\r\n        both: ['Alex', 'Charlie', 'Chris', 'Morgan', 'Quinn', 'Robin', 'Ross', 'Sam', 'Sydney'],\r\n        male: ['Albert', 'Andy', 'Brian', 'Daniel', 'Eric', 'Gary', 'Jordan', 'Nick', 'Richard', 'Roland', 'Ruben', 'Tim', 'Tom'],\r\n        female: ['Alice', 'Diana', 'Elizabeth', 'Emily', 'Eve', 'Helen', 'Jane', 'Jeanne', 'Kate', 'Lauren', 'Lena', 'Lisa', 'Mary', 'Melissa', 'Rachel', 'Tiffany', 'Tina']\r\n    },\r\n    'japanese': {\r\n        both: ['Kagami', 'Homura', 'Makoto', 'Naoki', 'Rin', 'Yutaka'],\r\n        male: ['Hideo', 'Kaito', 'Kenji', 'Ryo', 'Shigery', 'Shin', 'Shiro'],\r\n        female: ['Aiko', 'Aoi', 'Hitomi', 'Kasumi', 'Midori', 'Misaki', 'Sakura', 'Sayaka', 'Yoko', 'Yui']\r\n    },\r\n    'chinese': {\r\n        both: ['Chi', 'Fei', 'Feng', 'Jun', 'Long', 'Wei', 'Yang', 'Ye'],\r\n        male: ['Chen', 'Cheng', 'Hao', 'Kong', 'Lian', 'Liang', 'Ming', 'On', 'Shen', 'Sheng', 'Tao', 'Ye'],\r\n        female: ['An', 'Ying', 'Xue', 'Jia Li', 'Jiang Li', 'Li Mei', 'Li Ming', 'Li Wei']\r\n    }\r\n};\r\nfunction namegenList(gender, flavor, rng) {\r\n    if (!(flavor in NameLists))\r\n        flavor = rng.pick(Object.keys(NameLists));\r\n    let group = NameLists[flavor];\r\n    let nb = group.both.length;\r\n    let nm = group.male.length;\r\n    let nf = group.female.length;\r\n    if (gender == 'm' && rng.nextBoolean(nm / (nm + nb))) {\r\n        return rng.pick(group.male);\r\n    }\r\n    else if (gender == 'f' && rng.nextBoolean(nf / (nf + nb))) {\r\n        return rng.pick(group.female);\r\n    }\r\n    else {\r\n        return rng.pick(group.both);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/text/names.ts?");

/***/ }),

/***/ "./src/game/data/tiles.ts":
/*!********************************!*\
  !*** ./src/game/data/tiles.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterTiles\": () => (/* binding */ gdRegisterTiles)\n/* harmony export */ });\n/*\r\n * Created by aimozg on 20.10.2022.\r\n */\r\nfunction gdRegisterTiles(gd) {\r\n    gd.addTiles([{\r\n            ch: '#',\r\n            id: '/wall',\r\n            name: 'wall',\r\n            fg: \"#cccccc\",\r\n            bg: \"#999999\",\r\n            solid: true\r\n        }, {\r\n            ch: '%',\r\n            id: '/rubble',\r\n            name: 'rubble',\r\n            fg: \"#cccccc\",\r\n            walkable: false\r\n        }]);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/tiles.ts?");

/***/ }),

/***/ "./src/game/data/traits.ts":
/*!*********************************!*\
  !*** ./src/game/data/traits.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterTraits\": () => (/* binding */ gdRegisterTraits)\n/* harmony export */ });\n/* harmony import */ var _traits_starting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./traits/starting */ \"./src/game/data/traits/starting.ts\");\n\r\nfunction gdRegisterTraits(gd) {\r\n    gd.logger.debug(\"gdRegisterTraits\");\r\n    gd.addTraits(_traits_starting__WEBPACK_IMPORTED_MODULE_0__.GdStartingTraits.ALL);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/traits.ts?");

/***/ }),

/***/ "./src/game/data/traits/starting.ts":
/*!******************************************!*\
  !*** ./src/game/data/traits/starting.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GdStartingTraits\": () => (/* binding */ GdStartingTraits)\n/* harmony export */ });\n/* harmony import */ var _engine_rules_TraitType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/rules/TraitType */ \"./src/engine/rules/TraitType.ts\");\n/*\r\n * Created by aimozg on 27.08.2022.\r\n */\r\n\r\nvar GdStartingTraits;\r\n(function (GdStartingTraits) {\r\n    GdStartingTraits.MalleableBody = new _engine_rules_TraitType__WEBPACK_IMPORTED_MODULE_0__.SimpleTraitType(\"/st_malleablebody\", \"Malleable Body\", \"Transformatives are 20% more potent.\");\r\n    GdStartingTraits.StableBody = new _engine_rules_TraitType__WEBPACK_IMPORTED_MODULE_0__.SimpleTraitType(\"/st_stablebody\", \"Stable Body\", \"Transformatives are 20% less potent.\");\r\n    GdStartingTraits.ALL = [GdStartingTraits.MalleableBody, GdStartingTraits.StableBody];\r\n})(GdStartingTraits || (GdStartingTraits = {}));\r\n\n\n//# sourceURL=webpack://aap18/./src/game/data/traits/starting.ts?");

/***/ }),

/***/ "./src/game/gamedata.ts":
/*!******************************!*\
  !*** ./src/game/gamedata.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadGameData\": () => (/* binding */ loadGameData)\n/* harmony export */ });\n/* harmony import */ var _GameDataBuilder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GameDataBuilder */ \"./src/game/GameDataBuilder.ts\");\n/* harmony import */ var _data_classes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/classes */ \"./src/game/data/classes.ts\");\n/* harmony import */ var _data_origins__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data/origins */ \"./src/game/data/origins.ts\");\n/* harmony import */ var _data_racialGroups__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data/racialGroups */ \"./src/game/data/racialGroups.ts\");\n/* harmony import */ var _story__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../story */ \"./src/story/index.ts\");\n/* harmony import */ var _data_bodyParts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data/bodyParts */ \"./src/game/data/bodyParts.ts\");\n/* harmony import */ var _data_colors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data/colors */ \"./src/game/data/colors.ts\");\n/* harmony import */ var _data_traits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./data/traits */ \"./src/game/data/traits.ts\");\n/* harmony import */ var _data_tiles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./data/tiles */ \"./src/game/data/tiles.ts\");\n/* harmony import */ var _data_skills__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./data/skills */ \"./src/game/data/skills.ts\");\n/*\r\n * Created by aimozg on 04.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function loadGameData() {\r\n    let startingSceneId = '/000_intro';\r\n    let gd = new _GameDataBuilder__WEBPACK_IMPORTED_MODULE_0__.GameDataBuilder({\r\n        startingSceneId\r\n    });\r\n    (0,_data_bodyParts__WEBPACK_IMPORTED_MODULE_5__.gdRegisterBodyParts)(gd);\r\n    (0,_data_classes__WEBPACK_IMPORTED_MODULE_1__.gdRegisterClasses)(gd);\r\n    (0,_data_colors__WEBPACK_IMPORTED_MODULE_6__.gdRegisterColors)(gd);\r\n    (0,_data_origins__WEBPACK_IMPORTED_MODULE_2__.gdRegisterOrigins)(gd);\r\n    (0,_data_racialGroups__WEBPACK_IMPORTED_MODULE_3__.gdRegisterRacialGroups)(gd);\r\n    (0,_data_skills__WEBPACK_IMPORTED_MODULE_9__.gdRegisterSkills)(gd);\r\n    (0,_story__WEBPACK_IMPORTED_MODULE_4__.gdRegisterStory)(gd);\r\n    (0,_data_tiles__WEBPACK_IMPORTED_MODULE_8__.gdRegisterTiles)(gd);\r\n    (0,_data_traits__WEBPACK_IMPORTED_MODULE_7__.gdRegisterTraits)(gd);\r\n    return gd.data;\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/gamedata.ts?");

/***/ }),

/***/ "./src/game/ui/CreaturePanel.tsx":
/*!***************************************!*\
  !*** ./src/game/ui/CreaturePanel.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreaturePanel\": () => (/* binding */ CreaturePanel)\n/* harmony export */ });\n/* harmony import */ var _engine_ui_DomComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/ui/DomComponent */ \"./src/engine/ui/DomComponent.tsx\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/ui/components/Bar */ \"./src/engine/ui/components/Bar.tsx\");\n/* harmony import */ var _engine_utils_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/utils/dom */ \"./src/engine/utils/dom.ts\");\n/* harmony import */ var _engine_utils_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/utils/css */ \"./src/engine/utils/css.ts\");\n/* harmony import */ var _engine_text_CommonText__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/text/CommonText */ \"./src/engine/text/CommonText.ts\");\n/* harmony import */ var _engine_logging_LogManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../engine/logging/LogManager */ \"./src/engine/logging/LogManager.ts\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _combat_CombatRules__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../combat/CombatRules */ \"./src/game/combat/CombatRules.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CreatureValueDefs = {\r\n    ap: (c => c.ap),\r\n    xp: (c => c.xp),\r\n    hp: (c => c.hp),\r\n    ep: (c => c.ep),\r\n    lp: (c => c.lp),\r\n    money: (c => c.money),\r\n};\r\nclass CreaturePanel extends _engine_ui_DomComponent__WEBPACK_IMPORTED_MODULE_0__.DomComponent {\r\n    constructor(creature, options = {}) {\r\n        super((0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"creature-panel\" }));\r\n        this._collapsed = false;\r\n        this.animatedValues = {};\r\n        this._creature = creature;\r\n        this.options = Object.assign({}, CreaturePanel.DefaultOptions, options);\r\n    }\r\n    get creature() {\r\n        return this._creature;\r\n    }\r\n    set creature(value) {\r\n        this._creature = value;\r\n        this.animatedValues = {};\r\n        this.update();\r\n    }\r\n    get collapsed() { return this._collapsed; }\r\n    set collapsed(value) {\r\n        if (value) {\r\n            this.collapse();\r\n        }\r\n        else {\r\n            this.expand();\r\n        }\r\n    }\r\n    collapse() {\r\n        if (this._collapsed)\r\n            return;\r\n        this._collapsed = true;\r\n        this.update();\r\n    }\r\n    expand() {\r\n        if (!this._collapsed)\r\n            return;\r\n        this._collapsed = false;\r\n        this.update();\r\n    }\r\n    value(id) {\r\n        if (!this.creature)\r\n            return 0;\r\n        return this.animatedValues[id]?.x ?? CreatureValueDefs[id](this.creature);\r\n    }\r\n    animateValue(valueId, newValue, durationMs) {\r\n        if (!this.creature)\r\n            return;\r\n        let oldValue = CreatureValueDefs[valueId](this.creature);\r\n        if (oldValue === newValue) {\r\n            delete this.animatedValues[valueId];\r\n            return;\r\n        }\r\n        let v = (newValue - oldValue) / durationMs;\r\n        logger.debug(\"animating {} {} -> {} (v={})\", valueId, oldValue, newValue, v);\r\n        this.animatedValues[valueId] = {\r\n            x: oldValue,\r\n            x2: newValue,\r\n            v: v\r\n        };\r\n    }\r\n    animationFrame(dt) {\r\n        let animatedValues = Object.entries(this.animatedValues);\r\n        if (animatedValues.length === 0)\r\n            return;\r\n        for (let [k, v] of animatedValues) {\r\n            v.x += v.v * dt;\r\n            logger.trace(\"animated {} x={} v={} dt={}\", k, v.x, v.v, dt);\r\n            if (v.v > 0 && v.x >= v.x2 || v.v < 0 && v.x <= v.x2) {\r\n                delete this.animatedValues[k];\r\n                logger.debug(\"value {} animation to {} finished\", k, v.x2);\r\n            }\r\n        }\r\n        this.update();\r\n    }\r\n    /** Name with AP as bg */\r\n    sectionName() {\r\n        let c = this.creature;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-center text-l\", style: {\r\n                'background': (0,_engine_utils_css__WEBPACK_IMPORTED_MODULE_5__.stripedBackground)('var(--theme-ctrl-bg)', 'transparent', this.value(\"ap\") / 1000)\r\n            } }, c.name.capitalize());\r\n    }\r\n    /** XP bar */\r\n    sectionXp() {\r\n        if (!this.options.xp)\r\n            return null;\r\n        let c = this.creature;\r\n        let xp = this.value('xp');\r\n        let xpmax = c.nextLevelXp();\r\n        let className = \"bar-xp\";\r\n        if (!isFinite(xpmax)) {\r\n            xp = xpmax = 100;\r\n            className += \" -cap\";\r\n        }\r\n        else if (xp >= xpmax) {\r\n            className += \" -up\";\r\n        }\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: xp, max: xpmax, className: className });\r\n    }\r\n    /** Level, sex, race */\r\n    sectionSubtitle() {\r\n        let options = this.options;\r\n        let c = this.creature;\r\n        return (options.level || options.sex || options.race) ? (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-center text-s\" },\r\n            options.level && ('Level ' + c.level),\r\n            ' ',\r\n            options.sex && c.txt.sex,\r\n            ' ',\r\n            options.race && c.txt.race) : null;\r\n    }\r\n    /** Resources */\r\n    sectionResources() {\r\n        let options = this.options;\r\n        let c = this.creature;\r\n        /*TODO hide bars if creature have no such resource*/\r\n        return options.resources && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: \"display: grid; grid-template-columns: max-content auto; gap: 4px; align-items: baseline\", className: \"mt-4 mb-1\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, \"Health\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value('hp'), max: c.hpMax, className: \"bar-hp\", print: options.hp }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, \"Lust\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value(\"lp\"), max: c.lpMax, className: \"bar-lp\", print: options.lp }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, \"Energy\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value(\"ep\"), max: c.epMax, className: \"bar-ep\", print: options.ep }));\r\n    }\r\n    /** Attributes */\r\n    sectionAttributes() {\r\n        let c = this.creature;\r\n        return this.options.attributes && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"grid-8 text-center my-2\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"STR\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"DEX\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"CON\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"SPE\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"PER\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"INT\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"WIS\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"CHA\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.str),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.dex),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.con),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.spe),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.per),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.int),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.wis),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.cha));\r\n    }\r\n    /** Combat stats - saving throws, attack, defense, DR */\r\n    sectionCombatStats() {\r\n        let c = this.creature;\r\n        let options = this.options;\r\n        return options.combatStats && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"grid-8 text-center my-2\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"For\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Ref\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Wil\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Atk\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Def\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"DR\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.fortitude),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.reflex),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.willpower),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, _combat_CombatRules__WEBPACK_IMPORTED_MODULE_9__.CombatRules.meleeAttack(c)),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, _combat_CombatRules__WEBPACK_IMPORTED_MODULE_9__.CombatRules.meleeDefense(c)),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.dmgRedAll),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null));\r\n    }\r\n    /** Libido, perversion, corruption */\r\n    sectionSecondaryStats() {\r\n        let c = this.creature;\r\n        return this.options.otherStats && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"grid-4 text-center my-2\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Libido\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Perversion\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }, \"Corruption\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-s\" }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.lib),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.perv),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, c.cor),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null));\r\n    }\r\n    /** Status effects */\r\n    sectionStatus() {\r\n        let c = this.creature;\r\n        // TODO tooltips\r\n        return this.options.conditions && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"my-2\" }, [...c.conditions].map(cc => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"creature-condition\", style: {\r\n                color: cc.icon.fg,\r\n                background: cc.icon.bg\r\n            } }, cc.name)));\r\n    }\r\n    sectionEquipment() {\r\n        let c = this.creature;\r\n        return this.options.equipment && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"grid-4 my-2\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-right\" }, \"Weapon:\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"cols-2 text-center\" }, c.currentWeapon.name),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-center\" }, _engine_text_CommonText__WEBPACK_IMPORTED_MODULE_6__.CommonText.weaponInfo(c.currentWeapon)),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-right\" }, \"Armor:\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"cols-2 text-center\" }, c.bodyArmor?.name ?? \"-\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-center\" }, _engine_text_CommonText__WEBPACK_IMPORTED_MODULE_6__.CommonText.armorInfo(c.bodyArmor)));\r\n    }\r\n    /** Money (what else?) */\r\n    sectionMisc() {\r\n        let options = this.options;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"grid-4 my-2\" }, options.money && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-right\" }, \"Money:\"),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { className: \"text-right text-money cols-2\" }, this.value('money').format(\",d\")),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null)));\r\n    }\r\n    renderExpanded() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n            this.sectionName(),\r\n            this.sectionSubtitle(),\r\n            this.sectionXp(),\r\n            this.sectionResources(),\r\n            this.sectionAttributes(),\r\n            this.sectionCombatStats(),\r\n            this.sectionSecondaryStats(),\r\n            this.sectionEquipment(),\r\n            this.sectionMisc(),\r\n            this.sectionStatus(),\r\n            this.options.collapsible && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_8__.Button, { className: \"-flat -bottom-collapser text-center\", onClick: () => this.collapse() }, \"\\u25B4\"));\r\n    }\r\n    /** Name and level with AP as bg */\r\n    sectionNameCompact() {\r\n        let c = this.creature;\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: {\r\n                'background': (0,_engine_utils_css__WEBPACK_IMPORTED_MODULE_5__.stripedBackground)('var(--theme-ctrl-bg)', 'transparent', this.value(\"ap\") / 1000)\r\n            }, class: \"d-flex jc-space-between ai-baseline px-2\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"span\", { className: \"text-l\" }, c.name.capitalize()),\r\n            this.options.level && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"span\", { className: \"text-s\" },\r\n                \"Lv \",\r\n                c.level));\r\n    }\r\n    /** Resources (compact) */\r\n    sectionResourcesCompact() {\r\n        let options = this.options;\r\n        let c = this.creature;\r\n        return options.resources && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-grid grid-3 gap-1 my-1\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value('hp'), max: c.hpMax, className: \"bar-hp\", print: options.hp }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value(\"lp\"), max: c.lpMax, className: \"bar-lp\", print: options.lp }),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Bar__WEBPACK_IMPORTED_MODULE_3__.Bar, { value: this.value(\"ep\"), max: c.epMax, className: \"bar-ep\", print: options.ep }));\r\n    }\r\n    sectionStatusCompact() {\r\n        let c = this.creature;\r\n        // TODO tooltips\r\n        return this.options.conditions && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null, [...c.conditions].map(cc => (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"condition-icon\", style: {\r\n                color: cc.icon.fg,\r\n                background: cc.icon.bg\r\n            } }, cc.icon.text)));\r\n    }\r\n    renderCollapsed() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(preact_compat__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n            this.sectionNameCompact(),\r\n            this.sectionXp(),\r\n            this.sectionResourcesCompact(),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"d-flex flex-wrap gap-2\" },\r\n                this.sectionStatusCompact(),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"flex-grow-1\" }),\r\n                this.options.collapsible && (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_8__.Button, { className: \"-icon -flat\", onClick: () => this.expand() }, \"\\u25BE\")));\r\n    }\r\n    update() {\r\n        if (!this.creature) {\r\n            (0,_engine_utils_dom__WEBPACK_IMPORTED_MODULE_4__.removeChildren)(this.node);\r\n            return;\r\n        }\r\n        this.node.classList.toggle(\"-dead\", !this.creature.isAlive);\r\n        this.node.classList.toggle(\"-collapsed\", this.collapsed);\r\n        this.node.classList.toggle(\"-collapsible\", this.options.collapsible);\r\n        (0,preact_compat__WEBPACK_IMPORTED_MODULE_2__.render)(this.collapsed ? this.renderCollapsed() : this.renderExpanded(), this.node);\r\n    }\r\n}\r\nCreaturePanel.DefaultOptions = {\r\n    collapsible: true,\r\n    ap: true,\r\n    level: true,\r\n    sex: true,\r\n    race: true,\r\n    xp: true,\r\n    resources: true,\r\n    hp: true,\r\n    lp: true,\r\n    ep: true,\r\n    conditions: true,\r\n    attributes: true,\r\n    combatStats: true,\r\n    otherStats: true,\r\n    equipment: true,\r\n    money: true,\r\n};\r\nconst logger = _engine_logging_LogManager__WEBPACK_IMPORTED_MODULE_7__.LogManager.loggerFor(\"game.ui.CreaturePanel\");\r\n\n\n//# sourceURL=webpack://aap18/./src/game/ui/CreaturePanel.tsx?");

/***/ }),

/***/ "./src/game/ui/NewGameScreen.tsx":
/*!***************************************!*\
  !*** ./src/game/ui/NewGameScreen.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NewGameScreen\": () => (/* binding */ NewGameScreen)\n/* harmony export */ });\n/* harmony import */ var _engine_ui_AbstractScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/ui/AbstractScreen */ \"./src/engine/ui/AbstractScreen.ts\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/ui/components/Button */ \"./src/engine/ui/components/Button.tsx\");\n/* harmony import */ var _engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/ui/components/ButtonMenu */ \"./src/engine/ui/components/ButtonMenu.tsx\");\n/* harmony import */ var _chargen_ChargenStepOrigin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../chargen/ChargenStepOrigin */ \"./src/game/chargen/ChargenStepOrigin.tsx\");\n/* harmony import */ var _chargen_ChargenStepIdentity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../chargen/ChargenStepIdentity */ \"./src/game/chargen/ChargenStepIdentity.tsx\");\n/* harmony import */ var _chargen_ChargenStepRace__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../chargen/ChargenStepRace */ \"./src/game/chargen/ChargenStepRace.tsx\");\n/* harmony import */ var _chargen_ChargenStepStats__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../chargen/ChargenStepStats */ \"./src/game/chargen/ChargenStepStats.tsx\");\n/* harmony import */ var _chargen_ChargenStepClass__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../chargen/ChargenStepClass */ \"./src/game/chargen/ChargenStepClass.tsx\");\n/* harmony import */ var _chargen_ChargenStepTraits__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../chargen/ChargenStepTraits */ \"./src/game/chargen/ChargenStepTraits.tsx\");\n/* harmony import */ var _chargen_ChargenStepAppearance__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../chargen/ChargenStepAppearance */ \"./src/game/chargen/ChargenStepAppearance.tsx\");\n/* harmony import */ var _chargen_ChargenStepFinalize__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../chargen/ChargenStepFinalize */ \"./src/game/chargen/ChargenStepFinalize.tsx\");\n/* harmony import */ var _chargen_ChargenStepAttrs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../chargen/ChargenStepAttrs */ \"./src/game/chargen/ChargenStepAttrs.tsx\");\n/* harmony import */ var _chargen_ChargenController__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../chargen/ChargenController */ \"./src/game/chargen/ChargenController.ts\");\n/* harmony import */ var _chargen_ChargenStepSkills__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../chargen/ChargenStepSkills */ \"./src/game/chargen/ChargenStepSkills.tsx\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass NewGameScreen extends _engine_ui_AbstractScreen__WEBPACK_IMPORTED_MODULE_0__.AbstractScreen {\r\n    constructor() {\r\n        super();\r\n        this.completePromise = new Promise((resolve) => {\r\n            this.completeResolve = resolve;\r\n        });\r\n        this.tab = 0;\r\n        this.allowedTabs = 1;\r\n        let cc = this.cc = new _chargen_ChargenController__WEBPACK_IMPORTED_MODULE_13__.ChargenController(this);\r\n        this.tabs = [\r\n            new _chargen_ChargenStepOrigin__WEBPACK_IMPORTED_MODULE_4__.ChargenStepOrigin(cc),\r\n            new _chargen_ChargenStepIdentity__WEBPACK_IMPORTED_MODULE_5__.ChargenStepIdentity(cc),\r\n            new _chargen_ChargenStepRace__WEBPACK_IMPORTED_MODULE_6__.ChargenStepRace(cc),\r\n            new _chargen_ChargenStepAppearance__WEBPACK_IMPORTED_MODULE_10__.ChargenStepAppearance(cc),\r\n            new _chargen_ChargenStepClass__WEBPACK_IMPORTED_MODULE_8__.ChargenStepClass(cc),\r\n            new _chargen_ChargenStepAttrs__WEBPACK_IMPORTED_MODULE_12__.ChargenStepAttrs(cc),\r\n            new _chargen_ChargenStepStats__WEBPACK_IMPORTED_MODULE_7__.ChargenStepStats(cc),\r\n            new _chargen_ChargenStepSkills__WEBPACK_IMPORTED_MODULE_14__.ChargenStepSkills(cc),\r\n            new _chargen_ChargenStepTraits__WEBPACK_IMPORTED_MODULE_9__.ChargenStepTraits(cc),\r\n            new _chargen_ChargenStepFinalize__WEBPACK_IMPORTED_MODULE_11__.ChargenStepFinalize(cc),\r\n        ];\r\n        this.update();\r\n    }\r\n    async display() {\r\n        return this.completePromise;\r\n    }\r\n    onCancelClick() {\r\n        this.completeResolve(null);\r\n    }\r\n    onCompleteClick() {\r\n        this.cc.update();\r\n        this.completeResolve(this.cc.player);\r\n    }\r\n    selectTab(tab) {\r\n        this.tab = tab;\r\n        this.allowedTabs = Math.max(tab + 1, this.allowedTabs);\r\n        this.update();\r\n    }\r\n    update() {\r\n        let good = true;\r\n        for (let i = 0; i < this.tabs.length; i++) {\r\n            if (this.allowedTabs < i)\r\n                good = false;\r\n            this.tabs[i].unlocked = good;\r\n            if (!this.tabs[i].complete())\r\n                good = false;\r\n        }\r\n        this.render();\r\n    }\r\n    randomChar() {\r\n        this.cc.createRandomPlayer();\r\n        this.selectTab(this.tabs.length - 1);\r\n    }\r\n    node() {\r\n        return (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"grid-12 ui-box gap-4\", style: \"width: 960px; grid-template-rows: auto min-content\" },\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-2 d-flex flex-column\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_ButtonMenu__WEBPACK_IMPORTED_MODULE_3__.ButtonMenu, { items: this.tabs.map((tab, i) => ({ label: tab.label, value: i, disabled: !tab.unlocked })), className: \"-big\", selected: this.tab, onChange: (i) => this.selectTab(i) }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"mt-9\" }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { className: \"-big\", label: \"Random\", onClick: () => this.randomChar() }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { style: \"visibility:hidden\", class: \"flex-grow-1\" }),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { className: \"-big\", label: \"Cancel\", onClick: () => this.onCancelClick() })),\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", { class: \"cols-10 d-flex flex-column\" },\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"div\", null, this.tabs[this.tab].node()),\r\n                (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(\"p\", { class: \"mt-8\" },\r\n                    this.tabs[this.tab + 1] &&\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: \"Next\", className: \"-big\", onClick: () => this.selectTab(this.tab + 1), disabled: !this.tabs[this.tab].complete() }),\r\n                    !this.tabs[this.tab + 1] &&\r\n                        (0,preact__WEBPACK_IMPORTED_MODULE_1__.h)(_engine_ui_components_Button__WEBPACK_IMPORTED_MODULE_2__.Button, { label: \"Start Game\", className: \"-big\", onClick: () => this.onCompleteClick() }))));\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/game/ui/NewGameScreen.tsx?");

/***/ }),

/***/ "./src/game/xp.ts":
/*!************************!*\
  !*** ./src/game/xp.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MaxLevel\": () => (/* binding */ MaxLevel),\n/* harmony export */   \"XpPerLevel\": () => (/* binding */ XpPerLevel)\n/* harmony export */ });\n/* harmony import */ var _engine_utils_collections__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine/utils/collections */ \"./src/engine/utils/collections.ts\");\n/*\r\n * Created by aimozg on 21.07.2022.\r\n */\r\n\r\nconst MaxLevel = 30;\r\nconst XpPerLevel = (0,_engine_utils_collections__WEBPACK_IMPORTED_MODULE_0__.createArray)(MaxLevel * 2, l => (l === MaxLevel) ? Infinity : l * 1000);\r\n\n\n//# sourceURL=webpack://aap18/./src/game/xp.ts?");

/***/ }),

/***/ "./src/index.tsx":
/*!***********************!*\
  !*** ./src/index.tsx ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _engine_main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/main */ \"./src/engine/main.ts\");\n/* harmony import */ var _game_style_index_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/style/index.scss */ \"./src/game/style/index.scss\");\n/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! preact */ \"./node_modules/preact/dist/preact.module.js\");\n/* harmony import */ var _game_gamedata__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game/gamedata */ \"./src/game/gamedata.ts\");\n/* harmony import */ var _engine_logging_Logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./engine/logging/Logger */ \"./src/engine/logging/Logger.ts\");\n/*\r\n * Created by aimozg on 03.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\n\r\n(0,_engine_main__WEBPACK_IMPORTED_MODULE_0__.runGame)({\r\n    screenContainer: \"#root\",\r\n    logLevel: _engine_logging_Logger__WEBPACK_IMPORTED_MODULE_4__.LogLevel.DEBUG,\r\n    logLevels: {\r\n        // \"engine.text.parser.AbstractParser\": LogLevel.TRACE,\r\n        // \"game.ui.CreaturePanel\": LogLevel.TRACE,\r\n        \"engine.combat.CombatRoll\": _engine_logging_Logger__WEBPACK_IMPORTED_MODULE_4__.LogLevel.TRACE\r\n    },\r\n    info: {\r\n        title: \"Aimozg's Abandoned Project No. 18\",\r\n        subtitle: (0,preact__WEBPACK_IMPORTED_MODULE_2__.h)(preact__WEBPACK_IMPORTED_MODULE_2__.Fragment, null,\r\n            \"A \",\r\n            (0,preact__WEBPACK_IMPORTED_MODULE_2__.h)(\"a\", { href: \"https://github.com/Ormael13/CoCX\", target: \"_blank\" }, \"CoCX\"),\r\n            \" inspired game.\"),\r\n        version: \"v\" + \"0.1.2\"\r\n    },\r\n    data: _game_gamedata__WEBPACK_IMPORTED_MODULE_3__.loadGameData\r\n});\r\n\n\n//# sourceURL=webpack://aap18/./src/index.tsx?");

/***/ }),

/***/ "./src/story/camp/camp.ts":
/*!********************************!*\
  !*** ./src/story/camp/camp.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterPlayerCamp\": () => (/* binding */ gdRegisterPlayerCamp)\n/* harmony export */ });\n/* harmony import */ var _monsters_Imp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../monsters/Imp */ \"./src/story/monsters/Imp.ts\");\n/* harmony import */ var _game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../game/data/items/ConsumableLib */ \"./src/game/data/items/ConsumableLib.ts\");\n\r\n\r\nfunction gdRegisterPlayerCamp(gd) {\r\n    gd.logger.debug(\"gdRegisterPlayerCamp\");\r\n    gd.buildScenes(\"/001\", {\r\n        camp: (ctx) => {\r\n            ctx.say(\"A ruined tower you use as your base.\");\r\n        }\r\n    });\r\n    gd.buildPlace({\r\n        id: \"/camp\",\r\n        name: \"Camp\",\r\n        description: \"A ruined tower you use as your base.\",\r\n        scene: \"/001_camp\",\r\n        encounters: [{\r\n                name: \"imp\",\r\n                scene: async (ctx) => {\r\n                    await ctx.ambush({\r\n                        monsters: [new _monsters_Imp__WEBPACK_IMPORTED_MODULE_0__.Imp()],\r\n                        threatName: \"a stray imp\"\r\n                    });\r\n                },\r\n                when: gc => gc.player.isAlive\r\n            }, {\r\n                name: \"debug_item\",\r\n                scene: async (ctx) => {\r\n                    let item = _game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_1__.ConsumableLib.PotionHealingLesser.spawn();\r\n                    ctx.say(`You found ${item.name}!`);\r\n                    await ctx.pickupItems([item]);\r\n                    ctx.endNow();\r\n                }\r\n            }]\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/story/camp/camp.ts?");

/***/ }),

/***/ "./src/story/index.ts":
/*!****************************!*\
  !*** ./src/story/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterStory\": () => (/* binding */ gdRegisterStory)\n/* harmony export */ });\n/* harmony import */ var _intro_intro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./intro/intro */ \"./src/story/intro/intro.ts\");\n/* harmony import */ var _camp_camp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./camp/camp */ \"./src/story/camp/camp.ts\");\n\r\n\r\nfunction gdRegisterStory(gd) {\r\n    gd.logger.debug(\"gdRegisterStory\");\r\n    (0,_intro_intro__WEBPACK_IMPORTED_MODULE_0__.gdRegisterIntro)(gd);\r\n    (0,_camp_camp__WEBPACK_IMPORTED_MODULE_1__.gdRegisterPlayerCamp)(gd);\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/story/index.ts?");

/***/ }),

/***/ "./src/story/intro/intro.ts":
/*!**********************************!*\
  !*** ./src/story/intro/intro.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"gdRegisterIntro\": () => (/* binding */ gdRegisterIntro)\n/* harmony export */ });\n/* harmony import */ var _game_data_items_MeleeWeaponLib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../game/data/items/MeleeWeaponLib */ \"./src/game/data/items/MeleeWeaponLib.ts\");\n/* harmony import */ var _game_data_items_ArmorLib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../game/data/items/ArmorLib */ \"./src/game/data/items/ArmorLib.ts\");\n/* harmony import */ var _monsters_TutorialImp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../monsters/TutorialImp */ \"./src/story/monsters/TutorialImp.ts\");\n/* harmony import */ var _game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../game/data/items/ConsumableLib */ \"./src/game/data/items/ConsumableLib.ts\");\n/*\r\n * Created by aimozg on 17.07.2022.\r\n */\r\n\r\n\r\n\r\n\r\nconst namespace = '/000';\r\nfunction gdRegisterIntro(gd) {\r\n    gd.logger.debug(\"gdRegisterIntro\");\r\n    gd.buildScenes(namespace, {\r\n        async intro(ctx) {\r\n            // Set player location\r\n            ctx.gc.placePlayer('/camp');\r\n            ctx.player.setMainHandItem(_game_data_items_MeleeWeaponLib__WEBPACK_IMPORTED_MODULE_0__.MeleeWeaponLib.Dagger.spawn());\r\n            ctx.player.setBodyArmor(_game_data_items_ArmorLib__WEBPACK_IMPORTED_MODULE_1__.ArmorLib.LeatherArmor.spawn());\r\n            ctx.player.inventory.addItem(_game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_3__.ConsumableLib.PotionHealingLesser.spawn());\r\n            let origin = ctx.player.origin;\r\n            if (origin && origin.introText) {\r\n                ctx.say(origin.introText);\r\n                await ctx.flipPage();\r\n            }\r\n            if (ctx.player.originId === \"isekai\") {\r\n                ctx.say(\"After the reincarnation vertigo passes, you check your surroundings. \");\r\n            }\r\n            else {\r\n                ctx.say(\"After the teleportation vertigo passes, you check your surroundings. \");\r\n            }\r\n            if (ctx.player.originId === 'champion') {\r\n                ctx.say(\"Your companions are nowhere to be found. \");\r\n            }\r\n            await ctx.flipPage(\"Look around\");\r\n            ctx.say(\"You gaze upon the unfamiliar landscape. You might've expected hell or some alien land, but all you see is an ordinary steppe. \");\r\n            if (ctx.player.originId === \"champion\") {\r\n                ctx.say(\"There is no return portal, as if the one you went through was one-way. \");\r\n            }\r\n            ctx.say(\"[pg] You notice a ruined stone building nearby. Far away, you see mountiains to the north and dense forest to the west. To your east and south you see nothing but scarce vegetation until the horizon. \");\r\n            await ctx.flipPage(\"Check the ruins\");\r\n            ctx.say(\"You cautiously approach the building. It appears to be three-story tower, destroyed many years ago. There is some noise inside. \");\r\n            ctx.say(\"<p class='help-block'>When you enter a room with monster(s), an Ambush skill check is rolled. If you succeed, you can choose an action against an unaware enemy. If you fail, you fight. If you fail by 10 or more, you're the one ambushed! </p>\");\r\n            let tutorialCombat = true;\r\n            if (tutorialCombat) {\r\n                let monster = new _monsters_TutorialImp__WEBPACK_IMPORTED_MODULE_2__.TutorialImp();\r\n                await ctx.ambush({\r\n                    dc: 10,\r\n                    roll: 19,\r\n                    tags: ['monster', 'inside', 'demon', 'scripted'],\r\n                    monsters: [monster],\r\n                    fail: \"Tutorial ambush failed - this should never happen. Please report a bug.\",\r\n                    critFail: \"Tutorial ambush critically failed - this should never happen. Please report a bug.\",\r\n                    success: \"You peek inside and spot a short, ugly demon crouched in the corner. It rummages the pile of stones, searching for something, with his unprotected back open for you to attack.\",\r\n                    successOptions: [{\r\n                            label: \"Talk\",\r\n                            tooltip: \"Greet the imp and try to talk\",\r\n                            disabled: { hint: \"Peace was never an option\" }\r\n                        }, {\r\n                            label: \"Seduce\",\r\n                            tooltip: \"Try to seduce the imp with your body\",\r\n                            disabled: { hint: \"Why would you do that?\" }\r\n                        }, {\r\n                            label: \"Rape\",\r\n                            tooltip: \"Skip the foreplay and fuck the imp\",\r\n                            disabled: { hint: \"Why would you do that?\" }\r\n                        }, {\r\n                            label: \"Sneak Attack\",\r\n                            tooltip: \"Start the combat in sneak mode\",\r\n                            call(ctx) {\r\n                                ctx.endNowAndBattle({\r\n                                    enemies: [monster],\r\n                                    ambushed: \"enemies\",\r\n                                    map: {\r\n                                        cells: [\r\n                                            \" ###### \",\r\n                                            \"##%...##\",\r\n                                            \"#%%1...#\",\r\n                                            \"#%%.....\",\r\n                                            \"#.....2.\",\r\n                                            \"#......#\",\r\n                                            \"##....##\",\r\n                                            \" ###### \",\r\n                                        ],\r\n                                        mappings: {\r\n                                            ' ': { tile: '/wall', visible: false },\r\n                                            '#': { tile: '/wall' },\r\n                                            '.': { tile: '/floor' },\r\n                                            '%': { tile: '/rubble' },\r\n                                            '1': { tile: '/floor', spawn: 'enemy' },\r\n                                            '2': { tile: '/floor', spawn: 'party' },\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                        }, {\r\n                            label: \"Leave\",\r\n                            tooltip: \"Just leave it alone\",\r\n                            disabled: { hint: \"Not in this tutorial, sorry\" }\r\n                        }]\r\n                });\r\n            }\r\n            else {\r\n                ctx.say(\"Its first floor is littered by sand, rocks, and branches. You find traces of a campfire &ndash; looks like it was used as a refuge for an occasional traveler. [pg] There is a hole in a ceiling leading to the second floor. [pg] You think you could rest here. [pg] <b>Your first task is to find a source of water and food.</b>\");\r\n                ctx.endButton();\r\n            }\r\n        }\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/story/intro/intro.ts?");

/***/ }),

/***/ "./src/story/monsters/Imp.ts":
/*!***********************************!*\
  !*** ./src/story/monsters/Imp.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Imp\": () => (/* binding */ Imp)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/objects/creature/Character */ \"./src/engine/objects/creature/Character.ts\");\n/* harmony import */ var _game_data_racialGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../game/data/racialGroups */ \"./src/game/data/racialGroups.ts\");\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n/* harmony import */ var _abilities_TinyFireBolt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./abilities/TinyFireBolt */ \"./src/story/monsters/abilities/TinyFireBolt.ts\");\n/* harmony import */ var _engine_objects_Loot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/objects/Loot */ \"./src/engine/objects/Loot.ts\");\n/* harmony import */ var _game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../game/data/items/ConsumableLib */ \"./src/game/data/items/ConsumableLib.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass Imp extends _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_0__.Character {\r\n    constructor() {\r\n        super();\r\n        this.rgroup = _game_data_racialGroups__WEBPACK_IMPORTED_MODULE_1__.RacialGroups.DEMON;\r\n        this.name = \"imp\";\r\n        this.level = 1;\r\n        this.naturalAttrs = [\r\n            4, 5, 4, 6,\r\n            5, 3, 3, 3\r\n        ];\r\n        this.baseHpPerLevel = 5;\r\n        this.baseEpPerLevel = 5;\r\n        this.baseLpMax = 25;\r\n        this.body.eyes.color = _engine_Game__WEBPACK_IMPORTED_MODULE_2__.Game.instance.data.colorByName(\"red\", \"eyes\");\r\n        this.setSex('m');\r\n        // TODO set imp body parts\r\n        this.abilities.push(_abilities_TinyFireBolt__WEBPACK_IMPORTED_MODULE_3__.TinyFireBolt);\r\n        (0,_engine_objects_Loot__WEBPACK_IMPORTED_MODULE_4__.setupLoot)(this, Imp.ImpLootTable);\r\n        this.updateStats();\r\n    }\r\n}\r\nImp.ImpLootTable = {\r\n    variants: [{\r\n            money: [5, 15],\r\n            items: [{\r\n                    chance: 0.5,\r\n                    base: _game_data_items_ConsumableLib__WEBPACK_IMPORTED_MODULE_5__.ConsumableLib.PotionHealingLesser\r\n                }]\r\n        }]\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/story/monsters/Imp.ts?");

/***/ }),

/***/ "./src/story/monsters/TutorialImp.ts":
/*!*******************************************!*\
  !*** ./src/story/monsters/TutorialImp.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TutorialImp\": () => (/* binding */ TutorialImp)\n/* harmony export */ });\n/* harmony import */ var _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/objects/creature/Character */ \"./src/engine/objects/creature/Character.ts\");\n/* harmony import */ var _game_data_racialGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../game/data/racialGroups */ \"./src/game/data/racialGroups.ts\");\n/* harmony import */ var _engine_Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/Game */ \"./src/engine/Game.ts\");\n/*\r\n * Created by aimozg on 23.07.2022.\r\n */\r\n\r\n\r\n\r\nclass TutorialImp extends _engine_objects_creature_Character__WEBPACK_IMPORTED_MODULE_0__.Character {\r\n    constructor() {\r\n        super();\r\n        this.rgroup = _game_data_racialGroups__WEBPACK_IMPORTED_MODULE_1__.RacialGroups.DEMON;\r\n        this.name = \"imp\";\r\n        this.level = 1;\r\n        this.naturalAttrs = [\r\n            4, 4, 3, 3,\r\n            2, 2, 4, 5\r\n        ];\r\n        this.baseHpPerLevel = 2;\r\n        this.baseEpPerLevel = 1;\r\n        this.baseLpMax = 25;\r\n        this.body.eyes.color = _engine_Game__WEBPACK_IMPORTED_MODULE_2__.Game.instance.data.colorByName(\"red\", \"eyes\");\r\n        this.setSex('m');\r\n        // this.body.ears.type = EarTypes.IMP\r\n        // this.abilities.push(TinyFireBolt);\r\n        this.money = this.rng.nextInt(5, 15);\r\n        this.updateStats();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://aap18/./src/story/monsters/TutorialImp.ts?");

/***/ }),

/***/ "./src/story/monsters/abilities/TinyFireBolt.ts":
/*!******************************************************!*\
  !*** ./src/story/monsters/abilities/TinyFireBolt.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TinyFireBolt\": () => (/* binding */ TinyFireBolt)\n/* harmony export */ });\n/* harmony import */ var _engine_combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/combat/AbstractCombatAbility */ \"./src/engine/combat/AbstractCombatAbility.ts\");\n/* harmony import */ var _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/rules/DamageType */ \"./src/engine/rules/DamageType.ts\");\n\r\n\r\n/** 3 EP, 1d6 fire damage */\r\nconst TinyFireBolt = new class extends _engine_combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_0__.AbstractCombatAbility {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"fire bolt\";\r\n        this.targetType = _engine_combat_AbstractCombatAbility__WEBPACK_IMPORTED_MODULE_0__.AbilityTargetType.CREATURE;\r\n        this.tags = [\"damaging\"];\r\n    }\r\n    energyCost(action) {\r\n        return 3;\r\n    }\r\n    async doEffect(action, cc) {\r\n        // TODO combat roll\r\n        cc.logActionVs(action.actor, \"shoots a fire bolt to\", action.targetCreature, []);\r\n        let damage = cc.rng.d6();\r\n        await cc.doDamage(action.targetCreature, damage, _engine_rules_DamageType__WEBPACK_IMPORTED_MODULE_1__.DamageTypes.FIRE, action.actor);\r\n    }\r\n};\r\n\n\n//# sourceURL=webpack://aap18/./src/story/monsters/abilities/TinyFireBolt.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	__webpack_require__("./src/extensions.ts");
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.tsx");
/******/ 	
/******/ })()
;